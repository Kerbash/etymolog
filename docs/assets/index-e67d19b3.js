var Qk=Object.defineProperty;var Jk=(e,t,n)=>t in e?Qk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xi=(e,t,n)=>(Jk(e,typeof t!="symbol"?t+"":t,n),n);function eA(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(e,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var tA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function nA(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var tE={exports:{}},jf={},nE={exports:{}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var au=Symbol.for("react.element"),rA=Symbol.for("react.portal"),oA=Symbol.for("react.fragment"),iA=Symbol.for("react.strict_mode"),aA=Symbol.for("react.profiler"),sA=Symbol.for("react.provider"),lA=Symbol.for("react.context"),cA=Symbol.for("react.forward_ref"),uA=Symbol.for("react.suspense"),dA=Symbol.for("react.memo"),fA=Symbol.for("react.lazy"),G0=Symbol.iterator;function pA(e){return e===null||typeof e!="object"?null:(e=G0&&e[G0]||e["@@iterator"],typeof e=="function"?e:null)}var rE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oE=Object.assign,iE={};function ll(e,t,n){this.props=e,this.context=t,this.refs=iE,this.updater=n||rE}ll.prototype.isReactComponent={};ll.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ll.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function aE(){}aE.prototype=ll.prototype;function ay(e,t,n){this.props=e,this.context=t,this.refs=iE,this.updater=n||rE}var sy=ay.prototype=new aE;sy.constructor=ay;oE(sy,ll.prototype);sy.isPureReactComponent=!0;var H0=Array.isArray,sE=Object.prototype.hasOwnProperty,ly={current:null},lE={key:!0,ref:!0,__self:!0,__source:!0};function cE(e,t,n){var r,o={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)sE.call(t,r)&&!lE.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(s===1)o.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)o[r]===void 0&&(o[r]=s[r]);return{$$typeof:au,type:e,key:i,ref:a,props:o,_owner:ly.current}}function hA(e,t){return{$$typeof:au,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cy(e){return typeof e=="object"&&e!==null&&e.$$typeof===au}function mA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var X0=/\/+/g;function Wp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mA(""+e.key):t.toString(36)}function Sd(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case au:case rA:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+Wp(a,0):r,H0(o)?(n="",e!=null&&(n=e.replace(X0,"$&/")+"/"),Sd(o,t,n,"",function(c){return c})):o!=null&&(cy(o)&&(o=hA(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(X0,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",H0(e))for(var s=0;s<e.length;s++){i=e[s];var l=r+Wp(i,s);a+=Sd(i,t,n,l,o)}else if(l=pA(e),typeof l=="function")for(e=l.call(e),s=0;!(i=e.next()).done;)i=i.value,l=r+Wp(i,s++),a+=Sd(i,t,n,l,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Vu(e,t,n){if(e==null)return e;var r=[],o=0;return Sd(e,r,"","",function(i){return t.call(n,i,o++)}),r}function gA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Vn={current:null},xd={transition:null},yA={ReactCurrentDispatcher:Vn,ReactCurrentBatchConfig:xd,ReactCurrentOwner:ly};We.Children={map:Vu,forEach:function(e,t,n){Vu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Vu(e,function(){t++}),t},toArray:function(e){return Vu(e,function(t){return t})||[]},only:function(e){if(!cy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};We.Component=ll;We.Fragment=oA;We.Profiler=aA;We.PureComponent=ay;We.StrictMode=iA;We.Suspense=uA;We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yA;We.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=oE({},e.props),o=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=ly.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)sE.call(t,l)&&!lE.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:au,type:e.type,key:o,ref:i,props:r,_owner:a}};We.createContext=function(e){return e={$$typeof:lA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sA,_context:e},e.Consumer=e};We.createElement=cE;We.createFactory=function(e){var t=cE.bind(null,e);return t.type=e,t};We.createRef=function(){return{current:null}};We.forwardRef=function(e){return{$$typeof:cA,render:e}};We.isValidElement=cy;We.lazy=function(e){return{$$typeof:fA,_payload:{_status:-1,_result:e},_init:gA}};We.memo=function(e,t){return{$$typeof:dA,type:e,compare:t===void 0?null:t}};We.startTransition=function(e){var t=xd.transition;xd.transition={};try{e()}finally{xd.transition=t}};We.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};We.useCallback=function(e,t){return Vn.current.useCallback(e,t)};We.useContext=function(e){return Vn.current.useContext(e)};We.useDebugValue=function(){};We.useDeferredValue=function(e){return Vn.current.useDeferredValue(e)};We.useEffect=function(e,t){return Vn.current.useEffect(e,t)};We.useId=function(){return Vn.current.useId()};We.useImperativeHandle=function(e,t,n){return Vn.current.useImperativeHandle(e,t,n)};We.useInsertionEffect=function(e,t){return Vn.current.useInsertionEffect(e,t)};We.useLayoutEffect=function(e,t){return Vn.current.useLayoutEffect(e,t)};We.useMemo=function(e,t){return Vn.current.useMemo(e,t)};We.useReducer=function(e,t,n){return Vn.current.useReducer(e,t,n)};We.useRef=function(e){return Vn.current.useRef(e)};We.useState=function(e){return Vn.current.useState(e)};We.useSyncExternalStore=function(e,t,n){return Vn.current.useSyncExternalStore(e,t,n)};We.useTransition=function(){return Vn.current.useTransition()};We.version="18.3.0";nE.exports=We;var h=nE.exports;const be=iy(h),Ic=eA({__proto__:null,default:be},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vA=h,_A=Symbol.for("react.element"),wA=Symbol.for("react.fragment"),bA=Object.prototype.hasOwnProperty,EA=vA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SA={key:!0,ref:!0,__self:!0,__source:!0};function uE(e,t,n){var r,o={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)bA.call(t,r)&&!SA.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:_A,type:e,key:i,ref:a,props:o,_owner:EA.current}}jf.Fragment=wA;jf.jsx=uE;jf.jsxs=uE;tE.exports=jf;var uy=tE.exports;const gt=uy.Fragment,p=uy.jsx,L=uy.jsxs;var dE={exports:{}},wr={},fE={exports:{}},pE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,B){var V=P.length;P.push(B);e:for(;0<V;){var q=V-1>>>1,Q=P[q];if(0<o(Q,B))P[q]=B,P[V]=Q,V=q;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var B=P[0],V=P.pop();if(V!==B){P[0]=V;e:for(var q=0,Q=P.length,H=Q>>>1;q<H;){var K=2*(q+1)-1,Y=P[K],ce=K+1,me=P[ce];if(0>o(Y,V))ce<Q&&0>o(me,Y)?(P[q]=me,P[ce]=V,q=ce):(P[q]=Y,P[K]=V,q=K);else if(ce<Q&&0>o(me,V))P[q]=me,P[ce]=V,q=ce;else break e}}return B}function o(P,B){var V=P.sortIndex-B.sortIndex;return V!==0?V:P.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,d=null,f=3,m=!1,y=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(P){for(var B=n(c);B!==null;){if(B.callback===null)r(c);else if(B.startTime<=P)r(c),B.sortIndex=B.expirationTime,t(l,B);else break;B=n(c)}}function x(P){if(v=!1,w(P),!y)if(n(l)!==null)y=!0,$(N);else{var B=n(c);B!==null&&M(x,B.startTime-P)}}function N(P,B){y=!1,v&&(v=!1,_(k),k=-1),m=!0;var V=f;try{for(w(B),d=n(l);d!==null&&(!(d.expirationTime>B)||P&&!I());){var q=d.callback;if(typeof q=="function"){d.callback=null,f=d.priorityLevel;var Q=q(d.expirationTime<=B);B=e.unstable_now(),typeof Q=="function"?d.callback=Q:d===n(l)&&r(l),w(B)}else r(l);d=n(l)}if(d!==null)var H=!0;else{var K=n(c);K!==null&&M(x,K.startTime-B),H=!1}return H}finally{d=null,f=V,m=!1}}var C=!1,T=null,k=-1,D=5,R=-1;function I(){return!(e.unstable_now()-R<D)}function z(){if(T!==null){var P=e.unstable_now();R=P;var B=!0;try{B=T(!0,P)}finally{B?O():(C=!1,T=null)}}else C=!1}var O;if(typeof b=="function")O=function(){b(z)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,W=U.port2;U.port1.onmessage=z,O=function(){W.postMessage(null)}}else O=function(){S(z,0)};function $(P){T=P,C||(C=!0,O())}function M(P,B){k=S(function(){P(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){y||m||(y=!0,$(N))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(P){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var V=f;f=B;try{return P()}finally{f=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var V=f;f=P;try{return B()}finally{f=V}},e.unstable_scheduleCallback=function(P,B,V){var q=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?q+V:q):V=q,P){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=V+Q,P={id:u++,callback:B,priorityLevel:P,startTime:V,expirationTime:Q,sortIndex:-1},V>q?(P.sortIndex=V,t(c,P),n(l)===null&&P===n(c)&&(v?(_(k),k=-1):v=!0,M(x,V-q))):(P.sortIndex=Q,t(l,P),y||m||(y=!0,$(N))),P},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(P){var B=f;return function(){var V=f;f=B;try{return P.apply(this,arguments)}finally{f=V}}}})(pE);fE.exports=pE;var xA=fE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CA=h,vr=xA;function ye(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hE=new Set,Lc={};function is(e,t){qs(e,t),qs(e+"Capture",t)}function qs(e,t){for(Lc[e]=t,e=0;e<t.length;e++)hE.add(t[e])}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),im=Object.prototype.hasOwnProperty,TA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y0={},q0={};function NA(e){return im.call(q0,e)?!0:im.call(Y0,e)?!1:TA.test(e)?q0[e]=!0:(Y0[e]=!0,!1)}function kA(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function AA(e,t,n,r){if(t===null||typeof t>"u"||kA(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Un(e,t,n,r,o,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var vn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vn[e]=new Un(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vn[t]=new Un(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vn[e]=new Un(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vn[e]=new Un(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vn[e]=new Un(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vn[e]=new Un(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vn[e]=new Un(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vn[e]=new Un(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vn[e]=new Un(e,5,!1,e.toLowerCase(),null,!1,!1)});var dy=/[\-:]([a-z])/g;function fy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dy,fy);vn[t]=new Un(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dy,fy);vn[t]=new Un(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dy,fy);vn[t]=new Un(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vn[e]=new Un(e,1,!1,e.toLowerCase(),null,!1,!1)});vn.xlinkHref=new Un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vn[e]=new Un(e,1,!1,e.toLowerCase(),null,!0,!0)});function py(e,t,n,r){var o=vn.hasOwnProperty(t)?vn[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(AA(t,n,o,r)&&(n=null),r||o===null?NA(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var hi=CA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uu=Symbol.for("react.element"),bs=Symbol.for("react.portal"),Es=Symbol.for("react.fragment"),hy=Symbol.for("react.strict_mode"),am=Symbol.for("react.profiler"),mE=Symbol.for("react.provider"),gE=Symbol.for("react.context"),my=Symbol.for("react.forward_ref"),sm=Symbol.for("react.suspense"),lm=Symbol.for("react.suspense_list"),gy=Symbol.for("react.memo"),Ii=Symbol.for("react.lazy"),yE=Symbol.for("react.offscreen"),K0=Symbol.iterator;function Al(e){return e===null||typeof e!="object"?null:(e=K0&&e[K0]||e["@@iterator"],typeof e=="function"?e:null)}var Pt=Object.assign,Gp;function tc(e){if(Gp===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Gp=t&&t[1]||""}return`
`+Gp+e}var Hp=!1;function Xp(e,t){if(!e||Hp)return"";Hp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),i=r.stack.split(`
`),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(a!==1||s!==1)do if(a--,s--,0>s||o[a]!==i[s]){var l=`
`+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{Hp=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?tc(e):""}function RA(e){switch(e.tag){case 5:return tc(e.type);case 16:return tc("Lazy");case 13:return tc("Suspense");case 19:return tc("SuspenseList");case 0:case 2:case 15:return e=Xp(e.type,!1),e;case 11:return e=Xp(e.type.render,!1),e;case 1:return e=Xp(e.type,!0),e;default:return""}}function cm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Es:return"Fragment";case bs:return"Portal";case am:return"Profiler";case hy:return"StrictMode";case sm:return"Suspense";case lm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gE:return(e.displayName||"Context")+".Consumer";case mE:return(e._context.displayName||"Context")+".Provider";case my:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gy:return t=e.displayName||null,t!==null?t:cm(e.type)||"Memo";case Ii:t=e._payload,e=e._init;try{return cm(e(t))}catch{}}return null}function IA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cm(t);case 8:return t===hy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function oa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function LA(e){var t=vE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zu(e){e._valueTracker||(e._valueTracker=LA(e))}function _E(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=vE(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Gd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function um(e,t){var n=t.checked;return Pt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Z0(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=oa(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wE(e,t){t=t.checked,t!=null&&py(e,"checked",t,!1)}function dm(e,t){wE(e,t);var n=oa(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?fm(e,t.type,n):t.hasOwnProperty("defaultValue")&&fm(e,t.type,oa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Q0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function fm(e,t,n){(t!=="number"||Gd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var nc=Array.isArray;function Vs(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+oa(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function pm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ye(91));return Pt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function J0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ye(92));if(nc(n)){if(1<n.length)throw Error(ye(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:oa(n)}}function bE(e,t){var n=oa(t.value),r=oa(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function e_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function EE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?EE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ju,SE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ju=ju||document.createElement("div"),ju.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ju.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Oc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var pc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OA=["Webkit","ms","Moz","O"];Object.keys(pc).forEach(function(e){OA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pc[t]=pc[e]})});function xE(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||pc.hasOwnProperty(e)&&pc[e]?(""+t).trim():t+"px"}function CE(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=xE(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var PA=Pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mm(e,t){if(t){if(PA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ye(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ye(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ye(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ye(62))}}function gm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ym=null;function yy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vm=null,Us=null,zs=null;function t_(e){if(e=cu(e)){if(typeof vm!="function")throw Error(ye(280));var t=e.stateNode;t&&(t=Yf(t),vm(e.stateNode,e.type,t))}}function TE(e){Us?zs?zs.push(e):zs=[e]:Us=e}function NE(){if(Us){var e=Us,t=zs;if(zs=Us=null,t_(e),t)for(e=0;e<t.length;e++)t_(t[e])}}function kE(e,t){return e(t)}function AE(){}var Yp=!1;function RE(e,t,n){if(Yp)return e(t,n);Yp=!0;try{return kE(e,t,n)}finally{Yp=!1,(Us!==null||zs!==null)&&(AE(),NE())}}function Pc(e,t){var n=e.stateNode;if(n===null)return null;var r=Yf(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ye(231,t,typeof n));return n}var _m=!1;if(ai)try{var Rl={};Object.defineProperty(Rl,"passive",{get:function(){_m=!0}}),window.addEventListener("test",Rl,Rl),window.removeEventListener("test",Rl,Rl)}catch{_m=!1}function MA(e,t,n,r,o,i,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var hc=!1,Hd=null,Xd=!1,wm=null,DA={onError:function(e){hc=!0,Hd=e}};function FA(e,t,n,r,o,i,a,s,l){hc=!1,Hd=null,MA.apply(DA,arguments)}function $A(e,t,n,r,o,i,a,s,l){if(FA.apply(this,arguments),hc){if(hc){var c=Hd;hc=!1,Hd=null}else throw Error(ye(198));Xd||(Xd=!0,wm=c)}}function as(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function IE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function n_(e){if(as(e)!==e)throw Error(ye(188))}function BA(e){var t=e.alternate;if(!t){if(t=as(e),t===null)throw Error(ye(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return n_(o),e;if(i===r)return n_(o),t;i=i.sibling}throw Error(ye(188))}if(n.return!==r.return)n=o,r=i;else{for(var a=!1,s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a){for(s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a)throw Error(ye(189))}}if(n.alternate!==r)throw Error(ye(190))}if(n.tag!==3)throw Error(ye(188));return n.stateNode.current===n?e:t}function LE(e){return e=BA(e),e!==null?OE(e):null}function OE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=OE(e);if(t!==null)return t;e=e.sibling}return null}var PE=vr.unstable_scheduleCallback,r_=vr.unstable_cancelCallback,VA=vr.unstable_shouldYield,UA=vr.unstable_requestPaint,Vt=vr.unstable_now,zA=vr.unstable_getCurrentPriorityLevel,vy=vr.unstable_ImmediatePriority,ME=vr.unstable_UserBlockingPriority,Yd=vr.unstable_NormalPriority,jA=vr.unstable_LowPriority,DE=vr.unstable_IdlePriority,Wf=null,Io=null;function WA(e){if(Io&&typeof Io.onCommitFiberRoot=="function")try{Io.onCommitFiberRoot(Wf,e,void 0,(e.current.flags&128)===128)}catch{}}var co=Math.clz32?Math.clz32:XA,GA=Math.log,HA=Math.LN2;function XA(e){return e>>>=0,e===0?32:31-(GA(e)/HA|0)|0}var Wu=64,Gu=4194304;function rc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~o;s!==0?r=rc(s):(i&=a,i!==0&&(r=rc(i)))}else a=n&~o,a!==0?r=rc(a):i!==0&&(r=rc(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-co(t),o=1<<n,r|=e[n],t&=~o;return r}function YA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qA(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-co(i),s=1<<a,l=o[a];l===-1?(!(s&n)||s&r)&&(o[a]=YA(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}function bm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function FE(){var e=Wu;return Wu<<=1,!(Wu&4194240)&&(Wu=64),e}function qp(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function su(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-co(t),e[t]=n}function KA(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-co(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function _y(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-co(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var nt=0;function $E(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var BE,wy,VE,UE,zE,Em=!1,Hu=[],Gi=null,Hi=null,Xi=null,Mc=new Map,Dc=new Map,Pi=[],ZA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function o_(e,t){switch(e){case"focusin":case"focusout":Gi=null;break;case"dragenter":case"dragleave":Hi=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":Mc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dc.delete(t.pointerId)}}function Il(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=cu(t),t!==null&&wy(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function QA(e,t,n,r,o){switch(t){case"focusin":return Gi=Il(Gi,e,t,n,r,o),!0;case"dragenter":return Hi=Il(Hi,e,t,n,r,o),!0;case"mouseover":return Xi=Il(Xi,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Mc.set(i,Il(Mc.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Dc.set(i,Il(Dc.get(i)||null,e,t,n,r,o)),!0}return!1}function jE(e){var t=Ba(e.target);if(t!==null){var n=as(t);if(n!==null){if(t=n.tag,t===13){if(t=IE(n),t!==null){e.blockedOn=t,zE(e.priority,function(){VE(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ym=r,n.target.dispatchEvent(r),ym=null}else return t=cu(n),t!==null&&wy(t),e.blockedOn=n,!1;t.shift()}return!0}function i_(e,t,n){Cd(e)&&n.delete(t)}function JA(){Em=!1,Gi!==null&&Cd(Gi)&&(Gi=null),Hi!==null&&Cd(Hi)&&(Hi=null),Xi!==null&&Cd(Xi)&&(Xi=null),Mc.forEach(i_),Dc.forEach(i_)}function Ll(e,t){e.blockedOn===t&&(e.blockedOn=null,Em||(Em=!0,vr.unstable_scheduleCallback(vr.unstable_NormalPriority,JA)))}function Fc(e){function t(o){return Ll(o,e)}if(0<Hu.length){Ll(Hu[0],e);for(var n=1;n<Hu.length;n++){var r=Hu[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gi!==null&&Ll(Gi,e),Hi!==null&&Ll(Hi,e),Xi!==null&&Ll(Xi,e),Mc.forEach(t),Dc.forEach(t),n=0;n<Pi.length;n++)r=Pi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Pi.length&&(n=Pi[0],n.blockedOn===null);)jE(n),n.blockedOn===null&&Pi.shift()}var js=hi.ReactCurrentBatchConfig,Kd=!0;function eR(e,t,n,r){var o=nt,i=js.transition;js.transition=null;try{nt=1,by(e,t,n,r)}finally{nt=o,js.transition=i}}function tR(e,t,n,r){var o=nt,i=js.transition;js.transition=null;try{nt=4,by(e,t,n,r)}finally{nt=o,js.transition=i}}function by(e,t,n,r){if(Kd){var o=Sm(e,t,n,r);if(o===null)ih(e,t,r,Zd,n),o_(e,r);else if(QA(o,e,t,n,r))r.stopPropagation();else if(o_(e,r),t&4&&-1<ZA.indexOf(e)){for(;o!==null;){var i=cu(o);if(i!==null&&BE(i),i=Sm(e,t,n,r),i===null&&ih(e,t,r,Zd,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else ih(e,t,r,null,n)}}var Zd=null;function Sm(e,t,n,r){if(Zd=null,e=yy(r),e=Ba(e),e!==null)if(t=as(e),t===null)e=null;else if(n=t.tag,n===13){if(e=IE(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zd=e,null}function WE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zA()){case vy:return 1;case ME:return 4;case Yd:case jA:return 16;case DE:return 536870912;default:return 16}default:return 16}}var Fi=null,Ey=null,Td=null;function GE(){if(Td)return Td;var e,t=Ey,n=t.length,r,o="value"in Fi?Fi.value:Fi.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[i-r];r++);return Td=o.slice(e,1<r?1-r:void 0)}function Nd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xu(){return!0}function a_(){return!1}function br(e){function t(n,r,o,i,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Xu:a_,this.isPropagationStopped=a_,this}return Pt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xu)},persist:function(){},isPersistent:Xu}),t}var cl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sy=br(cl),lu=Pt({},cl,{view:0,detail:0}),nR=br(lu),Kp,Zp,Ol,Gf=Pt({},lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ol&&(Ol&&e.type==="mousemove"?(Kp=e.screenX-Ol.screenX,Zp=e.screenY-Ol.screenY):Zp=Kp=0,Ol=e),Kp)},movementY:function(e){return"movementY"in e?e.movementY:Zp}}),s_=br(Gf),rR=Pt({},Gf,{dataTransfer:0}),oR=br(rR),iR=Pt({},lu,{relatedTarget:0}),Qp=br(iR),aR=Pt({},cl,{animationName:0,elapsedTime:0,pseudoElement:0}),sR=br(aR),lR=Pt({},cl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cR=br(lR),uR=Pt({},cl,{data:0}),l_=br(uR),dR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pR[e])?!!t[e]:!1}function xy(){return hR}var mR=Pt({},lu,{key:function(e){if(e.key){var t=dR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Nd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xy,charCode:function(e){return e.type==="keypress"?Nd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Nd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gR=br(mR),yR=Pt({},Gf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c_=br(yR),vR=Pt({},lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xy}),_R=br(vR),wR=Pt({},cl,{propertyName:0,elapsedTime:0,pseudoElement:0}),bR=br(wR),ER=Pt({},Gf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),SR=br(ER),xR=[9,13,27,32],Cy=ai&&"CompositionEvent"in window,mc=null;ai&&"documentMode"in document&&(mc=document.documentMode);var CR=ai&&"TextEvent"in window&&!mc,HE=ai&&(!Cy||mc&&8<mc&&11>=mc),u_=String.fromCharCode(32),d_=!1;function XE(e,t){switch(e){case"keyup":return xR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ss=!1;function TR(e,t){switch(e){case"compositionend":return YE(t);case"keypress":return t.which!==32?null:(d_=!0,u_);case"textInput":return e=t.data,e===u_&&d_?null:e;default:return null}}function NR(e,t){if(Ss)return e==="compositionend"||!Cy&&XE(e,t)?(e=GE(),Td=Ey=Fi=null,Ss=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return HE&&t.locale!=="ko"?null:t.data;default:return null}}var kR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function f_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kR[e.type]:t==="textarea"}function qE(e,t,n,r){TE(r),t=Qd(t,"onChange"),0<t.length&&(n=new Sy("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var gc=null,$c=null;function AR(e){aS(e,0)}function Hf(e){var t=Ts(e);if(_E(t))return e}function RR(e,t){if(e==="change")return t}var KE=!1;if(ai){var Jp;if(ai){var eh="oninput"in document;if(!eh){var p_=document.createElement("div");p_.setAttribute("oninput","return;"),eh=typeof p_.oninput=="function"}Jp=eh}else Jp=!1;KE=Jp&&(!document.documentMode||9<document.documentMode)}function h_(){gc&&(gc.detachEvent("onpropertychange",ZE),$c=gc=null)}function ZE(e){if(e.propertyName==="value"&&Hf($c)){var t=[];qE(t,$c,e,yy(e)),RE(AR,t)}}function IR(e,t,n){e==="focusin"?(h_(),gc=t,$c=n,gc.attachEvent("onpropertychange",ZE)):e==="focusout"&&h_()}function LR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hf($c)}function OR(e,t){if(e==="click")return Hf(t)}function PR(e,t){if(e==="input"||e==="change")return Hf(t)}function MR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mo=typeof Object.is=="function"?Object.is:MR;function Bc(e,t){if(mo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!im.call(t,o)||!mo(e[o],t[o]))return!1}return!0}function m_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function g_(e,t){var n=m_(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=m_(n)}}function QE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?QE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function JE(){for(var e=window,t=Gd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Gd(e.document)}return t}function Ty(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function DR(e){var t=JE(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&QE(n.ownerDocument.documentElement,n)){if(r!==null&&Ty(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=g_(n,i);var a=g_(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var FR=ai&&"documentMode"in document&&11>=document.documentMode,xs=null,xm=null,yc=null,Cm=!1;function y_(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cm||xs==null||xs!==Gd(r)||(r=xs,"selectionStart"in r&&Ty(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yc&&Bc(yc,r)||(yc=r,r=Qd(xm,"onSelect"),0<r.length&&(t=new Sy("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=xs)))}function Yu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cs={animationend:Yu("Animation","AnimationEnd"),animationiteration:Yu("Animation","AnimationIteration"),animationstart:Yu("Animation","AnimationStart"),transitionend:Yu("Transition","TransitionEnd")},th={},eS={};ai&&(eS=document.createElement("div").style,"AnimationEvent"in window||(delete Cs.animationend.animation,delete Cs.animationiteration.animation,delete Cs.animationstart.animation),"TransitionEvent"in window||delete Cs.transitionend.transition);function Xf(e){if(th[e])return th[e];if(!Cs[e])return e;var t=Cs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in eS)return th[e]=t[n];return e}var tS=Xf("animationend"),nS=Xf("animationiteration"),rS=Xf("animationstart"),oS=Xf("transitionend"),iS=new Map,v_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fa(e,t){iS.set(e,t),is(t,[e])}for(var nh=0;nh<v_.length;nh++){var rh=v_[nh],$R=rh.toLowerCase(),BR=rh[0].toUpperCase()+rh.slice(1);fa($R,"on"+BR)}fa(tS,"onAnimationEnd");fa(nS,"onAnimationIteration");fa(rS,"onAnimationStart");fa("dblclick","onDoubleClick");fa("focusin","onFocus");fa("focusout","onBlur");fa(oS,"onTransitionEnd");qs("onMouseEnter",["mouseout","mouseover"]);qs("onMouseLeave",["mouseout","mouseover"]);qs("onPointerEnter",["pointerout","pointerover"]);qs("onPointerLeave",["pointerout","pointerover"]);is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));is("onBeforeInput",["compositionend","keypress","textInput","paste"]);is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VR=new Set("cancel close invalid load scroll toggle".split(" ").concat(oc));function __(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,$A(r,t,void 0,e),e.currentTarget=null}function aS(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;__(o,s,c),i=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,c=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;__(o,s,c),i=l}}}if(Xd)throw e=wm,Xd=!1,wm=null,e}function wt(e,t){var n=t[Rm];n===void 0&&(n=t[Rm]=new Set);var r=e+"__bubble";n.has(r)||(sS(t,e,2,!1),n.add(r))}function oh(e,t,n){var r=0;t&&(r|=4),sS(n,e,r,t)}var qu="_reactListening"+Math.random().toString(36).slice(2);function Vc(e){if(!e[qu]){e[qu]=!0,hE.forEach(function(n){n!=="selectionchange"&&(VR.has(n)||oh(n,!1,e),oh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qu]||(t[qu]=!0,oh("selectionchange",!1,t))}}function sS(e,t,n,r){switch(WE(t)){case 1:var o=eR;break;case 4:o=tR;break;default:o=by}n=o.bind(null,t,n,e),o=void 0,!_m||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ih(e,t,n,r,o){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===o||s.nodeType===8&&s.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;a=a.return}for(;s!==null;){if(a=Ba(s),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}s=s.parentNode}}r=r.return}RE(function(){var c=i,u=yy(n),d=[];e:{var f=iS.get(e);if(f!==void 0){var m=Sy,y=e;switch(e){case"keypress":if(Nd(n)===0)break e;case"keydown":case"keyup":m=gR;break;case"focusin":y="focus",m=Qp;break;case"focusout":y="blur",m=Qp;break;case"beforeblur":case"afterblur":m=Qp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=s_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=oR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=_R;break;case tS:case nS:case rS:m=sR;break;case oS:m=bR;break;case"scroll":m=nR;break;case"wheel":m=SR;break;case"copy":case"cut":case"paste":m=cR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=c_}var v=(t&4)!==0,S=!v&&e==="scroll",_=v?f!==null?f+"Capture":null:f;v=[];for(var b=c,w;b!==null;){w=b;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,_!==null&&(x=Pc(b,_),x!=null&&v.push(Uc(b,x,w)))),S)break;b=b.return}0<v.length&&(f=new m(f,y,null,n,u),d.push({event:f,listeners:v}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==ym&&(y=n.relatedTarget||n.fromElement)&&(Ba(y)||y[si]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?Ba(y):null,y!==null&&(S=as(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(v=s_,x="onMouseLeave",_="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(v=c_,x="onPointerLeave",_="onPointerEnter",b="pointer"),S=m==null?f:Ts(m),w=y==null?f:Ts(y),f=new v(x,b+"leave",m,n,u),f.target=S,f.relatedTarget=w,x=null,Ba(u)===c&&(v=new v(_,b+"enter",y,n,u),v.target=w,v.relatedTarget=S,x=v),S=x,m&&y)t:{for(v=m,_=y,b=0,w=v;w;w=ys(w))b++;for(w=0,x=_;x;x=ys(x))w++;for(;0<b-w;)v=ys(v),b--;for(;0<w-b;)_=ys(_),w--;for(;b--;){if(v===_||_!==null&&v===_.alternate)break t;v=ys(v),_=ys(_)}v=null}else v=null;m!==null&&w_(d,f,m,v,!1),y!==null&&S!==null&&w_(d,S,y,v,!0)}}e:{if(f=c?Ts(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var N=RR;else if(f_(f))if(KE)N=PR;else{N=LR;var C=IR}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=OR);if(N&&(N=N(e,c))){qE(d,N,n,u);break e}C&&C(e,f,c),e==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&fm(f,"number",f.value)}switch(C=c?Ts(c):window,e){case"focusin":(f_(C)||C.contentEditable==="true")&&(xs=C,xm=c,yc=null);break;case"focusout":yc=xm=xs=null;break;case"mousedown":Cm=!0;break;case"contextmenu":case"mouseup":case"dragend":Cm=!1,y_(d,n,u);break;case"selectionchange":if(FR)break;case"keydown":case"keyup":y_(d,n,u)}var T;if(Cy)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Ss?XE(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(HE&&n.locale!=="ko"&&(Ss||k!=="onCompositionStart"?k==="onCompositionEnd"&&Ss&&(T=GE()):(Fi=u,Ey="value"in Fi?Fi.value:Fi.textContent,Ss=!0)),C=Qd(c,k),0<C.length&&(k=new l_(k,e,null,n,u),d.push({event:k,listeners:C}),T?k.data=T:(T=YE(n),T!==null&&(k.data=T)))),(T=CR?TR(e,n):NR(e,n))&&(c=Qd(c,"onBeforeInput"),0<c.length&&(u=new l_("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=T))}aS(d,t)})}function Uc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qd(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=Pc(e,n),i!=null&&r.unshift(Uc(e,i,o)),i=Pc(e,t),i!=null&&r.push(Uc(e,i,o))),e=e.return}return r}function ys(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function w_(e,t,n,r,o){for(var i=t._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&c!==null&&(s=c,o?(l=Pc(n,i),l!=null&&a.unshift(Uc(n,l,s))):o||(l=Pc(n,i),l!=null&&a.push(Uc(n,l,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var UR=/\r\n?/g,zR=/\u0000|\uFFFD/g;function b_(e){return(typeof e=="string"?e:""+e).replace(UR,`
`).replace(zR,"")}function Ku(e,t,n){if(t=b_(t),b_(e)!==t&&n)throw Error(ye(425))}function Jd(){}var Tm=null,Nm=null;function km(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Am=typeof setTimeout=="function"?setTimeout:void 0,jR=typeof clearTimeout=="function"?clearTimeout:void 0,E_=typeof Promise=="function"?Promise:void 0,WR=typeof queueMicrotask=="function"?queueMicrotask:typeof E_<"u"?function(e){return E_.resolve(null).then(e).catch(GR)}:Am;function GR(e){setTimeout(function(){throw e})}function ah(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Fc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Fc(t)}function Yi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function S_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ul=Math.random().toString(36).slice(2),No="__reactFiber$"+ul,zc="__reactProps$"+ul,si="__reactContainer$"+ul,Rm="__reactEvents$"+ul,HR="__reactListeners$"+ul,XR="__reactHandles$"+ul;function Ba(e){var t=e[No];if(t)return t;for(var n=e.parentNode;n;){if(t=n[si]||n[No]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=S_(e);e!==null;){if(n=e[No])return n;e=S_(e)}return t}e=n,n=e.parentNode}return null}function cu(e){return e=e[No]||e[si],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ts(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ye(33))}function Yf(e){return e[zc]||null}var Im=[],Ns=-1;function pa(e){return{current:e}}function Et(e){0>Ns||(e.current=Im[Ns],Im[Ns]=null,Ns--)}function ht(e,t){Ns++,Im[Ns]=e.current,e.current=t}var ia={},Nn=pa(ia),tr=pa(!1),Za=ia;function Ks(e,t){var n=e.type.contextTypes;if(!n)return ia;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function nr(e){return e=e.childContextTypes,e!=null}function ef(){Et(tr),Et(Nn)}function x_(e,t,n){if(Nn.current!==ia)throw Error(ye(168));ht(Nn,t),ht(tr,n)}function lS(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(ye(108,IA(e)||"Unknown",o));return Pt({},n,r)}function tf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ia,Za=Nn.current,ht(Nn,e),ht(tr,tr.current),!0}function C_(e,t,n){var r=e.stateNode;if(!r)throw Error(ye(169));n?(e=lS(e,t,Za),r.__reactInternalMemoizedMergedChildContext=e,Et(tr),Et(Nn),ht(Nn,e)):Et(tr),ht(tr,n)}var Ko=null,qf=!1,sh=!1;function cS(e){Ko===null?Ko=[e]:Ko.push(e)}function YR(e){qf=!0,cS(e)}function ha(){if(!sh&&Ko!==null){sh=!0;var e=0,t=nt;try{var n=Ko;for(nt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ko=null,qf=!1}catch(o){throw Ko!==null&&(Ko=Ko.slice(e+1)),PE(vy,ha),o}finally{nt=t,sh=!1}}return null}var ks=[],As=0,nf=null,rf=0,Lr=[],Or=0,Qa=null,Qo=1,Jo="";function La(e,t){ks[As++]=rf,ks[As++]=nf,nf=e,rf=t}function uS(e,t,n){Lr[Or++]=Qo,Lr[Or++]=Jo,Lr[Or++]=Qa,Qa=e;var r=Qo;e=Jo;var o=32-co(r)-1;r&=~(1<<o),n+=1;var i=32-co(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Qo=1<<32-co(t)+o|n<<o|r,Jo=i+e}else Qo=1<<i|n<<o|r,Jo=e}function Ny(e){e.return!==null&&(La(e,1),uS(e,1,0))}function ky(e){for(;e===nf;)nf=ks[--As],ks[As]=null,rf=ks[--As],ks[As]=null;for(;e===Qa;)Qa=Lr[--Or],Lr[Or]=null,Jo=Lr[--Or],Lr[Or]=null,Qo=Lr[--Or],Lr[Or]=null}var yr=null,gr=null,Tt=!1,io=null;function dS(e,t){var n=Pr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function T_(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yr=e,gr=Yi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yr=e,gr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Qa!==null?{id:Qo,overflow:Jo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Pr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,yr=e,gr=null,!0):!1;default:return!1}}function Lm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Om(e){if(Tt){var t=gr;if(t){var n=t;if(!T_(e,t)){if(Lm(e))throw Error(ye(418));t=Yi(n.nextSibling);var r=yr;t&&T_(e,t)?dS(r,n):(e.flags=e.flags&-4097|2,Tt=!1,yr=e)}}else{if(Lm(e))throw Error(ye(418));e.flags=e.flags&-4097|2,Tt=!1,yr=e}}}function N_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yr=e}function Zu(e){if(e!==yr)return!1;if(!Tt)return N_(e),Tt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!km(e.type,e.memoizedProps)),t&&(t=gr)){if(Lm(e))throw fS(),Error(ye(418));for(;t;)dS(e,t),t=Yi(t.nextSibling)}if(N_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ye(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){gr=Yi(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}gr=null}}else gr=yr?Yi(e.stateNode.nextSibling):null;return!0}function fS(){for(var e=gr;e;)e=Yi(e.nextSibling)}function Zs(){gr=yr=null,Tt=!1}function Ay(e){io===null?io=[e]:io.push(e)}var qR=hi.ReactCurrentBatchConfig;function Pl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ye(309));var r=n.stateNode}if(!r)throw Error(ye(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var s=o.refs;a===null?delete s[i]:s[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(ye(284));if(!n._owner)throw Error(ye(290,e))}return e}function Qu(e,t){throw e=Object.prototype.toString.call(t),Error(ye(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function k_(e){var t=e._init;return t(e._payload)}function pS(e){function t(_,b){if(e){var w=_.deletions;w===null?(_.deletions=[b],_.flags|=16):w.push(b)}}function n(_,b){if(!e)return null;for(;b!==null;)t(_,b),b=b.sibling;return null}function r(_,b){for(_=new Map;b!==null;)b.key!==null?_.set(b.key,b):_.set(b.index,b),b=b.sibling;return _}function o(_,b){return _=Qi(_,b),_.index=0,_.sibling=null,_}function i(_,b,w){return _.index=w,e?(w=_.alternate,w!==null?(w=w.index,w<b?(_.flags|=2,b):w):(_.flags|=2,b)):(_.flags|=1048576,b)}function a(_){return e&&_.alternate===null&&(_.flags|=2),_}function s(_,b,w,x){return b===null||b.tag!==6?(b=hh(w,_.mode,x),b.return=_,b):(b=o(b,w),b.return=_,b)}function l(_,b,w,x){var N=w.type;return N===Es?u(_,b,w.props.children,x,w.key):b!==null&&(b.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ii&&k_(N)===b.type)?(x=o(b,w.props),x.ref=Pl(_,b,w),x.return=_,x):(x=Pd(w.type,w.key,w.props,null,_.mode,x),x.ref=Pl(_,b,w),x.return=_,x)}function c(_,b,w,x){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=mh(w,_.mode,x),b.return=_,b):(b=o(b,w.children||[]),b.return=_,b)}function u(_,b,w,x,N){return b===null||b.tag!==7?(b=Xa(w,_.mode,x,N),b.return=_,b):(b=o(b,w),b.return=_,b)}function d(_,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=hh(""+b,_.mode,w),b.return=_,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Uu:return w=Pd(b.type,b.key,b.props,null,_.mode,w),w.ref=Pl(_,null,b),w.return=_,w;case bs:return b=mh(b,_.mode,w),b.return=_,b;case Ii:var x=b._init;return d(_,x(b._payload),w)}if(nc(b)||Al(b))return b=Xa(b,_.mode,w,null),b.return=_,b;Qu(_,b)}return null}function f(_,b,w,x){var N=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:s(_,b,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Uu:return w.key===N?l(_,b,w,x):null;case bs:return w.key===N?c(_,b,w,x):null;case Ii:return N=w._init,f(_,b,N(w._payload),x)}if(nc(w)||Al(w))return N!==null?null:u(_,b,w,x,null);Qu(_,w)}return null}function m(_,b,w,x,N){if(typeof x=="string"&&x!==""||typeof x=="number")return _=_.get(w)||null,s(b,_,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Uu:return _=_.get(x.key===null?w:x.key)||null,l(b,_,x,N);case bs:return _=_.get(x.key===null?w:x.key)||null,c(b,_,x,N);case Ii:var C=x._init;return m(_,b,w,C(x._payload),N)}if(nc(x)||Al(x))return _=_.get(w)||null,u(b,_,x,N,null);Qu(b,x)}return null}function y(_,b,w,x){for(var N=null,C=null,T=b,k=b=0,D=null;T!==null&&k<w.length;k++){T.index>k?(D=T,T=null):D=T.sibling;var R=f(_,T,w[k],x);if(R===null){T===null&&(T=D);break}e&&T&&R.alternate===null&&t(_,T),b=i(R,b,k),C===null?N=R:C.sibling=R,C=R,T=D}if(k===w.length)return n(_,T),Tt&&La(_,k),N;if(T===null){for(;k<w.length;k++)T=d(_,w[k],x),T!==null&&(b=i(T,b,k),C===null?N=T:C.sibling=T,C=T);return Tt&&La(_,k),N}for(T=r(_,T);k<w.length;k++)D=m(T,_,k,w[k],x),D!==null&&(e&&D.alternate!==null&&T.delete(D.key===null?k:D.key),b=i(D,b,k),C===null?N=D:C.sibling=D,C=D);return e&&T.forEach(function(I){return t(_,I)}),Tt&&La(_,k),N}function v(_,b,w,x){var N=Al(w);if(typeof N!="function")throw Error(ye(150));if(w=N.call(w),w==null)throw Error(ye(151));for(var C=N=null,T=b,k=b=0,D=null,R=w.next();T!==null&&!R.done;k++,R=w.next()){T.index>k?(D=T,T=null):D=T.sibling;var I=f(_,T,R.value,x);if(I===null){T===null&&(T=D);break}e&&T&&I.alternate===null&&t(_,T),b=i(I,b,k),C===null?N=I:C.sibling=I,C=I,T=D}if(R.done)return n(_,T),Tt&&La(_,k),N;if(T===null){for(;!R.done;k++,R=w.next())R=d(_,R.value,x),R!==null&&(b=i(R,b,k),C===null?N=R:C.sibling=R,C=R);return Tt&&La(_,k),N}for(T=r(_,T);!R.done;k++,R=w.next())R=m(T,_,k,R.value,x),R!==null&&(e&&R.alternate!==null&&T.delete(R.key===null?k:R.key),b=i(R,b,k),C===null?N=R:C.sibling=R,C=R);return e&&T.forEach(function(z){return t(_,z)}),Tt&&La(_,k),N}function S(_,b,w,x){if(typeof w=="object"&&w!==null&&w.type===Es&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Uu:e:{for(var N=w.key,C=b;C!==null;){if(C.key===N){if(N=w.type,N===Es){if(C.tag===7){n(_,C.sibling),b=o(C,w.props.children),b.return=_,_=b;break e}}else if(C.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ii&&k_(N)===C.type){n(_,C.sibling),b=o(C,w.props),b.ref=Pl(_,C,w),b.return=_,_=b;break e}n(_,C);break}else t(_,C);C=C.sibling}w.type===Es?(b=Xa(w.props.children,_.mode,x,w.key),b.return=_,_=b):(x=Pd(w.type,w.key,w.props,null,_.mode,x),x.ref=Pl(_,b,w),x.return=_,_=x)}return a(_);case bs:e:{for(C=w.key;b!==null;){if(b.key===C)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(_,b.sibling),b=o(b,w.children||[]),b.return=_,_=b;break e}else{n(_,b);break}else t(_,b);b=b.sibling}b=mh(w,_.mode,x),b.return=_,_=b}return a(_);case Ii:return C=w._init,S(_,b,C(w._payload),x)}if(nc(w))return y(_,b,w,x);if(Al(w))return v(_,b,w,x);Qu(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(_,b.sibling),b=o(b,w),b.return=_,_=b):(n(_,b),b=hh(w,_.mode,x),b.return=_,_=b),a(_)):n(_,b)}return S}var Qs=pS(!0),hS=pS(!1),of=pa(null),af=null,Rs=null,Ry=null;function Iy(){Ry=Rs=af=null}function Ly(e){var t=of.current;Et(of),e._currentValue=t}function Pm(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ws(e,t){af=e,Ry=Rs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Jn=!0),e.firstContext=null)}function Vr(e){var t=e._currentValue;if(Ry!==e)if(e={context:e,memoizedValue:t,next:null},Rs===null){if(af===null)throw Error(ye(308));Rs=e,af.dependencies={lanes:0,firstContext:e}}else Rs=Rs.next=e;return t}var Va=null;function Oy(e){Va===null?Va=[e]:Va.push(e)}function mS(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Oy(t)):(n.next=o.next,o.next=n),t.interleaved=n,li(e,r)}function li(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Li=!1;function Py(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ni(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qi(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ye&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,li(e,n)}return o=r.interleaved,o===null?(t.next=t,Oy(r)):(t.next=o.next,o.next=t),r.interleaved=t,li(e,n)}function kd(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,_y(e,n)}}function A_(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sf(e,t,n,r){var o=e.updateQueue;Li=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var l=s,c=l.next;l.next=null,a===null?i=c:a.next=c,a=l;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==a&&(s===null?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=o.baseState;a=0,u=c=l=null,s=i;do{var f=s.lane,m=s.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var y=e,v=s;switch(f=t,m=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(m,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(m,d,f):y,f==null)break e;d=Pt({},d,f);break e;case 2:Li=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,f=o.effects,f===null?o.effects=[s]:f.push(s))}else m={eventTime:m,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,a|=f;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;f=s,s=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(1);if(u===null&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);es|=a,e.lanes=a,e.memoizedState=d}}function R_(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(ye(191,o));o.call(r)}}}var uu={},Lo=pa(uu),jc=pa(uu),Wc=pa(uu);function Ua(e){if(e===uu)throw Error(ye(174));return e}function My(e,t){switch(ht(Wc,t),ht(jc,e),ht(Lo,uu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hm(t,e)}Et(Lo),ht(Lo,t)}function Js(){Et(Lo),Et(jc),Et(Wc)}function yS(e){Ua(Wc.current);var t=Ua(Lo.current),n=hm(t,e.type);t!==n&&(ht(jc,e),ht(Lo,n))}function Dy(e){jc.current===e&&(Et(Lo),Et(jc))}var It=pa(0);function lf(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lh=[];function Fy(){for(var e=0;e<lh.length;e++)lh[e]._workInProgressVersionPrimary=null;lh.length=0}var Ad=hi.ReactCurrentDispatcher,ch=hi.ReactCurrentBatchConfig,Ja=0,Ot=null,Zt=null,sn=null,cf=!1,vc=!1,Gc=0,KR=0;function En(){throw Error(ye(321))}function $y(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!mo(e[n],t[n]))return!1;return!0}function By(e,t,n,r,o,i){if(Ja=i,Ot=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ad.current=e===null||e.memoizedState===null?eI:tI,e=n(r,o),vc){i=0;do{if(vc=!1,Gc=0,25<=i)throw Error(ye(301));i+=1,sn=Zt=null,t.updateQueue=null,Ad.current=nI,e=n(r,o)}while(vc)}if(Ad.current=uf,t=Zt!==null&&Zt.next!==null,Ja=0,sn=Zt=Ot=null,cf=!1,t)throw Error(ye(300));return e}function Vy(){var e=Gc!==0;return Gc=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Ot.memoizedState=sn=e:sn=sn.next=e,sn}function Ur(){if(Zt===null){var e=Ot.alternate;e=e!==null?e.memoizedState:null}else e=Zt.next;var t=sn===null?Ot.memoizedState:sn.next;if(t!==null)sn=t,Zt=e;else{if(e===null)throw Error(ye(310));Zt=e,e={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},sn===null?Ot.memoizedState=sn=e:sn=sn.next=e}return sn}function Hc(e,t){return typeof t=="function"?t(e):t}function uh(e){var t=Ur(),n=t.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=e;var r=Zt,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var a=o.next;o.next=i.next,i.next=a}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var s=a=null,l=null,c=i;do{var u=c.lane;if((Ja&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=d,a=r):l=l.next=d,Ot.lanes|=u,es|=u}c=c.next}while(c!==null&&c!==i);l===null?a=r:l.next=s,mo(r,t.memoizedState)||(Jn=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,Ot.lanes|=i,es|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function dh(e){var t=Ur(),n=t.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do i=e(i,a.action),a=a.next;while(a!==o);mo(i,t.memoizedState)||(Jn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function vS(){}function _S(e,t){var n=Ot,r=Ur(),o=t(),i=!mo(r.memoizedState,o);if(i&&(r.memoizedState=o,Jn=!0),r=r.queue,Uy(ES.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||sn!==null&&sn.memoizedState.tag&1){if(n.flags|=2048,Xc(9,bS.bind(null,n,r,o,t),void 0,null),cn===null)throw Error(ye(349));Ja&30||wS(n,t,o)}return o}function wS(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ot.updateQueue,t===null?(t={lastEffect:null,stores:null},Ot.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function bS(e,t,n,r){t.value=n,t.getSnapshot=r,SS(t)&&xS(e)}function ES(e,t,n){return n(function(){SS(t)&&xS(e)})}function SS(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!mo(e,n)}catch{return!0}}function xS(e){var t=li(e,1);t!==null&&uo(t,e,1,-1)}function I_(e){var t=Co();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hc,lastRenderedState:e},t.queue=e,e=e.dispatch=JR.bind(null,Ot,e),[t.memoizedState,e]}function Xc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ot.updateQueue,t===null?(t={lastEffect:null,stores:null},Ot.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function CS(){return Ur().memoizedState}function Rd(e,t,n,r){var o=Co();Ot.flags|=e,o.memoizedState=Xc(1|t,n,void 0,r===void 0?null:r)}function Kf(e,t,n,r){var o=Ur();r=r===void 0?null:r;var i=void 0;if(Zt!==null){var a=Zt.memoizedState;if(i=a.destroy,r!==null&&$y(r,a.deps)){o.memoizedState=Xc(t,n,i,r);return}}Ot.flags|=e,o.memoizedState=Xc(1|t,n,i,r)}function L_(e,t){return Rd(8390656,8,e,t)}function Uy(e,t){return Kf(2048,8,e,t)}function TS(e,t){return Kf(4,2,e,t)}function NS(e,t){return Kf(4,4,e,t)}function kS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function AS(e,t,n){return n=n!=null?n.concat([e]):null,Kf(4,4,kS.bind(null,t,e),n)}function zy(){}function RS(e,t){var n=Ur();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$y(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function IS(e,t){var n=Ur();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$y(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function LS(e,t,n){return Ja&21?(mo(n,t)||(n=FE(),Ot.lanes|=n,es|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Jn=!0),e.memoizedState=n)}function ZR(e,t){var n=nt;nt=n!==0&&4>n?n:4,e(!0);var r=ch.transition;ch.transition={};try{e(!1),t()}finally{nt=n,ch.transition=r}}function OS(){return Ur().memoizedState}function QR(e,t,n){var r=Zi(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},PS(e))MS(t,n);else if(n=mS(e,t,n,r),n!==null){var o=Dn();uo(n,e,r,o),DS(n,t,r)}}function JR(e,t,n){var r=Zi(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(PS(e))MS(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,mo(s,a)){var l=t.interleaved;l===null?(o.next=o,Oy(t)):(o.next=l.next,l.next=o),t.interleaved=o;return}}catch{}finally{}n=mS(e,t,o,r),n!==null&&(o=Dn(),uo(n,e,r,o),DS(n,t,r))}}function PS(e){var t=e.alternate;return e===Ot||t!==null&&t===Ot}function MS(e,t){vc=cf=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function DS(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,_y(e,n)}}var uf={readContext:Vr,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},eI={readContext:Vr,useCallback:function(e,t){return Co().memoizedState=[e,t===void 0?null:t],e},useContext:Vr,useEffect:L_,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Rd(4194308,4,kS.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Rd(4194308,4,e,t)},useInsertionEffect:function(e,t){return Rd(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=QR.bind(null,Ot,e),[r.memoizedState,e]},useRef:function(e){var t=Co();return e={current:e},t.memoizedState=e},useState:I_,useDebugValue:zy,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=I_(!1),t=e[0];return e=ZR.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ot,o=Co();if(Tt){if(n===void 0)throw Error(ye(407));n=n()}else{if(n=t(),cn===null)throw Error(ye(349));Ja&30||wS(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,L_(ES.bind(null,r,i,e),[e]),r.flags|=2048,Xc(9,bS.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Co(),t=cn.identifierPrefix;if(Tt){var n=Jo,r=Qo;n=(r&~(1<<32-co(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Gc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=KR++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},tI={readContext:Vr,useCallback:RS,useContext:Vr,useEffect:Uy,useImperativeHandle:AS,useInsertionEffect:TS,useLayoutEffect:NS,useMemo:IS,useReducer:uh,useRef:CS,useState:function(){return uh(Hc)},useDebugValue:zy,useDeferredValue:function(e){var t=Ur();return LS(t,Zt.memoizedState,e)},useTransition:function(){var e=uh(Hc)[0],t=Ur().memoizedState;return[e,t]},useMutableSource:vS,useSyncExternalStore:_S,useId:OS,unstable_isNewReconciler:!1},nI={readContext:Vr,useCallback:RS,useContext:Vr,useEffect:Uy,useImperativeHandle:AS,useInsertionEffect:TS,useLayoutEffect:NS,useMemo:IS,useReducer:dh,useRef:CS,useState:function(){return dh(Hc)},useDebugValue:zy,useDeferredValue:function(e){var t=Ur();return Zt===null?t.memoizedState=e:LS(t,Zt.memoizedState,e)},useTransition:function(){var e=dh(Hc)[0],t=Ur().memoizedState;return[e,t]},useMutableSource:vS,useSyncExternalStore:_S,useId:OS,unstable_isNewReconciler:!1};function no(e,t){if(e&&e.defaultProps){t=Pt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Mm(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Pt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Zf={isMounted:function(e){return(e=e._reactInternals)?as(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Dn(),o=Zi(e),i=ni(r,o);i.payload=t,n!=null&&(i.callback=n),t=qi(e,i,o),t!==null&&(uo(t,e,o,r),kd(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Dn(),o=Zi(e),i=ni(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=qi(e,i,o),t!==null&&(uo(t,e,o,r),kd(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Dn(),r=Zi(e),o=ni(n,r);o.tag=2,t!=null&&(o.callback=t),t=qi(e,o,r),t!==null&&(uo(t,e,r,n),kd(t,e,r))}};function O_(e,t,n,r,o,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Bc(n,r)||!Bc(o,i):!0}function FS(e,t,n){var r=!1,o=ia,i=t.contextType;return typeof i=="object"&&i!==null?i=Vr(i):(o=nr(t)?Za:Nn.current,r=t.contextTypes,i=(r=r!=null)?Ks(e,o):ia),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zf,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function P_(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Zf.enqueueReplaceState(t,t.state,null)}function Dm(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Py(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=Vr(i):(i=nr(t)?Za:Nn.current,o.context=Ks(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Mm(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Zf.enqueueReplaceState(o,o.state,null),sf(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function el(e,t){try{var n="",r=t;do n+=RA(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function fh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Fm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var rI=typeof WeakMap=="function"?WeakMap:Map;function $S(e,t,n){n=ni(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ff||(ff=!0,Xm=r),Fm(e,t)},n}function BS(e,t,n){n=ni(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Fm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Fm(e,t),typeof r!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function M_(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new rI;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=yI.bind(null,e,t,n),t.then(e,e))}function D_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function F_(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ni(-1,1),t.tag=2,qi(n,t,1))),n.lanes|=1),e)}var oI=hi.ReactCurrentOwner,Jn=!1;function Pn(e,t,n,r){t.child=e===null?hS(t,null,n,r):Qs(t,e.child,n,r)}function $_(e,t,n,r,o){n=n.render;var i=t.ref;return Ws(t,o),r=By(e,t,n,r,i,o),n=Vy(),e!==null&&!Jn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,ci(e,t,o)):(Tt&&n&&Ny(t),t.flags|=1,Pn(e,t,r,o),t.child)}function B_(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!Ky(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,VS(e,t,i,r,o)):(e=Pd(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Bc,n(a,r)&&e.ref===t.ref)return ci(e,t,o)}return t.flags|=1,e=Qi(i,r),e.ref=t.ref,e.return=t,t.child=e}function VS(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(Bc(i,r)&&e.ref===t.ref)if(Jn=!1,t.pendingProps=r=i,(e.lanes&o)!==0)e.flags&131072&&(Jn=!0);else return t.lanes=e.lanes,ci(e,t,o)}return $m(e,t,n,r,o)}function US(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(Ls,pr),pr|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ht(Ls,pr),pr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ht(Ls,pr),pr|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ht(Ls,pr),pr|=r;return Pn(e,t,o,n),t.child}function zS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function $m(e,t,n,r,o){var i=nr(n)?Za:Nn.current;return i=Ks(t,i),Ws(t,o),n=By(e,t,n,r,i,o),r=Vy(),e!==null&&!Jn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,ci(e,t,o)):(Tt&&r&&Ny(t),t.flags|=1,Pn(e,t,n,o),t.child)}function V_(e,t,n,r,o){if(nr(n)){var i=!0;tf(t)}else i=!1;if(Ws(t,o),t.stateNode===null)Id(e,t),FS(t,n,r),Dm(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Vr(c):(c=nr(n)?Za:Nn.current,c=Ks(t,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==c)&&P_(t,a,r,c),Li=!1;var f=t.memoizedState;a.state=f,sf(t,r,a,o),l=t.memoizedState,s!==r||f!==l||tr.current||Li?(typeof u=="function"&&(Mm(t,n,u,r),l=t.memoizedState),(s=Li||O_(t,n,s,r,f,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,gS(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:no(t.type,s),a.props=c,d=t.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Vr(l):(l=nr(n)?Za:Nn.current,l=Ks(t,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||f!==l)&&P_(t,a,r,l),Li=!1,f=t.memoizedState,a.state=f,sf(t,r,a,o);var y=t.memoizedState;s!==d||f!==y||tr.current||Li?(typeof m=="function"&&(Mm(t,n,m,r),y=t.memoizedState),(c=Li||O_(t,n,c,r,f,y,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),a.props=r,a.state=y,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Bm(e,t,n,r,i,o)}function Bm(e,t,n,r,o,i){zS(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&C_(t,n,!1),ci(e,t,i);r=t.stateNode,oI.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Qs(t,e.child,null,i),t.child=Qs(t,null,s,i)):Pn(e,t,s,i),t.memoizedState=r.state,o&&C_(t,n,!0),t.child}function jS(e){var t=e.stateNode;t.pendingContext?x_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&x_(e,t.context,!1),My(e,t.containerInfo)}function U_(e,t,n,r,o){return Zs(),Ay(o),t.flags|=256,Pn(e,t,n,r),t.child}var Vm={dehydrated:null,treeContext:null,retryLane:0};function Um(e){return{baseLanes:e,cachePool:null,transitions:null}}function WS(e,t,n){var r=t.pendingProps,o=It.current,i=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(o&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),ht(It,o&1),e===null)return Om(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=ep(a,r,0,null),e=Xa(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Um(n),t.memoizedState=Vm,e):jy(t,a));if(o=e.memoizedState,o!==null&&(s=o.dehydrated,s!==null))return iI(e,t,a,r,s,o,n);if(i){i=r.fallback,a=t.mode,o=e.child,s=o.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Qi(o,l),r.subtreeFlags=o.subtreeFlags&14680064),s!==null?i=Qi(s,i):(i=Xa(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Um(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Vm,r}return i=e.child,e=i.sibling,r=Qi(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function jy(e,t){return t=ep({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ju(e,t,n,r){return r!==null&&Ay(r),Qs(t,e.child,null,n),e=jy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function iI(e,t,n,r,o,i,a){if(n)return t.flags&256?(t.flags&=-257,r=fh(Error(ye(422))),Ju(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=ep({mode:"visible",children:r.children},o,0,null),i=Xa(i,o,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Qs(t,e.child,null,a),t.child.memoizedState=Um(a),t.memoizedState=Vm,i);if(!(t.mode&1))return Ju(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var s=r.dgst;return r=s,i=Error(ye(419)),r=fh(i,r,void 0),Ju(e,t,a,r)}if(s=(a&e.childLanes)!==0,Jn||s){if(r=cn,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,li(e,o),uo(r,e,o,-1))}return qy(),r=fh(Error(ye(421))),Ju(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=vI.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,gr=Yi(o.nextSibling),yr=t,Tt=!0,io=null,e!==null&&(Lr[Or++]=Qo,Lr[Or++]=Jo,Lr[Or++]=Qa,Qo=e.id,Jo=e.overflow,Qa=t),t=jy(t,r.children),t.flags|=4096,t)}function z_(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Pm(e.return,t,n)}function ph(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function GS(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(Pn(e,t,r.children,n),r=It.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&z_(e,n,t);else if(e.tag===19)z_(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ht(It,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&lf(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ph(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&lf(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ph(t,!0,n,null,i);break;case"together":ph(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Id(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ci(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),es|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ye(153));if(t.child!==null){for(e=t.child,n=Qi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Qi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function aI(e,t,n){switch(t.tag){case 3:jS(t),Zs();break;case 5:yS(t);break;case 1:nr(t.type)&&tf(t);break;case 4:My(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;ht(of,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ht(It,It.current&1),t.flags|=128,null):n&t.child.childLanes?WS(e,t,n):(ht(It,It.current&1),e=ci(e,t,n),e!==null?e.sibling:null);ht(It,It.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return GS(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ht(It,It.current),r)break;return null;case 22:case 23:return t.lanes=0,US(e,t,n)}return ci(e,t,n)}var HS,zm,XS,YS;HS=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zm=function(){};XS=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Ua(Lo.current);var i=null;switch(n){case"input":o=um(e,o),r=um(e,r),i=[];break;case"select":o=Pt({},o,{value:void 0}),r=Pt({},r,{value:void 0}),i=[];break;case"textarea":o=pm(e,o),r=pm(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Jd)}mm(n,r);var a;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var s=o[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Lc.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(s=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Lc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&wt("scroll",e),i||s===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};YS=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ml(e,t){if(!Tt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Sn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function sI(e,t,n){var r=t.pendingProps;switch(ky(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(t),null;case 1:return nr(t.type)&&ef(),Sn(t),null;case 3:return r=t.stateNode,Js(),Et(tr),Et(Nn),Fy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Zu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,io!==null&&(Km(io),io=null))),zm(e,t),Sn(t),null;case 5:Dy(t);var o=Ua(Wc.current);if(n=t.type,e!==null&&t.stateNode!=null)XS(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ye(166));return Sn(t),null}if(e=Ua(Lo.current),Zu(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[No]=t,r[zc]=i,e=(t.mode&1)!==0,n){case"dialog":wt("cancel",r),wt("close",r);break;case"iframe":case"object":case"embed":wt("load",r);break;case"video":case"audio":for(o=0;o<oc.length;o++)wt(oc[o],r);break;case"source":wt("error",r);break;case"img":case"image":case"link":wt("error",r),wt("load",r);break;case"details":wt("toggle",r);break;case"input":Z0(r,i),wt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},wt("invalid",r);break;case"textarea":J0(r,i),wt("invalid",r)}mm(n,i),o=null;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];a==="children"?typeof s=="string"?r.textContent!==s&&(i.suppressHydrationWarning!==!0&&Ku(r.textContent,s,e),o=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&Ku(r.textContent,s,e),o=["children",""+s]):Lc.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&wt("scroll",r)}switch(n){case"input":zu(r),Q0(r,i,!0);break;case"textarea":zu(r),e_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Jd)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=EE(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[No]=t,e[zc]=r,HS(e,t,!1,!1),t.stateNode=e;e:{switch(a=gm(n,r),n){case"dialog":wt("cancel",e),wt("close",e),o=r;break;case"iframe":case"object":case"embed":wt("load",e),o=r;break;case"video":case"audio":for(o=0;o<oc.length;o++)wt(oc[o],e);o=r;break;case"source":wt("error",e),o=r;break;case"img":case"image":case"link":wt("error",e),wt("load",e),o=r;break;case"details":wt("toggle",e),o=r;break;case"input":Z0(e,r),o=um(e,r),wt("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Pt({},r,{value:void 0}),wt("invalid",e);break;case"textarea":J0(e,r),o=pm(e,r),wt("invalid",e);break;default:o=r}mm(n,o),s=o;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?CE(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&SE(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Oc(e,l):typeof l=="number"&&Oc(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Lc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&wt("scroll",e):l!=null&&py(e,i,l,a))}switch(n){case"input":zu(e),Q0(e,r,!1);break;case"textarea":zu(e),e_(e);break;case"option":r.value!=null&&e.setAttribute("value",""+oa(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Vs(e,!!r.multiple,i,!1):r.defaultValue!=null&&Vs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Jd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Sn(t),null;case 6:if(e&&t.stateNode!=null)YS(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ye(166));if(n=Ua(Wc.current),Ua(Lo.current),Zu(t)){if(r=t.stateNode,n=t.memoizedProps,r[No]=t,(i=r.nodeValue!==n)&&(e=yr,e!==null))switch(e.tag){case 3:Ku(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ku(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[No]=t,t.stateNode=r}return Sn(t),null;case 13:if(Et(It),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Tt&&gr!==null&&t.mode&1&&!(t.flags&128))fS(),Zs(),t.flags|=98560,i=!1;else if(i=Zu(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(ye(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ye(317));i[No]=t}else Zs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Sn(t),i=!1}else io!==null&&(Km(io),io=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||It.current&1?Jt===0&&(Jt=3):qy())),t.updateQueue!==null&&(t.flags|=4),Sn(t),null);case 4:return Js(),zm(e,t),e===null&&Vc(t.stateNode.containerInfo),Sn(t),null;case 10:return Ly(t.type._context),Sn(t),null;case 17:return nr(t.type)&&ef(),Sn(t),null;case 19:if(Et(It),i=t.memoizedState,i===null)return Sn(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)Ml(i,!1);else{if(Jt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=lf(e),a!==null){for(t.flags|=128,Ml(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ht(It,It.current&1|2),t.child}e=e.sibling}i.tail!==null&&Vt()>tl&&(t.flags|=128,r=!0,Ml(i,!1),t.lanes=4194304)}else{if(!r)if(e=lf(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ml(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Tt)return Sn(t),null}else 2*Vt()-i.renderingStartTime>tl&&n!==1073741824&&(t.flags|=128,r=!0,Ml(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Vt(),t.sibling=null,n=It.current,ht(It,r?n&1|2:n&1),t):(Sn(t),null);case 22:case 23:return Yy(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?pr&1073741824&&(Sn(t),t.subtreeFlags&6&&(t.flags|=8192)):Sn(t),null;case 24:return null;case 25:return null}throw Error(ye(156,t.tag))}function lI(e,t){switch(ky(t),t.tag){case 1:return nr(t.type)&&ef(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Js(),Et(tr),Et(Nn),Fy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Dy(t),null;case 13:if(Et(It),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ye(340));Zs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Et(It),null;case 4:return Js(),null;case 10:return Ly(t.type._context),null;case 22:case 23:return Yy(),null;case 24:return null;default:return null}}var ed=!1,xn=!1,cI=typeof WeakSet=="function"?WeakSet:Set,Se=null;function Is(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$t(e,t,r)}else n.current=null}function jm(e,t,n){try{n()}catch(r){$t(e,t,r)}}var j_=!1;function uI(e,t){if(Tm=Kd,e=JE(),Ty(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var m;d!==n||o!==0&&d.nodeType!==3||(s=a+o),d!==i||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===e)break t;if(f===n&&++c===o&&(s=a),f===i&&++u===r&&(l=a),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nm={focusedElem:e,selectionRange:n},Kd=!1,Se=t;Se!==null;)if(t=Se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Se=e;else for(;Se!==null;){t=Se;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,S=y.memoizedState,_=t.stateNode,b=_.getSnapshotBeforeUpdate(t.elementType===t.type?v:no(t.type,v),S);_.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(x){$t(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,Se=e;break}Se=t.return}return y=j_,j_=!1,y}function _c(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&jm(t,n,i)}o=o.next}while(o!==r)}}function Qf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Wm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function qS(e){var t=e.alternate;t!==null&&(e.alternate=null,qS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[No],delete t[zc],delete t[Rm],delete t[HR],delete t[XR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function KS(e){return e.tag===5||e.tag===3||e.tag===4}function W_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||KS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Jd));else if(r!==4&&(e=e.child,e!==null))for(Gm(e,t,n),e=e.sibling;e!==null;)Gm(e,t,n),e=e.sibling}function Hm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Hm(e,t,n),e=e.sibling;e!==null;)Hm(e,t,n),e=e.sibling}var hn=null,oo=!1;function Ci(e,t,n){for(n=n.child;n!==null;)ZS(e,t,n),n=n.sibling}function ZS(e,t,n){if(Io&&typeof Io.onCommitFiberUnmount=="function")try{Io.onCommitFiberUnmount(Wf,n)}catch{}switch(n.tag){case 5:xn||Is(n,t);case 6:var r=hn,o=oo;hn=null,Ci(e,t,n),hn=r,oo=o,hn!==null&&(oo?(e=hn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):hn.removeChild(n.stateNode));break;case 18:hn!==null&&(oo?(e=hn,n=n.stateNode,e.nodeType===8?ah(e.parentNode,n):e.nodeType===1&&ah(e,n),Fc(e)):ah(hn,n.stateNode));break;case 4:r=hn,o=oo,hn=n.stateNode.containerInfo,oo=!0,Ci(e,t,n),hn=r,oo=o;break;case 0:case 11:case 14:case 15:if(!xn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&jm(n,t,a),o=o.next}while(o!==r)}Ci(e,t,n);break;case 1:if(!xn&&(Is(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){$t(n,t,s)}Ci(e,t,n);break;case 21:Ci(e,t,n);break;case 22:n.mode&1?(xn=(r=xn)||n.memoizedState!==null,Ci(e,t,n),xn=r):Ci(e,t,n);break;default:Ci(e,t,n)}}function G_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new cI),t.forEach(function(r){var o=_I.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Yr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:hn=s.stateNode,oo=!1;break e;case 3:hn=s.stateNode.containerInfo,oo=!0;break e;case 4:hn=s.stateNode.containerInfo,oo=!0;break e}s=s.return}if(hn===null)throw Error(ye(160));ZS(i,a,o),hn=null,oo=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(c){$t(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)QS(t,e),t=t.sibling}function QS(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yr(t,e),bo(e),r&4){try{_c(3,e,e.return),Qf(3,e)}catch(v){$t(e,e.return,v)}try{_c(5,e,e.return)}catch(v){$t(e,e.return,v)}}break;case 1:Yr(t,e),bo(e),r&512&&n!==null&&Is(n,n.return);break;case 5:if(Yr(t,e),bo(e),r&512&&n!==null&&Is(n,n.return),e.flags&32){var o=e.stateNode;try{Oc(o,"")}catch(v){$t(e,e.return,v)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&wE(o,i),gm(s,a);var c=gm(s,i);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];u==="style"?CE(o,d):u==="dangerouslySetInnerHTML"?SE(o,d):u==="children"?Oc(o,d):py(o,u,d,c)}switch(s){case"input":dm(o,i);break;case"textarea":bE(o,i);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Vs(o,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Vs(o,!!i.multiple,i.defaultValue,!0):Vs(o,!!i.multiple,i.multiple?[]:"",!1))}o[zc]=i}catch(v){$t(e,e.return,v)}}break;case 6:if(Yr(t,e),bo(e),r&4){if(e.stateNode===null)throw Error(ye(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(v){$t(e,e.return,v)}}break;case 3:if(Yr(t,e),bo(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fc(t.containerInfo)}catch(v){$t(e,e.return,v)}break;case 4:Yr(t,e),bo(e);break;case 13:Yr(t,e),bo(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(Hy=Vt())),r&4&&G_(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(xn=(c=xn)||u,Yr(t,e),xn=c):Yr(t,e),bo(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(Se=e,u=e.child;u!==null;){for(d=Se=u;Se!==null;){switch(f=Se,m=f.child,f.tag){case 0:case 11:case 14:case 15:_c(4,f,f.return);break;case 1:Is(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(v){$t(r,n,v)}}break;case 5:Is(f,f.return);break;case 22:if(f.memoizedState!==null){X_(d);continue}}m!==null?(m.return=f,Se=m):X_(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{o=d.stateNode,c?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=xE("display",a))}catch(v){$t(e,e.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){$t(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Yr(t,e),bo(e),r&4&&G_(e);break;case 21:break;default:Yr(t,e),bo(e)}}function bo(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(KS(n)){var r=n;break e}n=n.return}throw Error(ye(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Oc(o,""),r.flags&=-33);var i=W_(e);Hm(e,i,o);break;case 3:case 4:var a=r.stateNode.containerInfo,s=W_(e);Gm(e,s,a);break;default:throw Error(ye(161))}}catch(l){$t(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dI(e,t,n){Se=e,JS(e)}function JS(e,t,n){for(var r=(e.mode&1)!==0;Se!==null;){var o=Se,i=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||ed;if(!a){var s=o.alternate,l=s!==null&&s.memoizedState!==null||xn;s=ed;var c=xn;if(ed=a,(xn=l)&&!c)for(Se=o;Se!==null;)a=Se,l=a.child,a.tag===22&&a.memoizedState!==null?Y_(o):l!==null?(l.return=a,Se=l):Y_(o);for(;i!==null;)Se=i,JS(i),i=i.sibling;Se=o,ed=s,xn=c}H_(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,Se=i):H_(e)}}function H_(e){for(;Se!==null;){var t=Se;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:xn||Qf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!xn)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:no(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&R_(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}R_(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Fc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}xn||t.flags&512&&Wm(t)}catch(f){$t(t,t.return,f)}}if(t===e){Se=null;break}if(n=t.sibling,n!==null){n.return=t.return,Se=n;break}Se=t.return}}function X_(e){for(;Se!==null;){var t=Se;if(t===e){Se=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Se=n;break}Se=t.return}}function Y_(e){for(;Se!==null;){var t=Se;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Qf(4,t)}catch(l){$t(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(l){$t(t,o,l)}}var i=t.return;try{Wm(t)}catch(l){$t(t,i,l)}break;case 5:var a=t.return;try{Wm(t)}catch(l){$t(t,a,l)}}}catch(l){$t(t,t.return,l)}if(t===e){Se=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Se=s;break}Se=t.return}}var fI=Math.ceil,df=hi.ReactCurrentDispatcher,Wy=hi.ReactCurrentOwner,$r=hi.ReactCurrentBatchConfig,Ye=0,cn=null,Gt=null,yn=0,pr=0,Ls=pa(0),Jt=0,Yc=null,es=0,Jf=0,Gy=0,wc=null,Qn=null,Hy=0,tl=1/0,qo=null,ff=!1,Xm=null,Ki=null,td=!1,$i=null,pf=0,bc=0,Ym=null,Ld=-1,Od=0;function Dn(){return Ye&6?Vt():Ld!==-1?Ld:Ld=Vt()}function Zi(e){return e.mode&1?Ye&2&&yn!==0?yn&-yn:qR.transition!==null?(Od===0&&(Od=FE()),Od):(e=nt,e!==0||(e=window.event,e=e===void 0?16:WE(e.type)),e):1}function uo(e,t,n,r){if(50<bc)throw bc=0,Ym=null,Error(ye(185));su(e,n,r),(!(Ye&2)||e!==cn)&&(e===cn&&(!(Ye&2)&&(Jf|=n),Jt===4&&Mi(e,yn)),rr(e,r),n===1&&Ye===0&&!(t.mode&1)&&(tl=Vt()+500,qf&&ha()))}function rr(e,t){var n=e.callbackNode;qA(e,t);var r=qd(e,e===cn?yn:0);if(r===0)n!==null&&r_(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&r_(n),t===1)e.tag===0?YR(q_.bind(null,e)):cS(q_.bind(null,e)),WR(function(){!(Ye&6)&&ha()}),n=null;else{switch($E(r)){case 1:n=vy;break;case 4:n=ME;break;case 16:n=Yd;break;case 536870912:n=DE;break;default:n=Yd}n=sx(n,ex.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ex(e,t){if(Ld=-1,Od=0,Ye&6)throw Error(ye(327));var n=e.callbackNode;if(Gs()&&e.callbackNode!==n)return null;var r=qd(e,e===cn?yn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=hf(e,r);else{t=r;var o=Ye;Ye|=2;var i=nx();(cn!==e||yn!==t)&&(qo=null,tl=Vt()+500,Ha(e,t));do try{mI();break}catch(s){tx(e,s)}while(1);Iy(),df.current=i,Ye=o,Gt!==null?t=0:(cn=null,yn=0,t=Jt)}if(t!==0){if(t===2&&(o=bm(e),o!==0&&(r=o,t=qm(e,o))),t===1)throw n=Yc,Ha(e,0),Mi(e,r),rr(e,Vt()),n;if(t===6)Mi(e,r);else{if(o=e.current.alternate,!(r&30)&&!pI(o)&&(t=hf(e,r),t===2&&(i=bm(e),i!==0&&(r=i,t=qm(e,i))),t===1))throw n=Yc,Ha(e,0),Mi(e,r),rr(e,Vt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(ye(345));case 2:Oa(e,Qn,qo);break;case 3:if(Mi(e,r),(r&130023424)===r&&(t=Hy+500-Vt(),10<t)){if(qd(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Dn(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Am(Oa.bind(null,e,Qn,qo),t);break}Oa(e,Qn,qo);break;case 4:if(Mi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-co(r);i=1<<a,a=t[a],a>o&&(o=a),r&=~i}if(r=o,r=Vt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fI(r/1960))-r,10<r){e.timeoutHandle=Am(Oa.bind(null,e,Qn,qo),r);break}Oa(e,Qn,qo);break;case 5:Oa(e,Qn,qo);break;default:throw Error(ye(329))}}}return rr(e,Vt()),e.callbackNode===n?ex.bind(null,e):null}function qm(e,t){var n=wc;return e.current.memoizedState.isDehydrated&&(Ha(e,t).flags|=256),e=hf(e,t),e!==2&&(t=Qn,Qn=n,t!==null&&Km(t)),e}function Km(e){Qn===null?Qn=e:Qn.push.apply(Qn,e)}function pI(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!mo(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mi(e,t){for(t&=~Gy,t&=~Jf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-co(t),r=1<<n;e[n]=-1,t&=~r}}function q_(e){if(Ye&6)throw Error(ye(327));Gs();var t=qd(e,0);if(!(t&1))return rr(e,Vt()),null;var n=hf(e,t);if(e.tag!==0&&n===2){var r=bm(e);r!==0&&(t=r,n=qm(e,r))}if(n===1)throw n=Yc,Ha(e,0),Mi(e,t),rr(e,Vt()),n;if(n===6)throw Error(ye(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Oa(e,Qn,qo),rr(e,Vt()),null}function Xy(e,t){var n=Ye;Ye|=1;try{return e(t)}finally{Ye=n,Ye===0&&(tl=Vt()+500,qf&&ha())}}function ts(e){$i!==null&&$i.tag===0&&!(Ye&6)&&Gs();var t=Ye;Ye|=1;var n=$r.transition,r=nt;try{if($r.transition=null,nt=1,e)return e()}finally{nt=r,$r.transition=n,Ye=t,!(Ye&6)&&ha()}}function Yy(){pr=Ls.current,Et(Ls)}function Ha(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,jR(n)),Gt!==null)for(n=Gt.return;n!==null;){var r=n;switch(ky(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ef();break;case 3:Js(),Et(tr),Et(Nn),Fy();break;case 5:Dy(r);break;case 4:Js();break;case 13:Et(It);break;case 19:Et(It);break;case 10:Ly(r.type._context);break;case 22:case 23:Yy()}n=n.return}if(cn=e,Gt=e=Qi(e.current,null),yn=pr=t,Jt=0,Yc=null,Gy=Jf=es=0,Qn=wc=null,Va!==null){for(t=0;t<Va.length;t++)if(n=Va[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=o,r.next=a}n.pending=r}Va=null}return e}function tx(e,t){do{var n=Gt;try{if(Iy(),Ad.current=uf,cf){for(var r=Ot.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}cf=!1}if(Ja=0,sn=Zt=Ot=null,vc=!1,Gc=0,Wy.current=null,n===null||n.return===null){Jt=1,Yc=t,Gt=null;break}e:{var i=e,a=n.return,s=n,l=t;if(t=yn,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=s,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=D_(a);if(m!==null){m.flags&=-257,F_(m,a,s,i,t),m.mode&1&&M_(i,c,t),t=m,l=c;var y=t.updateQueue;if(y===null){var v=new Set;v.add(l),t.updateQueue=v}else y.add(l);break e}else{if(!(t&1)){M_(i,c,t),qy();break e}l=Error(ye(426))}}else if(Tt&&s.mode&1){var S=D_(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),F_(S,a,s,i,t),Ay(el(l,s));break e}}i=l=el(l,s),Jt!==4&&(Jt=2),wc===null?wc=[i]:wc.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var _=$S(i,l,t);A_(i,_);break e;case 1:s=l;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ki===null||!Ki.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=BS(i,s,t);A_(i,x);break e}}i=i.return}while(i!==null)}ox(n)}catch(N){t=N,Gt===n&&n!==null&&(Gt=n=n.return);continue}break}while(1)}function nx(){var e=df.current;return df.current=uf,e===null?uf:e}function qy(){(Jt===0||Jt===3||Jt===2)&&(Jt=4),cn===null||!(es&268435455)&&!(Jf&268435455)||Mi(cn,yn)}function hf(e,t){var n=Ye;Ye|=2;var r=nx();(cn!==e||yn!==t)&&(qo=null,Ha(e,t));do try{hI();break}catch(o){tx(e,o)}while(1);if(Iy(),Ye=n,df.current=r,Gt!==null)throw Error(ye(261));return cn=null,yn=0,Jt}function hI(){for(;Gt!==null;)rx(Gt)}function mI(){for(;Gt!==null&&!VA();)rx(Gt)}function rx(e){var t=ax(e.alternate,e,pr);e.memoizedProps=e.pendingProps,t===null?ox(e):Gt=t,Wy.current=null}function ox(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=lI(n,t),n!==null){n.flags&=32767,Gt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Jt=6,Gt=null;return}}else if(n=sI(n,t,pr),n!==null){Gt=n;return}if(t=t.sibling,t!==null){Gt=t;return}Gt=t=e}while(t!==null);Jt===0&&(Jt=5)}function Oa(e,t,n){var r=nt,o=$r.transition;try{$r.transition=null,nt=1,gI(e,t,n,r)}finally{$r.transition=o,nt=r}return null}function gI(e,t,n,r){do Gs();while($i!==null);if(Ye&6)throw Error(ye(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ye(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(KA(e,i),e===cn&&(Gt=cn=null,yn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||td||(td=!0,sx(Yd,function(){return Gs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=$r.transition,$r.transition=null;var a=nt;nt=1;var s=Ye;Ye|=4,Wy.current=null,uI(e,n),QS(n,e),DR(Nm),Kd=!!Tm,Nm=Tm=null,e.current=n,dI(n),UA(),Ye=s,nt=a,$r.transition=i}else e.current=n;if(td&&(td=!1,$i=e,pf=o),i=e.pendingLanes,i===0&&(Ki=null),WA(n.stateNode),rr(e,Vt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(ff)throw ff=!1,e=Xm,Xm=null,e;return pf&1&&e.tag!==0&&Gs(),i=e.pendingLanes,i&1?e===Ym?bc++:(bc=0,Ym=e):bc=0,ha(),null}function Gs(){if($i!==null){var e=$E(pf),t=$r.transition,n=nt;try{if($r.transition=null,nt=16>e?16:e,$i===null)var r=!1;else{if(e=$i,$i=null,pf=0,Ye&6)throw Error(ye(331));var o=Ye;for(Ye|=4,Se=e.current;Se!==null;){var i=Se,a=i.child;if(Se.flags&16){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(Se=c;Se!==null;){var u=Se;switch(u.tag){case 0:case 11:case 15:_c(8,u,i)}var d=u.child;if(d!==null)d.return=u,Se=d;else for(;Se!==null;){u=Se;var f=u.sibling,m=u.return;if(qS(u),u===c){Se=null;break}if(f!==null){f.return=m,Se=f;break}Se=m}}}var y=i.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}Se=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Se=a;else e:for(;Se!==null;){if(i=Se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:_c(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,Se=_;break e}Se=i.return}}var b=e.current;for(Se=b;Se!==null;){a=Se;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Se=w;else e:for(a=b;Se!==null;){if(s=Se,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Qf(9,s)}}catch(N){$t(s,s.return,N)}if(s===a){Se=null;break e}var x=s.sibling;if(x!==null){x.return=s.return,Se=x;break e}Se=s.return}}if(Ye=o,ha(),Io&&typeof Io.onPostCommitFiberRoot=="function")try{Io.onPostCommitFiberRoot(Wf,e)}catch{}r=!0}return r}finally{nt=n,$r.transition=t}}return!1}function K_(e,t,n){t=el(n,t),t=$S(e,t,1),e=qi(e,t,1),t=Dn(),e!==null&&(su(e,1,t),rr(e,t))}function $t(e,t,n){if(e.tag===3)K_(e,e,n);else for(;t!==null;){if(t.tag===3){K_(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ki===null||!Ki.has(r))){e=el(n,e),e=BS(t,e,1),t=qi(t,e,1),e=Dn(),t!==null&&(su(t,1,e),rr(t,e));break}}t=t.return}}function yI(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Dn(),e.pingedLanes|=e.suspendedLanes&n,cn===e&&(yn&n)===n&&(Jt===4||Jt===3&&(yn&130023424)===yn&&500>Vt()-Hy?Ha(e,0):Gy|=n),rr(e,t)}function ix(e,t){t===0&&(e.mode&1?(t=Gu,Gu<<=1,!(Gu&130023424)&&(Gu=4194304)):t=1);var n=Dn();e=li(e,t),e!==null&&(su(e,t,n),rr(e,n))}function vI(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ix(e,n)}function _I(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ye(314))}r!==null&&r.delete(t),ix(e,n)}var ax;ax=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||tr.current)Jn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Jn=!1,aI(e,t,n);Jn=!!(e.flags&131072)}else Jn=!1,Tt&&t.flags&1048576&&uS(t,rf,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Id(e,t),e=t.pendingProps;var o=Ks(t,Nn.current);Ws(t,n),o=By(null,t,r,e,o,n);var i=Vy();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nr(r)?(i=!0,tf(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Py(t),o.updater=Zf,t.stateNode=o,o._reactInternals=t,Dm(t,r,e,n),t=Bm(null,t,r,!0,i,n)):(t.tag=0,Tt&&i&&Ny(t),Pn(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Id(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=bI(r),e=no(r,e),o){case 0:t=$m(null,t,r,e,n);break e;case 1:t=V_(null,t,r,e,n);break e;case 11:t=$_(null,t,r,e,n);break e;case 14:t=B_(null,t,r,no(r.type,e),n);break e}throw Error(ye(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:no(r,o),$m(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:no(r,o),V_(e,t,r,o,n);case 3:e:{if(jS(t),e===null)throw Error(ye(387));r=t.pendingProps,i=t.memoizedState,o=i.element,gS(e,t),sf(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=el(Error(ye(423)),t),t=U_(e,t,r,n,o);break e}else if(r!==o){o=el(Error(ye(424)),t),t=U_(e,t,r,n,o);break e}else for(gr=Yi(t.stateNode.containerInfo.firstChild),yr=t,Tt=!0,io=null,n=hS(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zs(),r===o){t=ci(e,t,n);break e}Pn(e,t,r,n)}t=t.child}return t;case 5:return yS(t),e===null&&Om(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,a=o.children,km(r,o)?a=null:i!==null&&km(r,i)&&(t.flags|=32),zS(e,t),Pn(e,t,a,n),t.child;case 6:return e===null&&Om(t),null;case 13:return WS(e,t,n);case 4:return My(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Qs(t,null,r,n):Pn(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:no(r,o),$_(e,t,r,o,n);case 7:return Pn(e,t,t.pendingProps,n),t.child;case 8:return Pn(e,t,t.pendingProps.children,n),t.child;case 12:return Pn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,a=o.value,ht(of,r._currentValue),r._currentValue=a,i!==null)if(mo(i.value,a)){if(i.children===o.children&&!tr.current){t=ci(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){a=i.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ni(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Pm(i.return,n,t),s.lanes|=n;break}l=l.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ye(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Pm(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Pn(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ws(t,n),o=Vr(o),r=r(o),t.flags|=1,Pn(e,t,r,n),t.child;case 14:return r=t.type,o=no(r,t.pendingProps),o=no(r.type,o),B_(e,t,r,o,n);case 15:return VS(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:no(r,o),Id(e,t),t.tag=1,nr(r)?(e=!0,tf(t)):e=!1,Ws(t,n),FS(t,r,o),Dm(t,r,o,n),Bm(null,t,r,!0,e,n);case 19:return GS(e,t,n);case 22:return US(e,t,n)}throw Error(ye(156,t.tag))};function sx(e,t){return PE(e,t)}function wI(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(e,t,n,r){return new wI(e,t,n,r)}function Ky(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bI(e){if(typeof e=="function")return Ky(e)?1:0;if(e!=null){if(e=e.$$typeof,e===my)return 11;if(e===gy)return 14}return 2}function Qi(e,t){var n=e.alternate;return n===null?(n=Pr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pd(e,t,n,r,o,i){var a=2;if(r=e,typeof e=="function")Ky(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Es:return Xa(n.children,o,i,t);case hy:a=8,o|=8;break;case am:return e=Pr(12,n,t,o|2),e.elementType=am,e.lanes=i,e;case sm:return e=Pr(13,n,t,o),e.elementType=sm,e.lanes=i,e;case lm:return e=Pr(19,n,t,o),e.elementType=lm,e.lanes=i,e;case yE:return ep(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mE:a=10;break e;case gE:a=9;break e;case my:a=11;break e;case gy:a=14;break e;case Ii:a=16,r=null;break e}throw Error(ye(130,e==null?e:typeof e,""))}return t=Pr(a,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function Xa(e,t,n,r){return e=Pr(7,e,r,t),e.lanes=n,e}function ep(e,t,n,r){return e=Pr(22,e,r,t),e.elementType=yE,e.lanes=n,e.stateNode={isHidden:!1},e}function hh(e,t,n){return e=Pr(6,e,null,t),e.lanes=n,e}function mh(e,t,n){return t=Pr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function EI(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qp(0),this.expirationTimes=qp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qp(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Zy(e,t,n,r,o,i,a,s,l){return e=new EI(e,t,n,s,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Pr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Py(i),e}function SI(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bs,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function lx(e){if(!e)return ia;e=e._reactInternals;e:{if(as(e)!==e||e.tag!==1)throw Error(ye(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ye(171))}if(e.tag===1){var n=e.type;if(nr(n))return lS(e,n,t)}return t}function cx(e,t,n,r,o,i,a,s,l){return e=Zy(n,r,!0,e,o,i,a,s,l),e.context=lx(null),n=e.current,r=Dn(),o=Zi(n),i=ni(r,o),i.callback=t??null,qi(n,i,o),e.current.lanes=o,su(e,o,r),rr(e,r),e}function tp(e,t,n,r){var o=t.current,i=Dn(),a=Zi(o);return n=lx(n),t.context===null?t.context=n:t.pendingContext=n,t=ni(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=qi(o,t,a),e!==null&&(uo(e,o,a,i),kd(e,o,a)),a}function mf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Z_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Qy(e,t){Z_(e,t),(e=e.alternate)&&Z_(e,t)}function xI(){return null}var ux=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jy(e){this._internalRoot=e}np.prototype.render=Jy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ye(409));tp(e,t,null,null)};np.prototype.unmount=Jy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ts(function(){tp(null,e,null,null)}),t[si]=null}};function np(e){this._internalRoot=e}np.prototype.unstable_scheduleHydration=function(e){if(e){var t=UE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pi.length&&t!==0&&t<Pi[n].priority;n++);Pi.splice(n,0,e),n===0&&jE(e)}};function ev(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function rp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Q_(){}function CI(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var c=mf(a);i.call(c)}}var a=cx(t,r,e,0,null,!1,!1,"",Q_);return e._reactRootContainer=a,e[si]=a.current,Vc(e.nodeType===8?e.parentNode:e),ts(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var s=r;r=function(){var c=mf(l);s.call(c)}}var l=Zy(e,0,!1,null,null,!1,!1,"",Q_);return e._reactRootContainer=l,e[si]=l.current,Vc(e.nodeType===8?e.parentNode:e),ts(function(){tp(t,l,n,r)}),l}function op(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if(typeof o=="function"){var s=o;o=function(){var l=mf(a);s.call(l)}}tp(t,a,e,o)}else a=CI(n,t,e,o,r);return mf(a)}BE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=rc(t.pendingLanes);n!==0&&(_y(t,n|1),rr(t,Vt()),!(Ye&6)&&(tl=Vt()+500,ha()))}break;case 13:ts(function(){var r=li(e,1);if(r!==null){var o=Dn();uo(r,e,1,o)}}),Qy(e,1)}};wy=function(e){if(e.tag===13){var t=li(e,134217728);if(t!==null){var n=Dn();uo(t,e,134217728,n)}Qy(e,134217728)}};VE=function(e){if(e.tag===13){var t=Zi(e),n=li(e,t);if(n!==null){var r=Dn();uo(n,e,t,r)}Qy(e,t)}};UE=function(){return nt};zE=function(e,t){var n=nt;try{return nt=e,t()}finally{nt=n}};vm=function(e,t,n){switch(t){case"input":if(dm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Yf(r);if(!o)throw Error(ye(90));_E(r),dm(r,o)}}}break;case"textarea":bE(e,n);break;case"select":t=n.value,t!=null&&Vs(e,!!n.multiple,t,!1)}};kE=Xy;AE=ts;var TI={usingClientEntryPoint:!1,Events:[cu,Ts,Yf,TE,NE,Xy]},Dl={findFiberByHostInstance:Ba,bundleType:0,version:"18.3.0",rendererPackageName:"react-dom"},NI={bundleType:Dl.bundleType,version:Dl.version,rendererPackageName:Dl.rendererPackageName,rendererConfig:Dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=LE(e),e===null?null:e.stateNode},findFiberByHostInstance:Dl.findFiberByHostInstance||xI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.0-next-8a015b68cc-20240425"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{Wf=nd.inject(NI),Io=nd}catch{}}wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TI;wr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ev(t))throw Error(ye(200));return SI(e,t,null,n)};wr.createRoot=function(e,t){if(!ev(e))throw Error(ye(299));var n=!1,r="",o=ux;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Zy(e,1,!1,null,null,n,!1,r,o),e[si]=t.current,Vc(e.nodeType===8?e.parentNode:e),new Jy(t)};wr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ye(188)):(e=Object.keys(e).join(","),Error(ye(268,e)));return e=LE(t),e=e===null?null:e.stateNode,e};wr.flushSync=function(e){return ts(e)};wr.hydrate=function(e,t,n){if(!rp(t))throw Error(ye(200));return op(null,e,t,!0,n)};wr.hydrateRoot=function(e,t,n){if(!ev(e))throw Error(ye(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",a=ux;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=cx(t,null,e,1,n??null,o,!1,i,a),e[si]=t.current,Vc(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new np(t)};wr.render=function(e,t,n){if(!rp(t))throw Error(ye(200));return op(null,e,t,!1,n)};wr.unmountComponentAtNode=function(e){if(!rp(e))throw Error(ye(40));return e._reactRootContainer?(ts(function(){op(null,null,e,!1,function(){e._reactRootContainer=null,e[si]=null})}),!0):!1};wr.unstable_batchedUpdates=Xy;wr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!rp(n))throw Error(ye(200));if(e==null||e._reactInternals===void 0)throw Error(ye(38));return op(e,t,n,!1,r)};wr.version="18.3.0-next-8a015b68cc-20240425";function dx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dx)}catch(e){console.error(e)}}dx(),dE.exports=wr;var ip=dE.exports,fx,J_=ip;fx=J_.createRoot,J_.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qc(){return qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qc.apply(this,arguments)}var Bi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Bi||(Bi={}));const e1="popstate";function kI(e){e===void 0&&(e={});function t(r,o){let{pathname:i,search:a,hash:s}=r.location;return Zm("",{pathname:i,search:a,hash:s},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:gf(o)}return RI(t,n,null,e)}function Ut(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function tv(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function AI(){return Math.random().toString(36).substr(2,8)}function t1(e,t){return{usr:e.state,key:e.key,idx:t}}function Zm(e,t,n,r){return n===void 0&&(n=null),qc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?dl(t):t,{state:n,key:t&&t.key||r||AI()})}function gf(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function dl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function RI(e,t,n,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:i=!1}=r,a=o.history,s=Bi.Pop,l=null,c=u();c==null&&(c=0,a.replaceState(qc({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function d(){s=Bi.Pop;let S=u(),_=S==null?null:S-c;c=S,l&&l({action:s,location:v.location,delta:_})}function f(S,_){s=Bi.Push;let b=Zm(v.location,S,_);n&&n(b,S),c=u()+1;let w=t1(b,c),x=v.createHref(b);try{a.pushState(w,"",x)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;o.location.assign(x)}i&&l&&l({action:s,location:v.location,delta:1})}function m(S,_){s=Bi.Replace;let b=Zm(v.location,S,_);n&&n(b,S),c=u();let w=t1(b,c),x=v.createHref(b);a.replaceState(w,"",x),i&&l&&l({action:s,location:v.location,delta:0})}function y(S){let _=o.location.origin!=="null"?o.location.origin:o.location.href,b=typeof S=="string"?S:gf(S);return b=b.replace(/ $/,"%20"),Ut(_,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,_)}let v={get action(){return s},get location(){return e(o,a)},listen(S){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(e1,d),l=S,()=>{o.removeEventListener(e1,d),l=null}},createHref(S){return t(o,S)},createURL:y,encodeLocation(S){let _=y(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:m,go(S){return a.go(S)}};return v}var n1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(n1||(n1={}));function II(e,t,n){return n===void 0&&(n="/"),LI(e,t,n,!1)}function LI(e,t,n,r){let o=typeof t=="string"?dl(t):t,i=nv(o.pathname||"/",n);if(i==null)return null;let a=px(e);OI(a);let s=null;for(let l=0;s==null&&l<a.length;++l){let c=WI(i);s=zI(a[l],c,r)}return s}function px(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let o=(i,a,s)=>{let l={relativePath:s===void 0?i.path||"":s,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(Ut(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ji([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(Ut(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),px(i.children,t,u,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:VI(c,i.index),routesMeta:u})};return e.forEach((i,a)=>{var s;if(i.path===""||!((s=i.path)!=null&&s.includes("?")))o(i,a);else for(let l of hx(i.path))o(i,a,l)}),t}function hx(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return o?[i,""]:[i];let a=hx(r.join("/")),s=[];return s.push(...a.map(l=>l===""?i:[i,l].join("/"))),o&&s.push(...a),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function OI(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:UI(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const PI=/^:[\w-]+$/,MI=3,DI=2,FI=1,$I=10,BI=-2,r1=e=>e==="*";function VI(e,t){let n=e.split("/"),r=n.length;return n.some(r1)&&(r+=BI),t&&(r+=DI),n.filter(o=>!r1(o)).reduce((o,i)=>o+(PI.test(i)?MI:i===""?FI:$I),r)}function UI(e,t){return e.length===t.length&&e.slice(0,-1).every((r,o)=>r===t[o])?e[e.length-1]-t[t.length-1]:0}function zI(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,o={},i="/",a=[];for(let s=0;s<r.length;++s){let l=r[s],c=s===r.length-1,u=i==="/"?t:t.slice(i.length)||"/",d=o1({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=o1({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(o,d.params),a.push({params:o,pathname:Ji([i,d.pathname]),pathnameBase:qI(Ji([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Ji([i,d.pathnameBase]))}return a}function o1(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=jI(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],a=i.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:m}=u;if(f==="*"){let v=s[d]||"";a=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const y=s[d];return m&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:e}}function jI(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),tv(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,l)=>(r.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function WI(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return tv(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function nv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const GI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,HI=e=>GI.test(e);function XI(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?dl(e):e,i;if(n)if(HI(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),tv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?i=i1(n.substring(1),"/"):i=i1(n,t)}else i=t;return{pathname:i,search:KI(r),hash:ZI(o)}}function i1(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function gh(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YI(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function rv(e,t){let n=YI(e);return t?n.map((r,o)=>o===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ov(e,t,n,r){r===void 0&&(r=!1);let o;typeof e=="string"?o=dl(e):(o=qc({},e),Ut(!o.pathname||!o.pathname.includes("?"),gh("?","pathname","search",o)),Ut(!o.pathname||!o.pathname.includes("#"),gh("#","pathname","hash",o)),Ut(!o.search||!o.search.includes("#"),gh("#","search","hash",o)));let i=e===""||o.pathname==="",a=i?"/":o.pathname,s;if(a==null)s=n;else{let d=t.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;o.pathname=f.join("/")}s=d>=0?t[d]:"/"}let l=XI(o,s),c=a&&a!=="/"&&a.endsWith("/"),u=(i||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ji=e=>e.join("/").replace(/\/\/+/g,"/"),qI=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),KI=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ZI=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function QI(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const mx=["post","put","patch","delete"];new Set(mx);const JI=["get",...mx];new Set(JI);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kc(){return Kc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kc.apply(this,arguments)}const iv=h.createContext(null),eL=h.createContext(null),ma=h.createContext(null),ap=h.createContext(null),mi=h.createContext({outlet:null,matches:[],isDataRoute:!1}),gx=h.createContext(null);function tL(e,t){let{relative:n}=t===void 0?{}:t;fl()||Ut(!1);let{basename:r,navigator:o}=h.useContext(ma),{hash:i,pathname:a,search:s}=vx(e,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:Ji([r,a])),o.createHref({pathname:l,search:s,hash:i})}function fl(){return h.useContext(ap)!=null}function pl(){return fl()||Ut(!1),h.useContext(ap).location}function yx(e){h.useContext(ma).static||h.useLayoutEffect(e)}function An(){let{isDataRoute:e}=h.useContext(mi);return e?hL():nL()}function nL(){fl()||Ut(!1);let e=h.useContext(iv),{basename:t,future:n,navigator:r}=h.useContext(ma),{matches:o}=h.useContext(mi),{pathname:i}=pl(),a=JSON.stringify(rv(o,n.v7_relativeSplatPath)),s=h.useRef(!1);return yx(()=>{s.current=!0}),h.useCallback(function(c,u){if(u===void 0&&(u={}),!s.current)return;if(typeof c=="number"){r.go(c);return}let d=ov(c,JSON.parse(a),i,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Ji([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,a,i,e])}function av(){let{matches:e}=h.useContext(mi),t=e[e.length-1];return t?t.params:{}}function vx(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=h.useContext(ma),{matches:o}=h.useContext(mi),{pathname:i}=pl(),a=JSON.stringify(rv(o,r.v7_relativeSplatPath));return h.useMemo(()=>ov(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function rL(e,t){return oL(e,t)}function oL(e,t,n,r){fl()||Ut(!1);let{navigator:o}=h.useContext(ma),{matches:i}=h.useContext(mi),a=i[i.length-1],s=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=pl(),u;if(t){var d;let S=typeof t=="string"?dl(t):t;l==="/"||(d=S.pathname)!=null&&d.startsWith(l)||Ut(!1),u=S}else u=c;let f=u.pathname||"/",m=f;if(l!=="/"){let S=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(S.length).join("/")}let y=II(e,{pathname:m}),v=cL(y&&y.map(S=>Object.assign({},S,{params:Object.assign({},s,S.params),pathname:Ji([l,o.encodeLocation?o.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?l:Ji([l,o.encodeLocation?o.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,r);return t&&v?h.createElement(ap.Provider,{value:{location:Kc({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Bi.Pop}},v):v}function iL(){let e=pL(),t=QI(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),n?h.createElement("pre",{style:o},n):null,i)}const aL=h.createElement(iL,null);class sL extends h.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?h.createElement(mi.Provider,{value:this.props.routeContext},h.createElement(gx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lL(e){let{routeContext:t,match:n,children:r}=e,o=h.useContext(iv);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),h.createElement(mi.Provider,{value:t},r)}function cL(e,t,n,r){var o;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,s=(o=n)==null?void 0:o.errors;if(s!=null){let u=a.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);u>=0||Ut(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:m}=n,y=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,d,f)=>{let m,y=!1,v=null,S=null;n&&(m=s&&d.route.id?s[d.route.id]:void 0,v=d.route.errorElement||aL,l&&(c<0&&f===0?(mL("route-fallback",!1),y=!0,S=null):c===f&&(y=!0,S=d.route.hydrateFallbackElement||null)));let _=t.concat(a.slice(0,f+1)),b=()=>{let w;return m?w=v:y?w=S:d.route.Component?w=h.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=u,h.createElement(lL,{match:d,routeContext:{outlet:u,matches:_,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?h.createElement(sL,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:b(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):b()},null)}var _x=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(_x||{}),yf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(yf||{});function uL(e){let t=h.useContext(iv);return t||Ut(!1),t}function dL(e){let t=h.useContext(eL);return t||Ut(!1),t}function fL(e){let t=h.useContext(mi);return t||Ut(!1),t}function wx(e){let t=fL(),n=t.matches[t.matches.length-1];return n.route.id||Ut(!1),n.route.id}function pL(){var e;let t=h.useContext(gx),n=dL(yf.UseRouteError),r=wx(yf.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function hL(){let{router:e}=uL(_x.UseNavigateStable),t=wx(yf.UseNavigateStable),n=h.useRef(!1);return yx(()=>{n.current=!0}),h.useCallback(function(o,i){i===void 0&&(i={}),n.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,Kc({fromRouteId:t},i)))},[e,t])}const a1={};function mL(e,t,n){!t&&!a1[e]&&(a1[e]=!0)}function gL(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function bx(e){let{to:t,replace:n,state:r,relative:o}=e;fl()||Ut(!1);let{future:i,static:a}=h.useContext(ma),{matches:s}=h.useContext(mi),{pathname:l}=pl(),c=An(),u=ov(t,rv(s,i.v7_relativeSplatPath),l,o==="path"),d=JSON.stringify(u);return h.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:o}),[c,d,o,n,r]),null}function ln(e){Ut(!1)}function yL(e){let{basename:t="/",children:n=null,location:r,navigationType:o=Bi.Pop,navigator:i,static:a=!1,future:s}=e;fl()&&Ut(!1);let l=t.replace(/^\/*/,"/"),c=h.useMemo(()=>({basename:l,navigator:i,static:a,future:Kc({v7_relativeSplatPath:!1},s)}),[l,s,i,a]);typeof r=="string"&&(r=dl(r));let{pathname:u="/",search:d="",hash:f="",state:m=null,key:y="default"}=r,v=h.useMemo(()=>{let S=nv(u,l);return S==null?null:{location:{pathname:S,search:d,hash:f,state:m,key:y},navigationType:o}},[l,u,d,f,m,y,o]);return v==null?null:h.createElement(ma.Provider,{value:c},h.createElement(ap.Provider,{children:n,value:v}))}function du(e){let{children:t,location:n}=e;return rL(Qm(t),n)}new Promise(()=>{});function Qm(e,t){t===void 0&&(t=[]);let n=[];return h.Children.forEach(e,(r,o)=>{if(!h.isValidElement(r))return;let i=[...t,o];if(r.type===h.Fragment){n.push.apply(n,Qm(r.props.children,i));return}r.type!==ln&&Ut(!1),!r.props.index||!r.props.children||Ut(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Qm(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jm(){return Jm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jm.apply(this,arguments)}function vL(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function _L(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function wL(e,t){return e.button===0&&(!t||t==="_self")&&!_L(e)}function eg(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(o=>[n,o]):[[n,r]])},[]))}function bL(e,t){let n=eg(e);return t&&t.forEach((r,o)=>{n.has(o)||t.getAll(o).forEach(i=>{n.append(o,i)})}),n}const EL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],SL="6";try{window.__reactRouterVersion=SL}catch{}const xL="startTransition",s1=Ic[xL];function CL(e){let{basename:t,children:n,future:r,window:o}=e,i=h.useRef();i.current==null&&(i.current=kI({window:o,v5Compat:!0}));let a=i.current,[s,l]=h.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},u=h.useCallback(d=>{c&&s1?s1(()=>l(d)):l(d)},[l,c]);return h.useLayoutEffect(()=>a.listen(u),[a,u]),h.useEffect(()=>gL(r),[r]),h.createElement(yL,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:a,future:r})}const TL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mt=h.forwardRef(function(t,n){let{onClick:r,relative:o,reloadDocument:i,replace:a,state:s,target:l,to:c,preventScrollReset:u,viewTransition:d}=t,f=vL(t,EL),{basename:m}=h.useContext(ma),y,v=!1;if(typeof c=="string"&&NL.test(c)&&(y=c,TL))try{let w=new URL(window.location.href),x=c.startsWith("//")?new URL(w.protocol+c):new URL(c),N=nv(x.pathname,m);x.origin===w.origin&&N!=null?c=N+x.search+x.hash:v=!0}catch{}let S=tL(c,{relative:o}),_=kL(c,{replace:a,state:s,target:l,preventScrollReset:u,relative:o,viewTransition:d});function b(w){r&&r(w),w.defaultPrevented||_(w)}return h.createElement("a",Jm({},f,{href:y||S,onClick:v||i?r:b,ref:n,target:l}))});var l1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(l1||(l1={}));var c1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(c1||(c1={}));function kL(e,t){let{target:n,replace:r,state:o,preventScrollReset:i,relative:a,viewTransition:s}=t===void 0?{}:t,l=An(),c=pl(),u=vx(e,{relative:a});return h.useCallback(d=>{if(wL(d,n)){d.preventDefault();let f=r!==void 0?r:gf(c)===gf(u);l(e,{replace:f,state:o,preventScrollReset:i,relative:a,viewTransition:s})}},[c,l,u,r,o,n,e,i,a,s])}function AL(e){let t=h.useRef(eg(e)),n=h.useRef(!1),r=pl(),o=h.useMemo(()=>bL(r.search,n.current?null:t.current),[r.search]),i=An(),a=h.useCallback((s,l)=>{const c=eg(typeof s=="function"?s(o):s);n.current=!0,i("?"+c,l)},[i,o]);return[o,a]}const Qr={graphemeId:null,useNoGlyph:!1},RL={wordSeparator:{...Qr},sentenceSeparator:{...Qr},comma:{...Qr},questionMark:{...Qr},exclamationMark:{...Qr},colon:{...Qr},semicolon:{...Qr},ellipsis:{...Qr},quotationOpen:{...Qr},quotationClose:{...Qr}},IL={glyphDirection:"ltr",wordOrder:"ltr",lineProgression:"ttb",glyphStacking:"horizontal",wordWrap:"word",baselineAlignment:"bottom"},vf={conlangName:"",simpleScriptSystem:!1,defaultGalleryView:"compact",autoSaveInterval:0,autoManageGlyphs:!1,punctuation:{...RL},writingSystem:{...IL}};var Ex={exports:{}};const LL={},OL=Object.freeze(Object.defineProperty({__proto__:null,default:LL},Symbol.toStringTag,{value:"Module"})),_f=nA(OL);(function(e,t){var n=void 0,r=function(o){return n||(n=new Promise(function(i,a){var s=typeof o<"u"?o:{},l=s.onAbort;s.onAbort=function(g){a(new Error(g)),l&&l(g)},s.postRun=s.postRun||[],s.postRun.push(function(){i(s)}),e=void 0;var c;c||(c=typeof s<"u"?s:{});var u=typeof window=="object",d=typeof WorkerGlobalScope<"u",f=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";c.onRuntimeInitialized=function(){function g(ee,ue){switch(typeof ue){case"boolean":Kk(ee,ue?1:0);break;case"number":Xk(ee,ue);break;case"string":Yk(ee,ue,-1,-1);break;case"object":if(ue===null)U0(ee);else if(ue.length!=null){var Ce=Fu(ue,Du);qk(ee,Ce,ue.length,-1),$u(Ce)}else Bu(ee,"Wrong API use : tried to return a value of an unknown type ("+ue+").",-1);break;default:U0(ee)}}function E(ee,ue){for(var Ce=[],Oe=0;Oe<ee;Oe+=1){var $e=re(ue+4*Oe,"i32"),tt=zk($e);if(tt===1||tt===2)$e=Hk($e);else if(tt===3)$e=Wk($e);else if(tt===4){tt=$e,$e=jk(tt),tt=Gk(tt);for(var Hr=new Uint8Array($e),xr=0;xr<$e;xr+=1)Hr[xr]=R[tt+xr];$e=Hr}else $e=null;Ce.push($e)}return Ce}function A(ee,ue){this.Qa=ee,this.db=ue,this.Oa=1,this.lb=[]}function F(ee,ue){if(this.db=ue,ue=_n(ee)+1,this.eb=Up(ue),this.eb===null)throw Error("Unable to allocate memory for the SQL string");St(ee,I,this.eb,ue),this.kb=this.eb,this.Za=this.pb=null}function G(ee){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),ee!=null){var ue=this.filename,Ce="/",Oe=ue;if(Ce&&(Ce=typeof Ce=="string"?Ce:vo(Ce),Oe=ue?Je(Ce+"/"+ue):Ce),ue=Wn(!0,!0),Oe=X(Oe,ue),ee){if(typeof ee=="string"){Ce=Array(ee.length);for(var $e=0,tt=ee.length;$e<tt;++$e)Ce[$e]=ee.charCodeAt($e);ee=Ce}Gr(Oe,ue|146),Ce=xt(Oe,577),I0(Ce,ee,0,ee.length,0),gs(Ce),Gr(Oe,ue)}}this.handleError(ke(this.filename,te)),this.db=re(te,"i32"),j0(this.db),this.fb={},this.Sa={}}var te=Si(4),se=c.cwrap,ke=se("sqlite3_open","number",["string","number"]),Ue=se("sqlite3_close_v2","number",["number"]),Be=se("sqlite3_exec","number",["number","string","number","number","number"]),Dt=se("sqlite3_changes","number",["number"]),Hn=se("sqlite3_prepare_v2","number",["number","string","number","number","number"]),D0=se("sqlite3_sql","string",["number"]),Ck=se("sqlite3_normalized_sql","string",["number"]),F0=se("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Tk=se("sqlite3_bind_text","number",["number","number","number","number","number"]),$0=se("sqlite3_bind_blob","number",["number","number","number","number","number"]),Nk=se("sqlite3_bind_double","number",["number","number","number"]),kk=se("sqlite3_bind_int","number",["number","number","number"]),Ak=se("sqlite3_bind_parameter_index","number",["number","string"]),Rk=se("sqlite3_step","number",["number"]),Ik=se("sqlite3_errmsg","string",["number"]),Lk=se("sqlite3_column_count","number",["number"]),Ok=se("sqlite3_data_count","number",["number"]),Pk=se("sqlite3_column_double","number",["number","number"]),B0=se("sqlite3_column_text","string",["number","number"]),Mk=se("sqlite3_column_blob","number",["number","number"]),Dk=se("sqlite3_column_bytes","number",["number","number"]),Fk=se("sqlite3_column_type","number",["number","number"]),$k=se("sqlite3_column_name","string",["number","number"]),Bk=se("sqlite3_reset","number",["number"]),Vk=se("sqlite3_clear_bindings","number",["number"]),Uk=se("sqlite3_finalize","number",["number"]),V0=se("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),zk=se("sqlite3_value_type","number",["number"]),jk=se("sqlite3_value_bytes","number",["number"]),Wk=se("sqlite3_value_text","string",["number"]),Gk=se("sqlite3_value_blob","number",["number"]),Hk=se("sqlite3_value_double","number",["number"]),Xk=se("sqlite3_result_double","",["number","number"]),U0=se("sqlite3_result_null","",["number"]),Yk=se("sqlite3_result_text","",["number","string","number","number"]),qk=se("sqlite3_result_blob","",["number","number","number","number"]),Kk=se("sqlite3_result_int","",["number","number"]),Bu=se("sqlite3_result_error","",["number","string","number"]),z0=se("sqlite3_aggregate_context","number",["number","number"]),j0=se("RegisterExtensionFunctions","number",["number"]),W0=se("sqlite3_update_hook","number",["number","number","number"]);A.prototype.bind=function(ee){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(ee)?this.Cb(ee):ee!=null&&typeof ee=="object"?this.Db(ee):!0},A.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var ee=Rk(this.Qa);switch(ee){case 100:return!0;case 101:return!1;default:throw this.db.handleError(ee)}},A.prototype.wb=function(ee){return ee==null&&(ee=this.Oa,this.Oa+=1),Pk(this.Qa,ee)},A.prototype.Gb=function(ee){if(ee==null&&(ee=this.Oa,this.Oa+=1),ee=B0(this.Qa,ee),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(ee)},A.prototype.Hb=function(ee){return ee==null&&(ee=this.Oa,this.Oa+=1),B0(this.Qa,ee)},A.prototype.getBlob=function(ee){ee==null&&(ee=this.Oa,this.Oa+=1);var ue=Dk(this.Qa,ee);ee=Mk(this.Qa,ee);for(var Ce=new Uint8Array(ue),Oe=0;Oe<ue;Oe+=1)Ce[Oe]=R[ee+Oe];return Ce},A.prototype.get=function(ee,ue){ue=ue||{},ee!=null&&this.bind(ee)&&this.step(),ee=[];for(var Ce=Ok(this.Qa),Oe=0;Oe<Ce;Oe+=1)switch(Fk(this.Qa,Oe)){case 1:var $e=ue.useBigInt?this.Gb(Oe):this.wb(Oe);ee.push($e);break;case 2:ee.push(this.wb(Oe));break;case 3:ee.push(this.Hb(Oe));break;case 4:ee.push(this.getBlob(Oe));break;default:ee.push(null)}return ee},A.prototype.getColumnNames=function(){for(var ee=[],ue=Lk(this.Qa),Ce=0;Ce<ue;Ce+=1)ee.push($k(this.Qa,Ce));return ee},A.prototype.getAsObject=function(ee,ue){ee=this.get(ee,ue),ue=this.getColumnNames();for(var Ce={},Oe=0;Oe<ue.length;Oe+=1)Ce[ue[Oe]]=ee[Oe];return Ce},A.prototype.getSQL=function(){return D0(this.Qa)},A.prototype.getNormalizedSQL=function(){return Ck(this.Qa)},A.prototype.run=function(ee){return ee!=null&&this.bind(ee),this.step(),this.reset()},A.prototype.sb=function(ee,ue){ue==null&&(ue=this.Oa,this.Oa+=1),ee=jn(ee);var Ce=Fu(ee,Du);this.lb.push(Ce),this.db.handleError(Tk(this.Qa,ue,Ce,ee.length-1,0))},A.prototype.Bb=function(ee,ue){ue==null&&(ue=this.Oa,this.Oa+=1);var Ce=Fu(ee,Du);this.lb.push(Ce),this.db.handleError($0(this.Qa,ue,Ce,ee.length,0))},A.prototype.rb=function(ee,ue){ue==null&&(ue=this.Oa,this.Oa+=1),this.db.handleError((ee===(ee|0)?kk:Nk)(this.Qa,ue,ee))},A.prototype.Eb=function(ee){ee==null&&(ee=this.Oa,this.Oa+=1),$0(this.Qa,ee,0,0,0)},A.prototype.tb=function(ee,ue){switch(ue==null&&(ue=this.Oa,this.Oa+=1),typeof ee){case"string":this.sb(ee,ue);return;case"number":this.rb(ee,ue);return;case"bigint":this.sb(ee.toString(),ue);return;case"boolean":this.rb(ee+0,ue);return;case"object":if(ee===null){this.Eb(ue);return}if(ee.length!=null){this.Bb(ee,ue);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+ee+")."},A.prototype.Db=function(ee){var ue=this;return Object.keys(ee).forEach(function(Ce){var Oe=Ak(ue.Qa,Ce);Oe!==0&&ue.tb(ee[Ce],Oe)}),!0},A.prototype.Cb=function(ee){for(var ue=0;ue<ee.length;ue+=1)this.tb(ee[ue],ue+1);return!0},A.prototype.reset=function(){return this.freemem(),Vk(this.Qa)===0&&Bk(this.Qa)===0},A.prototype.freemem=function(){for(var ee;(ee=this.lb.pop())!==void 0;)$u(ee)},A.prototype.free=function(){this.freemem();var ee=Uk(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,ee},F.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var ee=kl(),ue=Si(4);Z(te),Z(ue);try{this.db.handleError(F0(this.db.db,this.kb,-1,te,ue)),this.kb=re(ue,"i32");var Ce=re(te,"i32");return Ce===0?(this.mb(),{done:!0}):(this.Za=new A(Ce,this.db),this.db.fb[Ce]=this.Za,{value:this.Za,done:!1})}catch(Oe){throw this.pb=ge(this.kb),this.mb(),Oe}finally{Nl(ee)}},F.prototype.mb=function(){$u(this.eb),this.eb=null},F.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:ge(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(F.prototype[Symbol.iterator]=function(){return this}),G.prototype.run=function(ee,ue){if(!this.db)throw"Database closed";if(ue){ee=this.prepare(ee,ue);try{ee.step()}finally{ee.free()}}else this.handleError(Be(this.db,ee,0,0,te));return this},G.prototype.exec=function(ee,ue,Ce){if(!this.db)throw"Database closed";var Oe=kl(),$e=null;try{var tt=Bp(ee),Hr=Si(4);for(ee=[];re(tt,"i8")!==0;){Z(te),Z(Hr),this.handleError(F0(this.db,tt,-1,te,Hr));var xr=re(te,"i32");if(tt=re(Hr,"i32"),xr!==0){var dr=null;for($e=new A(xr,this),ue!=null&&$e.bind(ue);$e.step();)dr===null&&(dr={columns:$e.getColumnNames(),values:[]},ee.push(dr)),dr.values.push($e.get(null,Ce));$e.free()}}return ee}catch(Xr){throw $e&&$e.free(),Xr}finally{Nl(Oe)}},G.prototype.each=function(ee,ue,Ce,Oe,$e){typeof ue=="function"&&(Oe=Ce,Ce=ue,ue=void 0),ee=this.prepare(ee,ue);try{for(;ee.step();)Ce(ee.getAsObject(null,$e))}finally{ee.free()}if(typeof Oe=="function")return Oe()},G.prototype.prepare=function(ee,ue){if(Z(te),this.handleError(Hn(this.db,ee,-1,te,0)),ee=re(te,"i32"),ee===0)throw"Nothing to prepare";var Ce=new A(ee,this);return ue!=null&&Ce.bind(ue),this.fb[ee]=Ce},G.prototype.iterateStatements=function(ee){return new F(ee,this)},G.prototype.export=function(){Object.values(this.fb).forEach(function(ue){ue.free()}),Object.values(this.Sa).forEach(Ei),this.Sa={},this.handleError(Ue(this.db));var ee=_k(this.filename);return this.handleError(ke(this.filename,te)),this.db=re(te,"i32"),j0(this.db),ee},G.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(ee){ee.free()}),Object.values(this.Sa).forEach(Ei),this.Sa={},this.Ya&&(Ei(this.Ya),this.Ya=void 0),this.handleError(Ue(this.db)),kt("/"+this.filename),this.db=null)},G.prototype.handleError=function(ee){if(ee===0)return null;throw ee=Ik(this.db),Error(ee)},G.prototype.getRowsModified=function(){return Dt(this.db)},G.prototype.create_function=function(ee,ue){Object.prototype.hasOwnProperty.call(this.Sa,ee)&&(Ei(this.Sa[ee]),delete this.Sa[ee]);var Ce=Tl(function(Oe,$e,tt){$e=E($e,tt);try{var Hr=ue.apply(null,$e)}catch(xr){Bu(Oe,xr,-1);return}g(Oe,Hr)},"viii");return this.Sa[ee]=Ce,this.handleError(V0(this.db,ee,ue.length,1,0,Ce,0,0,0)),this},G.prototype.create_aggregate=function(ee,ue){var Ce=ue.init||function(){return null},Oe=ue.finalize||function(dr){return dr},$e=ue.step;if(!$e)throw"An aggregate function must have a step function in "+ee;var tt={};Object.hasOwnProperty.call(this.Sa,ee)&&(Ei(this.Sa[ee]),delete this.Sa[ee]),ue=ee+"__finalize",Object.hasOwnProperty.call(this.Sa,ue)&&(Ei(this.Sa[ue]),delete this.Sa[ue]);var Hr=Tl(function(dr,Xr,jp){var ka=z0(dr,1);Object.hasOwnProperty.call(tt,ka)||(tt[ka]=Ce()),Xr=E(Xr,jp),Xr=[tt[ka]].concat(Xr);try{tt[ka]=$e.apply(null,Xr)}catch(Zk){delete tt[ka],Bu(dr,Zk,-1)}},"viii"),xr=Tl(function(dr){var Xr=z0(dr,1);try{var jp=Oe(tt[Xr])}catch(ka){delete tt[Xr],Bu(dr,ka,-1);return}g(dr,jp),delete tt[Xr]},"vi");return this.Sa[ee]=Hr,this.Sa[ue]=xr,this.handleError(V0(this.db,ee,$e.length-1,1,0,0,Hr,xr,0)),this},G.prototype.updateHook=function(ee){this.Ya&&(W0(this.db,0,0),Ei(this.Ya),this.Ya=void 0),ee&&(this.Ya=Tl(function(ue,Ce,Oe,$e,tt){switch(Ce){case 18:ue="insert";break;case 23:ue="update";break;case 9:ue="delete";break;default:throw"unknown operationCode in updateHook callback: "+Ce}if(Oe=Oe?J(I,Oe):"",$e=$e?J(I,$e):"",tt>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";ee(ue,Oe,$e,Number(tt))},"viiiij"),W0(this.db,this.Ya,0))},c.Database=G};var m={...c},y="./this.program",v=(g,E)=>{throw E},S="",_,b;if(f){var w=_f;S=__dirname+"/",b=g=>(g=P(g)?new URL(g):g,w.readFileSync(g)),_=async g=>(g=P(g)?new URL(g):g,w.readFileSync(g,void 0)),!c.thisProgram&&1<process.argv.length&&(y=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),e.exports=c,v=(g,E)=>{throw process.exitCode=g,E}}else(u||d)&&(d?S=self.location.href:typeof document<"u"&&document.currentScript&&(S=document.currentScript.src),S=S.startsWith("blob:")?"":S.slice(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1),d&&(b=g=>{var E=new XMLHttpRequest;return E.open("GET",g,!1),E.responseType="arraybuffer",E.send(null),new Uint8Array(E.response)}),_=async g=>{if(P(g))return new Promise((A,F)=>{var G=new XMLHttpRequest;G.open("GET",g,!0),G.responseType="arraybuffer",G.onload=()=>{G.status==200||G.status==0&&G.response?A(G.response):F(G.status)},G.onerror=F,G.send(null)});var E=await fetch(g,{credentials:"same-origin"});if(E.ok)return E.arrayBuffer();throw Error(E.status+" : "+E.url)});var x=c.print||console.log.bind(console),N=c.printErr||console.error.bind(console);Object.assign(c,m),m=null,c.thisProgram&&(y=c.thisProgram);var C=c.wasmBinary,T,k=!1,D,R,I,z,O,U,W,$,M,P=g=>g.startsWith("file://");function B(){var g=T.buffer;c.HEAP8=R=new Int8Array(g),c.HEAP16=z=new Int16Array(g),c.HEAPU8=I=new Uint8Array(g),c.HEAPU16=new Uint16Array(g),c.HEAP32=O=new Int32Array(g),c.HEAPU32=U=new Uint32Array(g),c.HEAPF32=W=new Float32Array(g),c.HEAPF64=M=new Float64Array(g),c.HEAP64=$=new BigInt64Array(g),c.HEAPU64=new BigUint64Array(g)}var V=0,q=null;function Q(g){var E;throw(E=c.onAbort)==null||E.call(c,g),g="Aborted("+g+")",N(g),k=!0,new WebAssembly.RuntimeError(g+". Build with -sASSERTIONS for more info.")}var H;async function K(g){if(!C)try{var E=await _(g);return new Uint8Array(E)}catch{}if(g==H&&C)g=new Uint8Array(C);else if(b)g=b(g);else throw"both async and sync fetching of the wasm failed";return g}async function Y(g,E){try{var A=await K(g);return await WebAssembly.instantiate(A,E)}catch(F){N(`failed to asynchronously prepare wasm: ${F}`),Q(F)}}async function ce(g){var E=H;if(!C&&typeof WebAssembly.instantiateStreaming=="function"&&!P(E)&&!f)try{var A=fetch(E,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(A,g)}catch(F){N(`wasm streaming compile failed: ${F}`),N("falling back to ArrayBuffer instantiation")}return Y(E,g)}class me{constructor(E){xi(this,"name","ExitStatus");this.message=`Program terminated with exit(${E})`,this.status=E}}var fe=g=>{for(;0<g.length;)g.shift()(c)},ie=[],he=[],oe=()=>{var g=c.preRun.shift();he.unshift(g)};function re(g,E="i8"){switch(E.endsWith("*")&&(E="*"),E){case"i1":return R[g];case"i8":return R[g];case"i16":return z[g>>1];case"i32":return O[g>>2];case"i64":return $[g>>3];case"float":return W[g>>2];case"double":return M[g>>3];case"*":return U[g>>2];default:Q(`invalid type for getValue: ${E}`)}}var le=c.noExitRuntime||!0;function Z(g){var E="i32";switch(E.endsWith("*")&&(E="*"),E){case"i1":R[g]=0;break;case"i8":R[g]=0;break;case"i16":z[g>>1]=0;break;case"i32":O[g>>2]=0;break;case"i64":$[g>>3]=BigInt(0);break;case"float":W[g>>2]=0;break;case"double":M[g>>3]=0;break;case"*":U[g>>2]=0;break;default:Q(`invalid type for setValue: ${E}`)}}var ae=typeof TextDecoder<"u"?new TextDecoder:void 0,J=(g,E=0,A=NaN)=>{var F=E+A;for(A=E;g[A]&&!(A>=F);)++A;if(16<A-E&&g.buffer&&ae)return ae.decode(g.subarray(E,A));for(F="";E<A;){var G=g[E++];if(G&128){var te=g[E++]&63;if((G&224)==192)F+=String.fromCharCode((G&31)<<6|te);else{var se=g[E++]&63;G=(G&240)==224?(G&15)<<12|te<<6|se:(G&7)<<18|te<<12|se<<6|g[E++]&63,65536>G?F+=String.fromCharCode(G):(G-=65536,F+=String.fromCharCode(55296|G>>10,56320|G&1023))}}else F+=String.fromCharCode(G)}return F},ge=(g,E)=>g?J(I,g,E):"",we=(g,E)=>{for(var A=0,F=g.length-1;0<=F;F--){var G=g[F];G==="."?g.splice(F,1):G===".."?(g.splice(F,1),A++):A&&(g.splice(F,1),A--)}if(E)for(;A;A--)g.unshift("..");return g},Je=g=>{var E=g.charAt(0)==="/",A=g.slice(-1)==="/";return(g=we(g.split("/").filter(F=>!!F),!E).join("/"))||E||(g="."),g&&A&&(g+="/"),(E?"/":"")+g},at=g=>{var E=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(g).slice(1);return g=E[0],E=E[1],!g&&!E?".":(E&&(E=E.slice(0,-1)),g+E)},Ne=g=>g&&g.match(/([^\/]+|\/)\/*$/)[1],yt=()=>{if(f){var g=_f;return E=>g.randomFillSync(E)}return E=>crypto.getRandomValues(E)},rt=g=>{(rt=yt())(g)},rn=(...g)=>{for(var E="",A=!1,F=g.length-1;-1<=F&&!A;F--){if(A=0<=F?g[F]:"/",typeof A!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!A)return"";E=A+"/"+E,A=A.charAt(0)==="/"}return E=we(E.split("/").filter(G=>!!G),!A).join("/"),(A?"/":"")+E||"."},Mt=[],_n=g=>{for(var E=0,A=0;A<g.length;++A){var F=g.charCodeAt(A);127>=F?E++:2047>=F?E+=2:55296<=F&&57343>=F?(E+=4,++A):E+=3}return E},St=(g,E,A,F)=>{if(!(0<F))return 0;var G=A;F=A+F-1;for(var te=0;te<g.length;++te){var se=g.charCodeAt(te);if(55296<=se&&57343>=se){var ke=g.charCodeAt(++te);se=65536+((se&1023)<<10)|ke&1023}if(127>=se){if(A>=F)break;E[A++]=se}else{if(2047>=se){if(A+1>=F)break;E[A++]=192|se>>6}else{if(65535>=se){if(A+2>=F)break;E[A++]=224|se>>12}else{if(A+3>=F)break;E[A++]=240|se>>18,E[A++]=128|se>>12&63}E[A++]=128|se>>6&63}E[A++]=128|se&63}}return E[A]=0,A-G},jn=(g,E)=>{var A=Array(_n(g)+1);return g=St(g,A,0,A.length),E&&(A.length=g),A},yi=[];function Ea(g,E){yi[g]={input:[],output:[],cb:E},hs(g,Sa)}var Sa={open(g){var E=yi[g.node.rdev];if(!E)throw new ve(43);g.tty=E,g.seekable=!1},close(g){g.tty.cb.fsync(g.tty)},fsync(g){g.tty.cb.fsync(g.tty)},read(g,E,A,F){if(!g.tty||!g.tty.cb.xb)throw new ve(60);for(var G=0,te=0;te<F;te++){try{var se=g.tty.cb.xb(g.tty)}catch{throw new ve(29)}if(se===void 0&&G===0)throw new ve(6);if(se==null)break;G++,E[A+te]=se}return G&&(g.node.atime=Date.now()),G},write(g,E,A,F){if(!g.tty||!g.tty.cb.qb)throw new ve(60);try{for(var G=0;G<F;G++)g.tty.cb.qb(g.tty,E[A+G])}catch{throw new ve(29)}return F&&(g.node.mtime=g.node.ctime=Date.now()),G}},us={xb(){e:{if(!Mt.length){var g=null;if(f){var E=Buffer.alloc(256),A=0,F=process.stdin.fd;try{A=w.readSync(F,E,0,256)}catch(G){if(G.toString().includes("EOF"))A=0;else throw G}0<A&&(g=E.slice(0,A).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(g=window.prompt("Input: "),g!==null&&(g+=`
`));if(!g){g=null;break e}Mt=jn(g,!0)}g=Mt.shift()}return g},qb(g,E){E===null||E===10?(x(J(g.output)),g.output=[]):E!=0&&g.output.push(E)},fsync(g){var E;0<((E=g.output)==null?void 0:E.length)&&(x(J(g.output)),g.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},vi={qb(g,E){E===null||E===10?(N(J(g.output)),g.output=[]):E!=0&&g.output.push(E)},fsync(g){var E;0<((E=g.output)==null?void 0:E.length)&&(N(J(g.output)),g.output=[])}},Pe={Wa:null,Xa(){return Pe.createNode(null,"/",16895,0)},createNode(g,E,A,F){if((A&61440)===24576||(A&61440)===4096)throw new ve(63);return Pe.Wa||(Pe.Wa={dir:{node:{Ta:Pe.La.Ta,Ua:Pe.La.Ua,lookup:Pe.La.lookup,hb:Pe.La.hb,rename:Pe.La.rename,unlink:Pe.La.unlink,rmdir:Pe.La.rmdir,readdir:Pe.La.readdir,symlink:Pe.La.symlink},stream:{Va:Pe.Ma.Va}},file:{node:{Ta:Pe.La.Ta,Ua:Pe.La.Ua},stream:{Va:Pe.Ma.Va,read:Pe.Ma.read,write:Pe.Ma.write,ib:Pe.Ma.ib,jb:Pe.Ma.jb}},link:{node:{Ta:Pe.La.Ta,Ua:Pe.La.Ua,readlink:Pe.La.readlink},stream:{}},ub:{node:{Ta:Pe.La.Ta,Ua:Pe.La.Ua},stream:Iu}}),A=bl(g,E,A,F),bn(A.mode)?(A.La=Pe.Wa.dir.node,A.Ma=Pe.Wa.dir.stream,A.Na={}):(A.mode&61440)===32768?(A.La=Pe.Wa.file.node,A.Ma=Pe.Wa.file.stream,A.Ra=0,A.Na=null):(A.mode&61440)===40960?(A.La=Pe.Wa.link.node,A.Ma=Pe.Wa.link.stream):(A.mode&61440)===8192&&(A.La=Pe.Wa.ub.node,A.Ma=Pe.Wa.ub.stream),A.atime=A.mtime=A.ctime=Date.now(),g&&(g.Na[E]=A,g.atime=g.mtime=g.ctime=A.atime),A},Sb(g){return g.Na?g.Na.subarray?g.Na.subarray(0,g.Ra):new Uint8Array(g.Na):new Uint8Array(0)},La:{Ta(g){var E={};return E.dev=(g.mode&61440)===8192?g.id:1,E.ino=g.id,E.mode=g.mode,E.nlink=1,E.uid=0,E.gid=0,E.rdev=g.rdev,bn(g.mode)?E.size=4096:(g.mode&61440)===32768?E.size=g.Ra:(g.mode&61440)===40960?E.size=g.link.length:E.size=0,E.atime=new Date(g.atime),E.mtime=new Date(g.mtime),E.ctime=new Date(g.ctime),E.blksize=4096,E.blocks=Math.ceil(E.size/E.blksize),E},Ua(g,E){for(var A of["mode","atime","mtime","ctime"])E[A]!=null&&(g[A]=E[A]);E.size!==void 0&&(E=E.size,g.Ra!=E&&(E==0?(g.Na=null,g.Ra=0):(A=g.Na,g.Na=new Uint8Array(E),A&&g.Na.set(A.subarray(0,Math.min(E,g.Ra))),g.Ra=E)))},lookup(){throw Pe.vb},hb(g,E,A,F){return Pe.createNode(g,E,A,F)},rename(g,E,A){try{var F=wo(E,A)}catch{}if(F){if(bn(g.mode))for(var G in F.Na)throw new ve(55);Ca(F)}delete g.parent.Na[g.name],E.Na[A]=g,g.name=A,E.ctime=E.mtime=g.parent.ctime=g.parent.mtime=Date.now()},unlink(g,E){delete g.Na[E],g.ctime=g.mtime=Date.now()},rmdir(g,E){var A=wo(g,E),F;for(F in A.Na)throw new ve(55);delete g.Na[E],g.ctime=g.mtime=Date.now()},readdir(g){return[".","..",...Object.keys(g.Na)]},symlink(g,E,A){return g=Pe.createNode(g,E,41471,0),g.link=A,g},readlink(g){if((g.mode&61440)!==40960)throw new ve(28);return g.link}},Ma:{read(g,E,A,F,G){var te=g.node.Na;if(G>=g.node.Ra)return 0;if(g=Math.min(g.node.Ra-G,F),8<g&&te.subarray)E.set(te.subarray(G,G+g),A);else for(F=0;F<g;F++)E[A+F]=te[G+F];return g},write(g,E,A,F,G,te){if(E.buffer===R.buffer&&(te=!1),!F)return 0;if(g=g.node,g.mtime=g.ctime=Date.now(),E.subarray&&(!g.Na||g.Na.subarray)){if(te)return g.Na=E.subarray(A,A+F),g.Ra=F;if(g.Ra===0&&G===0)return g.Na=E.slice(A,A+F),g.Ra=F;if(G+F<=g.Ra)return g.Na.set(E.subarray(A,A+F),G),F}te=G+F;var se=g.Na?g.Na.length:0;if(se>=te||(te=Math.max(te,se*(1048576>se?2:1.125)>>>0),se!=0&&(te=Math.max(te,256)),se=g.Na,g.Na=new Uint8Array(te),0<g.Ra&&g.Na.set(se.subarray(0,g.Ra),0)),g.Na.subarray&&E.subarray)g.Na.set(E.subarray(A,A+F),G);else for(te=0;te<F;te++)g.Na[G+te]=E[A+te];return g.Ra=Math.max(g.Ra,G+F),F},Va(g,E,A){if(A===1?E+=g.position:A===2&&(g.node.mode&61440)===32768&&(E+=g.node.Ra),0>E)throw new ve(28);return E},ib(g,E,A,F,G){if((g.node.mode&61440)!==32768)throw new ve(43);if(g=g.node.Na,G&2||!g||g.buffer!==R.buffer){G=!0,F=65536*Math.ceil(E/65536);var te=P0(65536,F);if(te&&I.fill(0,te,te+F),F=te,!F)throw new ve(48);g&&((0<A||A+E<g.length)&&(g.subarray?g=g.subarray(A,A+E):g=Array.prototype.slice.call(g,A,A+E)),R.set(g,F))}else G=!1,F=g.byteOffset;return{Kb:F,Ab:G}},jb(g,E,A,F){return Pe.Ma.write(g,E,0,F,A,!1),0}}},Wn=(g,E)=>{var A=0;return g&&(A|=365),E&&(A|=146),A},lr=null,_i={},cr=[],ds=1,wn=null,yo=!1,xa=!0,Wr={},ve=class{constructor(g){xi(this,"name","ErrnoError");this.Pa=g}},fs=class{constructor(){xi(this,"gb",{});xi(this,"node",null)}get flags(){return this.gb.flags}set flags(g){this.gb.flags=g}get position(){return this.gb.position}set position(g){this.gb.position=g}},ot=class{constructor(g,E,A,F){xi(this,"La",{});xi(this,"Ma",{});xi(this,"ab",null);g||(g=this),this.parent=g,this.Xa=g.Xa,this.id=ds++,this.name=E,this.mode=A,this.rdev=F,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(g){g?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(g){g?this.mode|=146:this.mode&=-147}};function vt(g,E={}){if(!g)throw new ve(44);E.nb??(E.nb=!0),g.charAt(0)==="/"||(g="//"+g);var A=0;e:for(;40>A;A++){g=g.split("/").filter(ke=>!!ke);for(var F=lr,G="/",te=0;te<g.length;te++){var se=te===g.length-1;if(se&&E.parent)break;if(g[te]!==".")if(g[te]==="..")G=at(G),F=F.parent;else{G=Je(G+"/"+g[te]);try{F=wo(F,g[te])}catch(ke){if((ke==null?void 0:ke.Pa)===44&&se&&E.Jb)return{path:G};throw ke}if(!F.ab||se&&!E.nb||(F=F.ab.root),(F.mode&61440)===40960&&(!se||E.$a)){if(!F.La.readlink)throw new ve(52);F=F.La.readlink(F),F.charAt(0)==="/"||(F=at(G)+"/"+F),g=F+"/"+g.slice(te+1).join("/");continue e}}}return{path:G,node:F}}throw new ve(32)}function vo(g){for(var E;;){if(g===g.parent)return g=g.Xa.zb,E?g[g.length-1]!=="/"?`${g}/${E}`:g+E:g;E=E?`${g.name}/${E}`:g.name,g=g.parent}}function _o(g,E){for(var A=0,F=0;F<E.length;F++)A=(A<<5)-A+E.charCodeAt(F)|0;return(g+A>>>0)%wn.length}function Ca(g){var E=_o(g.parent.id,g.name);if(wn[E]===g)wn[E]=g.bb;else for(E=wn[E];E;){if(E.bb===g){E.bb=g.bb;break}E=E.bb}}function wo(g,E){var A=bn(g.mode)?(A=Gn(g,"x"))?A:g.La.lookup?0:2:54;if(A)throw new ve(A);for(A=wn[_o(g.id,E)];A;A=A.bb){var F=A.name;if(A.parent.id===g.id&&F===E)return A}return g.La.lookup(g,E)}function bl(g,E,A,F){return g=new ot(g,E,A,F),E=_o(g.parent.id,g.name),g.bb=wn[E],wn[E]=g}function bn(g){return(g&61440)===16384}function ur(g){var E=["r","w","rw"][g&3];return g&512&&(E+="w"),E}function Gn(g,E){if(xa)return 0;if(!E.includes("r")||g.mode&292){if(E.includes("w")&&!(g.mode&146)||E.includes("x")&&!(g.mode&73))return 2}else return 2;return 0}function El(g,E){if(!bn(g.mode))return 54;try{return wo(g,E),20}catch{}return Gn(g,"wx")}function Sl(g,E,A){try{var F=wo(g,E)}catch(G){return G.Pa}if(g=Gn(g,"wx"))return g;if(A){if(!bn(F.mode))return 54;if(F===F.parent||vo(F)==="/")return 10}else if(bn(F.mode))return 31;return 0}function wi(g){if(!g)throw new ve(63);return g}function on(g){if(g=cr[g],!g)throw new ve(8);return g}function Er(g,E=-1){if(g=Object.assign(new fs,g),E==-1)e:{for(E=0;4096>=E;E++)if(!cr[E])break e;throw new ve(33)}return g.fd=E,cr[E]=g}function Ru(g,E=-1){var A,F;return g=Er(g,E),(F=(A=g.Ma)==null?void 0:A.Rb)==null||F.call(A,g),g}function ps(g,E,A){var F=g==null?void 0:g.Ma.Ua;g=F?g:E,F??(F=E.La.Ua),wi(F),F(g,A)}var Iu={open(g){var E,A;g.Ma=_i[g.node.rdev].Ma,(A=(E=g.Ma).open)==null||A.call(E,g)},Va(){throw new ve(70)}};function hs(g,E){_i[g]={Ma:E}}function Lu(g,E){var A=E==="/";if(A&&lr)throw new ve(10);if(!A&&E){var F=vt(E,{nb:!1});if(E=F.path,F=F.node,F.ab)throw new ve(10);if(!bn(F.mode))throw new ve(54)}E={type:g,Wb:{},zb:E,Ib:[]},g=g.Xa(E),g.Xa=E,E.root=g,A?lr=g:F&&(F.ab=E,F.Xa&&F.Xa.Ib.push(E))}function Te(g,E,A){var F=vt(g,{parent:!0}).node;if(g=Ne(g),!g)throw new ve(28);if(g==="."||g==="..")throw new ve(20);var G=El(F,g);if(G)throw new ve(G);if(!F.La.hb)throw new ve(63);return F.La.hb(F,g,E,A)}function X(g,E=438){return Te(g,E&4095|32768,0)}function pe(g,E=511){return Te(g,E&1023|16384,0)}function Ee(g,E,A){typeof A>"u"&&(A=E,E=438),Te(g,E|8192,A)}function it(g,E){if(!rn(g))throw new ve(44);var A=vt(E,{parent:!0}).node;if(!A)throw new ve(44);E=Ne(E);var F=El(A,E);if(F)throw new ve(F);if(!A.La.symlink)throw new ve(63);A.La.symlink(A,E,g)}function Yt(g){var E=vt(g,{parent:!0}).node;g=Ne(g);var A=wo(E,g),F=Sl(E,g,!0);if(F)throw new ve(F);if(!E.La.rmdir)throw new ve(63);if(A.ab)throw new ve(10);E.La.rmdir(E,g),Ca(A)}function kt(g){var E=vt(g,{parent:!0}).node;if(!E)throw new ve(44);g=Ne(g);var A=wo(E,g),F=Sl(E,g,!1);if(F)throw new ve(F);if(!E.La.unlink)throw new ve(63);if(A.ab)throw new ve(10);E.La.unlink(E,g),Ca(A)}function zt(g,E){return g=vt(g,{$a:!E}).node,wi(g.La.Ta)(g)}function Sr(g,E,A,F){ps(g,E,{mode:A&4095|E.mode&-4096,ctime:Date.now(),Fb:F})}function Gr(g,E){g=typeof g=="string"?vt(g,{$a:!0}).node:g,Sr(null,g,E)}function ms(g,E,A){if(bn(E.mode))throw new ve(31);if((E.mode&61440)!==32768)throw new ve(28);var F=Gn(E,"w");if(F)throw new ve(F);ps(g,E,{size:A,timestamp:Date.now()})}function xt(g,E,A=438){if(g==="")throw new ve(44);if(typeof E=="string"){var F={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[E];if(typeof F>"u")throw Error(`Unknown file open mode: ${E}`);E=F}if(A=E&64?A&4095|32768:0,typeof g=="object")F=g;else{var G=g.endsWith("/");g=vt(g,{$a:!(E&131072),Jb:!0}),F=g.node,g=g.path}var te=!1;if(E&64)if(F){if(E&128)throw new ve(20)}else{if(G)throw new ve(31);F=Te(g,A|511,0),te=!0}if(!F)throw new ve(44);if((F.mode&61440)===8192&&(E&=-513),E&65536&&!bn(F.mode))throw new ve(54);if(!te&&(G=F?(F.mode&61440)===40960?32:bn(F.mode)&&(ur(E)!=="r"||E&576)?31:Gn(F,ur(E)):44))throw new ve(G);return E&512&&!te&&(G=F,G=typeof G=="string"?vt(G,{$a:!0}).node:G,ms(null,G,0)),E&=-131713,G=Er({node:F,path:vo(F),flags:E,seekable:!0,position:0,Ma:F.Ma,Lb:[],error:!1}),G.Ma.open&&G.Ma.open(G),te&&Gr(F,A&511),!c.logReadFiles||E&1||g in Wr||(Wr[g]=1),G}function gs(g){if(g.fd===null)throw new ve(8);g.ob&&(g.ob=null);try{g.Ma.close&&g.Ma.close(g)}catch(E){throw E}finally{cr[g.fd]=null}g.fd=null}function xl(g,E,A){if(g.fd===null)throw new ve(8);if(!g.seekable||!g.Ma.Va)throw new ve(70);if(A!=0&&A!=1&&A!=2)throw new ve(28);g.position=g.Ma.Va(g,E,A),g.Lb=[]}function R0(g,E,A,F,G){if(0>F||0>G)throw new ve(28);if(g.fd===null)throw new ve(8);if((g.flags&2097155)===1)throw new ve(8);if(bn(g.node.mode))throw new ve(31);if(!g.Ma.read)throw new ve(28);var te=typeof G<"u";if(!te)G=g.position;else if(!g.seekable)throw new ve(70);return E=g.Ma.read(g,E,A,F,G),te||(g.position+=E),E}function I0(g,E,A,F,G){if(0>F||0>G)throw new ve(28);if(g.fd===null)throw new ve(8);if(!(g.flags&2097155))throw new ve(8);if(bn(g.node.mode))throw new ve(31);if(!g.Ma.write)throw new ve(28);g.seekable&&g.flags&1024&&xl(g,0,2);var te=typeof G<"u";if(!te)G=g.position;else if(!g.seekable)throw new ve(70);return E=g.Ma.write(g,E,A,F,G,void 0),te||(g.position+=E),E}function _k(g){var E,A=xt(g,A||0);g=zt(g).size;var F=new Uint8Array(g);return R0(A,F,0,g,0),E=F,gs(A),E}function bi(g,E,A){g=Je("/dev/"+g);var F=Wn(!!E,!!A);bi.yb??(bi.yb=64);var G=bi.yb++<<8|0;hs(G,{open(te){te.seekable=!1},close(){var te;(te=A==null?void 0:A.buffer)!=null&&te.length&&A(10)},read(te,se,ke,Ue){for(var Be=0,Dt=0;Dt<Ue;Dt++){try{var Hn=E()}catch{throw new ve(29)}if(Hn===void 0&&Be===0)throw new ve(6);if(Hn==null)break;Be++,se[ke+Dt]=Hn}return Be&&(te.node.atime=Date.now()),Be},write(te,se,ke,Ue){for(var Be=0;Be<Ue;Be++)try{A(se[ke+Be])}catch{throw new ve(29)}return Ue&&(te.node.mtime=te.node.ctime=Date.now()),Be}}),Ee(g,F,G)}var _t={};function Ta(g,E,A){if(E.charAt(0)==="/")return E;if(g=g===-100?"/":on(g).path,E.length==0){if(!A)throw new ve(44);return g}return g+"/"+E}function Ou(g,E){O[g>>2]=E.dev,O[g+4>>2]=E.mode,U[g+8>>2]=E.nlink,O[g+12>>2]=E.uid,O[g+16>>2]=E.gid,O[g+20>>2]=E.rdev,$[g+24>>3]=BigInt(E.size),O[g+32>>2]=4096,O[g+36>>2]=E.blocks;var A=E.atime.getTime(),F=E.mtime.getTime(),G=E.ctime.getTime();return $[g+40>>3]=BigInt(Math.floor(A/1e3)),U[g+48>>2]=A%1e3*1e6,$[g+56>>3]=BigInt(Math.floor(F/1e3)),U[g+64>>2]=F%1e3*1e6,$[g+72>>3]=BigInt(Math.floor(G/1e3)),U[g+80>>2]=G%1e3*1e6,$[g+88>>3]=BigInt(E.ino),0}var Pu=void 0,Mu=()=>{var g=O[+Pu>>2];return Pu+=4,g},Dp=0,wk=[0,31,60,91,121,152,182,213,244,274,305,335],bk=[0,31,59,90,120,151,181,212,243,273,304,334],Cl={},L0=g=>{var E;D=g,le||0<Dp||((E=c.onExit)==null||E.call(c,g),k=!0),v(g,new me(g))},Ek=g=>{if(!k)try{if(g(),!(le||0<Dp))try{D=g=D,L0(g)}catch(E){E instanceof me||E=="unwind"||v(1,E)}}catch(E){E instanceof me||E=="unwind"||v(1,E)}},Fp={},O0=()=>{if(!$p){var g={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"},E;for(E in Fp)Fp[E]===void 0?delete g[E]:g[E]=Fp[E];var A=[];for(E in g)A.push(`${E}=${g[E]}`);$p=A}return $p},$p,Bp=g=>{var E=_n(g)+1,A=Si(E);return St(g,I,A,E),A},Sk=(g,E,A,F)=>{var G={string:Be=>{var Dt=0;return Be!=null&&Be!==0&&(Dt=Bp(Be)),Dt},array:Be=>{var Dt=Si(Be.length);return R.set(Be,Dt),Dt}};g=c["_"+g];var te=[],se=0;if(F)for(var ke=0;ke<F.length;ke++){var Ue=G[A[ke]];Ue?(se===0&&(se=kl()),te[ke]=Ue(F[ke])):te[ke]=F[ke]}return A=g(...te),A=function(Be){return se!==0&&Nl(se),E==="string"?Be?J(I,Be):"":E==="boolean"?!!Be:Be}(A)},Du=0,Fu=(g,E)=>(E=E==1?Si(g.length):Up(g.length),g.subarray||g.slice||(g=new Uint8Array(g)),I.set(g,E),E),Na,Vp=[],Ho,Ei=g=>{Na.delete(Ho.get(g)),Ho.set(g,null),Vp.push(g)},Tl=(g,E)=>{if(!Na){Na=new WeakMap;var A=Ho.length;if(Na)for(var F=0;F<0+A;F++){var G=Ho.get(F);G&&Na.set(G,F)}}if(A=Na.get(g)||0)return A;if(Vp.length)A=Vp.pop();else{try{Ho.grow(1)}catch(Ue){throw Ue instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Ue}A=Ho.length-1}try{Ho.set(A,g)}catch(Ue){if(!(Ue instanceof TypeError))throw Ue;if(typeof WebAssembly.Function=="function"){var te=WebAssembly.Function;F={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},G={parameters:[],results:E[0]=="v"?[]:[F[E[0]]]};for(var se=1;se<E.length;++se)G.parameters.push(F[E[se]]);E=new te(G,g)}else{F=[1],G=E.slice(0,1),E=E.slice(1),se={i:127,p:127,j:126,f:125,d:124,e:111},F.push(96);var ke=E.length;128>ke?F.push(ke):F.push(ke%128|128,ke>>7);for(te of E)F.push(se[te]);G=="v"?F.push(0):F.push(1,se[G]),E=[0,97,115,109,1,0,0,0,1],te=F.length,128>te?E.push(te):E.push(te%128|128,te>>7),E.push(...F),E.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),E=new WebAssembly.Module(new Uint8Array(E)),E=new WebAssembly.Instance(E,{e:{f:g}}).exports.f}Ho.set(A,E)}return Na.set(g,A),A};wn=Array(4096),Lu(Pe,"/"),pe("/tmp"),pe("/home"),pe("/home/web_user"),function(){pe("/dev"),hs(259,{read:()=>0,write:(F,G,te,se)=>se,Va:()=>0}),Ee("/dev/null",259),Ea(1280,us),Ea(1536,vi),Ee("/dev/tty",1280),Ee("/dev/tty1",1536);var g=new Uint8Array(1024),E=0,A=()=>(E===0&&(rt(g),E=g.byteLength),g[--E]);bi("random",A),bi("urandom",A),pe("/dev/shm"),pe("/dev/shm/tmp")}(),function(){pe("/proc");var g=pe("/proc/self");pe("/proc/self/fd"),Lu({Xa(){var E=bl(g,"fd",16895,73);return E.Ma={Va:Pe.Ma.Va},E.La={lookup(A,F){A=+F;var G=on(A);return A={parent:null,Xa:{zb:"fake"},La:{readlink:()=>G.path},id:A+1},A.parent=A},readdir(){return Array.from(cr.entries()).filter(([,A])=>A).map(([A])=>A.toString())}},E}},"/proc/self/fd")}(),Pe.vb=new ve(44),Pe.vb.stack="<generic error, no stack>";var xk={a:(g,E,A,F)=>Q(`Assertion failed: ${g?J(I,g):""}, at: `+[E?E?J(I,E):"":"unknown filename",A,F?F?J(I,F):"":"unknown function"]),i:function(g,E){try{return g=g?J(I,g):"",Gr(g,E),0}catch(A){if(typeof _t>"u"||A.name!=="ErrnoError")throw A;return-A.Pa}},L:function(g,E,A){try{if(E=E?J(I,E):"",E=Ta(g,E),A&-8)return-28;var F=vt(E,{$a:!0}).node;return F?(g="",A&4&&(g+="r"),A&2&&(g+="w"),A&1&&(g+="x"),g&&Gn(F,g)?-2:0):-44}catch(G){if(typeof _t>"u"||G.name!=="ErrnoError")throw G;return-G.Pa}},j:function(g,E){try{var A=on(g);return Sr(A,A.node,E,!1),0}catch(F){if(typeof _t>"u"||F.name!=="ErrnoError")throw F;return-F.Pa}},h:function(g){try{var E=on(g);return ps(E,E.node,{timestamp:Date.now(),Fb:!1}),0}catch(A){if(typeof _t>"u"||A.name!=="ErrnoError")throw A;return-A.Pa}},b:function(g,E,A){Pu=A;try{var F=on(g);switch(E){case 0:var G=Mu();if(0>G)break;for(;cr[G];)G++;return Ru(F,G).fd;case 1:case 2:return 0;case 3:return F.flags;case 4:return G=Mu(),F.flags|=G,0;case 12:return G=Mu(),z[G+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(te){if(typeof _t>"u"||te.name!=="ErrnoError")throw te;return-te.Pa}},g:function(g,E){try{var A=on(g),F=A.node,G=A.Ma.Ta;g=G?A:F,G??(G=F.La.Ta),wi(G);var te=G(g);return Ou(E,te)}catch(se){if(typeof _t>"u"||se.name!=="ErrnoError")throw se;return-se.Pa}},H:function(g,E){E=-9007199254740992>E||9007199254740992<E?NaN:Number(E);try{if(isNaN(E))return 61;var A=on(g);if(0>E||!(A.flags&2097155))throw new ve(28);return ms(A,A.node,E),0}catch(F){if(typeof _t>"u"||F.name!=="ErrnoError")throw F;return-F.Pa}},G:function(g,E){try{if(E===0)return-28;var A=_n("/")+1;return E<A?-68:(St("/",I,g,E),A)}catch(F){if(typeof _t>"u"||F.name!=="ErrnoError")throw F;return-F.Pa}},K:function(g,E){try{return g=g?J(I,g):"",Ou(E,zt(g,!0))}catch(A){if(typeof _t>"u"||A.name!=="ErrnoError")throw A;return-A.Pa}},C:function(g,E,A){try{return E=E?J(I,E):"",E=Ta(g,E),pe(E,A),0}catch(F){if(typeof _t>"u"||F.name!=="ErrnoError")throw F;return-F.Pa}},J:function(g,E,A,F){try{E=E?J(I,E):"";var G=F&256;return E=Ta(g,E,F&4096),Ou(A,G?zt(E,!0):zt(E))}catch(te){if(typeof _t>"u"||te.name!=="ErrnoError")throw te;return-te.Pa}},x:function(g,E,A,F){Pu=F;try{E=E?J(I,E):"",E=Ta(g,E);var G=F?Mu():0;return xt(E,A,G).fd}catch(te){if(typeof _t>"u"||te.name!=="ErrnoError")throw te;return-te.Pa}},v:function(g,E,A,F){try{if(E=E?J(I,E):"",E=Ta(g,E),0>=F)return-28;var G=vt(E).node;if(!G)throw new ve(44);if(!G.La.readlink)throw new ve(28);var te=G.La.readlink(G),se=Math.min(F,_n(te)),ke=R[A+se];return St(te,I,A,F+1),R[A+se]=ke,se}catch(Ue){if(typeof _t>"u"||Ue.name!=="ErrnoError")throw Ue;return-Ue.Pa}},u:function(g){try{return g=g?J(I,g):"",Yt(g),0}catch(E){if(typeof _t>"u"||E.name!=="ErrnoError")throw E;return-E.Pa}},f:function(g,E){try{return g=g?J(I,g):"",Ou(E,zt(g))}catch(A){if(typeof _t>"u"||A.name!=="ErrnoError")throw A;return-A.Pa}},r:function(g,E,A){try{return E=E?J(I,E):"",E=Ta(g,E),A===0?kt(E):A===512?Yt(E):Q("Invalid flags passed to unlinkat"),0}catch(F){if(typeof _t>"u"||F.name!=="ErrnoError")throw F;return-F.Pa}},q:function(g,E,A){try{E=E?J(I,E):"",E=Ta(g,E,!0);var F=Date.now(),G,te;if(A){var se=U[A>>2]+4294967296*O[A+4>>2],ke=O[A+8>>2];ke==1073741823?G=F:ke==1073741822?G=null:G=1e3*se+ke/1e6,A+=16,se=U[A>>2]+4294967296*O[A+4>>2],ke=O[A+8>>2],ke==1073741823?te=F:ke==1073741822?te=null:te=1e3*se+ke/1e6}else te=G=F;if((te??G)!==null){g=G;var Ue=vt(E,{$a:!0}).node;wi(Ue.La.Ua)(Ue,{atime:g,mtime:te})}return 0}catch(Be){if(typeof _t>"u"||Be.name!=="ErrnoError")throw Be;return-Be.Pa}},m:()=>Q(""),l:()=>{le=!1,Dp=0},A:function(g,E){g=-9007199254740992>g||9007199254740992<g?NaN:Number(g),g=new Date(1e3*g),O[E>>2]=g.getSeconds(),O[E+4>>2]=g.getMinutes(),O[E+8>>2]=g.getHours(),O[E+12>>2]=g.getDate(),O[E+16>>2]=g.getMonth(),O[E+20>>2]=g.getFullYear()-1900,O[E+24>>2]=g.getDay();var A=g.getFullYear();O[E+28>>2]=(A%4!==0||A%100===0&&A%400!==0?bk:wk)[g.getMonth()]+g.getDate()-1|0,O[E+36>>2]=-(60*g.getTimezoneOffset()),A=new Date(g.getFullYear(),6,1).getTimezoneOffset();var F=new Date(g.getFullYear(),0,1).getTimezoneOffset();O[E+32>>2]=(A!=F&&g.getTimezoneOffset()==Math.min(F,A))|0},y:function(g,E,A,F,G,te,se){G=-9007199254740992>G||9007199254740992<G?NaN:Number(G);try{if(isNaN(G))return 61;var ke=on(F);if(E&2&&!(A&2)&&(ke.flags&2097155)!==2)throw new ve(2);if((ke.flags&2097155)===1)throw new ve(2);if(!ke.Ma.ib)throw new ve(43);if(!g)throw new ve(28);var Ue=ke.Ma.ib(ke,g,G,E,A),Be=Ue.Kb;return O[te>>2]=Ue.Ab,U[se>>2]=Be,0}catch(Dt){if(typeof _t>"u"||Dt.name!=="ErrnoError")throw Dt;return-Dt.Pa}},z:function(g,E,A,F,G,te){te=-9007199254740992>te||9007199254740992<te?NaN:Number(te);try{var se=on(G);if(A&2){if(A=te,(se.node.mode&61440)!==32768)throw new ve(43);if(!(F&2)){var ke=I.slice(g,g+E);se.Ma.jb&&se.Ma.jb(se,ke,A,E,F)}}}catch(Ue){if(typeof _t>"u"||Ue.name!=="ErrnoError")throw Ue;return-Ue.Pa}},n:(g,E)=>{if(Cl[g]&&(clearTimeout(Cl[g].id),delete Cl[g]),!E)return 0;var A=setTimeout(()=>{delete Cl[g],Ek(()=>M0(g,performance.now()))},E);return Cl[g]={id:A,Xb:E},0},B:(g,E,A,F)=>{var G=new Date().getFullYear(),te=new Date(G,0,1).getTimezoneOffset();G=new Date(G,6,1).getTimezoneOffset(),U[g>>2]=60*Math.max(te,G),O[E>>2]=+(te!=G),E=se=>{var ke=Math.abs(se);return`UTC${0<=se?"-":"+"}${String(Math.floor(ke/60)).padStart(2,"0")}${String(ke%60).padStart(2,"0")}`},g=E(te),E=E(G),G<te?(St(g,I,A,17),St(E,I,F,17)):(St(g,I,F,17),St(E,I,A,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:g=>{var E=I.length;if(g>>>=0,2147483648<g)return!1;for(var A=1;4>=A;A*=2){var F=E*(1+.2/A);F=Math.min(F,g+100663296);e:{F=(Math.min(2147483648,65536*Math.ceil(Math.max(g,F)/65536))-T.buffer.byteLength+65535)/65536|0;try{T.grow(F),B();var G=1;break e}catch{}G=void 0}if(G)return!0}return!1},E:(g,E)=>{var A=0;return O0().forEach((F,G)=>{var te=E+A;for(G=U[g+4*G>>2]=te,te=0;te<F.length;++te)R[G++]=F.charCodeAt(te);R[G]=0,A+=F.length+1}),0},F:(g,E)=>{var A=O0();U[g>>2]=A.length;var F=0;return A.forEach(G=>F+=G.length+1),U[E>>2]=F,0},e:function(g){try{var E=on(g);return gs(E),0}catch(A){if(typeof _t>"u"||A.name!=="ErrnoError")throw A;return A.Pa}},p:function(g,E){try{var A=on(g);return R[E]=A.tty?2:bn(A.mode)?3:(A.mode&61440)===40960?7:4,z[E+2>>1]=0,$[E+8>>3]=BigInt(0),$[E+16>>3]=BigInt(0),0}catch(F){if(typeof _t>"u"||F.name!=="ErrnoError")throw F;return F.Pa}},w:function(g,E,A,F){try{e:{var G=on(g);g=E;for(var te,se=E=0;se<A;se++){var ke=U[g>>2],Ue=U[g+4>>2];g+=8;var Be=R0(G,R,ke,Ue,te);if(0>Be){var Dt=-1;break e}if(E+=Be,Be<Ue)break;typeof te<"u"&&(te+=Be)}Dt=E}return U[F>>2]=Dt,0}catch(Hn){if(typeof _t>"u"||Hn.name!=="ErrnoError")throw Hn;return Hn.Pa}},D:function(g,E,A,F){E=-9007199254740992>E||9007199254740992<E?NaN:Number(E);try{if(isNaN(E))return 61;var G=on(g);return xl(G,E,A),$[F>>3]=BigInt(G.position),G.ob&&E===0&&A===0&&(G.ob=null),0}catch(te){if(typeof _t>"u"||te.name!=="ErrnoError")throw te;return te.Pa}},I:function(g){var A;try{var E=on(g);return(A=E.Ma)!=null&&A.fsync?E.Ma.fsync(E):0}catch(F){if(typeof _t>"u"||F.name!=="ErrnoError")throw F;return F.Pa}},t:function(g,E,A,F){try{e:{var G=on(g);g=E;for(var te,se=E=0;se<A;se++){var ke=U[g>>2],Ue=U[g+4>>2];g+=8;var Be=I0(G,R,ke,Ue,te);if(0>Be){var Dt=-1;break e}if(E+=Be,Be<Ue)break;typeof te<"u"&&(te+=Be)}Dt=E}return U[F>>2]=Dt,0}catch(Hn){if(typeof _t>"u"||Hn.name!=="ErrnoError")throw Hn;return Hn.Pa}},k:L0},Re;(async function(){var A;function g(F){var G;return Re=F.exports,T=Re.M,B(),Ho=Re.O,V--,(G=c.monitorRunDependencies)==null||G.call(c,V),V==0&&q&&(F=q,q=null,F()),Re}V++,(A=c.monitorRunDependencies)==null||A.call(c,V);var E={a:xk};return c.instantiateWasm?new Promise(F=>{c.instantiateWasm(E,(G,te)=>{g(G),F(G.exports)})}):(H??(H=c.locateFile?c.locateFile("sql-wasm.wasm",S):S+"sql-wasm.wasm"),g((await ce(E)).instance))})(),c._sqlite3_free=g=>(c._sqlite3_free=Re.P)(g),c._sqlite3_value_text=g=>(c._sqlite3_value_text=Re.Q)(g),c._sqlite3_prepare_v2=(g,E,A,F,G)=>(c._sqlite3_prepare_v2=Re.R)(g,E,A,F,G),c._sqlite3_step=g=>(c._sqlite3_step=Re.S)(g),c._sqlite3_reset=g=>(c._sqlite3_reset=Re.T)(g),c._sqlite3_exec=(g,E,A,F,G)=>(c._sqlite3_exec=Re.U)(g,E,A,F,G),c._sqlite3_finalize=g=>(c._sqlite3_finalize=Re.V)(g),c._sqlite3_column_name=(g,E)=>(c._sqlite3_column_name=Re.W)(g,E),c._sqlite3_column_text=(g,E)=>(c._sqlite3_column_text=Re.X)(g,E),c._sqlite3_column_type=(g,E)=>(c._sqlite3_column_type=Re.Y)(g,E),c._sqlite3_errmsg=g=>(c._sqlite3_errmsg=Re.Z)(g),c._sqlite3_clear_bindings=g=>(c._sqlite3_clear_bindings=Re._)(g),c._sqlite3_value_blob=g=>(c._sqlite3_value_blob=Re.$)(g),c._sqlite3_value_bytes=g=>(c._sqlite3_value_bytes=Re.aa)(g),c._sqlite3_value_double=g=>(c._sqlite3_value_double=Re.ba)(g),c._sqlite3_value_int=g=>(c._sqlite3_value_int=Re.ca)(g),c._sqlite3_value_type=g=>(c._sqlite3_value_type=Re.da)(g),c._sqlite3_result_blob=(g,E,A,F)=>(c._sqlite3_result_blob=Re.ea)(g,E,A,F),c._sqlite3_result_double=(g,E)=>(c._sqlite3_result_double=Re.fa)(g,E),c._sqlite3_result_error=(g,E,A)=>(c._sqlite3_result_error=Re.ga)(g,E,A),c._sqlite3_result_int=(g,E)=>(c._sqlite3_result_int=Re.ha)(g,E),c._sqlite3_result_int64=(g,E)=>(c._sqlite3_result_int64=Re.ia)(g,E),c._sqlite3_result_null=g=>(c._sqlite3_result_null=Re.ja)(g),c._sqlite3_result_text=(g,E,A,F)=>(c._sqlite3_result_text=Re.ka)(g,E,A,F),c._sqlite3_aggregate_context=(g,E)=>(c._sqlite3_aggregate_context=Re.la)(g,E),c._sqlite3_column_count=g=>(c._sqlite3_column_count=Re.ma)(g),c._sqlite3_data_count=g=>(c._sqlite3_data_count=Re.na)(g),c._sqlite3_column_blob=(g,E)=>(c._sqlite3_column_blob=Re.oa)(g,E),c._sqlite3_column_bytes=(g,E)=>(c._sqlite3_column_bytes=Re.pa)(g,E),c._sqlite3_column_double=(g,E)=>(c._sqlite3_column_double=Re.qa)(g,E),c._sqlite3_bind_blob=(g,E,A,F,G)=>(c._sqlite3_bind_blob=Re.ra)(g,E,A,F,G),c._sqlite3_bind_double=(g,E,A)=>(c._sqlite3_bind_double=Re.sa)(g,E,A),c._sqlite3_bind_int=(g,E,A)=>(c._sqlite3_bind_int=Re.ta)(g,E,A),c._sqlite3_bind_text=(g,E,A,F,G)=>(c._sqlite3_bind_text=Re.ua)(g,E,A,F,G),c._sqlite3_bind_parameter_index=(g,E)=>(c._sqlite3_bind_parameter_index=Re.va)(g,E),c._sqlite3_sql=g=>(c._sqlite3_sql=Re.wa)(g),c._sqlite3_normalized_sql=g=>(c._sqlite3_normalized_sql=Re.xa)(g),c._sqlite3_changes=g=>(c._sqlite3_changes=Re.ya)(g),c._sqlite3_close_v2=g=>(c._sqlite3_close_v2=Re.za)(g),c._sqlite3_create_function_v2=(g,E,A,F,G,te,se,ke,Ue)=>(c._sqlite3_create_function_v2=Re.Aa)(g,E,A,F,G,te,se,ke,Ue),c._sqlite3_update_hook=(g,E,A)=>(c._sqlite3_update_hook=Re.Ba)(g,E,A),c._sqlite3_open=(g,E)=>(c._sqlite3_open=Re.Ca)(g,E);var Up=c._malloc=g=>(Up=c._malloc=Re.Da)(g),$u=c._free=g=>($u=c._free=Re.Ea)(g);c._RegisterExtensionFunctions=g=>(c._RegisterExtensionFunctions=Re.Fa)(g);var P0=(g,E)=>(P0=Re.Ga)(g,E),M0=(g,E)=>(M0=Re.Ha)(g,E),Nl=g=>(Nl=Re.Ia)(g),Si=g=>(Si=Re.Ja)(g),kl=()=>(kl=Re.Ka)();c.stackSave=()=>kl(),c.stackRestore=g=>Nl(g),c.stackAlloc=g=>Si(g),c.cwrap=(g,E,A,F)=>{var G=!A||A.every(te=>te==="number"||te==="boolean");return E!=="string"&&G&&!F?c["_"+g]:(...te)=>Sk(g,E,A,te)},c.addFunction=Tl,c.removeFunction=Ei,c.UTF8ToString=ge,c.ALLOC_NORMAL=Du,c.allocate=Fu,c.allocateUTF8OnStack=Bp;function zp(){function g(){var G;if(c.calledRun=!0,!k){if(!c.noFSInit&&!yo){var E,A;yo=!0,F??(F=c.stdin),E??(E=c.stdout),A??(A=c.stderr),F?bi("stdin",F):it("/dev/tty","/dev/stdin"),E?bi("stdout",null,E):it("/dev/tty","/dev/stdout"),A?bi("stderr",null,A):it("/dev/tty1","/dev/stderr"),xt("/dev/stdin",0),xt("/dev/stdout",1),xt("/dev/stderr",1)}if(Re.N(),xa=!1,(G=c.onRuntimeInitialized)==null||G.call(c),c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;){var F=c.postRun.shift();ie.unshift(F)}fe(ie)}}if(0<V)q=zp;else{if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)oe();fe(he),0<V?q=zp:c.setStatus?(c.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>c.setStatus(""),1),g()},1)):g()}}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return zp(),s}),n)};e.exports=r,e.exports.default=r})(Ex);var PL=Ex.exports;const ML=iy(PL);let Ve=null,Os=null;const Sx="etymolog_db_v3";async function DL(){if(Ve)return Ve;Os=await ML(typeof window>"u"?void 0:{locateFile:n=>`https://sql.js.org/dist/${n}`});const t=localStorage.getItem(Sx);if(t)try{const n=Uint8Array.from(atob(t),r=>r.charCodeAt(0));Ve=new Os.Database(n),console.log("[DB] Loaded existing database from localStorage"),Ve&&xx(Ve)}catch(n){console.warn("[DB] Failed to load saved database, creating new one:",n);const r=new Os.Database;wf(r),Ve=r}else{const n=new Os.Database;wf(n),Ve=n,console.log("[DB] Created new database with v3 schema")}return Ve}function wf(e){e.run("PRAGMA foreign_keys = ON"),e.run(`
        CREATE TABLE IF NOT EXISTS glyphs (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            name TEXT NOT NULL,
            svg_data TEXT NOT NULL,
            category TEXT,
            notes TEXT,
            created_at TEXT DEFAULT (datetime('now')),
            updated_at TEXT DEFAULT (datetime('now'))
        )
    `),e.run(`
        CREATE INDEX IF NOT EXISTS idx_glyphs_name 
        ON glyphs(name)
    `),e.run(`
        CREATE TABLE IF NOT EXISTS graphemes (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            name TEXT NOT NULL,
            category TEXT,
            notes TEXT,
            created_at TEXT DEFAULT (datetime('now')),
            updated_at TEXT DEFAULT (datetime('now'))
        )
    `),e.run(`
        CREATE INDEX IF NOT EXISTS idx_graphemes_name 
        ON graphemes(name)
    `),e.run(`
        CREATE TABLE IF NOT EXISTS grapheme_glyphs (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            grapheme_id INTEGER NOT NULL,
            glyph_id INTEGER NOT NULL,
            position INTEGER NOT NULL DEFAULT 0,
            transform TEXT,
            FOREIGN KEY (grapheme_id) REFERENCES graphemes(id) ON DELETE CASCADE,
            FOREIGN KEY (glyph_id) REFERENCES glyphs(id) ON DELETE RESTRICT,
            UNIQUE(grapheme_id, glyph_id, position)
        )
    `),e.run(`
        CREATE INDEX IF NOT EXISTS idx_grapheme_glyphs_grapheme 
        ON grapheme_glyphs(grapheme_id)
    `),e.run(`
        CREATE INDEX IF NOT EXISTS idx_grapheme_glyphs_glyph 
        ON grapheme_glyphs(glyph_id)
    `),e.run(`
        CREATE INDEX IF NOT EXISTS idx_grapheme_glyphs_position 
        ON grapheme_glyphs(grapheme_id, position)
    `),e.run(`
        CREATE TABLE IF NOT EXISTS phonemes (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            grapheme_id INTEGER NOT NULL,
            phoneme TEXT NOT NULL,
            use_in_auto_spelling INTEGER DEFAULT 0,
            context TEXT,
            FOREIGN KEY (grapheme_id) REFERENCES graphemes(id) ON DELETE CASCADE
        )
    `),e.run(`
        CREATE INDEX IF NOT EXISTS idx_phonemes_grapheme_id 
        ON phonemes(grapheme_id)
    `),e.run(`
        CREATE TABLE IF NOT EXISTS lexicon (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            lemma TEXT NOT NULL,
            pronunciation TEXT,
            is_native INTEGER DEFAULT 1,
            auto_spell INTEGER DEFAULT 1,
            meaning TEXT,
            part_of_speech TEXT,
            notes TEXT,
            glyph_order TEXT DEFAULT '[]',
            needs_attention INTEGER DEFAULT 0,
            created_at TEXT DEFAULT (datetime('now')),
            updated_at TEXT DEFAULT (datetime('now'))
        )
    `),e.run(`
        CREATE INDEX IF NOT EXISTS idx_lexicon_lemma 
        ON lexicon(lemma)
    `),e.run(`
        CREATE INDEX IF NOT EXISTS idx_lexicon_is_native 
        ON lexicon(is_native)
    `),e.run(`
        CREATE TABLE IF NOT EXISTS lexicon_spelling (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            lexicon_id INTEGER NOT NULL,
            grapheme_id INTEGER NOT NULL,
            position INTEGER NOT NULL DEFAULT 0,
            FOREIGN KEY (lexicon_id) REFERENCES lexicon(id) ON DELETE CASCADE,
            FOREIGN KEY (grapheme_id) REFERENCES graphemes(id) ON DELETE RESTRICT,
            UNIQUE(lexicon_id, grapheme_id, position)
        )
    `),e.run(`
        CREATE INDEX IF NOT EXISTS idx_lexicon_spelling_lexicon 
        ON lexicon_spelling(lexicon_id)
    `),e.run(`
        CREATE INDEX IF NOT EXISTS idx_lexicon_spelling_position 
        ON lexicon_spelling(lexicon_id, position)
    `),e.run(`
        CREATE TABLE IF NOT EXISTS lexicon_ancestry (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            lexicon_id INTEGER NOT NULL,
            ancestor_id INTEGER NOT NULL,
            position INTEGER NOT NULL DEFAULT 0,
            ancestry_type TEXT DEFAULT 'derived',
            FOREIGN KEY (lexicon_id) REFERENCES lexicon(id) ON DELETE CASCADE,
            FOREIGN KEY (ancestor_id) REFERENCES lexicon(id) ON DELETE SET NULL,
            UNIQUE(lexicon_id, ancestor_id)
        )
    `),e.run(`
        CREATE INDEX IF NOT EXISTS idx_lexicon_ancestry_lexicon 
        ON lexicon_ancestry(lexicon_id)
    `),e.run(`
        CREATE INDEX IF NOT EXISTS idx_lexicon_ancestry_ancestor 
        ON lexicon_ancestry(ancestor_id)
    `),e.run(`
        CREATE TABLE IF NOT EXISTS lexicon_ancestry_closure (
            ancestor_id INTEGER NOT NULL,
            descendant_id INTEGER NOT NULL,
            depth INTEGER NOT NULL,
            PRIMARY KEY (ancestor_id, descendant_id),
            FOREIGN KEY (ancestor_id) REFERENCES lexicon(id) ON DELETE CASCADE,
            FOREIGN KEY (descendant_id) REFERENCES lexicon(id) ON DELETE CASCADE
        )
    `),e.run(`
        CREATE INDEX IF NOT EXISTS idx_closure_ancestor 
        ON lexicon_ancestry_closure(ancestor_id)
    `),e.run(`
        CREATE INDEX IF NOT EXISTS idx_closure_descendant 
        ON lexicon_ancestry_closure(descendant_id)
    `),console.log("[DB] Tables created successfully (v3 schema with category, lexicon, and closure)")}function xx(e){const t=e.exec(`
        SELECT name FROM sqlite_master 
        WHERE type='table' AND name='glyphs'
    `);if(t.length===0||t[0].values.length===0){console.log("[DB] Migrating from v1 to v3 schema..."),wf(e);return}const n=e.exec("PRAGMA table_info(glyphs)");n.length>0&&n[0].values.some(l=>l[1]==="category")||(console.log("[DB] Migrating from v2 to v3 schema (adding category columns)..."),e.run("ALTER TABLE glyphs ADD COLUMN category TEXT"),e.run("ALTER TABLE graphemes ADD COLUMN category TEXT"),console.log("[DB] Migration to v3 complete"));const o=e.exec(`
        SELECT name FROM sqlite_master
        WHERE type='table' AND name='lexicon'
    `);(o.length===0||o[0].values.length===0)&&(console.log("[DB] Creating lexicon tables..."),e.run(`
            CREATE TABLE IF NOT EXISTS lexicon (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                lemma TEXT NOT NULL,
                pronunciation TEXT,
                is_native INTEGER DEFAULT 1,
                auto_spell INTEGER DEFAULT 1,
                meaning TEXT,
                part_of_speech TEXT,
                notes TEXT,
                created_at TEXT DEFAULT (datetime('now')),
                updated_at TEXT DEFAULT (datetime('now'))
            )
        `),e.run(`
            CREATE INDEX IF NOT EXISTS idx_lexicon_lemma
            ON lexicon(lemma)
        `),e.run(`
            CREATE INDEX IF NOT EXISTS idx_lexicon_is_native
            ON lexicon(is_native)
        `),e.run(`
            CREATE TABLE IF NOT EXISTS lexicon_spelling (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                lexicon_id INTEGER NOT NULL,
                grapheme_id INTEGER NOT NULL,
                position INTEGER NOT NULL DEFAULT 0,
                FOREIGN KEY (lexicon_id) REFERENCES lexicon(id) ON DELETE CASCADE,
                FOREIGN KEY (grapheme_id) REFERENCES graphemes(id) ON DELETE RESTRICT,
                UNIQUE(lexicon_id, grapheme_id, position)
            )
        `),e.run(`
            CREATE INDEX IF NOT EXISTS idx_lexicon_spelling_lexicon
            ON lexicon_spelling(lexicon_id)
        `),e.run(`
            CREATE INDEX IF NOT EXISTS idx_lexicon_spelling_position
            ON lexicon_spelling(lexicon_id, position)
        `),e.run(`
            CREATE TABLE IF NOT EXISTS lexicon_ancestry (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                lexicon_id INTEGER NOT NULL,
                ancestor_id INTEGER NOT NULL,
                position INTEGER NOT NULL DEFAULT 0,
                ancestry_type TEXT DEFAULT 'derived',
                FOREIGN KEY (lexicon_id) REFERENCES lexicon(id) ON DELETE CASCADE,
                FOREIGN KEY (ancestor_id) REFERENCES lexicon(id) ON DELETE SET NULL,
                UNIQUE(lexicon_id, ancestor_id)
            )
        `),e.run(`
            CREATE INDEX IF NOT EXISTS idx_lexicon_ancestry_lexicon 
            ON lexicon_ancestry(lexicon_id)
        `),e.run(`
            CREATE INDEX IF NOT EXISTS idx_lexicon_ancestry_ancestor 
            ON lexicon_ancestry(ancestor_id)
        `));const i=e.exec(`
        SELECT name FROM sqlite_master
        WHERE type='table' AND name='lexicon_ancestry_closure'
    `);(i.length===0||i[0].values.length===0)&&(console.log("[DB] Creating lexicon closure table..."),e.run(`
            CREATE TABLE IF NOT EXISTS lexicon_ancestry_closure (
                ancestor_id INTEGER NOT NULL,
                descendant_id INTEGER NOT NULL,
                depth INTEGER NOT NULL,
                PRIMARY KEY (ancestor_id, descendant_id),
                FOREIGN KEY (ancestor_id) REFERENCES lexicon(id) ON DELETE CASCADE,
                FOREIGN KEY (descendant_id) REFERENCES lexicon(id) ON DELETE CASCADE
            )
        `),e.run(`
            CREATE INDEX IF NOT EXISTS idx_closure_ancestor 
            ON lexicon_ancestry_closure(ancestor_id)
        `),e.run(`
            CREATE INDEX IF NOT EXISTS idx_closure_descendant 
            ON lexicon_ancestry_closure(descendant_id)
        `));const a=e.exec("PRAGMA table_info(lexicon)");if(!(a.length>0&&a[0].values.some(l=>l[1]==="glyph_order"))){console.log("[DB] Migrating lexicon to v4 schema (adding glyph_order and needs_attention)..."),e.run("ALTER TABLE lexicon ADD COLUMN glyph_order TEXT DEFAULT '[]'"),e.run("ALTER TABLE lexicon ADD COLUMN needs_attention INTEGER DEFAULT 0");const l=e.exec("SELECT id FROM lexicon");if(l.length>0&&l[0].values.length>0){for(const c of l[0].values){const u=c[0],d=e.exec(`
                    SELECT grapheme_id FROM lexicon_spelling
                    WHERE lexicon_id = ?
                    ORDER BY position ASC
                `,[u]);if(d.length>0&&d[0].values.length>0){const m=d[0].values.map(v=>v[0]).map(v=>`grapheme-${v}`),y=JSON.stringify(m);e.run("UPDATE lexicon SET glyph_order = ? WHERE id = ?",[y,u])}}console.log("[DB] Migrated existing lexicon spelling to glyph_order format")}console.log("[DB] Migration to v4 complete")}e.run(`
        CREATE INDEX IF NOT EXISTS idx_lexicon_needs_attention
        ON lexicon(needs_attention)
    `)}function Ie(){if(!Ve)throw new Error("Database not initialized. Call initDatabase() first.");return Ve}function ga(){return Ve!==null}function ut(){if(!Ve){console.warn("[DB] Cannot persist: database not initialized");return}try{const e=Ve.export(),t=Array.from(e).map(r=>String.fromCharCode(r)).join(""),n=btoa(t);localStorage.setItem(Sx,n),console.log("[DB] Database persisted to localStorage")}catch(e){console.error("[DB] Failed to persist database:",e)}}function FL(){if(!Ve)throw new Error("Database not initialized");const e=Ve.export();return new Blob([new Uint8Array(e).buffer],{type:"application/x-sqlite3"})}async function $L(e){if(!Os)throw new Error("SQL.js not initialized");const t=await e.arrayBuffer(),n=new Uint8Array(t);Ve&&Ve.close(),Ve=new Os.Database(n),Ve&&(xx(Ve),ut()),console.log("[DB] Database imported successfully")}function BL(){Ve&&(Ve.run("DELETE FROM lexicon_ancestry_closure"),Ve.run("DELETE FROM lexicon_ancestry"),Ve.run("DELETE FROM lexicon_spelling"),Ve.run("DELETE FROM lexicon"),Ve.run("DELETE FROM phonemes"),Ve.run("DELETE FROM grapheme_glyphs"),Ve.run("DELETE FROM graphemes"),Ve.run("DELETE FROM glyphs"),Ve.run("DELETE FROM sqlite_sequence WHERE name IN ('glyphs', 'graphemes', 'grapheme_glyphs', 'phonemes', 'lexicon', 'lexicon_spelling', 'lexicon_ancestry', 'lexicon_ancestry_closure')"),ut(),console.log("[DB] Database cleared"))}function Cx(){Ve&&(Ve.run("DROP TABLE IF EXISTS lexicon_ancestry_closure"),Ve.run("DROP TABLE IF EXISTS lexicon_ancestry"),Ve.run("DROP TABLE IF EXISTS lexicon_spelling"),Ve.run("DROP TABLE IF EXISTS lexicon"),Ve.run("DROP TABLE IF EXISTS phonemes"),Ve.run("DROP TABLE IF EXISTS grapheme_glyphs"),Ve.run("DROP TABLE IF EXISTS graphemes"),Ve.run("DROP TABLE IF EXISTS glyphs"),wf(Ve),ut(),console.log("[DB] Database reset to fresh state"))}function VL(e){const t=Ie();t.run("INSERT INTO glyphs (name, svg_data, category, notes) VALUES (?, ?, ?, ?)",[e.name,e.svg_data,e.category??null,e.notes??null]);const r=t.exec("SELECT last_insert_rowid() as id")[0].values[0][0];ut();const o=bf(r);if(!o)throw new Error("Failed to create glyph");return o}function bf(e){const n=Ie().exec(`SELECT id, name, svg_data, category, notes, created_at, updated_at 
         FROM glyphs WHERE id = ?`,[e]);if(n.length===0||n[0].values.length===0)return null;const r=n[0].values[0];return{id:r[0],name:r[1],svg_data:r[2],category:r[3],notes:r[4],created_at:r[5],updated_at:r[6]}}function UL(){const t=Ie().exec(`SELECT id, name, svg_data, category, notes, created_at, updated_at 
         FROM glyphs 
         ORDER BY created_at DESC`);return t.length===0?[]:t[0].values.map(n=>({id:n[0],name:n[1],svg_data:n[2],category:n[3],notes:n[4],created_at:n[5],updated_at:n[6]}))}function zL(){const t=Ie().exec(`
        SELECT g.id, g.name, g.svg_data, g.category, g.notes, g.created_at, g.updated_at,
               COUNT(gg.id) as usage_count
        FROM glyphs g
        LEFT JOIN grapheme_glyphs gg ON g.id = gg.glyph_id
        GROUP BY g.id
        ORDER BY g.created_at DESC
    `);return t.length===0?[]:t[0].values.map(n=>({id:n[0],name:n[1],svg_data:n[2],category:n[3],notes:n[4],created_at:n[5],updated_at:n[6],usageCount:n[7]}))}function jL(e){const n=Ie().exec(`SELECT id, name, svg_data, category, notes, created_at, updated_at 
         FROM glyphs 
         WHERE name LIKE ?
         ORDER BY name`,[`%${e}%`]);return n.length===0?[]:n[0].values.map(r=>({id:r[0],name:r[1],svg_data:r[2],category:r[3],notes:r[4],created_at:r[5],updated_at:r[6]}))}function WL(e,t){const n=Ie(),r=[],o=[];return t.name!==void 0&&(r.push("name = ?"),o.push(t.name)),t.svg_data!==void 0&&(r.push("svg_data = ?"),o.push(t.svg_data)),t.category!==void 0&&(r.push("category = ?"),o.push(t.category)),t.notes!==void 0&&(r.push("notes = ?"),o.push(t.notes)),r.length===0||(r.push("updated_at = datetime('now')"),o.push(e.toString()),n.run(`UPDATE glyphs SET ${r.join(", ")} WHERE id = ?`,o),ut()),bf(e)}function GL(e){var i,a;const t=Ie(),r=((a=(i=t.exec("SELECT COUNT(*) FROM grapheme_glyphs WHERE glyph_id = ?",[e])[0])==null?void 0:i.values[0])==null?void 0:a[0])??0;if(r>0)throw new Error(`Cannot delete glyph: it is used by ${r} grapheme(s)`);return t.run("DELETE FROM glyphs WHERE id = ?",[e]),t.getRowsModified()>0?(ut(),!0):!1}function HL(e){const t=Ie();return t.run("DELETE FROM grapheme_glyphs WHERE glyph_id = ?",[e]),t.run("DELETE FROM glyphs WHERE id = ?",[e]),t.getRowsModified()>0?(ut(),!0):!1}function XL(e){const t=Ie(),n=t.exec("SELECT DISTINCT grapheme_id FROM grapheme_glyphs WHERE glyph_id = ?",[e]),r=n.length>0?n[0].values.map(i=>i[0]):[];for(const i of r)t.run("DELETE FROM phonemes WHERE grapheme_id = ?",[i]),t.run("DELETE FROM grapheme_glyphs WHERE grapheme_id = ?",[i]),t.run("DELETE FROM graphemes WHERE id = ?",[i]);return t.run("DELETE FROM glyphs WHERE id = ?",[e]),t.getRowsModified()>0?(ut(),!0):!1}function YL(){var n,r;return((r=(n=Ie().exec("SELECT COUNT(*) FROM glyphs")[0])==null?void 0:n.values[0])==null?void 0:r[0])??0}function qL(e,t){var a,s;const n=Ie(),r=t?"SELECT COUNT(*) FROM glyphs WHERE name = ? AND id != ?":"SELECT COUNT(*) FROM glyphs WHERE name = ?",o=t?[e,t]:[e];return(((s=(a=n.exec(r,o)[0])==null?void 0:a.values[0])==null?void 0:s[0])??0)>0}function Tx(){const e=Ie(),t=e.exec(`
        SELECT g.id
        FROM glyphs g
        LEFT JOIN grapheme_glyphs gg ON g.id = gg.glyph_id
        WHERE gg.id IS NULL
    `);if(t.length===0||t[0].values.length===0)return 0;const n=t[0].values.map(o=>o[0]);let r=0;for(const o of n)e.run("DELETE FROM glyphs WHERE id = ?",[o]),r++;return r>0&&ut(),r}function en(e,t,n){return{success:!1,error:{code:e,message:t,details:n}}}function Vo(e){return{success:!0,data:e}}function Uo(){return ga()?null:en("DB_NOT_INITIALIZED","Database not initialized. Call initDatabase() first.")}function KL(e){var n,r;const t=Uo();if(t)return t;if(!e.name||e.name.trim()==="")return en("VALIDATION_ERROR","Glyph name is required");if(!e.svg_data||e.svg_data.trim()==="")return en("VALIDATION_ERROR","SVG data is required");try{const o=VL({name:e.name.trim(),svg_data:e.svg_data,category:(n=e.category)==null?void 0:n.trim(),notes:(r=e.notes)==null?void 0:r.trim()});return Vo(o)}catch(o){return en("OPERATION_FAILED",o instanceof Error?o.message:"Failed to create glyph")}}function ZL(e){const t=Uo();if(t)return t;try{const n=bf(e);return n?Vo(n):en("NOT_FOUND",`Glyph with ID ${e} not found`)}catch(n){return en("OPERATION_FAILED",n instanceof Error?n.message:"Failed to get glyph")}}function QL(){const e=Uo();if(e)return e;try{const t=UL();return Vo({glyphs:t,total:t.length})}catch(t){return en("OPERATION_FAILED",t instanceof Error?t.message:"Failed to get glyphs")}}function JL(){const e=Uo();if(e)return e;try{const t=zL();return Vo({glyphs:t,total:t.length})}catch(t){return en("OPERATION_FAILED",t instanceof Error?t.message:"Failed to get glyphs with usage")}}function eO(e){const t=Uo();if(t)return t;try{const n=jL(e);return Vo({glyphs:n,total:n.length})}catch(n){return en("OPERATION_FAILED",n instanceof Error?n.message:"Failed to search glyphs")}}function tO(e,t){var r;const n=Uo();if(n)return n;try{const o=WL(e,{name:(r=t.name)==null?void 0:r.trim(),svg_data:t.svg_data,notes:t.notes});return o?Vo(o):en("NOT_FOUND",`Glyph with ID ${e} not found`)}catch(o){return en("OPERATION_FAILED",o instanceof Error?o.message:"Failed to update glyph")}}function nO(e){const t=Uo();if(t)return t;try{return GL(e)?Vo(void 0):en("NOT_FOUND",`Glyph with ID ${e} not found`)}catch(n){const r=n instanceof Error?n.message:"Failed to delete glyph";return r.includes("used by")?en("CONSTRAINT_VIOLATION",r):en("OPERATION_FAILED",r)}}function rO(e){const t=Uo();if(t)return t;try{return HL(e)?Vo(void 0):en("NOT_FOUND",`Glyph with ID ${e} not found`)}catch(n){return en("OPERATION_FAILED",n instanceof Error?n.message:"Failed to force delete glyph")}}function oO(e){const t=Uo();if(t)return t;try{return XL(e)?Vo(void 0):en("NOT_FOUND",`Glyph with ID ${e} not found`)}catch(n){return en("OPERATION_FAILED",n instanceof Error?n.message:"Failed to cascade delete glyph")}}function iO(e,t){const n=Uo();if(n)return n;try{const r=qL(e,t);return Vo(r)}catch(r){return en("OPERATION_FAILED",r instanceof Error?r.message:"Failed to check glyph name")}}const aO={create:KL,getById:ZL,getAll:QL,getAllWithUsage:JL,search:eO,update:tO,delete:nO,forceDelete:rO,cascadeDelete:oO,checkNameExists:iO};function sO(e){const t=Ie();if(!e.glyphs||e.glyphs.length===0)throw new Error("At least one glyph is required to create a grapheme");t.run("INSERT INTO graphemes (name, category, notes) VALUES (?, ?, ?)",[e.name,e.category??null,e.notes??null]);const r=t.exec("SELECT last_insert_rowid() as id")[0].values[0][0];for(const s of e.glyphs)fO(r,s);const o=[];if(e.phonemes&&e.phonemes.length>0)for(const s of e.phonemes){const l=Ax(r,s);o.push(l)}ut();const i=ns(r);if(!i)throw new Error("Failed to create grapheme");const a=lv(r);return{...i,glyphs:a,phonemes:o}}function ns(e){const n=Ie().exec(`SELECT id, name, category, notes, created_at, updated_at 
         FROM graphemes WHERE id = ?`,[e]);if(n.length===0||n[0].values.length===0)return null;const r=n[0].values[0];return{id:r[0],name:r[1],category:r[2],notes:r[3],created_at:r[4],updated_at:r[5]}}function sv(e){const t=ns(e);if(!t)return null;const n=lv(e),r=cv(e);return{...t,glyphs:n,phonemes:r}}function Nx(){const t=Ie().exec(`SELECT id, name, category, notes, created_at, updated_at 
         FROM graphemes 
         ORDER BY created_at DESC`);return t.length===0?[]:t[0].values.map(n=>({id:n[0],name:n[1],category:n[2],notes:n[3],created_at:n[4],updated_at:n[5]}))}function kx(){return Nx().map(t=>({...t,glyphs:lv(t.id),phonemes:cv(t.id)}))}function lO(e){const n=Ie().exec(`SELECT id, name, category, notes, created_at, updated_at 
         FROM graphemes 
         WHERE name LIKE ?
         ORDER BY name`,[`%${e}%`]);return n.length===0?[]:n[0].values.map(r=>({id:r[0],name:r[1],category:r[2],notes:r[3],created_at:r[4],updated_at:r[5]}))}function cO(e,t){const n=Ie(),r=[],o=[];return t.name!==void 0&&(r.push("name = ?"),o.push(t.name)),t.category!==void 0&&(r.push("category = ?"),o.push(t.category)),t.notes!==void 0&&(r.push("notes = ?"),o.push(t.notes)),r.length===0||(r.push("updated_at = datetime('now')"),o.push(e.toString()),n.run(`UPDATE graphemes SET ${r.join(", ")} WHERE id = ?`,o),ut()),ns(e)}function uO(e){var i,a;const t=Ie(),r=((a=(i=t.exec("SELECT COUNT(*) FROM lexicon_spelling WHERE grapheme_id = ?",[e])[0])==null?void 0:i.values[0])==null?void 0:a[0])??0;if(r>0)throw new Error(`Cannot delete grapheme: it is used in ${r} lexicon entries. Constraint failed.`);return t.run("DELETE FROM phonemes WHERE grapheme_id = ?",[e]),t.run("DELETE FROM grapheme_glyphs WHERE grapheme_id = ?",[e]),t.run("DELETE FROM graphemes WHERE id = ?",[e]),t.getRowsModified()>0?(ut(),!0):!1}function dO(){var n,r;return((r=(n=Ie().exec("SELECT COUNT(*) FROM graphemes")[0])==null?void 0:n.values[0])==null?void 0:r[0])??0}function lv(e){const n=Ie().exec(`
        SELECT g.id, g.name, g.svg_data, g.category, g.notes, g.created_at, g.updated_at
        FROM glyphs g
        JOIN grapheme_glyphs gg ON g.id = gg.glyph_id
        WHERE gg.grapheme_id = ?
        ORDER BY gg.position ASC
    `,[e]);return n.length===0?[]:n[0].values.map(r=>({id:r[0],name:r[1],svg_data:r[2],category:r[3],notes:r[4],created_at:r[5],updated_at:r[6]}))}function fO(e,t){const n=Ie();n.run(`
        INSERT INTO grapheme_glyphs (grapheme_id, glyph_id, position, transform)
        VALUES (?, ?, ?, ?)
    `,[e,t.glyph_id,t.position,t.transform??null]);const o=n.exec("SELECT last_insert_rowid() as id")[0].values[0][0];return n.run("UPDATE graphemes SET updated_at = datetime('now') WHERE id = ?",[e]),ut(),{id:o,grapheme_id:e,glyph_id:t.glyph_id,position:t.position,transform:t.transform??null}}function pO(e,t){const n=Ie();n.run("DELETE FROM grapheme_glyphs WHERE grapheme_id = ?",[e]);for(const r of t)n.run(`
            INSERT INTO grapheme_glyphs (grapheme_id, glyph_id, position, transform)
            VALUES (?, ?, ?, ?)
        `,[e,r.glyph_id,r.position,r.transform??null]);n.run("UPDATE graphemes SET updated_at = datetime('now') WHERE id = ?",[e]),ut()}function Ax(e,t){const n=Ie();n.run(`
        INSERT INTO phonemes (grapheme_id, phoneme, use_in_auto_spelling, context) 
        VALUES (?, ?, ?, ?)
    `,[e,t.phoneme,t.use_in_auto_spelling?1:0,t.context??null]);const o=n.exec("SELECT last_insert_rowid() as id")[0].values[0][0];ut();const i=Ef(o);if(!i)throw new Error("Failed to create phoneme");return i}function Ef(e){const n=Ie().exec(`
        SELECT id, grapheme_id, phoneme, use_in_auto_spelling, context 
        FROM phonemes WHERE id = ?
    `,[e]);if(n.length===0||n[0].values.length===0)return null;const r=n[0].values[0];return{id:r[0],grapheme_id:r[1],phoneme:r[2],use_in_auto_spelling:r[3]===1,context:r[4]}}function cv(e){const n=Ie().exec(`
        SELECT id, grapheme_id, phoneme, use_in_auto_spelling, context 
        FROM phonemes 
        WHERE grapheme_id = ?
        ORDER BY id ASC
    `,[e]);return n.length===0?[]:n[0].values.map(r=>({id:r[0],grapheme_id:r[1],phoneme:r[2],use_in_auto_spelling:r[3]===1,context:r[4]}))}function hO(e,t){const n=Ie(),r=[],o=[];return t.phoneme!==void 0&&(r.push("phoneme = ?"),o.push(t.phoneme)),t.use_in_auto_spelling!==void 0&&(r.push("use_in_auto_spelling = ?"),o.push(t.use_in_auto_spelling?1:0)),t.context!==void 0&&(r.push("context = ?"),o.push(t.context)),r.length===0||(o.push(e),n.run(`UPDATE phonemes SET ${r.join(", ")} WHERE id = ?`,o),ut()),Ef(e)}function mO(e){const t=Ie();return t.run("DELETE FROM phonemes WHERE id = ?",[e]),t.getRowsModified()>0?(ut(),!0):!1}function gO(e){const t=Ie();t.run("DELETE FROM phonemes WHERE grapheme_id = ?",[e]);const n=t.getRowsModified();return n>0&&ut(),n}function uv(){const t=Ie().exec(`
        SELECT id, grapheme_id, phoneme, use_in_auto_spelling, context
        FROM phonemes
        WHERE use_in_auto_spelling = 1
        ORDER BY grapheme_id, id
    `);return t.length===0?[]:t[0].values.map(n=>({id:n[0],grapheme_id:n[1],phoneme:n[2],use_in_auto_spelling:!0,context:n[4]}))}function yO(e){const n=Ie().exec(`
        SELECT grapheme_id FROM phonemes WHERE phoneme = ? LIMIT 1
    `,[e]);if(n.length===0||n[0].values.length===0)return null;const r=n[0].values[0][0];return sv(r)}function vO(){const e=Ie(),t=new Map,n=e.exec(`
        SELECT DISTINCT phoneme, grapheme_id FROM phonemes ORDER BY grapheme_id, id
    `);if(n.length===0)return t;const r=new Set,o=new Map;for(const a of n[0].values){const s=a[0],l=a[1];o.has(s)||(o.set(s,l),r.add(l))}const i=new Map;for(const a of r){const s=sv(a);s&&i.set(a,s)}for(const[a,s]of o){const l=i.get(s);l&&t.set(a,l)}return t}const Rx="etymolog_settings_v1";let so={...vf},u1=!1;function tg(e,t,n){return{success:!1,error:{code:e,message:t,details:n}}}function dv(e){return{success:!0,data:e}}function _O(){try{const e=localStorage.getItem(Rx);if(e){const t=JSON.parse(e);return{...vf,...t}}}catch(e){console.warn("[Settings] Failed to load settings from localStorage:",e)}return{...vf}}function Ix(e){try{localStorage.setItem(Rx,JSON.stringify(e))}catch(t){console.warn("[Settings] Failed to save settings to localStorage:",t)}}function fv(){u1||(so=_O(),u1=!0)}function wO(){return fv(),dv({...so})}function Lx(e){fv();try{return e.autoSaveInterval!==void 0&&e.autoSaveInterval<0?tg("VALIDATION_ERROR","Auto-save interval cannot be negative"):(so={...so,...e},Ix(so),dv({...so}))}catch(t){return tg("OPERATION_FAILED",t instanceof Error?t.message:"Failed to update settings")}}function bO(){try{return so={...vf},Ix(so),dv({...so})}catch(e){return tg("OPERATION_FAILED",e instanceof Error?e.message:"Failed to reset settings")}}const Ox={get:wO,update:Lx,reset:bO};function sp(){return fv(),{...so}}const ng=new Set;function EO(e){return ng.add(e),()=>ng.delete(e)}function SO(){const e={...so};ng.forEach(t=>t(e))}const xO=Lx;function CO(e){const t=xO(e);return t.success&&SO(),t}Ox.update=CO;function Ze(e,t,n){return{success:!1,error:{code:e,message:t,details:n}}}function dn(e){return{success:!0,data:e}}function fn(){return ga()?null:Ze("DB_NOT_INITIALIZED","Database not initialized. Call initDatabase() first.")}function TO(e){var n,r,o;const t=fn();if(t)return t;if(!e.name||e.name.trim()==="")return Ze("VALIDATION_ERROR","Grapheme name is required");if(!e.glyphs||e.glyphs.length===0)return Ze("VALIDATION_ERROR","At least one glyph is required");try{const i=sO({name:e.name.trim(),category:(n=e.category)==null?void 0:n.trim(),notes:(r=e.notes)==null?void 0:r.trim(),glyphs:e.glyphs.map(a=>({glyph_id:a.glyph_id,position:a.position,transform:a.transform})),phonemes:(o=e.phonemes)==null?void 0:o.map(a=>{var s;return{phoneme:a.phoneme.trim(),use_in_auto_spelling:a.use_in_auto_spelling,context:(s=a.context)==null?void 0:s.trim()}})});return dn(i)}catch(i){return Ze("OPERATION_FAILED",i instanceof Error?i.message:"Failed to create grapheme")}}function NO(e){const t=fn();if(t)return t;try{const n=ns(e);return n?dn(n):Ze("NOT_FOUND",`Grapheme with ID ${e} not found`)}catch(n){return Ze("OPERATION_FAILED",n instanceof Error?n.message:"Failed to get grapheme")}}function kO(e){const t=fn();if(t)return t;try{const n=sv(e);return n?dn(n):Ze("NOT_FOUND",`Grapheme with ID ${e} not found`)}catch(n){return Ze("OPERATION_FAILED",n instanceof Error?n.message:"Failed to get complete grapheme")}}function AO(){const e=fn();if(e)return e;try{const t=Nx();return dn({graphemes:t,total:t.length})}catch(t){return Ze("OPERATION_FAILED",t instanceof Error?t.message:"Failed to get graphemes")}}function RO(){const e=fn();if(e)return e;try{const t=kx();return dn({graphemes:t,total:t.length})}catch(t){return Ze("OPERATION_FAILED",t instanceof Error?t.message:"Failed to get complete graphemes")}}function IO(e){const t=fn();if(t)return t;try{const n=lO(e);return dn({graphemes:n,total:n.length})}catch(n){return Ze("OPERATION_FAILED",n instanceof Error?n.message:"Failed to search graphemes")}}function LO(e,t){var r;const n=fn();if(n)return n;try{const o=cO(e,{name:(r=t.name)==null?void 0:r.trim(),notes:t.notes});return o?dn(o):Ze("NOT_FOUND",`Grapheme with ID ${e} not found`)}catch(o){return Ze("OPERATION_FAILED",o instanceof Error?o.message:"Failed to update grapheme")}}function OO(e,t){const n=fn();if(n)return n;if(!t.glyphs||t.glyphs.length===0)return Ze("VALIDATION_ERROR","At least one glyph is required");try{if(!ns(e))return Ze("NOT_FOUND",`Grapheme with ID ${e} not found`);if(pO(e,t.glyphs.map(i=>({glyph_id:i.glyph_id,position:i.position,transform:i.transform}))),sp().autoManageGlyphs){const i=Tx();i>0&&console.log(`[Auto-manage] Cleaned up ${i} orphaned glyph(s)`)}return dn(void 0)}catch(r){return Ze("OPERATION_FAILED",r instanceof Error?r.message:"Failed to update grapheme glyphs")}}function PO(e){const t=fn();if(t)return t;try{if(!uO(e))return Ze("NOT_FOUND",`Grapheme with ID ${e} not found`);if(sp().autoManageGlyphs){const o=Tx();o>0&&console.log(`[Auto-manage] Cleaned up ${o} orphaned glyph(s)`)}return dn(void 0)}catch(n){return Ze("OPERATION_FAILED",n instanceof Error?n.message:"Failed to delete grapheme")}}function MO(e){const t=fn();if(t)return t;try{const n=yO(e);return dn(n)}catch(n){return Ze("OPERATION_FAILED",n instanceof Error?n.message:"Failed to get grapheme by phoneme")}}function DO(){const e=fn();if(e)return e;try{const t=vO();return dn(t)}catch(t){return Ze("OPERATION_FAILED",t instanceof Error?t.message:"Failed to get phoneme-grapheme mappings")}}const FO={create:TO,getById:NO,getByIdComplete:kO,getAll:AO,getAllComplete:RO,search:IO,update:LO,updateGlyphs:OO,delete:PO,getByPhoneme:MO,getPhonemeMap:DO};function $O(e){var n;const t=fn();if(t)return t;if(!e.phoneme||e.phoneme.trim()==="")return Ze("VALIDATION_ERROR","Phoneme is required");try{if(!ns(e.grapheme_id))return Ze("NOT_FOUND",`Grapheme with ID ${e.grapheme_id} not found`);const o=Ax(e.grapheme_id,{phoneme:e.phoneme.trim(),use_in_auto_spelling:e.use_in_auto_spelling,context:(n=e.context)==null?void 0:n.trim()});return dn(o)}catch(r){return Ze("OPERATION_FAILED",r instanceof Error?r.message:"Failed to add phoneme")}}function BO(e){const t=fn();if(t)return t;try{const n=Ef(e);return n?dn(n):Ze("NOT_FOUND",`Phoneme with ID ${e} not found`)}catch(n){return Ze("OPERATION_FAILED",n instanceof Error?n.message:"Failed to get phoneme")}}function VO(e){const t=fn();if(t)return t;try{const n=cv(e);return dn(n)}catch(n){return Ze("OPERATION_FAILED",n instanceof Error?n.message:"Failed to get phonemes")}}function UO(e,t){var r;const n=fn();if(n)return n;try{const o=hO(e,{phoneme:(r=t.phoneme)==null?void 0:r.trim(),use_in_auto_spelling:t.use_in_auto_spelling,context:t.context});return o?dn(o):Ze("NOT_FOUND",`Phoneme with ID ${e} not found`)}catch(o){return Ze("OPERATION_FAILED",o instanceof Error?o.message:"Failed to update phoneme")}}function zO(e){const t=fn();if(t)return t;try{return mO(e)?dn(void 0):Ze("NOT_FOUND",`Phoneme with ID ${e} not found`)}catch(n){return Ze("OPERATION_FAILED",n instanceof Error?n.message:"Failed to delete phoneme")}}function jO(e){const t=fn();if(t)return t;try{const n=gO(e);return dn(n)}catch(n){return Ze("OPERATION_FAILED",n instanceof Error?n.message:"Failed to delete phonemes")}}function WO(){const e=fn();if(e)return e;try{const t=uv();return dn(t)}catch(t){return Ze("OPERATION_FAILED",t instanceof Error?t.message:"Failed to get auto-spelling phonemes")}}const GO={add:$O,getById:BO,getByGraphemeId:VO,update:UO,delete:zO,deleteAllForGrapheme:jO,getAutoSpelling:WO};function ri(e,t,n){return{success:!1,error:{code:e,message:t,details:n}}}function fu(e){return{success:!0,data:e}}function HO(){try{const e=ga();let t=0,n=0;if(e)try{t=YL(),n=dO()}catch{}return fu({initialized:e,glyphCount:t,graphemeCount:n})}catch(e){return ri("OPERATION_FAILED",e instanceof Error?e.message:"Failed to get database status")}}function XO(e="sqlite"){if(!ga())return ri("DB_NOT_INITIALIZED","Database not initialized");try{if(e==="json")return ri("OPERATION_FAILED","JSON export not yet implemented");const t=FL();return fu(t)}catch(t){return ri("OPERATION_FAILED",t instanceof Error?t.message:"Failed to export database")}}async function YO(e){try{return await $L(e),fu(void 0)}catch(t){return ri("OPERATION_FAILED",t instanceof Error?t.message:"Failed to import database")}}function qO(){if(!ga())return ri("DB_NOT_INITIALIZED","Database not initialized");try{return BL(),fu(void 0)}catch(e){return ri("OPERATION_FAILED",e instanceof Error?e.message:"Failed to clear database")}}function KO(){if(!ga())return ri("DB_NOT_INITIALIZED","Database not initialized");try{return Cx(),fu(void 0)}catch(e){return ri("OPERATION_FAILED",e instanceof Error?e.message:"Failed to reset database")}}const ZO={getStatus:HO,export:XO,import:YO,clear:qO,reset:KO},rg="grapheme-";function QO(e){if(!e.startsWith(rg))return null;const t=e.substring(rg.length),n=parseInt(t,10);return isNaN(n)||n<=0?null:n}function Px(e){return`${rg}${e}`}function Mx(e){const t=QO(e);return t!==null?{type:"grapheme",rawValue:e,graphemeId:t}:{type:"ipa",rawValue:e,ipaCharacter:e}}function Sf(e){return e.map(Mx)}function JO(e){const t=new Set;let n=0;for(const r of e){const o=Mx(r);o.type==="grapheme"&&o.graphemeId?t.add(o.graphemeId):o.type==="ipa"&&n++}return{graphemeIds:Array.from(t),hasIpaFallbacks:n>0,ipaFallbackCount:n}}function pv(e){return JSON.stringify(e)}function Dx(e){if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t.filter(n=>typeof n=="string"):[]}catch{return[]}}function eP(e,t){const n=Ie();try{n.run(`
            INSERT OR IGNORE INTO lexicon_ancestry_closure (ancestor_id, descendant_id, depth)
            VALUES (?, ?, 1)
        `,[t,e])}catch{}n.run(`
        INSERT OR IGNORE INTO lexicon_ancestry_closure (ancestor_id, descendant_id, depth)
        SELECT 
            closure.ancestor_id,
            ? as descendant_id,
            closure.depth + 1
        FROM lexicon_ancestry_closure closure
        WHERE closure.descendant_id = ?
    `,[e,t]),n.run(`
        INSERT OR IGNORE INTO lexicon_ancestry_closure (ancestor_id, descendant_id, depth)
        SELECT 
            ? as ancestor_id,
            closure.descendant_id,
            closure.depth + 1
        FROM lexicon_ancestry_closure closure
        WHERE closure.ancestor_id = ?
    `,[t,e]),n.run(`
        INSERT OR IGNORE INTO lexicon_ancestry_closure (ancestor_id, descendant_id, depth)
        SELECT 
            super.ancestor_id,
            sub.descendant_id,
            super.depth + 1 + sub.depth
        FROM lexicon_ancestry_closure super
        CROSS JOIN lexicon_ancestry_closure sub
        WHERE super.descendant_id = ? AND sub.ancestor_id = ?
    `,[t,e]),ut()}function tP(){const e=Ie();e.run("DELETE FROM lexicon_ancestry_closure"),e.run(`
        INSERT INTO lexicon_ancestry_closure (ancestor_id, descendant_id, depth)
        WITH RECURSIVE paths(ancestor_id, descendant_id, depth) AS (
            -- Base case: direct parents
            SELECT ancestor_id, lexicon_id, 1
            FROM lexicon_ancestry
            
            UNION ALL
            
            -- Recursive case: path -> child
            SELECT p.ancestor_id, la.lexicon_id, p.depth + 1
            FROM paths p
            JOIN lexicon_ancestry la ON p.descendant_id = la.ancestor_id
            WHERE p.depth < 50 -- fail-safe against cycles
        )
        SELECT DISTINCT ancestor_id, descendant_id, depth FROM paths
    `),ut()}function Fx(e,t){const n=Ie();if(e===t)return!0;const r=n.exec(`
        SELECT 1 FROM lexicon_ancestry_closure 
        WHERE ancestor_id = ? AND descendant_id = ?
        LIMIT 1
    `,[e,t]);return r.length>0&&r[0].values.length>0}function nP(e){const t=Ie();let n=[];e.glyph_order&&e.glyph_order.length>0?n=e.glyph_order:e.spelling&&e.spelling.length>0&&(n=[...e.spelling].sort((l,c)=>l.position-c.position).map(l=>Px(l.grapheme_id)));const r=pv(n);t.run(`INSERT INTO lexicon (lemma, pronunciation, is_native, auto_spell, meaning, part_of_speech, notes, glyph_order, needs_attention) 
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[e.lemma!==void 0?e.lemma:null,e.pronunciation!==void 0?e.pronunciation:null,e.is_native!==!1?1:0,e.auto_spell!==!1?1:0,e.meaning!==void 0?e.meaning:null,e.part_of_speech!==void 0?e.part_of_speech:null,e.notes!==void 0?e.notes:null,r,0]);const i=t.exec("SELECT last_insert_rowid() as id")[0].values[0][0];if(Wx(i,n),e.ancestry&&e.ancestry.length>0)for(const s of e.ancestry)uP(i,s);ut();const a=$x(i);if(!a)throw new Error("Failed to create lexicon entry");return a}function go(e){const n=Ie().exec(`SELECT id, lemma, pronunciation, is_native, auto_spell, meaning, part_of_speech, notes, glyph_order, needs_attention, created_at, updated_at 
         FROM lexicon WHERE id = ?`,[e]);if(n.length===0||n[0].values.length===0)return null;const r=n[0].values[0];return ss(r)}function rP(e){const t=go(e);if(!t)return null;const n=cP(e);return{...t,spelling:n}}function $x(e){const t=go(e);if(!t)return null;const{entries:n,hasIpaFallbacks:r}=Gx(t.glyph_order),o=n.filter(s=>s.type==="grapheme"&&s.grapheme).map(s=>s.grapheme),i=hv(e),a=zx(e);return{...t,spellingDisplay:n,spelling:o,ancestors:i,descendants:a,hasIpaFallbacks:r}}function Bx(){const t=Ie().exec(`SELECT id, lemma, pronunciation, is_native, auto_spell, meaning, part_of_speech, notes, glyph_order, needs_attention, created_at, updated_at 
         FROM lexicon 
         ORDER BY needs_attention DESC, COALESCE(pronunciation, lemma) ASC`);return t.length===0?[]:t[0].values.map(ss)}function Vx(){return Bx().map(t=>{const{entries:n,hasIpaFallbacks:r}=Gx(t.glyph_order),o=n.filter(i=>i.type==="grapheme"&&i.grapheme).map(i=>i.grapheme);return{...t,spellingDisplay:n,spelling:o,ancestors:hv(t.id),descendants:zx(t.id),hasIpaFallbacks:r}})}function oP(){const t=Ie().exec(`
        SELECT l.id, l.lemma, l.pronunciation, l.is_native, l.auto_spell, l.meaning, 
               l.part_of_speech, l.notes, l.glyph_order, l.needs_attention, l.created_at, l.updated_at,
               COUNT(la.id) as descendant_count
        FROM lexicon l
        LEFT JOIN lexicon_ancestry la ON l.id = la.ancestor_id
        GROUP BY l.id
        ORDER BY l.needs_attention DESC, COALESCE(l.pronunciation, l.lemma) ASC
    `);return t.length===0?[]:t[0].values.map(n=>({...ss(n),descendantCount:n[12]}))}function iP(e){const n=Ie().exec(`SELECT id, lemma, pronunciation, is_native, auto_spell, meaning, part_of_speech, notes, glyph_order, needs_attention, created_at, updated_at 
         FROM lexicon 
         WHERE pronunciation LIKE ? OR meaning LIKE ? OR lemma LIKE ?
         ORDER BY needs_attention DESC, COALESCE(pronunciation, lemma) ASC`,[`%${e}%`,`%${e}%`,`%${e}%`]);return n.length===0?[]:n[0].values.map(ss)}function aP(e){const n=Ie().exec(`SELECT id, lemma, pronunciation, is_native, auto_spell, meaning, part_of_speech, notes, glyph_order, needs_attention, created_at, updated_at 
         FROM lexicon 
         WHERE is_native = ?
         ORDER BY needs_attention DESC, COALESCE(pronunciation, lemma) ASC`,[e?1:0]);return n.length===0?[]:n[0].values.map(ss)}function sP(e,t){const n=Ie(),r=[],o=[];if(t.lemma!==void 0&&(r.push("lemma = ?"),o.push(t.lemma)),t.pronunciation!==void 0&&(r.push("pronunciation = ?"),o.push(t.pronunciation)),t.is_native!==void 0&&(r.push("is_native = ?"),o.push(t.is_native?1:0)),t.auto_spell!==void 0&&(r.push("auto_spell = ?"),o.push(t.auto_spell?1:0)),t.meaning!==void 0&&(r.push("meaning = ?"),o.push(t.meaning)),t.part_of_speech!==void 0&&(r.push("part_of_speech = ?"),o.push(t.part_of_speech)),t.notes!==void 0&&(r.push("notes = ?"),o.push(t.notes)),t.glyph_order!==void 0){const i=pv(t.glyph_order);r.push("glyph_order = ?"),o.push(i)}return t.needs_attention!==void 0&&(r.push("needs_attention = ?"),o.push(t.needs_attention?1:0)),r.length===0||(r.push("updated_at = datetime('now')"),o.push(e),n.run(`UPDATE lexicon SET ${r.join(", ")} WHERE id = ?`,o),t.glyph_order!==void 0&&Wx(e,t.glyph_order),ut()),go(e)}function lP(e){const t=Ie();if(!go(e))throw new Error(`Lexicon entry with id ${e} not found`);t.run("DELETE FROM lexicon_spelling WHERE lexicon_id = ?",[e]),t.run("DELETE FROM lexicon_ancestry WHERE lexicon_id = ?",[e]),t.run("DELETE FROM lexicon_ancestry WHERE ancestor_id = ?",[e]),t.run("DELETE FROM lexicon WHERE id = ?",[e]);const r=t.getRowsModified();return r>0&&ut(),r>0}function cP(e){const n=Ie().exec(`
        SELECT g.id, g.name, g.category, g.notes, g.created_at, g.updated_at
        FROM graphemes g
        JOIN lexicon_spelling ls ON g.id = ls.grapheme_id
        WHERE ls.lexicon_id = ?
        ORDER BY ls.position ASC
    `,[e]);return n.length===0?[]:n[0].values.map(r=>({id:r[0],name:r[1],category:r[2],notes:r[3],created_at:r[4],updated_at:r[5]}))}function Ux(e,t){const n=Ie();n.run("DELETE FROM lexicon_spelling WHERE lexicon_id = ?",[e]);for(const r of t)n.run(`
            INSERT INTO lexicon_spelling (lexicon_id, grapheme_id, position)
            VALUES (?, ?, ?)
        `,[e,r.grapheme_id,r.position]);n.run("UPDATE lexicon SET updated_at = datetime('now') WHERE id = ?",[e]),ut()}function hv(e){const n=Ie().exec(`
        SELECT l.id, l.lemma, l.pronunciation, l.is_native, l.auto_spell, l.meaning, 
               l.part_of_speech, l.notes, l.created_at, l.updated_at,
               la.position, la.ancestry_type
        FROM lexicon l
        JOIN lexicon_ancestry la ON l.id = la.ancestor_id
        WHERE la.lexicon_id = ?
        ORDER BY la.position ASC
    `,[e]);return n.length===0?[]:n[0].values.map(r=>({ancestor:ss(r),position:r[10],ancestry_type:r[11]}))}function zx(e){const n=Ie().exec(`
        SELECT l.id, l.lemma, l.pronunciation, l.is_native, l.auto_spell, l.meaning, 
               l.part_of_speech, l.notes, l.created_at, l.updated_at,
               la.ancestry_type
        FROM lexicon l
        JOIN lexicon_ancestry la ON l.id = la.lexicon_id
        WHERE la.ancestor_id = ?
        ORDER BY COALESCE(l.pronunciation, l.lemma) ASC
    `,[e]);return n.length===0?[]:n[0].values.map(r=>({descendant:ss(r),ancestry_type:r[10]}))}function uP(e,t){if(Fx(e,t.ancestor_id))throw new Error(`Cannot add ancestor: would create a cycle (lexicon ${e} is an ancestor of ${t.ancestor_id})`);const n=Ie();n.run(`
        INSERT INTO lexicon_ancestry (lexicon_id, ancestor_id, position, ancestry_type)
        VALUES (?, ?, ?, ?)
    `,[e,t.ancestor_id,t.position,t.ancestry_type??"derived"]);const o=n.exec("SELECT last_insert_rowid() as id")[0].values[0][0];return n.run("UPDATE lexicon SET updated_at = datetime('now') WHERE id = ?",[e]),eP(e,t.ancestor_id),ut(),{id:o,lexicon_id:e,ancestor_id:t.ancestor_id,position:t.position,ancestry_type:t.ancestry_type??"derived"}}function dP(e,t){const n=Ie();n.run("DELETE FROM lexicon_ancestry WHERE lexicon_id = ?",[e]);for(const r of t)n.run(`
            INSERT INTO lexicon_ancestry (lexicon_id, ancestor_id, position, ancestry_type)
            VALUES (?, ?, ?, ?)
        `,[e,r.ancestor_id,r.position,r.ancestry_type??"derived"]);n.run("UPDATE lexicon SET updated_at = datetime('now') WHERE id = ?",[e]),tP(),ut()}function fP(e,t=50){if(!go(e))throw new Error(`Lexicon entry with id ${e} not found`);const r=new Set;function o(i,a,s,l){const c=go(i);if(!c||r.has(i)||l>t)return{entry:c??{id:i,lemma:"[Not Found]"},ancestry_type:a,position:s,ancestors:[]};r.add(i);const d=hv(i).map(f=>o(f.ancestor.id,f.ancestry_type,f.position,l+1));return{entry:c,ancestry_type:a,position:s,ancestors:d}}return o(e,null,null,0)}function pP(e,t=50){const r=Ie().exec(`
        WITH RECURSIVE ancestors AS (
            SELECT ancestor_id, 1 as depth
            FROM lexicon_ancestry
            WHERE lexicon_id = ?
            
            UNION ALL
            
            SELECT la.ancestor_id, a.depth + 1
            FROM lexicon_ancestry la
            JOIN ancestors a ON la.lexicon_id = a.ancestor_id
            WHERE a.depth < ?
        )
        SELECT DISTINCT ancestor_id FROM ancestors
    `,[e,t]);return r.length===0?[]:r[0].values.map(o=>o[0])}function hP(e,t=50){const n=Ie(),r=n.exec(`
        SELECT descendant_id FROM lexicon_ancestry_closure
        WHERE ancestor_id = ?
    `,[e]);if(r.length>0)return r[0].values.map(i=>i[0]);const o=n.exec(`
        WITH RECURSIVE descendants AS (
            SELECT lexicon_id, 1 as depth
            FROM lexicon_ancestry
            WHERE ancestor_id = ?
            
            UNION ALL
            
            SELECT la.lexicon_id, d.depth + 1
            FROM lexicon_ancestry la
            JOIN descendants d ON la.ancestor_id = d.lexicon_id
            WHERE d.depth < ?
        )
        SELECT DISTINCT lexicon_id FROM descendants
    `,[e,t]);return o.length===0?[]:o[0].values.map(i=>i[0])}function jx(e,t){return Fx(e,t)}function ss(e){return{id:e[0],lemma:e[1],pronunciation:e[2],is_native:e[3]===1,auto_spell:e[4]===1,meaning:e[5],part_of_speech:e[6],notes:e[7],glyph_order:e[8]??"[]",needs_attention:e[9]===1,created_at:e[10],updated_at:e[11]}}function Wx(e,t){const n=Ie();n.run("DELETE FROM lexicon_spelling WHERE lexicon_id = ?",[e]);const r=JO(t),o=new Map;let i=0;for(const a of Sf(t))a.type==="grapheme"&&a.graphemeId&&!o.has(a.graphemeId)&&o.set(a.graphemeId,i++);for(const a of r.graphemeIds){const s=o.get(a)??0;try{n.run(`
                INSERT INTO lexicon_spelling (lexicon_id, grapheme_id, position)
                VALUES (?, ?, ?)
            `,[e,a,s])}catch(l){console.warn(`[LexiconService] Failed to sync spelling for lexicon ${e}, grapheme ${a}:`,l)}}}function Gx(e){const t=Ie(),n=[],r=Sf(Dx(e));let o=!1;for(let i=0;i<r.length;i++){const a=r[i];if(a.type==="grapheme"&&a.graphemeId){const s=t.exec(`
                SELECT id, name, category, notes, created_at, updated_at
                FROM graphemes WHERE id = ?
            `,[a.graphemeId]);if(s.length>0&&s[0].values.length>0){const l=s[0].values[0];n.push({type:"grapheme",position:i,grapheme:{id:l[0],name:l[1],category:l[2],notes:l[3],created_at:l[4],updated_at:l[5]}})}else n.push({type:"ipa",position:i,ipaCharacter:`[?${a.graphemeId}]`}),o=!0}else a.type==="ipa"&&a.ipaCharacter&&(n.push({type:"ipa",position:i,ipaCharacter:a.ipaCharacter}),o=!0)}return{entries:n,hasIpaFallbacks:o}}const mP={direction:"ltr",glyphSpacing:8,glyphWidth:48,glyphHeight:48,canvasPadding:16};function Hx(e){return{...mP,...e,customLayout:e==null?void 0:e.customLayout}}function gP(e,t={}){const n=Hx(t),{direction:r,customLayout:o}=n;if(r==="custom"&&o)return o(e,n);switch(r){case"rtl":return vP(e,n);case"ttb":return _P(e,n);case"btt":return wP(e,n);case"ltr":default:return yP(e,n)}}function yP(e,t){const{glyphSpacing:n,glyphWidth:r,glyphHeight:o,canvasPadding:i}=t;return e.map((a,s)=>({glyph:a,index:s,x:i+s*(r+n),y:i,width:r,height:o}))}function vP(e,t){const{glyphSpacing:n,glyphWidth:r,glyphHeight:o,canvasPadding:i}=t,a=e.length*r+(e.length-1)*n,s=i+a-r;return e.map((l,c)=>({glyph:l,index:c,x:s-c*(r+n),y:i,width:r,height:o}))}function _P(e,t){const{glyphSpacing:n,glyphWidth:r,glyphHeight:o,canvasPadding:i}=t;return e.map((a,s)=>({glyph:a,index:s,x:i,y:i+s*(o+n),width:r,height:o}))}function wP(e,t){const{glyphSpacing:n,glyphWidth:r,glyphHeight:o,canvasPadding:i}=t,a=e.length*o+(e.length-1)*n,s=i+a-o;return e.map((l,c)=>({glyph:l,index:c,x:i,y:s-c*(o+n),width:r,height:o}))}function bP(e,t={}){const n=Hx(t),{canvasPadding:r,glyphWidth:o,glyphHeight:i}=n;if(e.length===0)return{width:r*2+o,height:r*2+i,minX:0,minY:0,maxX:r*2+o,maxY:r*2+i};let a=1/0,s=1/0,l=-1/0,c=-1/0;for(const u of e)a=Math.min(a,u.x),s=Math.min(s,u.y),l=Math.max(l,u.x+u.width),c=Math.max(c,u.y+u.height);return{width:l-a+r*2,height:c-s+r*2,minX:a-r,minY:s-r,maxX:l+r,maxY:c+r}}function EP(e,t=2,n=24){if(e.length===0)return"";if(e.length===1)return e[0];const r=e.length*n+(e.length-1)*t,o=n,i=e.map((a,s)=>{const l=a.match(/<svg[^>]*>([\s\S]*?)<\/svg>/i),c=l?l[1]:a;return`<g transform="translate(${s*(n+t)}, 0)">${c}</g>`});return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${r} ${o}" width="${r}" height="${o}">${i.join("")}</svg>`}function SP(e){if(!e.glyphs||e.glyphs.length===0)return"";const t=e.glyphs.filter(n=>n.svg_data).map(n=>n.svg_data);return EP(t)}function xP(e){return{id:e.id,name:e.name,svg_data:SP(e),category:e.category,notes:e.notes}}function CP(e){return typeof e=="object"&&e!==null&&"glyphs"in e&&Array.isArray(e.glyphs)}function Xx(e){return CP(e)?xP(e):{id:e.id,name:e.name,svg_data:e.svg_data,category:e.category,notes:e.notes,usageCount:e.usageCount}}function TP(e){const t=new Map;for(const n of e){const r=Xx(n);t.set(r.id,r)}return t}const NP=1e6;function kP(e){let t=5381;for(let n=0;n<e.length;n++)t=(t<<5)+t^e.charCodeAt(n);return Math.abs(t)}function Yx(e){return-(1+kP(e)%NP)}function Md(e){return e<0}function AP(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function RP(e){return`<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
  <style>
    .ipa-char {
      font-family: "Doulos SIL", "Charis SIL", "Gentium Plus", "DejaVu Sans", "Lucida Sans Unicode", "Arial Unicode MS", sans-serif;
      font-size: 28px;
      fill: currentColor;
      dominant-baseline: central;
      text-anchor: middle;
    }
  </style>
  <text x="24" y="24" class="ipa-char">${AP(e)}</text>
</svg>`}function Ec(e,t){return{id:Yx(e),ipaCharacter:e,name:e,svg_data:RP(e),category:"IPA Fallback",notes:t??null,source:"virtual-ipa"}}function og(e,t){return t==null||e.coverage>t.coverage?!0:e.coverage<t.coverage?!1:e.graphemeCount<t.graphemeCount}function qx(e,t){const n=new Map;for(let r=0;r<e.length;r++){const o=e.substring(r),i=[];for(const a of t)o.startsWith(a.phoneme)&&i.push({mapping:a,endIndex:r+a.phoneme.length});i.length>0&&n.set(r,i)}return n}function IP(e,t,n){const r=[];let o=t;for(;o>0;){const c=e[o];r.push({match:c.lastMatch,isSkip:c.isSkip,skippedChar:c.skippedChar}),o=c.prevIndex}r.reverse();const i=[],a=[];let s=!1,l=0;for(const c of r)if(c.isSkip&&c.skippedChar){const u=Yx(c.skippedChar);i.push({grapheme_id:u,position:l++,isVirtual:!0,ipaCharacter:c.skippedChar}),a.push(c.skippedChar),s=!0}else c.match&&(i.push({grapheme_id:c.match.grapheme_id,position:l++,isVirtual:!1}),a.push(c.match.phoneme));return{spelling:i,segments:a,hasVirtualGlyphs:s}}function Kx(e){if(!e||e.trim()==="")return{success:!1,spelling:[],segments:[],unmatchedParts:[],error:"Pronunciation is empty"};const t=uv();if(t.length===0)return{success:!1,spelling:[],segments:[],unmatchedParts:[e],error:'No phonemes are marked for auto-spelling. Create graphemes with phonemes and enable "use in auto-spelling".'};const n=Zx(t);return LP(e,n)}function Zx(e){const t=new Map,n=[];for(const r of e)t.has(r.phoneme)||(t.set(r.phoneme,r.grapheme_id),n.push({phoneme:r.phoneme,grapheme_id:r.grapheme_id}));return n}function LP(e,t){const n=e.length,r=qx(e,t),o=new Array(n+1);o[0]={coverage:0,graphemeCount:0,prevIndex:-1,lastMatch:null,isSkip:!1};for(let c=1;c<=n;c++)for(let u=0;u<c;u++){if(!o[u])continue;const d=r.get(u);if(d){for(const{mapping:f,endIndex:m}of d)if(m===c){const y={coverage:o[u].coverage+(c-u),graphemeCount:o[u].graphemeCount+1,prevIndex:u,lastMatch:f,isSkip:!1};og(y,o[c])&&(o[c]=y)}}}if(!o[n]){let c=0;for(let d=n;d>=0;d--)if(o[d]){c=d;break}const u=[];return c<n&&u.push(e.substring(c)),{success:!1,spelling:[],segments:[],unmatchedParts:u.length>0?u:[e],error:`Could not match: ${u.length>0?u.join(", "):e}`}}const i=[];let a=n;for(;a>0&&o[a];){const c=o[a].lastMatch;c&&i.push(c),a=o[a].prevIndex}i.reverse();const s=[],l=[];for(let c=0;c<i.length;c++)s.push({grapheme_id:i[c].grapheme_id,position:c}),l.push(i[c].phoneme);return{success:!0,spelling:s,segments:l,unmatchedParts:[]}}function OP(e,t){const n=e.length,r=qx(e,t),o=new Array(n+1);o[0]={coverage:0,graphemeCount:0,prevIndex:-1,lastMatch:null,isSkip:!1};for(let l=1;l<=n;l++){if(o[l-1]){const c={coverage:o[l-1].coverage,graphemeCount:o[l-1].graphemeCount+1,prevIndex:l-1,lastMatch:null,isSkip:!0,skippedChar:e[l-1]};og(c,o[l])&&(o[l]=c)}for(let c=0;c<l;c++){if(!o[c])continue;const u=r.get(c);if(u){for(const{mapping:d,endIndex:f}of u)if(f===l){const m={coverage:o[c].coverage+(l-c),graphemeCount:o[c].graphemeCount+1,prevIndex:c,lastMatch:d,isSkip:!1};og(m,o[l])&&(o[l]=m)}}}}const{spelling:i,segments:a,hasVirtualGlyphs:s}=IP(o,n);return{success:i.length>0,spelling:i,segments:a,unmatchedParts:[],hasVirtualGlyphs:s}}function Qx(e){if(!e||e.trim()==="")return{success:!1,spelling:[],segments:[],unmatchedParts:[],error:"Pronunciation is empty",hasVirtualGlyphs:!1};const t=uv(),n=Zx(t);return OP(e,n)}function PP(e){return Qx(e)}function MP(e){const t=new Map;for(const n of e.spelling)if(n.isVirtual&&n.ipaCharacter){const r=Ec(n.ipaCharacter);t.set(n.grapheme_id,r)}return t}function Ge(e,t,n){return{success:!1,error:{code:e,message:t,details:n}}}function tn(e){return{success:!0,data:e}}function nn(){return ga()?null:Ge("DB_NOT_INITIALIZED","Database not initialized. Call initDatabase() first.")}function DP(e){var r,o,i,a;const t=nn();if(t)return t;const n=e.lemma&&e.lemma.trim()?e.lemma.trim():e.pronunciation&&e.pronunciation.trim()?e.pronunciation.trim():void 0;if(!n)return Ge("VALIDATION_ERROR","Lemma or pronunciation is required");try{const s=nP({...e,lemma:n,pronunciation:(r=e.pronunciation)==null?void 0:r.trim(),meaning:(o=e.meaning)==null?void 0:o.trim(),part_of_speech:(i=e.part_of_speech)==null?void 0:i.trim(),notes:(a=e.notes)==null?void 0:a.trim()});return tn(s)}catch(s){const l=s instanceof Error?s.message:"Failed to create lexicon entry";return Ge("OPERATION_FAILED",l)}}function FP(e){const t=nn();if(t)return t;try{const n=go(e);return n?tn(n):Ge("NOT_FOUND",`Lexicon entry with id ${e} not found`)}catch(n){const r=n instanceof Error?n.message:"Failed to get lexicon entry";return Ge("OPERATION_FAILED",r)}}function $P(e){const t=nn();if(t)return t;try{const n=$x(e);return n?tn(n):Ge("NOT_FOUND",`Lexicon entry with id ${e} not found`)}catch(n){const r=n instanceof Error?n.message:"Failed to get lexicon entry";return Ge("OPERATION_FAILED",r)}}function BP(){const e=nn();if(e)return e;try{const t=Bx();return tn({entries:t,total:t.length})}catch(t){const n=t instanceof Error?t.message:"Failed to get lexicon entries";return Ge("OPERATION_FAILED",n)}}function VP(){const e=nn();if(e)return e;try{const t=Vx();return tn({entries:t,total:t.length})}catch(t){const n=t instanceof Error?t.message:"Failed to get lexicon entries";return Ge("OPERATION_FAILED",n)}}function UP(){const e=nn();if(e)return e;try{const t=oP();return tn({entries:t,total:t.length})}catch(t){const n=t instanceof Error?t.message:"Failed to get lexicon entries";return Ge("OPERATION_FAILED",n)}}function zP(e){const t=nn();if(t)return t;try{const n=iP(e);return tn({entries:n,total:n.length})}catch(n){const r=n instanceof Error?n.message:"Failed to search lexicon entries";return Ge("OPERATION_FAILED",r)}}function jP(e){const t=nn();if(t)return t;try{const n=aP(e);return tn({entries:n,total:n.length})}catch(n){const r=n instanceof Error?n.message:"Failed to get lexicon entries";return Ge("OPERATION_FAILED",r)}}function WP(e,t){var r,o,i,a,s;const n=nn();if(n)return n;try{const l=sP(e,{...t,lemma:(r=t.lemma)==null?void 0:r.trim(),pronunciation:(o=t.pronunciation)==null?void 0:o.trim(),meaning:(i=t.meaning)==null?void 0:i.trim(),part_of_speech:(a=t.part_of_speech)==null?void 0:a.trim(),notes:(s=t.notes)==null?void 0:s.trim()});return l?tn(l):Ge("NOT_FOUND",`Lexicon entry with id ${e} not found`)}catch(l){const c=l instanceof Error?l.message:"Failed to update lexicon entry";return Ge("OPERATION_FAILED",c)}}function GP(e){const t=nn();if(t)return t;try{return lP(e)?tn(void 0):Ge("NOT_FOUND",`Lexicon entry with id ${e} not found`)}catch(n){const r=n instanceof Error?n.message:"Failed to delete lexicon entry";return Ge("OPERATION_FAILED",r)}}function HP(e,t){const n=nn();if(n)return n;try{return go(e)?(Ux(e,t.spelling),tn(void 0)):Ge("NOT_FOUND",`Lexicon entry with id ${e} not found`)}catch(r){const o=r instanceof Error?r.message:"Failed to update spelling";return o.includes("FOREIGN KEY constraint failed")?Ge("CONSTRAINT_VIOLATION","One or more grapheme IDs do not exist"):Ge("OPERATION_FAILED",o)}}function XP(e,t){const n=nn();if(n)return n;try{if(!go(e))return Ge("NOT_FOUND",`Lexicon entry with id ${e} not found`);for(const o of t.ancestry)if(jx(e,o.ancestor_id))return Ge("CONSTRAINT_VIOLATION",`Adding ancestor ${o.ancestor_id} would create a cycle in the etymology tree`);return dP(e,t.ancestry),tn(void 0)}catch(r){const o=r instanceof Error?r.message:"Failed to update ancestry";return o.includes("FOREIGN KEY constraint failed")?Ge("CONSTRAINT_VIOLATION","One or more ancestor IDs do not exist"):Ge("OPERATION_FAILED",o)}}function YP(e,t){const n=nn();if(n)return n;try{const r=fP(e,t);return tn(r)}catch(r){const o=r instanceof Error?r.message:"Failed to get ancestry tree";return o.includes("not found")?Ge("NOT_FOUND",o):Ge("OPERATION_FAILED",o)}}function qP(e){const t=nn();if(t)return t;try{const n=pP(e);return tn(n)}catch(n){const r=n instanceof Error?n.message:"Failed to get ancestor IDs";return Ge("OPERATION_FAILED",r)}}function KP(e){const t=nn();if(t)return t;try{const n=hP(e);return tn(n)}catch(n){const r=n instanceof Error?n.message:"Failed to get descendant IDs";return Ge("OPERATION_FAILED",r)}}function ZP(e,t){const n=nn();if(n)return n;try{const r=jx(e,t);return tn(r)}catch(r){const o=r instanceof Error?r.message:"Failed to check for cycle";return Ge("OPERATION_FAILED",o)}}function QP(e){const t=nn();if(t)return t;try{const n=Kx(e);return tn(n)}catch(n){const r=n instanceof Error?n.message:"Failed to generate auto-spelling";return Ge("OPERATION_FAILED",r)}}function JP(e){const t=nn();if(t)return t;try{const n=PP(e);return tn(n)}catch(n){const r=n instanceof Error?n.message:"Failed to preview auto-spelling";return Ge("OPERATION_FAILED",r)}}function eM(e){const t=nn();if(t)return t;try{const n=go(e);if(!n)return Ge("NOT_FOUND",`Lexicon entry with id ${e} not found`);if(!n.pronunciation)return Ge("VALIDATION_ERROR","Lexicon entry has no pronunciation to generate spelling from");const r=Kx(n.pronunciation);if(!r.success)return Ge("OPERATION_FAILED",r.error??"Failed to generate spelling");Ux(e,r.spelling);const o=rP(e);return o?tn(o):Ge("OPERATION_FAILED","Failed to get updated lexicon entry")}catch(n){const r=n instanceof Error?n.message:"Failed to apply auto-spelling";return Ge("OPERATION_FAILED",r)}}const tM={create:DP,getById:FP,getByIdComplete:$P,getAll:BP,getAllComplete:VP,getAllWithUsage:UP,search:zP,getByNative:jP,update:WP,delete:GP,updateSpelling:HP,updateAncestry:XP,getAncestryTree:YP,getAllAncestorIds:qP,getAllDescendantIds:KP,wouldCreateCycle:ZP,generateAutoSpelling:QP,previewAutoSpelling:JP,applyAutoSpelling:eM},xf=`
`;function nM(e){if(!e||!e.trim())return[];const t=[];let n=0;const r=e.split(/\n/);for(let o=0;o<r.length;o++){const a=r[o].split(/[ \t]+/).filter(s=>s.length>0);for(const s of a)t.push({originalWord:s,normalizedWord:s.toLowerCase().trim(),position:n++});o<r.length-1&&t.push({originalWord:xf,normalizedWord:xf,position:n++})}return t}function rM(e,t){for(const n of t)if(n.lemma.toLowerCase()===e)return n;return null}function oM(e,t){const n=rM(e.normalizedWord,t);if(n)return{word:e,type:"lexicon",lexiconEntry:n,spellingDisplay:n.spellingDisplay,hasVirtualGlyphs:n.hasIpaFallbacks};const r=Qx(e.originalWord),o=r.spelling.map((i,a)=>i.isVirtual&&i.ipaCharacter?{type:"ipa",position:a,ipaCharacter:i.ipaCharacter}:{type:"ipa",position:a,ipaCharacter:e.originalWord[a]||"?"});return{word:e,type:"autospell",spellingDisplay:o,hasVirtualGlyphs:r.hasVirtualGlyphs}}function iM(e,t){return e!=null&&e.useNoGlyph?null:(e==null?void 0:e.graphemeId)!==null&&t?{type:"grapheme",position:0,grapheme:{id:t.id,name:t.name,category:t.category,notes:t.notes,created_at:t.created_at,updated_at:t.updated_at}}:{type:"ipa",position:0,ipaCharacter:" "}}function aM(e,t,n){var v,S;const r=e,o=e.trim(),i=nM(o),s=i.filter(_=>_.originalWord!==xf).map(_=>oM(_,t)),l=(v=n==null?void 0:n.punctuationSettings)==null?void 0:v.wordSeparator,c=(l==null?void 0:l.graphemeId)!==null&&(l==null?void 0:l.graphemeId)!==void 0?(S=n==null?void 0:n.punctuationGraphemes)==null?void 0:S.get(l.graphemeId):null,u=[];let d=0,f=!1,m=0,y=!1;for(let _=0;_<i.length;_++){if(i[_].originalWord===xf){u.push({type:"ipa",position:d++,ipaCharacter:`
`}),y=!1;continue}if(y){const x=iM(l,c);x!==null&&u.push({...x,position:d++})}const w=s[m++];for(const x of w.spellingDisplay)u.push({...x,position:d++});w.hasVirtualGlyphs&&(f=!0),y=!0}return{originalPhrase:r,normalizedPhrase:o,wordTranslations:s,combinedSpelling:u,hasVirtualGlyphs:f,timestamp:new Date().toISOString()}}function ig(e,t,n){return{success:!1,error:{code:e,message:t,details:n}}}function sM(e){return{success:!0,data:e}}function lM(){return ga()?null:ig("DB_NOT_INITIALIZED","Database not initialized. Call initDatabase() first.")}function cM(e,t){const n=lM();if(n)return n;if(!e||!e.trim())return ig("VALIDATION_ERROR","Phrase is empty");try{const r=Vx();let o;if(t){const a=kx(),s=new Map;for(const l of a)s.set(l.id,l);o={punctuationSettings:t,punctuationGraphemes:s}}const i=aM(e,r,o);return sM(i)}catch(r){const o=r instanceof Error?r.message:"Translation failed";return ig("OPERATION_FAILED",o)}}const uM={translate:cM},He={glyph:aO,grapheme:FO,phoneme:GO,settings:Ox,database:ZO,lexicon:tM,phrase:uM},dM={glyphs:[],glyphsWithUsage:[],graphemesComplete:[],lexiconComplete:[],glyphCount:0,graphemeCount:0,lexiconCount:0},Jx=h.createContext(null);function fM({children:e}){const[t,n]=h.useState(!0),[r,o]=h.useState(!1),[i,a]=h.useState(null),[s,l]=h.useState(dM),[c,u]=h.useState(sp);h.useEffect(()=>{let _=!0;async function b(){try{await DL(),_&&(o(!0),a(null))}catch(w){_&&a(w instanceof Error?w:new Error("Database initialization failed"))}finally{_&&n(!1)}}return b(),()=>{_=!1}},[]),h.useEffect(()=>EO(b=>{u(b)}),[]);const d=h.useCallback(()=>{if(!r)return;const _=He.glyph.getAll(),b=He.glyph.getAllWithUsage();_.success&&b.success&&l(w=>{var x,N,C;return{...w,glyphs:((x=_.data)==null?void 0:x.glyphs)??[],glyphsWithUsage:((N=b.data)==null?void 0:N.glyphs)??[],glyphCount:((C=_.data)==null?void 0:C.total)??0}})},[r]),f=h.useCallback(()=>{if(!r)return;const _=He.grapheme.getAllComplete();_.success&&l(b=>{var w,x;return{...b,graphemesComplete:((w=_.data)==null?void 0:w.graphemes)??[],graphemeCount:((x=_.data)==null?void 0:x.total)??0}})},[r]),m=h.useCallback(()=>{if(!r)return;const _=He.lexicon.getAllComplete();_.success&&l(b=>{var w,x;return{...b,lexiconComplete:((w=_.data)==null?void 0:w.entries)??[],lexiconCount:((x=_.data)==null?void 0:x.total)??0}})},[r]),y=h.useCallback(()=>{d(),f(),m()},[d,f,m]);h.useEffect(()=>{r&&y()},[r,y]);const v=h.useMemo(()=>{const _=(b,w)=>(...x)=>{const N=b(...x);return N.success&&w(),N};return{glyph:{...He.glyph,create:_(He.glyph.create,y),update:_(He.glyph.update,y),delete:_(He.glyph.delete,y),forceDelete:_(He.glyph.forceDelete,y),cascadeDelete:_(He.glyph.cascadeDelete,y)},grapheme:{...He.grapheme,create:_(He.grapheme.create,y),update:_(He.grapheme.update,f),updateGlyphs:_(He.grapheme.updateGlyphs,f),delete:_(He.grapheme.delete,y)},phoneme:{...He.phoneme,add:_(He.phoneme.add,f),update:_(He.phoneme.update,f),delete:_(He.phoneme.delete,f),deleteAllForGrapheme:_(He.phoneme.deleteAllForGrapheme,f)},settings:He.settings,database:{...He.database,clear:()=>{const b=He.database.clear();return b.success&&y(),b},reset:()=>{const b=He.database.reset();return b.success&&y(),b},import:async b=>{const w=await He.database.import(b);return w.success&&y(),w}},lexicon:{...He.lexicon,create:_(He.lexicon.create,m),update:_(He.lexicon.update,m),delete:_(He.lexicon.delete,m),updateSpelling:_(He.lexicon.updateSpelling,m),updateAncestry:_(He.lexicon.updateAncestry,m),applyAutoSpelling:_(He.lexicon.applyAutoSpelling,m)},phrase:He.phrase}},[y,d,f,m]),S=h.useMemo(()=>({api:v,data:s,settings:c,isLoading:t,isReady:r,error:i,refresh:y,refreshGlyphs:d,refreshGraphemes:f,refreshLexicon:m}),[v,s,c,t,r,i,y,d,f,m]);return p(Jx.Provider,{value:S,children:e})}function Xt(){const e=h.useContext(Jx);if(!e)throw new Error("useEtymolog must be used within an EtymologProvider");return e}function eC(){const{api:e}=Xt();return e}function tC(){const{settings:e,api:t}=Xt(),n=h.useCallback(o=>t.settings.update(o),[t]),r=h.useCallback(()=>t.settings.reset(),[t]);return{settings:e,updateSettings:n,resetSettings:r}}const pM="_hidden_22xdi_1",hM="_positionRelative_22xdi_5",mM="_positionAbsolute_22xdi_9",gM="_positionFixed_22xdi_13",yM="_positionStatic_22xdi_17",vM="_displayInlineBlock_22xdi_21",_M="_cursorPointer_22xdi_26",wM="_cursorDefault_22xdi_30",bM="_cursorText_22xdi_34",EM="_cursorMove_22xdi_38",SM="_cursorNotAllowed_22xdi_42",xM="_cursorGrab_22xdi_46",CM="_transformStylePreserve3d_22xdi_51",TM="_transformRotateY180_22xdi_55",NM="_transformRotateX180_22xdi_59",kM="_transformRotateZ180_22xdi_63",AM="_transformRotateY90_22xdi_67",RM="_overflowHidden_22xdi_72",IM="_overflowAuto_22xdi_76",LM="_overflowScroll_22xdi_80",mv={hidden:pM,positionRelative:hM,positionAbsolute:mM,positionFixed:gM,positionStatic:yM,displayInlineBlock:vM,cursorPointer:_M,cursorDefault:wM,cursorText:bM,cursorMove:EM,cursorNotAllowed:SM,cursorGrab:xM,transformStylePreserve3d:CM,transformRotateY180:TM,transformRotateX180:NM,transformRotateZ180:kM,transformRotateY90:AM,overflowHidden:RM,overflowAuto:IM,overflowScroll:LM},OM="_flex_vjhre_1",PM="_flexColumn_vjhre_1",MM="_flexRow_vjhre_1",DM="_flexCenter_vjhre_11",FM="_justifyContentStart_vjhre_25",$M="_justifyContentEnd_vjhre_29",BM="_justifyContentCenter_vjhre_33",VM="_justifyContentSpaceBetween_vjhre_37",UM="_alignItemsStart_vjhre_42",zM="_alignItemsEnd_vjhre_46",jM="_alignItemsCenter_vjhre_50",WM="_flexGrow_vjhre_55",GM="_flexShrink_vjhre_59",HM="_flexNoGrow_vjhre_63",XM="_flexNoShrink_vjhre_69",YM="_flexGapXXS_vjhre_74",qM="_flexGapXS_vjhre_78",KM="_flexGapS_vjhre_82",ZM="_flexGapM_vjhre_86",QM="_flexGapL_vjhre_90",JM="_flexGapXL_vjhre_94",e3="_flexGapXXL_vjhre_98",t3="_flexWrap_vjhre_103",n3="_flexWrapReverse_vjhre_107",r3="_flexWrapNoWrap_vjhre_111",o3="_alignSelfStart_vjhre_116",i3="_alignSelfEnd_vjhre_120",a3="_alignSelfCenter_vjhre_124",s3="_alignSelfStretch_vjhre_128",l3="_alignSelfBaseline_vjhre_132",c3="_justifySelfStart_vjhre_137",u3="_justifySelfEnd_vjhre_141",d3="_justifySelfCenter_vjhre_145",f3="_justifySelfStretch_vjhre_149",p3="_justifySelfBaseline_vjhre_153",ne={flex:OM,flexColumn:PM,flexRow:MM,flexCenter:DM,justifyContentStart:FM,justifyContentEnd:$M,justifyContentCenter:BM,justifyContentSpaceBetween:VM,alignItemsStart:UM,alignItemsEnd:zM,alignItemsCenter:jM,flexGrow:WM,flexShrink:GM,flexNoGrow:HM,flexNoShrink:XM,flexGapXXS:YM,flexGapXS:qM,flexGapS:KM,flexGapM:ZM,flexGapL:QM,flexGapXL:JM,flexGapXXL:e3,flexWrap:t3,flexWrapReverse:n3,flexWrapNoWrap:r3,alignSelfStart:o3,alignSelfEnd:i3,alignSelfCenter:a3,alignSelfStretch:s3,alignSelfBaseline:l3,justifySelfStart:c3,justifySelfEnd:u3,justifySelfCenter:d3,justifySelfStretch:f3,justifySelfBaseline:p3};const h3="_borderCorner_11tsj_39",m3="_onlyBorderCorner_11tsj_60",g3="_innerContainer_11tsj_82",y3="_underlineHighlightColorPrimary_11tsj_103",v3="_underlineHighlightColorSecondary_11tsj_120",_3="_underlineHighlightColorPrimaryBackground_11tsj_137",w3="_underlineHighlightColorSecondaryBackground_11tsj_154",b3="_underlineHighlightColorPrimaryDark_11tsj_171",E3="_underlineHighlightColorSecondaryDark_11tsj_188",S3="_diagonalStripes_11tsj_206",x3="_topSpanDecorBefore_11tsj_216",C3="_topSpanDecorAfter_11tsj_228",T3="_hoverOpacity_11tsj_241",N3="_blurEffectBefore_11tsj_249",k3="_backgroundColorBgPrimary_11tsj_272",A3="_backgroundColorBgSecondary_11tsj_273",R3="_backgroundColorBgTertiary_11tsj_274",I3="_backgroundColorTextPrimary_11tsj_275",L3="_backgroundColorTextSecondary_11tsj_276",O3="_backgroundColorTextPrimaryMuted_11tsj_277",P3="_backgroundColorTextSecondaryMuted_11tsj_278",M3="_borderRadiusNone_11tsj_340",D3="_borderRadiusS_11tsj_344",F3="_borderRadiusM_11tsj_348",$3="_borderRadiusL_11tsj_352",B3="_opacity100_11tsj_359",V3="_opacity90_11tsj_363",U3="_opacity75_11tsj_367",z3="_opacity50_11tsj_371",j3="_opacity25_11tsj_375",W3="_opacity10_11tsj_359",G3="_opacity0_11tsj_383",zo={borderCorner:h3,onlyBorderCorner:m3,innerContainer:g3,underlineHighlightColorPrimary:y3,underlineHighlightColorSecondary:v3,underlineHighlightColorPrimaryBackground:_3,underlineHighlightColorSecondaryBackground:w3,underlineHighlightColorPrimaryDark:b3,underlineHighlightColorSecondaryDark:E3,diagonalStripes:S3,topSpanDecorBefore:x3,topSpanDecorAfter:C3,hoverOpacity:T3,blurEffectBefore:N3,backgroundColorBgPrimary:k3,backgroundColorBgSecondary:A3,backgroundColorBgTertiary:R3,backgroundColorTextPrimary:I3,backgroundColorTextSecondary:L3,backgroundColorTextPrimaryMuted:O3,backgroundColorTextSecondaryMuted:P3,borderRadiusNone:M3,borderRadiusS:D3,borderRadiusM:F3,borderRadiusL:$3,opacity100:B3,opacity90:V3,opacity75:U3,opacity50:z3,opacity25:j3,opacity10:W3,opacity0:G3};const H3="_headerFooterSizer_16e3p_1",X3="_contentSizer_16e3p_11",Y3="_contentContainerSizeTemplate_16e3p_20",q3="_contentContainerFormat_16e3p_20",K3="_contentContainer_16e3p_20",Z3="_parentWidth_16e3p_48",Q3="_parentHeight_16e3p_52",J3="_parentSize_16e3p_56",eD="_paddingNone_16e3p_62",tD="_paddingXS_16e3p_66",nD="_paddingXSHeight_16e3p_70",rD="_paddingXSWidth_16e3p_74",oD="_paddingS_16e3p_78",iD="_paddingSHeight_16e3p_82",aD="_paddingSWidth_16e3p_86",sD="_paddingM_16e3p_90",lD="_paddingMHeight_16e3p_94",cD="_paddingMWidth_16e3p_98",uD="_paddingL_16e3p_102",dD="_paddingLHeight_16e3p_106",fD="_paddingLWidth_16e3p_110",pD="_paddingXL_16e3p_114",hD="_paddingXLHeight_16e3p_118",mD="_paddingXLWidth_16e3p_122",gD="_paddingText_16e3p_126",yD="_marginNone_16e3p_131",vD="_marginXS_16e3p_135",_D="_marginXSHeight_16e3p_139",wD="_marginXSWidth_16e3p_143",bD="_marginS_16e3p_147",ED="_marginSHeight_16e3p_151",SD="_marginSWidth_16e3p_155",xD="_marginM_16e3p_159",CD="_marginMHeight_16e3p_163",TD="_marginMWidth_16e3p_167",ND="_marginL_16e3p_171",kD="_marginLHeight_16e3p_175",AD="_marginLWidth_16e3p_179",RD="_marginXL_16e3p_183",ID="_marginXLHeight_16e3p_187",LD="_marginXLWidth_16e3p_191",OD="_marginTopAuto_16e3p_195",PD="_centerChildrenColumn_16e3p_200",MD="_fitContent_16e3p_210",DD="_fitWidth_16e3p_215",FD="_fitHeight_16e3p_219",st={headerFooterSizer:H3,contentSizer:X3,contentContainerSizeTemplate:Y3,contentContainerFormat:q3,contentContainer:K3,parentWidth:Z3,parentHeight:Q3,parentSize:J3,paddingNone:eD,paddingXS:tD,paddingXSHeight:nD,paddingXSWidth:rD,paddingS:oD,paddingSHeight:iD,paddingSWidth:aD,paddingM:sD,paddingMHeight:lD,paddingMWidth:cD,paddingL:uD,paddingLHeight:dD,paddingLWidth:fD,paddingXL:pD,paddingXLHeight:hD,paddingXLWidth:mD,paddingText:gD,marginNone:yD,marginXS:vD,marginXSHeight:_D,marginXSWidth:wD,marginS:bD,marginSHeight:ED,marginSWidth:SD,marginM:xD,marginMHeight:CD,marginMWidth:TD,marginL:ND,marginLHeight:kD,marginLWidth:AD,marginXL:RD,marginXLHeight:ID,marginXLWidth:LD,marginTopAuto:OD,centerChildrenColumn:PD,fitContent:MD,fitWidth:DD,fitHeight:FD};const $D="_primaryOutlineContainer_1pdhf_1",BD="_inverseContainer_1pdhf_5",VD={primaryOutlineContainer:$D,inverseContainer:BD},UD="_spinner_124lh_1",zD="_spin_124lh_1",jD="_loadingText_124lh_11",WD="_successIcon_124lh_17",GD="_failureIcon_124lh_29",HD="_messageText_124lh_41",nl={spinner:UD,spin:zD,loadingText:jD,successIcon:WD,failureIcon:GD,messageText:HD};var nC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var i="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(i=o(i,r(s)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var a="";for(var s in i)t.call(i,s)&&i[s]&&(a=o(a,s));return a}function o(i,a){return a?i?i+" "+a:i+a:i}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(nC);var XD=nC.exports;const j=iy(XD);function rC(e={},t={}){return(n,r={})=>{const o=e[n||""]||t[n||""]||n||"";return!r||Object.keys(r).length===0?o:o.replace(/%\{([^}]+)\}/g,(i,a)=>{const s=r[a];return s!=null?String(s):""})}}/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Ps=9e15,ya=1e9,ag="0123456789abcdef",Cf="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Tf="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",sg={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ps,maxE:Ps,crypto:!1},oC,ei,De=!0,lp="[DecimalError] ",aa=lp+"Invalid argument: ",iC=lp+"Precision limit exceeded",aC=lp+"crypto unavailable",sC="[object Decimal]",kn=Math.floor,Qt=Math.pow,YD=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,qD=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,KD=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,lC=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fo=1e7,Le=7,ZD=9007199254740991,QD=Cf.length-1,lg=Tf.length-1,de={toStringTag:sC};de.absoluteValue=de.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),Ae(e)};de.ceil=function(){return Ae(new this.constructor(this),this.e+1,2)};de.clampedTo=de.clamp=function(e,t){var n,r=this,o=r.constructor;if(e=new o(e),t=new o(t),!e.s||!t.s)return new o(NaN);if(e.gt(t))throw Error(aa+t);return n=r.cmp(e),n<0?e:r.cmp(t)>0?t:new o(r)};de.comparedTo=de.cmp=function(e){var t,n,r,o,i=this,a=i.d,s=(e=new i.constructor(e)).d,l=i.s,c=e.s;if(!a||!s)return!l||!c?NaN:l!==c?l:a===s?0:!a^l<0?1:-1;if(!a[0]||!s[0])return a[0]?l:s[0]?-c:0;if(l!==c)return l;if(i.e!==e.e)return i.e>e.e^l<0?1:-1;for(r=a.length,o=s.length,t=0,n=r<o?r:o;t<n;++t)if(a[t]!==s[t])return a[t]>s[t]^l<0?1:-1;return r===o?0:r>o^l<0?1:-1};de.cosine=de.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Le,r.rounding=1,n=JD(r,pC(r,n)),r.precision=e,r.rounding=t,Ae(ei==2||ei==3?n.neg():n,e,t,!0)):new r(1):new r(NaN)};de.cubeRoot=de.cbrt=function(){var e,t,n,r,o,i,a,s,l,c,u=this,d=u.constructor;if(!u.isFinite()||u.isZero())return new d(u);for(De=!1,i=u.s*Qt(u.s*u,1/3),!i||Math.abs(i)==1/0?(n=gn(u.d),e=u.e,(i=(e-n.length+1)%3)&&(n+=i==1||i==-2?"0":"00"),i=Qt(n,1/3),e=kn((e+1)/3)-(e%3==(e<0?-1:2)),i==1/0?n="5e"+e:(n=i.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),r=new d(n),r.s=u.s):r=new d(i.toString()),a=(e=d.precision)+3;;)if(s=r,l=s.times(s).times(s),c=l.plus(u),r=lt(c.plus(u).times(s),c.plus(l),a+2,1),gn(s.d).slice(0,a)===(n=gn(r.d)).slice(0,a))if(n=n.slice(a-3,a+1),n=="9999"||!o&&n=="4999"){if(!o&&(Ae(s,e+1,0),s.times(s).times(s).eq(u))){r=s;break}a+=4,o=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Ae(r,e+1,1),t=!r.times(r).times(r).eq(u));break}return De=!0,Ae(r,e,d.rounding,t)};de.decimalPlaces=de.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-kn(this.e/Le))*Le,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};de.dividedBy=de.div=function(e){return lt(this,new this.constructor(e))};de.dividedToIntegerBy=de.divToInt=function(e){var t=this,n=t.constructor;return Ae(lt(t,new n(e),0,1,1),n.precision,n.rounding)};de.equals=de.eq=function(e){return this.cmp(e)===0};de.floor=function(){return Ae(new this.constructor(this),this.e+1,3)};de.greaterThan=de.gt=function(e){return this.cmp(e)>0};de.greaterThanOrEqualTo=de.gte=function(e){var t=this.cmp(e);return t==1||t===0};de.hyperbolicCosine=de.cosh=function(){var e,t,n,r,o,i=this,a=i.constructor,s=new a(1);if(!i.isFinite())return new a(i.s?1/0:NaN);if(i.isZero())return s;n=a.precision,r=a.rounding,a.precision=n+Math.max(i.e,i.sd())+4,a.rounding=1,o=i.d.length,o<32?(e=Math.ceil(o/3),t=(1/up(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),i=rl(a,1,i.times(t),new a(1),!0);for(var l,c=e,u=new a(8);c--;)l=i.times(i),i=s.minus(l.times(u.minus(l.times(u))));return Ae(i,a.precision=n,a.rounding=r,!0)};de.hyperbolicSine=de.sinh=function(){var e,t,n,r,o=this,i=o.constructor;if(!o.isFinite()||o.isZero())return new i(o);if(t=i.precision,n=i.rounding,i.precision=t+Math.max(o.e,o.sd())+4,i.rounding=1,r=o.d.length,r<3)o=rl(i,2,o,o,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,o=o.times(1/up(5,e)),o=rl(i,2,o,o,!0);for(var a,s=new i(5),l=new i(16),c=new i(20);e--;)a=o.times(o),o=o.times(s.plus(a.times(l.times(a).plus(c))))}return i.precision=t,i.rounding=n,Ae(o,t,n,!0)};de.hyperbolicTangent=de.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,lt(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)};de.inverseCosine=de.acos=function(){var e=this,t=e.constructor,n=e.abs().cmp(1),r=t.precision,o=t.rounding;return n!==-1?n===0?e.isNeg()?Ao(t,r,o):new t(0):new t(NaN):e.isZero()?Ao(t,r+4,o).times(.5):(t.precision=r+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=r,t.rounding=o,e.times(2))};de.inverseHyperbolicCosine=de.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,De=!1,n=n.times(n).minus(1).sqrt().plus(n),De=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)};de.inverseHyperbolicSine=de.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,De=!1,n=n.times(n).plus(1).sqrt().plus(n),De=!0,r.precision=e,r.rounding=t,n.ln())};de.inverseHyperbolicTangent=de.atanh=function(){var e,t,n,r,o=this,i=o.constructor;return o.isFinite()?o.e>=0?new i(o.abs().eq(1)?o.s/0:o.isZero()?o:NaN):(e=i.precision,t=i.rounding,r=o.sd(),Math.max(r,e)<2*-o.e-1?Ae(new i(o),e,t,!0):(i.precision=n=r-o.e,o=lt(o.plus(1),new i(1).minus(o),n+e,1),i.precision=e+4,i.rounding=1,o=o.ln(),i.precision=e,i.rounding=t,o.times(.5))):new i(NaN)};de.inverseSine=de.asin=function(){var e,t,n,r,o=this,i=o.constructor;return o.isZero()?new i(o):(t=o.abs().cmp(1),n=i.precision,r=i.rounding,t!==-1?t===0?(e=Ao(i,n+4,r).times(.5),e.s=o.s,e):new i(NaN):(i.precision=n+6,i.rounding=1,o=o.div(new i(1).minus(o.times(o)).sqrt().plus(1)).atan(),i.precision=n,i.rounding=r,o.times(2)))};de.inverseTangent=de.atan=function(){var e,t,n,r,o,i,a,s,l,c=this,u=c.constructor,d=u.precision,f=u.rounding;if(c.isFinite()){if(c.isZero())return new u(c);if(c.abs().eq(1)&&d+4<=lg)return a=Ao(u,d+4,f).times(.25),a.s=c.s,a}else{if(!c.s)return new u(NaN);if(d+4<=lg)return a=Ao(u,d+4,f).times(.5),a.s=c.s,a}for(u.precision=s=d+10,u.rounding=1,n=Math.min(28,s/Le+2|0),e=n;e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(De=!1,t=Math.ceil(s/Le),r=1,l=c.times(c),a=new u(c),o=c;e!==-1;)if(o=o.times(l),i=a.minus(o.div(r+=2)),o=o.times(l),a=i.plus(o.div(r+=2)),a.d[t]!==void 0)for(e=t;a.d[e]===i.d[e]&&e--;);return n&&(a=a.times(2<<n-1)),De=!0,Ae(a,u.precision=d,u.rounding=f,!0)};de.isFinite=function(){return!!this.d};de.isInteger=de.isInt=function(){return!!this.d&&kn(this.e/Le)>this.d.length-2};de.isNaN=function(){return!this.s};de.isNegative=de.isNeg=function(){return this.s<0};de.isPositive=de.isPos=function(){return this.s>0};de.isZero=function(){return!!this.d&&this.d[0]===0};de.lessThan=de.lt=function(e){return this.cmp(e)<0};de.lessThanOrEqualTo=de.lte=function(e){return this.cmp(e)<1};de.logarithm=de.log=function(e){var t,n,r,o,i,a,s,l,c=this,u=c.constructor,d=u.precision,f=u.rounding,m=5;if(e==null)e=new u(10),t=!0;else{if(e=new u(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new u(NaN);t=e.eq(10)}if(n=c.d,c.s<0||!n||!n[0]||c.eq(1))return new u(n&&!n[0]?-1/0:c.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)i=!0;else{for(o=n[0];o%10===0;)o/=10;i=o!==1}if(De=!1,s=d+m,a=Vi(c,s),r=t?Nf(u,s+10):Vi(e,s),l=lt(a,r,s,1),Zc(l.d,o=d,f))do if(s+=10,a=Vi(c,s),r=t?Nf(u,s+10):Vi(e,s),l=lt(a,r,s,1),!i){+gn(l.d).slice(o+1,o+15)+1==1e14&&(l=Ae(l,d+1,0));break}while(Zc(l.d,o+=10,f));return De=!0,Ae(l,d,f)};de.minus=de.sub=function(e){var t,n,r,o,i,a,s,l,c,u,d,f,m=this,y=m.constructor;if(e=new y(e),!m.d||!e.d)return!m.s||!e.s?e=new y(NaN):m.d?e.s=-e.s:e=new y(e.d||m.s!==e.s?m:NaN),e;if(m.s!=e.s)return e.s=-e.s,m.plus(e);if(c=m.d,f=e.d,s=y.precision,l=y.rounding,!c[0]||!f[0]){if(f[0])e.s=-e.s;else if(c[0])e=new y(m);else return new y(l===3?-0:0);return De?Ae(e,s,l):e}if(n=kn(e.e/Le),u=kn(m.e/Le),c=c.slice(),i=u-n,i){for(d=i<0,d?(t=c,i=-i,a=f.length):(t=f,n=u,a=c.length),r=Math.max(Math.ceil(s/Le),a)+2,i>r&&(i=r,t.length=1),t.reverse(),r=i;r--;)t.push(0);t.reverse()}else{for(r=c.length,a=f.length,d=r<a,d&&(a=r),r=0;r<a;r++)if(c[r]!=f[r]){d=c[r]<f[r];break}i=0}for(d&&(t=c,c=f,f=t,e.s=-e.s),a=c.length,r=f.length-a;r>0;--r)c[a++]=0;for(r=f.length;r>i;){if(c[--r]<f[r]){for(o=r;o&&c[--o]===0;)c[o]=fo-1;--c[o],c[r]+=fo}c[r]-=f[r]}for(;c[--a]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=cp(c,n),De?Ae(e,s,l):e):new y(l===3?-0:0)};de.modulo=de.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?Ae(new r(n),r.precision,r.rounding):(De=!1,r.modulo==9?(t=lt(n,e.abs(),0,3,1),t.s*=e.s):t=lt(n,e,0,r.modulo,1),t=t.times(e),De=!0,n.minus(t))};de.naturalExponential=de.exp=function(){return cg(this)};de.naturalLogarithm=de.ln=function(){return Vi(this)};de.negated=de.neg=function(){var e=new this.constructor(this);return e.s=-e.s,Ae(e)};de.plus=de.add=function(e){var t,n,r,o,i,a,s,l,c,u,d=this,f=d.constructor;if(e=new f(e),!d.d||!e.d)return!d.s||!e.s?e=new f(NaN):d.d||(e=new f(e.d||d.s===e.s?d:NaN)),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(c=d.d,u=e.d,s=f.precision,l=f.rounding,!c[0]||!u[0])return u[0]||(e=new f(d)),De?Ae(e,s,l):e;if(i=kn(d.e/Le),r=kn(e.e/Le),c=c.slice(),o=i-r,o){for(o<0?(n=c,o=-o,a=u.length):(n=u,r=i,a=c.length),i=Math.ceil(s/Le),a=i>a?i+1:a+1,o>a&&(o=a,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(a=c.length,o=u.length,a-o<0&&(o=a,n=u,u=c,c=n),t=0;o;)t=(c[--o]=c[o]+u[o]+t)/fo|0,c[o]%=fo;for(t&&(c.unshift(t),++r),a=c.length;c[--a]==0;)c.pop();return e.d=c,e.e=cp(c,r),De?Ae(e,s,l):e};de.precision=de.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(aa+e);return n.d?(t=cC(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};de.round=function(){var e=this,t=e.constructor;return Ae(new t(e),e.e+1,t.rounding)};de.sine=de.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Le,r.rounding=1,n=tF(r,pC(r,n)),r.precision=e,r.rounding=t,Ae(ei>2?n.neg():n,e,t,!0)):new r(NaN)};de.squareRoot=de.sqrt=function(){var e,t,n,r,o,i,a=this,s=a.d,l=a.e,c=a.s,u=a.constructor;if(c!==1||!s||!s[0])return new u(!c||c<0&&(!s||s[0])?NaN:s?a:1/0);for(De=!1,c=Math.sqrt(+a),c==0||c==1/0?(t=gn(s),(t.length+l)%2==0&&(t+="0"),c=Math.sqrt(t),l=kn((l+1)/2)-(l<0||l%2),c==1/0?t="5e"+l:(t=c.toExponential(),t=t.slice(0,t.indexOf("e")+1)+l),r=new u(t)):r=new u(c.toString()),n=(l=u.precision)+3;;)if(i=r,r=i.plus(lt(a,i,n+2,1)).times(.5),gn(i.d).slice(0,n)===(t=gn(r.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!o&&t=="4999"){if(!o&&(Ae(i,l+1,0),i.times(i).eq(a))){r=i;break}n+=4,o=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Ae(r,l+1,1),e=!r.times(r).eq(a));break}return De=!0,Ae(r,l,u.rounding,e)};de.tangent=de.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,n=n.sin(),n.s=1,n=lt(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,Ae(ei==2||ei==4?n.neg():n,e,t,!0)):new r(NaN)};de.times=de.mul=function(e){var t,n,r,o,i,a,s,l,c,u=this,d=u.constructor,f=u.d,m=(e=new d(e)).d;if(e.s*=u.s,!f||!f[0]||!m||!m[0])return new d(!e.s||f&&!f[0]&&!m||m&&!m[0]&&!f?NaN:!f||!m?e.s/0:e.s*0);for(n=kn(u.e/Le)+kn(e.e/Le),l=f.length,c=m.length,l<c&&(i=f,f=m,m=i,a=l,l=c,c=a),i=[],a=l+c,r=a;r--;)i.push(0);for(r=c;--r>=0;){for(t=0,o=l+r;o>r;)s=i[o]+m[r]*f[o-r-1]+t,i[o--]=s%fo|0,t=s/fo|0;i[o]=(i[o]+t)%fo|0}for(;!i[--a];)i.pop();return t?++n:i.shift(),e.d=i,e.e=cp(i,n),De?Ae(e,d.precision,d.rounding):e};de.toBinary=function(e,t){return gv(this,2,e,t)};de.toDecimalPlaces=de.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(ar(e,0,ya),t===void 0?t=r.rounding:ar(t,0,8),Ae(n,e+n.e+1,t))};de.toExponential=function(e,t){var n,r=this,o=r.constructor;return e===void 0?n=Bo(r,!0):(ar(e,0,ya),t===void 0?t=o.rounding:ar(t,0,8),r=Ae(new o(r),e+1,t),n=Bo(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};de.toFixed=function(e,t){var n,r,o=this,i=o.constructor;return e===void 0?n=Bo(o):(ar(e,0,ya),t===void 0?t=i.rounding:ar(t,0,8),r=Ae(new i(o),e+o.e+1,t),n=Bo(r,!1,e+r.e+1)),o.isNeg()&&!o.isZero()?"-"+n:n};de.toFraction=function(e){var t,n,r,o,i,a,s,l,c,u,d,f,m=this,y=m.d,v=m.constructor;if(!y)return new v(m);if(c=n=new v(1),r=l=new v(0),t=new v(r),i=t.e=cC(y)-m.e-1,a=i%Le,t.d[0]=Qt(10,a<0?Le+a:a),e==null)e=i>0?t:c;else{if(s=new v(e),!s.isInt()||s.lt(c))throw Error(aa+s);e=s.gt(t)?i>0?t:c:s}for(De=!1,s=new v(gn(y)),u=v.precision,v.precision=i=y.length*Le*2;d=lt(s,t,0,1,1),o=n.plus(d.times(r)),o.cmp(e)!=1;)n=r,r=o,o=c,c=l.plus(d.times(o)),l=o,o=t,t=s.minus(d.times(o)),s=o;return o=lt(e.minus(n),r,0,1,1),l=l.plus(o.times(c)),n=n.plus(o.times(r)),l.s=c.s=m.s,f=lt(c,r,i,1).minus(m).abs().cmp(lt(l,n,i,1).minus(m).abs())<1?[c,r]:[l,n],v.precision=u,De=!0,f};de.toHexadecimal=de.toHex=function(e,t){return gv(this,16,e,t)};de.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),e==null){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),t===void 0?t=r.rounding:ar(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(De=!1,n=lt(n,e,0,t,1).times(e),De=!0,Ae(n)):(e.s=n.s,n=e),n};de.toNumber=function(){return+this};de.toOctal=function(e,t){return gv(this,8,e,t)};de.toPower=de.pow=function(e){var t,n,r,o,i,a,s=this,l=s.constructor,c=+(e=new l(e));if(!s.d||!e.d||!s.d[0]||!e.d[0])return new l(Qt(+s,c));if(s=new l(s),s.eq(1))return s;if(r=l.precision,i=l.rounding,e.eq(1))return Ae(s,r,i);if(t=kn(e.e/Le),t>=e.d.length-1&&(n=c<0?-c:c)<=ZD)return o=uC(l,s,n,r),e.s<0?new l(1).div(o):Ae(o,r,i);if(a=s.s,a<0){if(t<e.d.length-1)return new l(NaN);if(e.d[t]&1||(a=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=a,s}return n=Qt(+s,c),t=n==0||!isFinite(n)?kn(c*(Math.log("0."+gn(s.d))/Math.LN10+s.e+1)):new l(n+"").e,t>l.maxE+1||t<l.minE-1?new l(t>0?a/0:0):(De=!1,l.rounding=s.s=1,n=Math.min(12,(t+"").length),o=cg(e.times(Vi(s,r+n)),r),o.d&&(o=Ae(o,r+5,1),Zc(o.d,r,i)&&(t=r+10,o=Ae(cg(e.times(Vi(s,t+n)),t),t+5,1),+gn(o.d).slice(r+1,r+15)+1==1e14&&(o=Ae(o,r+1,0)))),o.s=a,De=!0,l.rounding=i,Ae(o,r,i))};de.toPrecision=function(e,t){var n,r=this,o=r.constructor;return e===void 0?n=Bo(r,r.e<=o.toExpNeg||r.e>=o.toExpPos):(ar(e,1,ya),t===void 0?t=o.rounding:ar(t,0,8),r=Ae(new o(r),e,t),n=Bo(r,e<=r.e||r.e<=o.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n};de.toSignificantDigits=de.toSD=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(ar(e,1,ya),t===void 0?t=r.rounding:ar(t,0,8)),Ae(new r(n),e,t)};de.toString=function(){var e=this,t=e.constructor,n=Bo(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};de.truncated=de.trunc=function(){return Ae(new this.constructor(this),this.e+1,1)};de.valueOf=de.toJSON=function(){var e=this,t=e.constructor,n=Bo(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function gn(e){var t,n,r,o=e.length-1,i="",a=e[0];if(o>0){for(i+=a,t=1;t<o;t++)r=e[t]+"",n=Le-r.length,n&&(i+=Oi(n)),i+=r;a=e[t],r=a+"",n=Le-r.length,n&&(i+=Oi(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return i+a}function ar(e,t,n){if(e!==~~e||e<t||e>n)throw Error(aa+e)}function Zc(e,t,n,r){var o,i,a,s;for(i=e[0];i>=10;i/=10)--t;return--t<0?(t+=Le,o=0):(o=Math.ceil((t+1)/Le),t%=Le),i=Qt(10,Le-t),s=e[o]%i|0,r==null?t<3?(t==0?s=s/100|0:t==1&&(s=s/10|0),a=n<4&&s==99999||n>3&&s==49999||s==5e4||s==0):a=(n<4&&s+1==i||n>3&&s+1==i/2)&&(e[o+1]/i/100|0)==Qt(10,t-2)-1||(s==i/2||s==0)&&(e[o+1]/i/100|0)==0:t<4?(t==0?s=s/1e3|0:t==1?s=s/100|0:t==2&&(s=s/10|0),a=(r||n<4)&&s==9999||!r&&n>3&&s==4999):a=((r||n<4)&&s+1==i||!r&&n>3&&s+1==i/2)&&(e[o+1]/i/1e3|0)==Qt(10,t-3)-1,a}function Dd(e,t,n){for(var r,o=[0],i,a=0,s=e.length;a<s;){for(i=o.length;i--;)o[i]*=t;for(o[0]+=ag.indexOf(e.charAt(a++)),r=0;r<o.length;r++)o[r]>n-1&&(o[r+1]===void 0&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}function JD(e,t){var n,r,o;if(t.isZero())return t;r=t.d.length,r<32?(n=Math.ceil(r/3),o=(1/up(4,n)).toString()):(n=16,o="2.3283064365386962890625e-10"),e.precision+=n,t=rl(e,1,t.times(o),new e(1));for(var i=n;i--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=n,t}var lt=function(){function e(r,o,i){var a,s=0,l=r.length;for(r=r.slice();l--;)a=r[l]*o+s,r[l]=a%i|0,s=a/i|0;return s&&r.unshift(s),r}function t(r,o,i,a){var s,l;if(i!=a)l=i>a?1:-1;else for(s=l=0;s<i;s++)if(r[s]!=o[s]){l=r[s]>o[s]?1:-1;break}return l}function n(r,o,i,a){for(var s=0;i--;)r[i]-=s,s=r[i]<o[i]?1:0,r[i]=s*a+r[i]-o[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,o,i,a,s,l){var c,u,d,f,m,y,v,S,_,b,w,x,N,C,T,k,D,R,I,z,O=r.constructor,U=r.s==o.s?1:-1,W=r.d,$=o.d;if(!W||!W[0]||!$||!$[0])return new O(!r.s||!o.s||(W?$&&W[0]==$[0]:!$)?NaN:W&&W[0]==0||!$?U*0:U/0);for(l?(m=1,u=r.e-o.e):(l=fo,m=Le,u=kn(r.e/m)-kn(o.e/m)),I=$.length,D=W.length,_=new O(U),b=_.d=[],d=0;$[d]==(W[d]||0);d++);if($[d]>(W[d]||0)&&u--,i==null?(C=i=O.precision,a=O.rounding):s?C=i+(r.e-o.e)+1:C=i,C<0)b.push(1),y=!0;else{if(C=C/m+2|0,d=0,I==1){for(f=0,$=$[0],C++;(d<D||f)&&C--;d++)T=f*l+(W[d]||0),b[d]=T/$|0,f=T%$|0;y=f||d<D}else{for(f=l/($[0]+1)|0,f>1&&($=e($,f,l),W=e(W,f,l),I=$.length,D=W.length),k=I,w=W.slice(0,I),x=w.length;x<I;)w[x++]=0;z=$.slice(),z.unshift(0),R=$[0],$[1]>=l/2&&++R;do f=0,c=t($,w,I,x),c<0?(N=w[0],I!=x&&(N=N*l+(w[1]||0)),f=N/R|0,f>1?(f>=l&&(f=l-1),v=e($,f,l),S=v.length,x=w.length,c=t(v,w,S,x),c==1&&(f--,n(v,I<S?z:$,S,l))):(f==0&&(c=f=1),v=$.slice()),S=v.length,S<x&&v.unshift(0),n(w,v,x,l),c==-1&&(x=w.length,c=t($,w,I,x),c<1&&(f++,n(w,I<x?z:$,x,l))),x=w.length):c===0&&(f++,w=[0]),b[d++]=f,c&&w[0]?w[x++]=W[k]||0:(w=[W[k]],x=1);while((k++<D||w[0]!==void 0)&&C--);y=w[0]!==void 0}b[0]||b.shift()}if(m==1)_.e=u,oC=y;else{for(d=1,f=b[0];f>=10;f/=10)d++;_.e=d+u*m-1,Ae(_,s?i+_.e+1:i,a,y)}return _}}();function Ae(e,t,n,r){var o,i,a,s,l,c,u,d,f,m=e.constructor;e:if(t!=null){if(d=e.d,!d)return e;for(o=1,s=d[0];s>=10;s/=10)o++;if(i=t-o,i<0)i+=Le,a=t,u=d[f=0],l=u/Qt(10,o-a-1)%10|0;else if(f=Math.ceil((i+1)/Le),s=d.length,f>=s)if(r){for(;s++<=f;)d.push(0);u=l=0,o=1,i%=Le,a=i-Le+1}else break e;else{for(u=s=d[f],o=1;s>=10;s/=10)o++;i%=Le,a=i-Le+o,l=a<0?0:u/Qt(10,o-a-1)%10|0}if(r=r||t<0||d[f+1]!==void 0||(a<0?u:u%Qt(10,o-a-1)),c=n<4?(l||r)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||r||n==6&&(i>0?a>0?u/Qt(10,o-a):0:d[f-1])%10&1||n==(e.s<0?8:7)),t<1||!d[0])return d.length=0,c?(t-=e.e+1,d[0]=Qt(10,(Le-t%Le)%Le),e.e=-t||0):d[0]=e.e=0,e;if(i==0?(d.length=f,s=1,f--):(d.length=f+1,s=Qt(10,Le-i),d[f]=a>0?(u/Qt(10,o-a)%Qt(10,a)|0)*s:0),c)for(;;)if(f==0){for(i=1,a=d[0];a>=10;a/=10)i++;for(a=d[0]+=s,s=1;a>=10;a/=10)s++;i!=s&&(e.e++,d[0]==fo&&(d[0]=1));break}else{if(d[f]+=s,d[f]!=fo)break;d[f--]=0,s=1}for(i=d.length;d[--i]===0;)d.pop()}return De&&(e.e>m.maxE?(e.d=null,e.e=NaN):e.e<m.minE&&(e.e=0,e.d=[0])),e}function Bo(e,t,n){if(!e.isFinite())return fC(e);var r,o=e.e,i=gn(e.d),a=i.length;return t?(n&&(r=n-a)>0?i=i.charAt(0)+"."+i.slice(1)+Oi(r):a>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(e.e<0?"e":"e+")+e.e):o<0?(i="0."+Oi(-o-1)+i,n&&(r=n-a)>0&&(i+=Oi(r))):o>=a?(i+=Oi(o+1-a),n&&(r=n-o-1)>0&&(i=i+"."+Oi(r))):((r=o+1)<a&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-a)>0&&(o+1===a&&(i+="."),i+=Oi(r))),i}function cp(e,t){var n=e[0];for(t*=Le;n>=10;n/=10)t++;return t}function Nf(e,t,n){if(t>QD)throw De=!0,n&&(e.precision=n),Error(iC);return Ae(new e(Cf),t,1,!0)}function Ao(e,t,n){if(t>lg)throw Error(iC);return Ae(new e(Tf),t,n,!0)}function cC(e){var t=e.length-1,n=t*Le+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function Oi(e){for(var t="";e--;)t+="0";return t}function uC(e,t,n,r){var o,i=new e(1),a=Math.ceil(r/Le+4);for(De=!1;;){if(n%2&&(i=i.times(t),f1(i.d,a)&&(o=!0)),n=kn(n/2),n===0){n=i.d.length-1,o&&i.d[n]===0&&++i.d[n];break}t=t.times(t),f1(t.d,a)}return De=!0,i}function d1(e){return e.d[e.d.length-1]&1}function dC(e,t,n){for(var r,o,i=new e(t[0]),a=0;++a<t.length;){if(o=new e(t[a]),!o.s){i=o;break}r=i.cmp(o),(r===n||r===0&&i.s===n)&&(i=o)}return i}function cg(e,t){var n,r,o,i,a,s,l,c=0,u=0,d=0,f=e.constructor,m=f.rounding,y=f.precision;if(!e.d||!e.d[0]||e.e>17)return new f(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(De=!1,l=y):l=t,s=new f(.03125);e.e>-2;)e=e.times(s),d+=5;for(r=Math.log(Qt(2,d))/Math.LN10*2+5|0,l+=r,n=i=a=new f(1),f.precision=l;;){if(i=Ae(i.times(e),l,1),n=n.times(++u),s=a.plus(lt(i,n,l,1)),gn(s.d).slice(0,l)===gn(a.d).slice(0,l)){for(o=d;o--;)a=Ae(a.times(a),l,1);if(t==null)if(c<3&&Zc(a.d,l-r,m,c))f.precision=l+=10,n=i=s=new f(1),u=0,c++;else return Ae(a,f.precision=y,m,De=!0);else return f.precision=y,a}a=s}}function Vi(e,t){var n,r,o,i,a,s,l,c,u,d,f,m=1,y=10,v=e,S=v.d,_=v.constructor,b=_.rounding,w=_.precision;if(v.s<0||!S||!S[0]||!v.e&&S[0]==1&&S.length==1)return new _(S&&!S[0]?-1/0:v.s!=1?NaN:S?0:v);if(t==null?(De=!1,u=w):u=t,_.precision=u+=y,n=gn(S),r=n.charAt(0),Math.abs(i=v.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(e),n=gn(v.d),r=n.charAt(0),m++;i=v.e,r>1?(v=new _("0."+n),i++):v=new _(r+"."+n.slice(1))}else return c=Nf(_,u+2,w).times(i+""),v=Vi(new _(r+"."+n.slice(1)),u-y).plus(c),_.precision=w,t==null?Ae(v,w,b,De=!0):v;for(d=v,l=a=v=lt(v.minus(1),v.plus(1),u,1),f=Ae(v.times(v),u,1),o=3;;){if(a=Ae(a.times(f),u,1),c=l.plus(lt(a,new _(o),u,1)),gn(c.d).slice(0,u)===gn(l.d).slice(0,u))if(l=l.times(2),i!==0&&(l=l.plus(Nf(_,u+2,w).times(i+""))),l=lt(l,new _(m),u,1),t==null)if(Zc(l.d,u-y,b,s))_.precision=u+=y,c=a=v=lt(d.minus(1),d.plus(1),u,1),f=Ae(v.times(v),u,1),o=s=1;else return Ae(l,_.precision=w,b,De=!0);else return _.precision=w,l;l=c,o+=2}}function fC(e){return String(e.s*e.s/0)}function Fd(e,t){var n,r,o;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;r++);for(o=t.length;t.charCodeAt(o-1)===48;--o);if(t=t.slice(r,o),t){if(o-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%Le,n<0&&(r+=Le),r<o){for(r&&e.d.push(+t.slice(0,r)),o-=Le;r<o;)e.d.push(+t.slice(r,r+=Le));t=t.slice(r),r=Le-t.length}else r-=o;for(;r--;)t+="0";e.d.push(+t),De&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function eF(e,t){var n,r,o,i,a,s,l,c,u;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),lC.test(t))return Fd(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(qD.test(t))n=16,t=t.toLowerCase();else if(YD.test(t))n=2;else if(KD.test(t))n=8;else throw Error(aa+t);for(i=t.search(/p/i),i>0?(l=+t.slice(i+1),t=t.substring(2,i)):t=t.slice(2),i=t.indexOf("."),a=i>=0,r=e.constructor,a&&(t=t.replace(".",""),s=t.length,i=s-i,o=uC(r,new r(n),i,i*2)),c=Dd(t,n,fo),u=c.length-1,i=u;c[i]===0;--i)c.pop();return i<0?new r(e.s*0):(e.e=cp(c,u),e.d=c,De=!1,a&&(e=lt(e,o,s*4)),l&&(e=e.times(Math.abs(l)<54?Qt(2,l):dp.pow(2,l))),De=!0,e)}function tF(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:rl(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:n|0,t=t.times(1/up(5,n)),t=rl(e,2,t,t);for(var o,i=new e(5),a=new e(16),s=new e(20);n--;)o=t.times(t),t=t.times(i.plus(o.times(a.times(o).minus(s))));return t}function rl(e,t,n,r,o){var i,a,s,l,c=e.precision,u=Math.ceil(c/Le);for(De=!1,l=n.times(n),s=new e(r);;){if(a=lt(s.times(l),new e(t++*t++),c,1),s=o?r.plus(a):r.minus(a),r=lt(a.times(l),new e(t++*t++),c,1),a=s.plus(r),a.d[u]!==void 0){for(i=u;a.d[i]===s.d[i]&&i--;);if(i==-1)break}i=s,s=r,r=a,a=i}return De=!0,a.d.length=u+1,a}function up(e,t){for(var n=e;--t;)n*=e;return n}function pC(e,t){var n,r=t.s<0,o=Ao(e,e.precision,1),i=o.times(.5);if(t=t.abs(),t.lte(i))return ei=r?4:1,t;if(n=t.divToInt(o),n.isZero())ei=r?3:2;else{if(t=t.minus(n.times(o)),t.lte(i))return ei=d1(n)?r?2:3:r?4:1,t;ei=d1(n)?r?1:4:r?3:2}return t.minus(o).abs()}function gv(e,t,n,r){var o,i,a,s,l,c,u,d,f,m=e.constructor,y=n!==void 0;if(y?(ar(n,1,ya),r===void 0?r=m.rounding:ar(r,0,8)):(n=m.precision,r=m.rounding),!e.isFinite())u=fC(e);else{for(u=Bo(e),a=u.indexOf("."),y?(o=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):o=t,a>=0&&(u=u.replace(".",""),f=new m(1),f.e=u.length-a,f.d=Dd(Bo(f),10,o),f.e=f.d.length),d=Dd(u,10,o),i=l=d.length;d[--l]==0;)d.pop();if(!d[0])u=y?"0p+0":"0";else{if(a<0?i--:(e=new m(e),e.d=d,e.e=i,e=lt(e,f,n,r,0,o),d=e.d,i=e.e,c=oC),a=d[n],s=o/2,c=c||d[n+1]!==void 0,c=r<4?(a!==void 0||c)&&(r===0||r===(e.s<0?3:2)):a>s||a===s&&(r===4||c||r===6&&d[n-1]&1||r===(e.s<0?8:7)),d.length=n,c)for(;++d[--n]>o-1;)d[n]=0,n||(++i,d.unshift(1));for(l=d.length;!d[l-1];--l);for(a=0,u="";a<l;a++)u+=ag.charAt(d[a]);if(y){if(l>1)if(t==16||t==8){for(a=t==16?4:3,--l;l%a;l++)u+="0";for(d=Dd(u,o,t),l=d.length;!d[l-1];--l);for(a=1,u="1.";a<l;a++)u+=ag.charAt(d[a])}else u=u.charAt(0)+"."+u.slice(1);u=u+(i<0?"p":"p+")+i}else if(i<0){for(;++i;)u="0"+u;u="0."+u}else if(++i>l)for(i-=l;i--;)u+="0";else i<l&&(u=u.slice(0,i)+"."+u.slice(i))}u=(t==16?"0x":t==2?"0b":t==8?"0o":"")+u}return e.s<0?"-"+u:u}function f1(e,t){if(e.length>t)return e.length=t,!0}function nF(e){return new this(e).abs()}function rF(e){return new this(e).acos()}function oF(e){return new this(e).acosh()}function iF(e,t){return new this(e).plus(t)}function aF(e){return new this(e).asin()}function sF(e){return new this(e).asinh()}function lF(e){return new this(e).atan()}function cF(e){return new this(e).atanh()}function uF(e,t){e=new this(e),t=new this(t);var n,r=this.precision,o=this.rounding,i=r+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=Ao(this,i,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?Ao(this,r,o):new this(0),n.s=e.s):!e.d||t.isZero()?(n=Ao(this,i,1).times(.5),n.s=e.s):t.s<0?(this.precision=i,this.rounding=1,n=this.atan(lt(e,t,i,1)),t=Ao(this,i,1),this.precision=r,this.rounding=o,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(lt(e,t,i,1)),n}function dF(e){return new this(e).cbrt()}function fF(e){return Ae(e=new this(e),e.e+1,2)}function pF(e,t,n){return new this(e).clamp(t,n)}function hF(e){if(!e||typeof e!="object")throw Error(lp+"Object expected");var t,n,r,o=e.defaults===!0,i=["precision",1,ya,"rounding",0,8,"toExpNeg",-Ps,0,"toExpPos",0,Ps,"maxE",0,Ps,"minE",-Ps,0,"modulo",0,9];for(t=0;t<i.length;t+=3)if(n=i[t],o&&(this[n]=sg[n]),(r=e[n])!==void 0)if(kn(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(aa+n+": "+r);if(n="crypto",o&&(this[n]=sg[n]),(r=e[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(aC);else this[n]=!1;else throw Error(aa+n+": "+r);return this}function mF(e){return new this(e).cos()}function gF(e){return new this(e).cosh()}function hC(e){var t,n,r;function o(i){var a,s,l,c=this;if(!(c instanceof o))return new o(i);if(c.constructor=o,p1(i)){c.s=i.s,De?!i.d||i.e>o.maxE?(c.e=NaN,c.d=null):i.e<o.minE?(c.e=0,c.d=[0]):(c.e=i.e,c.d=i.d.slice()):(c.e=i.e,c.d=i.d?i.d.slice():i.d);return}if(l=typeof i,l==="number"){if(i===0){c.s=1/i<0?-1:1,c.e=0,c.d=[0];return}if(i<0?(i=-i,c.s=-1):c.s=1,i===~~i&&i<1e7){for(a=0,s=i;s>=10;s/=10)a++;De?a>o.maxE?(c.e=NaN,c.d=null):a<o.minE?(c.e=0,c.d=[0]):(c.e=a,c.d=[i]):(c.e=a,c.d=[i]);return}if(i*0!==0){i||(c.s=NaN),c.e=NaN,c.d=null;return}return Fd(c,i.toString())}if(l==="string")return(s=i.charCodeAt(0))===45?(i=i.slice(1),c.s=-1):(s===43&&(i=i.slice(1)),c.s=1),lC.test(i)?Fd(c,i):eF(c,i);if(l==="bigint")return i<0?(i=-i,c.s=-1):c.s=1,Fd(c,i.toString());throw Error(aa+i)}if(o.prototype=de,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=hF,o.clone=hC,o.isDecimal=p1,o.abs=nF,o.acos=rF,o.acosh=oF,o.add=iF,o.asin=aF,o.asinh=sF,o.atan=lF,o.atanh=cF,o.atan2=uF,o.cbrt=dF,o.ceil=fF,o.clamp=pF,o.cos=mF,o.cosh=gF,o.div=yF,o.exp=vF,o.floor=_F,o.hypot=wF,o.ln=bF,o.log=EF,o.log10=xF,o.log2=SF,o.max=CF,o.min=TF,o.mod=NF,o.mul=kF,o.pow=AF,o.random=RF,o.round=IF,o.sign=LF,o.sin=OF,o.sinh=PF,o.sqrt=MF,o.sub=DF,o.sum=FF,o.tan=$F,o.tanh=BF,o.trunc=VF,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return o.config(e),o}function yF(e,t){return new this(e).div(t)}function vF(e){return new this(e).exp()}function _F(e){return Ae(e=new this(e),e.e+1,3)}function wF(){var e,t,n=new this(0);for(De=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return De=!0,new this(1/0);n=t}return De=!0,n.sqrt()}function p1(e){return e instanceof dp||e&&e.toStringTag===sC||!1}function bF(e){return new this(e).ln()}function EF(e,t){return new this(e).log(t)}function SF(e){return new this(e).log(2)}function xF(e){return new this(e).log(10)}function CF(){return dC(this,arguments,-1)}function TF(){return dC(this,arguments,1)}function NF(e,t){return new this(e).mod(t)}function kF(e,t){return new this(e).mul(t)}function AF(e,t){return new this(e).pow(t)}function RF(e){var t,n,r,o,i=0,a=new this(1),s=[];if(e===void 0?e=this.precision:ar(e,1,ya),r=Math.ceil(e/Le),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));i<r;)o=t[i],o>=429e7?t[i]=crypto.getRandomValues(new Uint32Array(1))[0]:s[i++]=o%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);i<r;)o=t[i]+(t[i+1]<<8)+(t[i+2]<<16)+((t[i+3]&127)<<24),o>=214e7?crypto.randomBytes(4).copy(t,i):(s.push(o%1e7),i+=4);i=r/4}else throw Error(aC);else for(;i<r;)s[i++]=Math.random()*1e7|0;for(r=s[--i],e%=Le,r&&e&&(o=Qt(10,Le-e),s[i]=(r/o|0)*o);s[i]===0;i--)s.pop();if(i<0)n=0,s=[0];else{for(n=-1;s[0]===0;n-=Le)s.shift();for(r=1,o=s[0];o>=10;o/=10)r++;r<Le&&(n-=Le-r)}return a.e=n,a.d=s,a}function IF(e){return Ae(e=new this(e),e.e+1,this.rounding)}function LF(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function OF(e){return new this(e).sin()}function PF(e){return new this(e).sinh()}function MF(e){return new this(e).sqrt()}function DF(e,t){return new this(e).sub(t)}function FF(){var e=0,t=arguments,n=new this(t[e]);for(De=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return De=!0,Ae(n,this.precision,this.rounding)}function $F(e){return new this(e).tan()}function BF(e){return new this(e).tanh()}function VF(e){return Ae(e=new this(e),e.e+1,1)}de[Symbol.for("nodejs.util.inspect.custom")]=de.toString;de[Symbol.toStringTag]="Decimal";var dp=de.constructor=hC(sg);Cf=new dp(Cf);Tf=new dp(Tf);function Ht({iconName:e="bounding-box-circles",size:t="inherit",color:n="inherit",fontSize:r,className:o,style:i,...a}){let s=e;return e.startsWith("bi-")||(s="bi-"+e),p("i",{className:j(s,o),style:{display:"flex",alignItems:"center",fontSize:r||t,color:n,...i},...a})}var UF=Object.defineProperty,zF=(e,t,n)=>t in e?UF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yh=(e,t,n)=>(zF(e,typeof t!="symbol"?t+"":t,n),n);let jF=class{constructor(){yh(this,"current",this.detect()),yh(this,"handoffState","pending"),yh(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Oo=new jF;function pu(e){var t;return Oo.isServer?null:e==null?document:(t=e==null?void 0:e.ownerDocument)!=null?t:document}function ug(e){var t,n;return Oo.isServer?null:e==null?document:(n=(t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))!=null?n:document}function mC(e){var t,n;return(n=(t=ug(e))==null?void 0:t.activeElement)!=null?n:null}function WF(e){return mC(e)===e}function fp(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function gi(){let e=[],t={addEventListener(n,r,o,i){return n.addEventListener(r,o,i),t.add(()=>n.removeEventListener(r,o,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return fp(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,o){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:o}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=gi();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let o of e.splice(r,1))o()}},dispose(){for(let n of e.splice(0))n()}};return t}function pp(){let[e]=h.useState(gi);return h.useEffect(()=>()=>e.dispose(),[e]),e}let or=(e,t)=>{Oo.isServer?h.useEffect(e,t):h.useLayoutEffect(e,t)};function ls(e){let t=h.useRef(e);return or(()=>{t.current=e},[e]),t}let ct=function(e){let t=ls(e);return be.useCallback((...n)=>t.current(...n),[t])};function hu(e){return h.useMemo(()=>e,Object.values(e))}let GF=h.createContext(void 0);function HF(){return h.useContext(GF)}function dg(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function ui(e,t,...n){if(e in t){let o=t[e];return typeof o=="function"?o(...n):o}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(o=>`"${o}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ui),r}var kf=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(kf||{}),Ui=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Ui||{});function jr(){let e=YF();return h.useCallback(t=>XF({mergeRefs:e,...t}),[e])}function XF({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:o,visible:i=!0,name:a,mergeRefs:s}){s=s??qF;let l=gC(t,e);if(i)return rd(l,n,r,a,s);let c=o??0;if(c&2){let{static:u=!1,...d}=l;if(u)return rd(d,n,r,a,s)}if(c&1){let{unmount:u=!0,...d}=l;return ui(u?0:1,{0(){return null},1(){return rd({...d,hidden:!0,style:{display:"none"}},n,r,a,s)}})}return rd(l,n,r,a,s)}function rd(e,t={},n,r,o){let{as:i=n,children:a,refName:s="ref",...l}=vh(e,["unmount","static"]),c=e.ref!==void 0?{[s]:e.ref}:{},u=typeof a=="function"?a(t):a;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(t)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let d={};if(t){let f=!1,m=[];for(let[y,v]of Object.entries(t))typeof v=="boolean"&&(f=!0),v===!0&&m.push(y.replace(/([A-Z])/g,S=>`-${S.toLowerCase()}`));if(f){d["data-headlessui-state"]=m.join(" ");for(let y of m)d[`data-${y}`]=""}}if(Sc(i)&&(Object.keys(Pa(l)).length>0||Object.keys(Pa(d)).length>0))if(!h.isValidElement(u)||Array.isArray(u)&&u.length>1||ZF(u)){if(Object.keys(Pa(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Pa(l)).concat(Object.keys(Pa(d))).map(f=>`  - ${f}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(f=>`  - ${f}`).join(`
`)].join(`
`))}else{let f=u.props,m=f==null?void 0:f.className,y=typeof m=="function"?(..._)=>dg(m(..._),l.className):dg(m,l.className),v=y?{className:y}:{},S=gC(u.props,Pa(vh(l,["ref"])));for(let _ in d)_ in S&&delete d[_];return h.cloneElement(u,Object.assign({},S,d,c,{ref:o(KF(u),c.ref)},v))}return h.createElement(i,Object.assign({},vh(l,["ref"]),!Sc(i)&&c,!Sc(i)&&d),u)}function YF(){let e=h.useRef([]),t=h.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function qF(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function gC(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let o in r)o.startsWith("on")&&typeof r[o]=="function"?(n[o]!=null||(n[o]=[]),n[o].push(r[o])):t[o]=r[o];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[o=>{var i;return(i=o==null?void 0:o.preventDefault)==null?void 0:i.call(o)}]);for(let r in n)Object.assign(t,{[r](o,...i){let a=n[r];for(let s of a){if((o instanceof Event||(o==null?void 0:o.nativeEvent)instanceof Event)&&o.defaultPrevented)return;s(o,...i)}}});return t}function sr(e){var t;return Object.assign(h.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Pa(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function vh(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function KF(e){return be.version.split(".")[0]>="19"?e.props.ref:e.ref}function Sc(e){return e===h.Fragment||e===Symbol.for("react.fragment")}function ZF(e){return Sc(e.type)}let QF="span";var Af=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Af||{});function JF(e,t){var n;let{features:r=1,...o}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:(n=o["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return jr()({ourProps:i,theirProps:o,slot:{},defaultTag:QF,name:"Hidden"})}let fg=sr(JF);function e4(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function ea(e){return e4(e)&&"tagName"in e}function rs(e){return ea(e)&&"accessKey"in e}function zi(e){return ea(e)&&"tabIndex"in e}function t4(e){return ea(e)&&"style"in e}function n4(e){return rs(e)&&e.nodeName==="IFRAME"}function r4(e){return rs(e)&&e.nodeName==="INPUT"}let yC=Symbol();function o4(e,t=!0){return Object.assign(e,{[yC]:t})}function jo(...e){let t=h.useRef(e);h.useEffect(()=>{t.current=e},[e]);let n=ct(r=>{for(let o of t.current)o!=null&&(typeof o=="function"?o(r):o.current=r)});return e.every(r=>r==null||(r==null?void 0:r[yC]))?void 0:n}let yv=h.createContext(null);yv.displayName="DescriptionContext";function vC(){let e=h.useContext(yv);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,vC),t}return e}function i4(){let[e,t]=h.useState([]);return[e.length>0?e.join(" "):void 0,h.useMemo(()=>function(n){let r=ct(i=>(t(a=>[...a,i]),()=>t(a=>{let s=a.slice(),l=s.indexOf(i);return l!==-1&&s.splice(l,1),s}))),o=h.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return be.createElement(yv.Provider,{value:o},n.children)},[t])]}let a4="p";function s4(e,t){let n=h.useId(),r=HF(),{id:o=`headlessui-description-${n}`,...i}=e,a=vC(),s=jo(t);or(()=>a.register(o),[o,a.register]);let l=hu({...a.slot,disabled:r||!1}),c={ref:s,...a.props,id:o};return jr()({ourProps:c,theirProps:i,slot:l,defaultTag:a4,name:a.name||"Description"})}let l4=sr(s4),c4=Object.assign(l4,{});var _C=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(_C||{});let u4=h.createContext(()=>{});function d4({value:e,children:t}){return be.createElement(u4.Provider,{value:e},t)}let wC=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var f4=Object.defineProperty,p4=(e,t,n)=>t in e?f4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h4=(e,t,n)=>(p4(e,typeof t!="symbol"?t+"":t,n),n),bC=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Cr=(e,t,n)=>(bC(e,t,"read from private field"),n?n.call(e):t.get(e)),_h=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},h1=(e,t,n,r)=>(bC(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),So,ic,ac;let m4=class{constructor(t){_h(this,So,{}),_h(this,ic,new wC(()=>new Set)),_h(this,ac,new Set),h4(this,"disposables",gi()),h1(this,So,t),Oo.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Cr(this,So)}subscribe(t,n){if(Oo.isServer)return()=>{};let r={selector:t,callback:n,current:t(Cr(this,So))};return Cr(this,ac).add(r),this.disposables.add(()=>{Cr(this,ac).delete(r)})}on(t,n){return Oo.isServer?()=>{}:(Cr(this,ic).get(t).add(n),this.disposables.add(()=>{Cr(this,ic).get(t).delete(n)}))}send(t){let n=this.reduce(Cr(this,So),t);if(n!==Cr(this,So)){h1(this,So,n);for(let r of Cr(this,ac)){let o=r.selector(Cr(this,So));EC(r.current,o)||(r.current=o,r.callback(o))}for(let r of Cr(this,ic).get(t.type))r(Cr(this,So),t)}}};So=new WeakMap,ic=new WeakMap,ac=new WeakMap;function EC(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:wh(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:wh(e.entries(),t.entries()):m1(e)&&m1(t)?wh(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function wh(e,t){do{let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function m1(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var g4=Object.defineProperty,y4=(e,t,n)=>t in e?g4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g1=(e,t,n)=>(y4(e,typeof t!="symbol"?t+"":t,n),n),v4=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(v4||{});let _4={0(e,t){let n=t.id,r=e.stack,o=e.stack.indexOf(n);if(o!==-1){let i=e.stack.slice();return i.splice(o,1),i.push(n),r=i,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(r===-1)return e;let o=e.stack.slice();return o.splice(r,1),{...e,stack:o}}},w4=class SC extends m4{constructor(){super(...arguments),g1(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),g1(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new SC({stack:[]})}reduce(t,n){return ui(n.type,_4,t,n)}};const xC=new wC(()=>w4.new());var CC={exports:{}},TC={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mu=h;function b4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var E4=typeof Object.is=="function"?Object.is:b4,S4=mu.useSyncExternalStore,x4=mu.useRef,C4=mu.useEffect,T4=mu.useMemo,N4=mu.useDebugValue;TC.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var i=x4(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=T4(function(){function l(m){if(!c){if(c=!0,u=m,m=r(m),o!==void 0&&a.hasValue){var y=a.value;if(o(y,m))return d=y}return d=m}if(y=d,E4(u,m))return y;var v=r(m);return o!==void 0&&o(y,v)?(u=m,y):(u=m,d=v)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,r,o]);var s=S4(e,i[0],i[1]);return C4(function(){a.hasValue=!0,a.value=s},[s]),N4(s),s};CC.exports=TC;var k4=CC.exports;function NC(e,t,n=EC){return k4.useSyncExternalStoreWithSelector(ct(r=>e.subscribe(A4,r)),ct(()=>e.state),ct(()=>e.state),ct(t),n)}function A4(e){return e}function gu(e,t){let n=h.useId(),r=xC.get(t),[o,i]=NC(r,h.useCallback(a=>[r.selectors.isTop(a,n),r.selectors.inStack(a,n)],[r,n]));return or(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),e?i?o:!0:!1}let pg=new Map,xc=new Map;function y1(e){var t;let n=(t=xc.get(e))!=null?t:0;return xc.set(e,n+1),n!==0?()=>v1(e):(pg.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>v1(e))}function v1(e){var t;let n=(t=xc.get(e))!=null?t:1;if(n===1?xc.delete(e):xc.set(e,n-1),n!==1)return;let r=pg.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,pg.delete(e))}function R4(e,{allowed:t,disallowed:n}={}){let r=gu(e,"inert-others");or(()=>{var o,i;if(!r)return;let a=gi();for(let l of(o=n==null?void 0:n())!=null?o:[])l&&a.add(y1(l));let s=(i=t==null?void 0:t())!=null?i:[];for(let l of s){if(!l)continue;let c=pu(l);if(!c)continue;let u=l.parentElement;for(;u&&u!==c.body;){for(let d of u.children)s.some(f=>d.contains(f))||a.add(y1(d));u=u.parentElement}}return a.dispose},[r,t,n])}function I4(e,t,n){let r=ls(o=>{let i=o.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});h.useEffect(()=>{if(!e)return;let o=t===null?null:rs(t)?t:t.current;if(!o)return;let i=gi();if(typeof ResizeObserver<"u"){let a=new ResizeObserver(()=>r.current(o));a.observe(o),i.add(()=>a.disconnect())}if(typeof IntersectionObserver<"u"){let a=new IntersectionObserver(()=>r.current(o));a.observe(o),i.add(()=>a.disconnect())}return()=>i.dispose()},[t,r,e])}let Rf=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),L4=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Zo=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Zo||{}),hg=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(hg||{}),O4=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(O4||{});function P4(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Rf)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function M4(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(L4)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var kC=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(kC||{});function D4(e,t=0){var n;return e===((n=pu(e))==null?void 0:n.body)?!1:ui(t,{0(){return e.matches(Rf)},1(){let r=e;for(;r!==null;){if(r.matches(Rf))return!0;r=r.parentElement}return!1}})}var F4=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(F4||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function oi(e){e==null||e.focus({preventScroll:!0})}let $4=["textarea","input"].join(",");function B4(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,$4))!=null?n:!1}function V4(e,t=n=>n){return e.slice().sort((n,r)=>{let o=t(n),i=t(r);if(o===null||i===null)return 0;let a=o.compareDocumentPosition(i);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Cc(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:o=[]}={}){let i=Array.isArray(e)?e.length>0?ug(e[0]):document:ug(e),a=Array.isArray(e)?n?V4(e):e:t&64?M4(e):P4(e);o.length>0&&a.length>1&&(a=a.filter(m=>!o.some(y=>y!=null&&"current"in y?(y==null?void 0:y.current)===m:y===m))),r=r??(i==null?void 0:i.activeElement);let s=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,a.indexOf(r))-1;if(t&4)return Math.max(0,a.indexOf(r))+1;if(t&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=t&32?{preventScroll:!0}:{},u=0,d=a.length,f;do{if(u>=d||u+d<=0)return 0;let m=l+u;if(t&16)m=(m+d)%d;else{if(m<0)return 3;if(m>=d)return 1}f=a[m],f==null||f.focus(c),u+=s}while(f!==mC(f));return t&6&&B4(f)&&f.select(),2}function AC(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function U4(){return/Android/gi.test(window.navigator.userAgent)}function _1(){return AC()||U4()}function od(e,t,n,r){let o=ls(n);h.useEffect(()=>{if(!e)return;function i(a){o.current(a)}return document.addEventListener(t,i,r),()=>document.removeEventListener(t,i,r)},[e,t,r])}function RC(e,t,n,r){let o=ls(n);h.useEffect(()=>{if(!e)return;function i(a){o.current(a)}return window.addEventListener(t,i,r),()=>window.removeEventListener(t,i,r)},[e,t,r])}const w1=30;function z4(e,t,n){let r=ls(n),o=h.useCallback(function(s,l){if(s.defaultPrevented)return;let c=l(s);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let u=function d(f){return typeof f=="function"?d(f()):Array.isArray(f)||f instanceof Set?f:[f]}(t);for(let d of u)if(d!==null&&(d.contains(c)||s.composed&&s.composedPath().includes(d)))return;return!D4(c,kC.Loose)&&c.tabIndex!==-1&&s.preventDefault(),r.current(s,c)},[r,t]),i=h.useRef(null);od(e,"pointerdown",s=>{var l,c;_1()||(i.current=((c=(l=s.composedPath)==null?void 0:l.call(s))==null?void 0:c[0])||s.target)},!0),od(e,"pointerup",s=>{if(_1()||!i.current)return;let l=i.current;return i.current=null,o(s,()=>l)},!0);let a=h.useRef({x:0,y:0});od(e,"touchstart",s=>{a.current.x=s.touches[0].clientX,a.current.y=s.touches[0].clientY},!0),od(e,"touchend",s=>{let l={x:s.changedTouches[0].clientX,y:s.changedTouches[0].clientY};if(!(Math.abs(l.x-a.current.x)>=w1||Math.abs(l.y-a.current.y)>=w1))return o(s,()=>zi(s.target)?s.target:null)},!0),RC(e,"blur",s=>o(s,()=>n4(window.document.activeElement)?window.document.activeElement:null),!0)}function vv(...e){return h.useMemo(()=>pu(...e),[...e])}function IC(e,t,n,r){let o=ls(n);h.useEffect(()=>{e=e??window;function i(a){o.current(a)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}function j4(e){return h.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function W4(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(o){return r.add(o),()=>r.delete(o)},dispatch(o,...i){let a=t[o].call(n,...i);a&&(n=a,r.forEach(s=>s()))}}}function G4(){let e;return{before({doc:t}){var n;let r=t.documentElement,o=(n=t.defaultView)!=null?n:window;e=Math.max(0,o.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,o=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,e-o);n.style(r,"paddingRight",`${i}px`)}}}function H4(){return AC()?{before({doc:e,d:t,meta:n}){function r(o){for(let i of n().containers)for(let a of i())if(a.contains(o))return!0;return!1}t.microTask(()=>{var o;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let s=gi();s.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>s.dispose()))}let i=(o=window.scrollY)!=null?o:window.pageYOffset,a=null;t.addEventListener(e,"click",s=>{if(zi(s.target))try{let l=s.target.closest("a");if(!l)return;let{hash:c}=new URL(l.href),u=e.querySelector(c);zi(u)&&!r(u)&&(a=u)}catch{}},!0),t.group(s=>{t.addEventListener(e,"touchstart",l=>{if(s.dispose(),zi(l.target)&&t4(l.target))if(r(l.target)){let c=l.target;for(;c.parentElement&&r(c.parentElement);)c=c.parentElement;s.style(c,"overscrollBehavior","contain")}else s.style(l.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",s=>{if(zi(s.target)){if(r4(s.target))return;if(r(s.target)){let l=s.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&s.preventDefault()}else s.preventDefault()}},{passive:!1}),t.add(()=>{var s;let l=(s=window.scrollY)!=null?s:window.pageYOffset;i!==l&&window.scrollTo(0,i),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function X4(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function b1(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let za=W4(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:gi(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=b1(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=b1(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[H4(),G4(),X4()];n.forEach(({before:r})=>r==null?void 0:r(t)),n.forEach(({after:r})=>r==null?void 0:r(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});za.subscribe(()=>{let e=za.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",o=n.count!==0;(o&&!r||!o&&r)&&za.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&za.dispatch("TEARDOWN",n)}});function Y4(e,t,n=()=>({containers:[]})){let r=j4(za),o=t?r.get(t):void 0,i=o?o.count>0:!1;return or(()=>{if(!(!t||!e))return za.dispatch("PUSH",t,n),()=>za.dispatch("POP",t,n)},[e,t]),i}function q4(e,t,n=()=>[document.body]){let r=gu(e,"scroll-lock");Y4(r,t,o=>{var i;return{containers:[...(i=o.containers)!=null?i:[],n]}})}function K4(e=0){let[t,n]=h.useState(e),r=h.useCallback(l=>n(l),[]),o=h.useCallback(l=>n(c=>c|l),[]),i=h.useCallback(l=>(t&l)===l,[t]),a=h.useCallback(l=>n(c=>c&~l),[]),s=h.useCallback(l=>n(c=>c^l),[]);return{flags:t,setFlag:r,addFlag:o,hasFlag:i,removeFlag:a,toggleFlag:s}}var E1,S1;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((E1=process==null?void 0:process.env)==null?void 0:E1.NODE_ENV)==="test"&&typeof((S1=Element==null?void 0:Element.prototype)==null?void 0:S1.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Z4=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(Z4||{});function Q4(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function J4(e,t,n,r){let[o,i]=h.useState(n),{hasFlag:a,addFlag:s,removeFlag:l}=K4(e&&o?3:0),c=h.useRef(!1),u=h.useRef(!1),d=pp();return or(()=>{var f;if(e){if(n&&i(!0),!t){n&&s(3);return}return(f=r==null?void 0:r.start)==null||f.call(r,n),e$(t,{inFlight:c,prepare(){u.current?u.current=!1:u.current=c.current,c.current=!0,!u.current&&(n?(s(3),l(4)):(s(4),l(2)))},run(){u.current?n?(l(3),s(4)):(l(4),s(3)):n?l(1):s(1)},done(){var m;u.current&&r$(t)||(c.current=!1,l(7),n||i(!1),(m=r==null?void 0:r.end)==null||m.call(r,n))}})}},[e,n,t,d]),e?[o,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function e$(e,{prepare:t,run:n,done:r,inFlight:o}){let i=gi();return n$(e,{prepare:t,inFlight:o}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(t$(e,r))})}),i.dispose}function t$(e,t){var n,r;let o=gi();if(!e)return o.dispose;let i=!1;o.add(()=>{i=!0});let a=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(s=>s instanceof CSSTransition))!=null?r:[];return a.length===0?(t(),o.dispose):(Promise.allSettled(a.map(s=>s.finished)).then(()=>{i||t()}),o.dispose)}function n$(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function r$(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function _v(e,t){let n=h.useRef([]),r=ct(e);h.useEffect(()=>{let o=[...n.current];for(let[i,a]of t.entries())if(n.current[i]!==a){let s=r(t,o);return n.current=t,s}},[r,...t])}function hp(){return typeof window<"u"}function hl(e){return wv(e)?(e.nodeName||"").toLowerCase():"#document"}function ir(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Wo(e){var t;return(t=(wv(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function wv(e){return hp()?e instanceof Node||e instanceof ir(e).Node:!1}function bt(e){return hp()?e instanceof Element||e instanceof ir(e).Element:!1}function Fn(e){return hp()?e instanceof HTMLElement||e instanceof ir(e).HTMLElement:!1}function mg(e){return!hp()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ir(e).ShadowRoot}const o$=new Set(["inline","contents"]);function yu(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=_r(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!o$.has(o)}const i$=new Set(["table","td","th"]);function a$(e){return i$.has(hl(e))}const s$=[":popover-open",":modal"];function mp(e){return s$.some(t=>{try{return e.matches(t)}catch{return!1}})}const l$=["transform","translate","scale","rotate","perspective"],c$=["transform","translate","scale","rotate","perspective","filter"],u$=["paint","layout","strict","content"];function bv(e){const t=gp(),n=bt(e)?_r(e):e;return l$.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||c$.some(r=>(n.willChange||"").includes(r))||u$.some(r=>(n.contain||"").includes(r))}function d$(e){let t=di(e);for(;Fn(t)&&!ii(t);){if(bv(t))return t;if(mp(t))return null;t=di(t)}return null}function gp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const f$=new Set(["html","body","#document"]);function ii(e){return f$.has(hl(e))}function _r(e){return ir(e).getComputedStyle(e)}function yp(e){return bt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function di(e){if(hl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||mg(e)&&e.host||Wo(e);return mg(t)?t.host:t}function LC(e){const t=di(e);return ii(t)?e.ownerDocument?e.ownerDocument.body:e.body:Fn(t)&&yu(t)?t:LC(t)}function ta(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=LC(e),i=o===((r=e.ownerDocument)==null?void 0:r.body),a=ir(o);if(i){const s=gg(a);return t.concat(a,a.visualViewport||[],yu(o)?o:[],s&&n?ta(s):[])}return t.concat(o,ta(o,[],n))}function gg(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const sa=Math.min,mr=Math.max,If=Math.round,id=Math.floor,Po=e=>({x:e,y:e}),p$={left:"right",right:"left",bottom:"top",top:"bottom"},h$={start:"end",end:"start"};function yg(e,t,n){return mr(e,sa(t,n))}function ml(e,t){return typeof e=="function"?e(t):e}function la(e){return e.split("-")[0]}function gl(e){return e.split("-")[1]}function OC(e){return e==="x"?"y":"x"}function Ev(e){return e==="y"?"height":"width"}const m$=new Set(["top","bottom"]);function ti(e){return m$.has(la(e))?"y":"x"}function Sv(e){return OC(ti(e))}function g$(e,t,n){n===void 0&&(n=!1);const r=gl(e),o=Sv(e),i=Ev(o);let a=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=Lf(a)),[a,Lf(a)]}function y$(e){const t=Lf(e);return[vg(e),t,vg(t)]}function vg(e){return e.replace(/start|end/g,t=>h$[t])}const x1=["left","right"],C1=["right","left"],v$=["top","bottom"],_$=["bottom","top"];function w$(e,t,n){switch(e){case"top":case"bottom":return n?t?C1:x1:t?x1:C1;case"left":case"right":return t?v$:_$;default:return[]}}function b$(e,t,n,r){const o=gl(e);let i=w$(la(e),n==="start",r);return o&&(i=i.map(a=>a+"-"+o),t&&(i=i.concat(i.map(vg)))),i}function Lf(e){return e.replace(/left|right|bottom|top/g,t=>p$[t])}function E$(e){return{top:0,right:0,bottom:0,left:0,...e}}function PC(e){return typeof e!="number"?E$(e):{top:e,right:e,bottom:e,left:e}}function Of(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var S$=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],_g=S$.join(","),MC=typeof Element>"u",Qc=MC?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Pf=!MC&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Jc=function(t,n){var r;n===void 0&&(n=!0);var o=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),i=o===""||o==="true",a=i||n&&t&&Jc(t.parentNode);return a},x$=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},C$=function(t,n,r){if(Jc(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(_g));return n&&Qc.call(t,_g)&&o.unshift(t),o=o.filter(r),o},wg=function(t,n,r){for(var o=[],i=Array.from(t);i.length;){var a=i.shift();if(!Jc(a,!1))if(a.tagName==="SLOT"){var s=a.assignedElements(),l=s.length?s:a.children,c=wg(l,!0,r);r.flatten?o.push.apply(o,c):o.push({scopeParent:a,candidates:c})}else{var u=Qc.call(a,_g);u&&r.filter(a)&&(n||!t.includes(a))&&o.push(a);var d=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),f=!Jc(d,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(d&&f){var m=wg(d===!0?a.children:d.children,!0,r);r.flatten?o.push.apply(o,m):o.push({scopeParent:a,candidates:m})}else i.unshift.apply(i,a.children)}}return o},DC=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},FC=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||x$(t))&&!DC(t)?0:t.tabIndex},T$=function(t,n){var r=FC(t);return r<0&&n&&!DC(t)?0:r},N$=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},$C=function(t){return t.tagName==="INPUT"},k$=function(t){return $C(t)&&t.type==="hidden"},A$=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},R$=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},I$=function(t){if(!t.name)return!0;var n=t.form||Pf(t),r=function(s){return n.querySelectorAll('input[type="radio"][name="'+s+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(t.name));else try{o=r(t.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var i=R$(o,t.form);return!i||i===t},L$=function(t){return $C(t)&&t.type==="radio"},O$=function(t){return L$(t)&&!I$(t)},P$=function(t){var n,r=t&&Pf(t),o=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==t){var a,s,l;for(i=!!((a=o)!==null&&a!==void 0&&(s=a.ownerDocument)!==null&&s!==void 0&&s.contains(o)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!i&&o;){var c,u,d;r=Pf(o),o=(c=r)===null||c===void 0?void 0:c.host,i=!!((u=o)!==null&&u!==void 0&&(d=u.ownerDocument)!==null&&d!==void 0&&d.contains(o))}}return i},T1=function(t){var n=t.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},M$=function(t,n){var r=n.displayCheck,o=n.getShadowRoot;if(r==="full-native"&&"checkVisibility"in t){var i=t.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!i}if(getComputedStyle(t).visibility==="hidden")return!0;var a=Qc.call(t,"details>summary:first-of-type"),s=a?t.parentElement:t;if(Qc.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof o=="function"){for(var l=t;t;){var c=t.parentElement,u=Pf(t);if(c&&!c.shadowRoot&&o(c)===!0)return T1(t);t.assignedSlot?t=t.assignedSlot:!c&&u!==t.ownerDocument?t=u.host:t=c}t=l}if(P$(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return T1(t);return!1},D$=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return Qc.call(n,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}n=n.parentElement}return!1},F$=function(t,n){return!(n.disabled||Jc(n)||k$(n)||M$(n,t)||A$(n)||D$(n))},N1=function(t,n){return!(O$(n)||FC(n)<0||!F$(t,n))},$$=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},BC=function(t){var n=[],r=[];return t.forEach(function(o,i){var a=!!o.scopeParent,s=a?o.scopeParent:o,l=T$(s,a),c=a?BC(o.candidates):s;l===0?a?n.push.apply(n,c):n.push(s):r.push({documentOrder:i,tabIndex:l,item:o,isScope:a,content:c})}),r.sort(N$).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(n)},VC=function(t,n){n=n||{};var r;return n.getShadowRoot?r=wg([t],n.includeContainer,{filter:N1.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:$$}):r=C$(t,n.includeContainer,N1.bind(null,n)),BC(r)};function k1(e,t,n){let{reference:r,floating:o}=e;const i=ti(t),a=Sv(t),s=Ev(a),l=la(t),c=i==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[s]/2-o[s]/2;let m;switch(l){case"top":m={x:u,y:r.y-o.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-o.width,y:d};break;default:m={x:r.x,y:r.y}}switch(gl(t)){case"start":m[a]-=f*(n&&c?-1:1);break;case"end":m[a]+=f*(n&&c?-1:1);break}return m}const B$=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:a}=n,s=i.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=k1(c,r,l),f=r,m={},y=0;for(let v=0;v<s.length;v++){const{name:S,fn:_}=s[v],{x:b,y:w,data:x,reset:N}=await _({x:u,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:m,rects:c,platform:a,elements:{reference:e,floating:t}});u=b??u,d=w??d,m={...m,[S]:{...m[S],...x}},N&&y<=50&&(y++,typeof N=="object"&&(N.placement&&(f=N.placement),N.rects&&(c=N.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:o}):N.rects),{x:u,y:d}=k1(c,f,l)),v=-1)}return{x:u,y:d,placement:f,strategy:o,middlewareData:m}};async function xv(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:i,rects:a,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:m=0}=ml(t,e),y=PC(m),S=s[f?d==="floating"?"reference":"floating":d],_=Of(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(S)))==null||n?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),b=d==="floating"?{x:r,y:o,width:a.floating.width,height:a.floating.height}:a.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),x=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},N=Of(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:b,offsetParent:w,strategy:l}):b);return{top:(_.top-N.top+y.top)/x.y,bottom:(N.bottom-_.bottom+y.bottom)/x.y,left:(_.left-N.left+y.left)/x.x,right:(N.right-_.right+y.right)/x.x}}const V$=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:i,platform:a,elements:s,middlewareData:l}=t,{element:c,padding:u=0}=ml(e,t)||{};if(c==null)return{};const d=PC(u),f={x:n,y:r},m=Sv(o),y=Ev(m),v=await a.getDimensions(c),S=m==="y",_=S?"top":"left",b=S?"bottom":"right",w=S?"clientHeight":"clientWidth",x=i.reference[y]+i.reference[m]-f[m]-i.floating[y],N=f[m]-i.reference[m],C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let T=C?C[w]:0;(!T||!await(a.isElement==null?void 0:a.isElement(C)))&&(T=s.floating[w]||i.floating[y]);const k=x/2-N/2,D=T/2-v[y]/2-1,R=sa(d[_],D),I=sa(d[b],D),z=R,O=T-v[y]-I,U=T/2-v[y]/2+k,W=yg(z,U,O),$=!l.arrow&&gl(o)!=null&&U!==W&&i.reference[y]/2-(U<z?R:I)-v[y]/2<0,M=$?U<z?U-z:U-O:0;return{[m]:f[m]+M,data:{[m]:W,centerOffset:U-W-M,...$&&{alignmentOffset:M}},reset:$}}}),U$=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:a,initialPlacement:s,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...S}=ml(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=la(o),b=ti(s),w=la(s)===s,x=await(l.isRTL==null?void 0:l.isRTL(c.floating)),N=f||(w||!v?[Lf(s)]:y$(s)),C=y!=="none";!f&&C&&N.push(...b$(s,v,y,x));const T=[s,...N],k=await xv(t,S),D=[];let R=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&D.push(k[_]),d){const U=g$(o,a,x);D.push(k[U[0]],k[U[1]])}if(R=[...R,{placement:o,overflows:D}],!D.every(U=>U<=0)){var I,z;const U=(((I=i.flip)==null?void 0:I.index)||0)+1,W=T[U];if(W&&(!(d==="alignment"?b!==ti(W):!1)||R.every(P=>ti(P.placement)===b?P.overflows[0]>0:!0)))return{data:{index:U,overflows:R},reset:{placement:W}};let $=(z=R.filter(M=>M.overflows[0]<=0).sort((M,P)=>M.overflows[1]-P.overflows[1])[0])==null?void 0:z.placement;if(!$)switch(m){case"bestFit":{var O;const M=(O=R.filter(P=>{if(C){const B=ti(P.placement);return B===b||B==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(B=>B>0).reduce((B,V)=>B+V,0)]).sort((P,B)=>P[1]-B[1])[0])==null?void 0:O[0];M&&($=M);break}case"initialPlacement":$=s;break}if(o!==$)return{reset:{placement:$}}}return{}}}},z$=new Set(["left","top"]);async function j$(e,t){const{placement:n,platform:r,elements:o}=e,i=await(r.isRTL==null?void 0:r.isRTL(o.floating)),a=la(n),s=gl(n),l=ti(n)==="y",c=z$.has(a)?-1:1,u=i&&l?-1:1,d=ml(t,e);let{mainAxis:f,crossAxis:m,alignmentAxis:y}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&typeof y=="number"&&(m=s==="end"?y*-1:y),l?{x:m*u,y:f*c}:{x:f*c,y:m*u}}const W$=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:a,middlewareData:s}=t,l=await j$(t,e);return a===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:a}}}}},G$=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:s={fn:S=>{let{x:_,y:b}=S;return{x:_,y:b}}},...l}=ml(e,t),c={x:n,y:r},u=await xv(t,l),d=ti(la(o)),f=OC(d);let m=c[f],y=c[d];if(i){const S=f==="y"?"top":"left",_=f==="y"?"bottom":"right",b=m+u[S],w=m-u[_];m=yg(b,m,w)}if(a){const S=d==="y"?"top":"left",_=d==="y"?"bottom":"right",b=y+u[S],w=y-u[_];y=yg(b,y,w)}const v=s.fn({...t,[f]:m,[d]:y});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[f]:i,[d]:a}}}}}},H$=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:i,platform:a,elements:s}=t,{apply:l=()=>{},...c}=ml(e,t),u=await xv(t,c),d=la(o),f=gl(o),m=ti(o)==="y",{width:y,height:v}=i.floating;let S,_;d==="top"||d==="bottom"?(S=d,_=f===(await(a.isRTL==null?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(_=d,S=f==="end"?"top":"bottom");const b=v-u.top-u.bottom,w=y-u.left-u.right,x=sa(v-u[S],b),N=sa(y-u[_],w),C=!t.middlewareData.shift;let T=x,k=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(k=w),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(T=b),C&&!f){const R=mr(u.left,0),I=mr(u.right,0),z=mr(u.top,0),O=mr(u.bottom,0);m?k=y-2*(R!==0||I!==0?R+I:mr(u.left,u.right)):T=v-2*(z!==0||O!==0?z+O:mr(u.top,u.bottom))}await l({...t,availableWidth:k,availableHeight:T});const D=await a.getDimensions(s.floating);return y!==D.width||v!==D.height?{reset:{rects:!0}}:{}}}};function UC(e){const t=_r(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=Fn(e),i=o?e.offsetWidth:n,a=o?e.offsetHeight:r,s=If(n)!==i||If(r)!==a;return s&&(n=i,r=a),{width:n,height:r,$:s}}function Cv(e){return bt(e)?e:e.contextElement}function Hs(e){const t=Cv(e);if(!Fn(t))return Po(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=UC(t);let a=(i?If(n.width):n.width)/r,s=(i?If(n.height):n.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const X$=Po(0);function zC(e){const t=ir(e);return!gp()||!t.visualViewport?X$:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Y$(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ir(e)?!1:t}function os(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),i=Cv(e);let a=Po(1);t&&(r?bt(r)&&(a=Hs(r)):a=Hs(e));const s=Y$(i,n,r)?zC(i):Po(0);let l=(o.left+s.x)/a.x,c=(o.top+s.y)/a.y,u=o.width/a.x,d=o.height/a.y;if(i){const f=ir(i),m=r&&bt(r)?ir(r):r;let y=f,v=gg(y);for(;v&&r&&m!==y;){const S=Hs(v),_=v.getBoundingClientRect(),b=_r(v),w=_.left+(v.clientLeft+parseFloat(b.paddingLeft))*S.x,x=_.top+(v.clientTop+parseFloat(b.paddingTop))*S.y;l*=S.x,c*=S.y,u*=S.x,d*=S.y,l+=w,c+=x,y=ir(v),v=gg(y)}}return Of({width:u,height:d,x:l,y:c})}function vp(e,t){const n=yp(e).scrollLeft;return t?t.left+n:os(Wo(e)).left+n}function jC(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-vp(e,n),o=n.top+t.scrollTop;return{x:r,y:o}}function q$(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i=o==="fixed",a=Wo(r),s=t?mp(t.floating):!1;if(r===a||s&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Po(1);const u=Po(0),d=Fn(r);if((d||!d&&!i)&&((hl(r)!=="body"||yu(a))&&(l=yp(r)),Fn(r))){const m=os(r);c=Hs(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const f=a&&!d&&!i?jC(a,l):Po(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function K$(e){return Array.from(e.getClientRects())}function Z$(e){const t=Wo(e),n=yp(e),r=e.ownerDocument.body,o=mr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=mr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+vp(e);const s=-n.scrollTop;return _r(r).direction==="rtl"&&(a+=mr(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:a,y:s}}const A1=25;function Q$(e,t){const n=ir(e),r=Wo(e),o=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,s=0,l=0;if(o){i=o.width,a=o.height;const u=gp();(!u||u&&t==="fixed")&&(s=o.offsetLeft,l=o.offsetTop)}const c=vp(r);if(c<=0){const u=r.ownerDocument,d=u.body,f=getComputedStyle(d),m=u.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,y=Math.abs(r.clientWidth-d.clientWidth-m);y<=A1&&(i-=y)}else c<=A1&&(i+=c);return{width:i,height:a,x:s,y:l}}const J$=new Set(["absolute","fixed"]);function e5(e,t){const n=os(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=Fn(e)?Hs(e):Po(1),a=e.clientWidth*i.x,s=e.clientHeight*i.y,l=o*i.x,c=r*i.y;return{width:a,height:s,x:l,y:c}}function R1(e,t,n){let r;if(t==="viewport")r=Q$(e,n);else if(t==="document")r=Z$(Wo(e));else if(bt(t))r=e5(t,n);else{const o=zC(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Of(r)}function WC(e,t){const n=di(e);return n===t||!bt(n)||ii(n)?!1:_r(n).position==="fixed"||WC(n,t)}function t5(e,t){const n=t.get(e);if(n)return n;let r=ta(e,[],!1).filter(s=>bt(s)&&hl(s)!=="body"),o=null;const i=_r(e).position==="fixed";let a=i?di(e):e;for(;bt(a)&&!ii(a);){const s=_r(a),l=bv(a);!l&&s.position==="fixed"&&(o=null),(i?!l&&!o:!l&&s.position==="static"&&!!o&&J$.has(o.position)||yu(a)&&!l&&WC(e,a))?r=r.filter(u=>u!==a):o=s,a=di(a)}return t.set(e,r),r}function n5(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const a=[...n==="clippingAncestors"?mp(t)?[]:t5(t,this._c):[].concat(n),r],s=a[0],l=a.reduce((c,u)=>{const d=R1(t,u,o);return c.top=mr(d.top,c.top),c.right=sa(d.right,c.right),c.bottom=sa(d.bottom,c.bottom),c.left=mr(d.left,c.left),c},R1(t,s,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function r5(e){const{width:t,height:n}=UC(e);return{width:t,height:n}}function o5(e,t,n){const r=Fn(t),o=Wo(t),i=n==="fixed",a=os(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const l=Po(0);function c(){l.x=vp(o)}if(r||!r&&!i)if((hl(t)!=="body"||yu(o))&&(s=yp(t)),r){const m=os(t,!0,i,t);l.x=m.x+t.clientLeft,l.y=m.y+t.clientTop}else o&&c();i&&!r&&o&&c();const u=o&&!r&&!i?jC(o,s):Po(0),d=a.left+s.scrollLeft-l.x-u.x,f=a.top+s.scrollTop-l.y-u.y;return{x:d,y:f,width:a.width,height:a.height}}function bh(e){return _r(e).position==="static"}function I1(e,t){if(!Fn(e)||_r(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Wo(e)===n&&(n=n.ownerDocument.body),n}function GC(e,t){const n=ir(e);if(mp(e))return n;if(!Fn(e)){let o=di(e);for(;o&&!ii(o);){if(bt(o)&&!bh(o))return o;o=di(o)}return n}let r=I1(e,t);for(;r&&a$(r)&&bh(r);)r=I1(r,t);return r&&ii(r)&&bh(r)&&!bv(r)?n:r||d$(e)||n}const i5=async function(e){const t=this.getOffsetParent||GC,n=this.getDimensions,r=await n(e.floating);return{reference:o5(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function a5(e){return _r(e).direction==="rtl"}const s5={convertOffsetParentRelativeRectToViewportRelativeRect:q$,getDocumentElement:Wo,getClippingRect:n5,getOffsetParent:GC,getElementRects:i5,getClientRects:K$,getDimensions:r5,getScale:Hs,isElement:bt,isRTL:a5};function HC(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function l5(e,t){let n=null,r;const o=Wo(e);function i(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function a(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),i();const c=e.getBoundingClientRect(),{left:u,top:d,width:f,height:m}=c;if(s||t(),!f||!m)return;const y=id(d),v=id(o.clientWidth-(u+f)),S=id(o.clientHeight-(d+m)),_=id(u),w={rootMargin:-y+"px "+-v+"px "+-S+"px "+-_+"px",threshold:mr(0,sa(1,l))||1};let x=!0;function N(C){const T=C[0].intersectionRatio;if(T!==l){if(!x)return a();T?a(!1,T):r=setTimeout(()=>{a(!1,1e-7)},1e3)}T===1&&!HC(c,e.getBoundingClientRect())&&a(),x=!1}try{n=new IntersectionObserver(N,{...w,root:o.ownerDocument})}catch{n=new IntersectionObserver(N,w)}n.observe(e)}return a(!0),i}function XC(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Cv(e),u=o||i?[...c?ta(c):[],...ta(t)]:[];u.forEach(_=>{o&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const d=c&&s?l5(c,n):null;let f=-1,m=null;a&&(m=new ResizeObserver(_=>{let[b]=_;b&&b.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),n()}),c&&!l&&m.observe(c),m.observe(t));let y,v=l?os(e):null;l&&S();function S(){const _=os(e);v&&!HC(v,_)&&n(),v=_,y=requestAnimationFrame(S)}return n(),()=>{var _;u.forEach(b=>{o&&b.removeEventListener("scroll",n),i&&b.removeEventListener("resize",n)}),d==null||d(),(_=m)==null||_.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const c5=W$,u5=G$,d5=U$,f5=H$,L1=V$,p5=(e,t,n)=>{const r=new Map,o={platform:s5,...n},i={...o.platform,_c:r};return B$(e,t,{...o,platform:i})};var h5=typeof document<"u",m5=function(){},$d=h5?h.useLayoutEffect:m5;function Mf(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Mf(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&e.$$typeof)&&!Mf(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function YC(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function O1(e,t){const n=YC(e);return Math.round(t*n)/n}function Eh(e){const t=h.useRef(e);return $d(()=>{t.current=e}),t}function g5(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:a}={},transform:s=!0,whileElementsMounted:l,open:c}=e,[u,d]=h.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=h.useState(r);Mf(f,r)||m(r);const[y,v]=h.useState(null),[S,_]=h.useState(null),b=h.useCallback(P=>{P!==C.current&&(C.current=P,v(P))},[]),w=h.useCallback(P=>{P!==T.current&&(T.current=P,_(P))},[]),x=i||y,N=a||S,C=h.useRef(null),T=h.useRef(null),k=h.useRef(u),D=l!=null,R=Eh(l),I=Eh(o),z=Eh(c),O=h.useCallback(()=>{if(!C.current||!T.current)return;const P={placement:t,strategy:n,middleware:f};I.current&&(P.platform=I.current),p5(C.current,T.current,P).then(B=>{const V={...B,isPositioned:z.current!==!1};U.current&&!Mf(k.current,V)&&(k.current=V,ip.flushSync(()=>{d(V)}))})},[f,t,n,I,z]);$d(()=>{c===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,d(P=>({...P,isPositioned:!1})))},[c]);const U=h.useRef(!1);$d(()=>(U.current=!0,()=>{U.current=!1}),[]),$d(()=>{if(x&&(C.current=x),N&&(T.current=N),x&&N){if(R.current)return R.current(x,N,O);O()}},[x,N,O,R,D]);const W=h.useMemo(()=>({reference:C,floating:T,setReference:b,setFloating:w}),[b,w]),$=h.useMemo(()=>({reference:x,floating:N}),[x,N]),M=h.useMemo(()=>{const P={position:n,left:0,top:0};if(!$.floating)return P;const B=O1($.floating,u.x),V=O1($.floating,u.y);return s?{...P,transform:"translate("+B+"px, "+V+"px)",...YC($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:V}},[n,s,$.floating,u.x,u.y]);return h.useMemo(()=>({...u,update:O,refs:W,elements:$,floatingStyles:M}),[u,O,W,$,M])}const y5=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?L1({element:r.current,padding:o}).fn(n):{}:r?L1({element:r,padding:o}).fn(n):{}}}},qC=(e,t)=>({...c5(e),options:[e,t]}),KC=(e,t)=>({...u5(e),options:[e,t]}),ZC=(e,t)=>({...d5(e),options:[e,t]}),v5=(e,t)=>({...f5(e),options:[e,t]}),_5=(e,t)=>({...y5(e),options:[e,t]});let _p=h.createContext(null);_p.displayName="OpenClosedContext";var lo=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(lo||{});function wp(){return h.useContext(_p)}function w5({value:e,children:t}){return be.createElement(_p.Provider,{value:e},t)}function b5({children:e}){return be.createElement(_p.Provider,{value:null},e)}function E5(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Di=[];E5(()=>{function e(t){if(!zi(t.target)||t.target===document.body||Di[0]===t.target)return;let n=t.target;n=n.closest(Rf),Di.unshift(n??t.target),Di=Di.filter(r=>r!=null&&r.isConnected),Di.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function QC(e){let t=ct(e),n=h.useRef(!1);h.useEffect(()=>(n.current=!1,()=>{n.current=!0,fp(()=>{n.current&&t()})}),[t])}let JC=h.createContext(!1);function S5(){return h.useContext(JC)}function P1(e){return be.createElement(JC.Provider,{value:e.force},e.children)}function x5(e){let t=S5(),n=h.useContext(tT),[r,o]=h.useState(()=>{var i;if(!t&&n!==null)return(i=n.current)!=null?i:null;if(Oo.isServer)return null;let a=e==null?void 0:e.getElementById("headlessui-portal-root");if(a)return a;if(e===null)return null;let s=e.createElement("div");return s.setAttribute("id","headlessui-portal-root"),e.body.appendChild(s)});return h.useEffect(()=>{r!==null&&(e!=null&&e.body.contains(r)||e==null||e.body.appendChild(r))},[r,e]),h.useEffect(()=>{t||n!==null&&o(n.current)},[n,o,t]),r}let eT=h.Fragment,C5=sr(function(e,t){let{ownerDocument:n=null,...r}=e,o=h.useRef(null),i=jo(o4(f=>{o.current=f}),t),a=vv(o.current),s=n??a,l=x5(s),c=h.useContext(bg),u=pp(),d=jr();return QC(()=>{var f;l&&l.childNodes.length<=0&&((f=l.parentElement)==null||f.removeChild(l))}),l?ip.createPortal(be.createElement("div",{"data-headlessui-portal":"",ref:f=>{u.dispose(),c&&f&&u.add(c.register(f))}},d({ourProps:{ref:i},theirProps:r,slot:{},defaultTag:eT,name:"Portal"})),l):null});function T5(e,t){let n=jo(t),{enabled:r=!0,ownerDocument:o,...i}=e,a=jr();return r?be.createElement(C5,{...i,ownerDocument:o,ref:n}):a({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:eT,name:"Portal"})}let N5=h.Fragment,tT=h.createContext(null);function k5(e,t){let{target:n,...r}=e,o={ref:jo(t)},i=jr();return be.createElement(tT.Provider,{value:n},i({ourProps:o,theirProps:r,defaultTag:N5,name:"Popover.Group"}))}let bg=h.createContext(null);function A5(){let e=h.useContext(bg),t=h.useRef([]),n=ct(i=>(t.current.push(i),e&&e.register(i),()=>r(i))),r=ct(i=>{let a=t.current.indexOf(i);a!==-1&&t.current.splice(a,1),e&&e.unregister(i)}),o=h.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,h.useMemo(()=>function({children:i}){return be.createElement(bg.Provider,{value:o},i)},[o])]}let R5=sr(T5),nT=sr(k5),I5=Object.assign(R5,{Group:nT});function L5(e,t=typeof document<"u"?document.defaultView:null,n){let r=gu(e,"escape");IC(t,"keydown",o=>{r&&(o.defaultPrevented||o.key===_C.Escape&&n(o))})}function O5(){var e;let[t]=h.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=h.useState((e=t==null?void 0:t.matches)!=null?e:!1);return or(()=>{if(!t)return;function o(i){r(i.matches)}return t.addEventListener("change",o),()=>t.removeEventListener("change",o)},[t]),n}function P5({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=ct(()=>{var o,i;let a=pu(n),s=[];for(let l of e)l!==null&&(ea(l)?s.push(l):"current"in l&&ea(l.current)&&s.push(l.current));if(t!=null&&t.current)for(let l of t.current)s.push(l);for(let l of(o=a==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?o:[])l!==document.body&&l!==document.head&&ea(l)&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((i=n==null?void 0:n.getRootNode())==null?void 0:i.host))||s.some(c=>l.contains(c))||s.push(l));return s});return{resolveContainers:r,contains:ct(o=>r().some(i=>i.contains(o)))}}let rT=h.createContext(null);function M1({children:e,node:t}){let[n,r]=h.useState(null),o=oT(t??n);return be.createElement(rT.Provider,{value:o},e,o===null&&be.createElement(fg,{features:Af.Hidden,ref:i=>{var a,s;if(i){for(let l of(s=(a=pu(i))==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?s:[])if(l!==document.body&&l!==document.head&&ea(l)&&l!=null&&l.contains(i)){r(l);break}}}}))}function oT(e=null){var t;return(t=h.useContext(rT))!=null?t:e}function M5(){let e=typeof document>"u";return"useSyncExternalStore"in Ic?(t=>t.useSyncExternalStore)(Ic)(()=>()=>{},()=>!1,()=>!e):!1}function bp(){let e=M5(),[t,n]=h.useState(Oo.isHandoffComplete);return t&&Oo.isHandoffComplete===!1&&n(!1),h.useEffect(()=>{t!==!0&&n(!0)},[t]),h.useEffect(()=>Oo.handoff(),[]),e?!1:t}function Tv(){let e=h.useRef(!1);return or(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var sc=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(sc||{});function D5(){let e=h.useRef(0);return RC(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function iT(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)ea(n.current)&&t.add(n.current);return t}let F5="div";var Da=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Da||{});function $5(e,t){let n=h.useRef(null),r=jo(n,t),{initialFocus:o,initialFocusFallback:i,containers:a,features:s=15,...l}=e;bp()||(s=0);let c=vv(n.current);z5(s,{ownerDocument:c});let u=j5(s,{ownerDocument:c,container:n,initialFocus:o,initialFocusFallback:i});W5(s,{ownerDocument:c,container:n,containers:a,previousActiveElement:u});let d=D5(),f=ct(b=>{if(!rs(n.current))return;let w=n.current;(x=>x())(()=>{ui(d.current,{[sc.Forwards]:()=>{Cc(w,Zo.First,{skipElements:[b.relatedTarget,i]})},[sc.Backwards]:()=>{Cc(w,Zo.Last,{skipElements:[b.relatedTarget,i]})}})})}),m=gu(!!(s&2),"focus-trap#tab-lock"),y=pp(),v=h.useRef(!1),S={ref:r,onKeyDown(b){b.key=="Tab"&&(v.current=!0,y.requestAnimationFrame(()=>{v.current=!1}))},onBlur(b){if(!(s&4))return;let w=iT(a);rs(n.current)&&w.add(n.current);let x=b.relatedTarget;zi(x)&&x.dataset.headlessuiFocusGuard!=="true"&&(aT(w,x)||(v.current?Cc(n.current,ui(d.current,{[sc.Forwards]:()=>Zo.Next,[sc.Backwards]:()=>Zo.Previous})|Zo.WrapAround,{relativeTo:b.target}):zi(b.target)&&oi(b.target)))}},_=jr();return be.createElement(be.Fragment,null,m&&be.createElement(fg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:Af.Focusable}),_({ourProps:S,theirProps:l,defaultTag:F5,name:"FocusTrap"}),m&&be.createElement(fg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:Af.Focusable}))}let B5=sr($5),V5=Object.assign(B5,{features:Da});function U5(e=!0){let t=h.useRef(Di.slice());return _v(([n],[r])=>{r===!0&&n===!1&&fp(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Di.slice())},[e,Di,t]),ct(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function z5(e,{ownerDocument:t}){let n=!!(e&8),r=U5(n);_v(()=>{n||WF(t==null?void 0:t.body)&&oi(r())},[n]),QC(()=>{n&&oi(r())})}function j5(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:o}){let i=h.useRef(null),a=gu(!!(e&1),"focus-trap#initial-focus"),s=Tv();return _v(()=>{if(e===0)return;if(!a){o!=null&&o.current&&oi(o.current);return}let l=n.current;l&&fp(()=>{if(!s.current)return;let c=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===c){i.current=c;return}}else if(l.contains(c)){i.current=c;return}if(r!=null&&r.current)oi(r.current);else{if(e&16){if(Cc(l,Zo.First|Zo.AutoFocus)!==hg.Error)return}else if(Cc(l,Zo.First)!==hg.Error)return;if(o!=null&&o.current&&(oi(o.current),(t==null?void 0:t.activeElement)===o.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t==null?void 0:t.activeElement})},[o,a,e]),i}function W5(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:o}){let i=Tv(),a=!!(e&4);IC(t==null?void 0:t.defaultView,"focus",s=>{if(!a||!i.current)return;let l=iT(r);rs(n.current)&&l.add(n.current);let c=o.current;if(!c)return;let u=s.target;rs(u)?aT(l,u)?(o.current=u,oi(u)):(s.preventDefault(),s.stopPropagation(),oi(c)):oi(o.current)},!0)}function aT(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function sT(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Sc((t=e.as)!=null?t:cT)||be.Children.count(e.children)===1}let Ep=h.createContext(null);Ep.displayName="TransitionContext";var G5=(e=>(e.Visible="visible",e.Hidden="hidden",e))(G5||{});function H5(){let e=h.useContext(Ep);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function X5(){let e=h.useContext(Sp);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Sp=h.createContext(null);Sp.displayName="NestingContext";function xp(e){return"children"in e?xp(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function lT(e,t){let n=ls(e),r=h.useRef([]),o=Tv(),i=pp(),a=ct((m,y=Ui.Hidden)=>{let v=r.current.findIndex(({el:S})=>S===m);v!==-1&&(ui(y,{[Ui.Unmount](){r.current.splice(v,1)},[Ui.Hidden](){r.current[v].state="hidden"}}),i.microTask(()=>{var S;!xp(r)&&o.current&&((S=n.current)==null||S.call(n))}))}),s=ct(m=>{let y=r.current.find(({el:v})=>v===m);return y?y.state!=="visible"&&(y.state="visible"):r.current.push({el:m,state:"visible"}),()=>a(m,Ui.Unmount)}),l=h.useRef([]),c=h.useRef(Promise.resolve()),u=h.useRef({enter:[],leave:[]}),d=ct((m,y,v)=>{l.current.splice(0),t&&(t.chains.current[y]=t.chains.current[y].filter(([S])=>S!==m)),t==null||t.chains.current[y].push([m,new Promise(S=>{l.current.push(S)})]),t==null||t.chains.current[y].push([m,new Promise(S=>{Promise.all(u.current[y].map(([_,b])=>b)).then(()=>S())})]),y==="enter"?c.current=c.current.then(()=>t==null?void 0:t.wait.current).then(()=>v(y)):v(y)}),f=ct((m,y,v)=>{Promise.all(u.current[y].splice(0).map(([S,_])=>_)).then(()=>{var S;(S=l.current.shift())==null||S()}).then(()=>v(y))});return h.useMemo(()=>({children:r,register:s,unregister:a,onStart:d,onStop:f,wait:c,chains:u}),[s,a,r,d,f,u,c])}let cT=h.Fragment,uT=kf.RenderStrategy;function Y5(e,t){var n,r;let{transition:o=!0,beforeEnter:i,afterEnter:a,beforeLeave:s,afterLeave:l,enter:c,enterFrom:u,enterTo:d,entered:f,leave:m,leaveFrom:y,leaveTo:v,...S}=e,[_,b]=h.useState(null),w=h.useRef(null),x=sT(e),N=jo(...x?[w,t,b]:t===null?[]:[t]),C=(n=S.unmount)==null||n?Ui.Unmount:Ui.Hidden,{show:T,appear:k,initial:D}=H5(),[R,I]=h.useState(T?"visible":"hidden"),z=X5(),{register:O,unregister:U}=z;or(()=>O(w),[O,w]),or(()=>{if(C===Ui.Hidden&&w.current){if(T&&R!=="visible"){I("visible");return}return ui(R,{hidden:()=>U(w),visible:()=>O(w)})}},[R,w,O,U,T,C]);let W=bp();or(()=>{if(x&&W&&R==="visible"&&w.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[w,R,W,x]);let $=D&&!k,M=k&&T&&D,P=h.useRef(!1),B=lT(()=>{P.current||(I("hidden"),U(w))},z),V=ct(me=>{P.current=!0;let fe=me?"enter":"leave";B.onStart(w,fe,ie=>{ie==="enter"?i==null||i():ie==="leave"&&(s==null||s())})}),q=ct(me=>{let fe=me?"enter":"leave";P.current=!1,B.onStop(w,fe,ie=>{ie==="enter"?a==null||a():ie==="leave"&&(l==null||l())}),fe==="leave"&&!xp(B)&&(I("hidden"),U(w))});h.useEffect(()=>{x&&o||(V(T),q(T))},[T,x,o]);let Q=(()=>!(!o||!x||!W||$))(),[,H]=J4(Q,_,T,{start:V,end:q}),K=Pa({ref:N,className:((r=dg(S.className,M&&c,M&&u,H.enter&&c,H.enter&&H.closed&&u,H.enter&&!H.closed&&d,H.leave&&m,H.leave&&!H.closed&&y,H.leave&&H.closed&&v,!H.transition&&T&&f))==null?void 0:r.trim())||void 0,...Q4(H)}),Y=0;R==="visible"&&(Y|=lo.Open),R==="hidden"&&(Y|=lo.Closed),T&&R==="hidden"&&(Y|=lo.Opening),!T&&R==="visible"&&(Y|=lo.Closing);let ce=jr();return be.createElement(Sp.Provider,{value:B},be.createElement(w5,{value:Y},ce({ourProps:K,theirProps:S,defaultTag:cT,features:uT,visible:R==="visible",name:"Transition.Child"})))}function q5(e,t){let{show:n,appear:r=!1,unmount:o=!0,...i}=e,a=h.useRef(null),s=sT(e),l=jo(...s?[a,t]:t===null?[]:[t]);bp();let c=wp();if(n===void 0&&c!==null&&(n=(c&lo.Open)===lo.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=h.useState(n?"visible":"hidden"),f=lT(()=>{n||d("hidden")}),[m,y]=h.useState(!0),v=h.useRef([n]);or(()=>{m!==!1&&v.current[v.current.length-1]!==n&&(v.current.push(n),y(!1))},[v,n]);let S=h.useMemo(()=>({show:n,appear:r,initial:m}),[n,r,m]);or(()=>{n?d("visible"):!xp(f)&&a.current!==null&&d("hidden")},[n,f]);let _={unmount:o},b=ct(()=>{var N;m&&y(!1),(N=e.beforeEnter)==null||N.call(e)}),w=ct(()=>{var N;m&&y(!1),(N=e.beforeLeave)==null||N.call(e)}),x=jr();return be.createElement(Sp.Provider,{value:f},be.createElement(Ep.Provider,{value:S},x({ourProps:{..._,as:h.Fragment,children:be.createElement(dT,{ref:l,..._,...i,beforeEnter:b,beforeLeave:w})},theirProps:{},defaultTag:h.Fragment,features:uT,visible:u==="visible",name:"Transition"})))}function K5(e,t){let n=h.useContext(Ep)!==null,r=wp()!==null;return be.createElement(be.Fragment,null,!n&&r?be.createElement(Eg,{ref:t,...e}):be.createElement(dT,{ref:t,...e}))}let Eg=sr(q5),dT=sr(Y5),Nv=sr(K5),Z5=Object.assign(Eg,{Child:Nv,Root:Eg});var Q5=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Q5||{}),J5=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(J5||{});let e6={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},kv=h.createContext(null);kv.displayName="DialogContext";function Cp(e){let t=h.useContext(kv);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Cp),n}return t}function t6(e,t){return ui(t.type,e6,e,t)}let D1=sr(function(e,t){let n=h.useId(),{id:r=`headlessui-dialog-${n}`,open:o,onClose:i,initialFocus:a,role:s="dialog",autoFocus:l=!0,__demoMode:c=!1,unmount:u=!1,...d}=e,f=h.useRef(!1);s=function(){return s==="dialog"||s==="alertdialog"?s:(f.current||(f.current=!0,console.warn(`Invalid role [${s}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=wp();o===void 0&&m!==null&&(o=(m&lo.Open)===lo.Open);let y=h.useRef(null),v=jo(y,t),S=vv(y.current),_=o?0:1,[b,w]=h.useReducer(t6,{titleId:null,descriptionId:null,panelRef:h.createRef()}),x=ct(()=>i(!1)),N=ct(H=>w({type:0,id:H})),C=bp()?_===0:!1,[T,k]=A5(),D={get current(){var H;return(H=b.panelRef.current)!=null?H:y.current}},R=oT(),{resolveContainers:I}=P5({mainTreeNode:R,portals:T,defaultContainers:[D]}),z=m!==null?(m&lo.Closing)===lo.Closing:!1;R4(c||z?!1:C,{allowed:ct(()=>{var H,K;return[(K=(H=y.current)==null?void 0:H.closest("[data-headlessui-portal]"))!=null?K:null]}),disallowed:ct(()=>{var H;return[(H=R==null?void 0:R.closest("body > *:not(#headlessui-portal-root)"))!=null?H:null]})});let O=xC.get(null);or(()=>{if(C)return O.actions.push(r),()=>O.actions.pop(r)},[O,r,C]);let U=NC(O,h.useCallback(H=>O.selectors.isTop(H,r),[O,r]));z4(U,I,H=>{H.preventDefault(),x()}),L5(U,S==null?void 0:S.defaultView,H=>{H.preventDefault(),H.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),x()}),q4(c||z?!1:C,S,I),I4(C,y,x);let[W,$]=i4(),M=h.useMemo(()=>[{dialogState:_,close:x,setTitleId:N,unmount:u},b],[_,x,N,u,b]),P=hu({open:_===0}),B={ref:v,id:r,role:s,tabIndex:-1,"aria-modal":c?void 0:_===0?!0:void 0,"aria-labelledby":b.titleId,"aria-describedby":W,unmount:u},V=!O5(),q=Da.None;C&&!c&&(q|=Da.RestoreFocus,q|=Da.TabLock,l&&(q|=Da.AutoFocus),V&&(q|=Da.InitialFocus));let Q=jr();return be.createElement(b5,null,be.createElement(P1,{force:!0},be.createElement(I5,null,be.createElement(kv.Provider,{value:M},be.createElement(nT,{target:y},be.createElement(P1,{force:!1},be.createElement($,{slot:P},be.createElement(k,null,be.createElement(V5,{initialFocus:a,initialFocusFallback:y,containers:I,features:q},be.createElement(d4,{value:x},Q({ourProps:B,theirProps:d,slot:P,defaultTag:n6,features:r6,visible:_===0,name:"Dialog"})))))))))))}),n6="div",r6=kf.RenderStrategy|kf.Static;function o6(e,t){let{transition:n=!1,open:r,...o}=e,i=wp(),a=e.hasOwnProperty("open")||i!==null,s=e.hasOwnProperty("onClose");if(!a&&!s)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!a)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!s)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!o.static?be.createElement(M1,null,be.createElement(Z5,{show:r,transition:n,unmount:o.unmount},be.createElement(D1,{ref:t,...o}))):be.createElement(M1,null,be.createElement(D1,{ref:t,open:r,...o}))}let i6="div";function a6(e,t){let n=h.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:o=!1,...i}=e,[{dialogState:a,unmount:s},l]=Cp("Dialog.Panel"),c=jo(t,l.panelRef),u=hu({open:a===0}),d=ct(S=>{S.stopPropagation()}),f={ref:c,id:r,onClick:d},m=o?Nv:h.Fragment,y=o?{unmount:s}:{},v=jr();return be.createElement(m,{...y},v({ourProps:f,theirProps:i,slot:u,defaultTag:i6,name:"Dialog.Panel"}))}let s6="div";function l6(e,t){let{transition:n=!1,...r}=e,[{dialogState:o,unmount:i}]=Cp("Dialog.Backdrop"),a=hu({open:o===0}),s={ref:t,"aria-hidden":!0},l=n?Nv:h.Fragment,c=n?{unmount:i}:{},u=jr();return be.createElement(l,{...c},u({ourProps:s,theirProps:r,slot:a,defaultTag:s6,name:"Dialog.Backdrop"}))}let c6="h2";function u6(e,t){let n=h.useId(),{id:r=`headlessui-dialog-title-${n}`,...o}=e,[{dialogState:i,setTitleId:a}]=Cp("Dialog.Title"),s=jo(t);h.useEffect(()=>(a(r),()=>a(null)),[r,a]);let l=hu({open:i===0}),c={ref:s,id:r};return jr()({ourProps:c,theirProps:o,slot:l,defaultTag:c6,name:"Dialog.Title"})}let d6=sr(o6),fT=sr(a6),f6=sr(l6),p6=sr(u6),h6=Object.assign(d6,{Panel:fT,Title:p6,Description:c4});const m6="_dialog_1nxoa_1",g6="_backdrop_1nxoa_6",y6="_container_1nxoa_18",v6="_panel_1nxoa_29",ad={dialog:m6,backdrop:g6,container:y6,panel:v6};function zn({isOpen:e,setIsOpen:t,onClose:n,onOpen:r,allowClose:o=!0,preClose:i,className:a,children:s}){const l=h.useRef(e),[c,u]=h.useState(!1);h.useEffect(()=>{e&&!l.current&&r&&requestAnimationFrame(()=>{r()}),l.current=e},[e,r]);const d=h.useCallback(async()=>{if(o&&!c){if(!i){n==null||n(),t(!1);return}u(!0);try{await Promise.resolve(i())&&(n==null||n(),t(!1))}finally{u(!1)}}},[o,i,n,t,c]);return L(h6,{open:e,onClose:d,className:ad.dialog,children:[p(f6,{transition:!0,className:ad.backdrop}),p("div",{className:ad.container,children:p(fT,{transition:!0,className:j(ad.panel,a),children:s})})]})}const Av=h.createContext({});function Rv(e){const t=h.useRef(null);return t.current===null&&(t.current=e()),t.current}const Iv=typeof window<"u",pT=Iv?h.useLayoutEffect:h.useEffect,Tp=h.createContext(null);function Lv(e,t){e.indexOf(t)===-1&&e.push(t)}function Ov(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const fi=(e,t,n)=>n>t?t:n<e?e:n;let Pv=()=>{};const pi={},hT=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function mT(e){return typeof e=="object"&&e!==null}const gT=e=>/^0[^.\s]+$/u.test(e);function Mv(e){let t;return()=>(t===void 0&&(t=e()),t)}const Br=e=>e,_6=(e,t)=>n=>t(e(n)),vu=(...e)=>e.reduce(_6),eu=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Dv{constructor(){this.subscriptions=[]}add(t){return Lv(this.subscriptions,t),()=>Ov(this.subscriptions,t)}notify(t,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,r);else for(let i=0;i<o;i++){const a=this.subscriptions[i];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Mo=e=>e*1e3,Mr=e=>e/1e3;function yT(e,t){return t?e*(1e3/t):0}const vT=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,w6=1e-7,b6=12;function E6(e,t,n,r,o){let i,a,s=0;do a=t+(n-t)/2,i=vT(a,r,o)-e,i>0?n=a:t=a;while(Math.abs(i)>w6&&++s<b6);return a}function _u(e,t,n,r){if(e===t&&n===r)return Br;const o=i=>E6(i,0,1,e,n);return i=>i===0||i===1?i:vT(o(i),t,r)}const _T=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,wT=e=>t=>1-e(1-t),bT=_u(.33,1.53,.69,.99),Fv=wT(bT),ET=_T(Fv),ST=e=>(e*=2)<1?.5*Fv(e):.5*(2-Math.pow(2,-10*(e-1))),$v=e=>1-Math.sin(Math.acos(e)),xT=wT($v),CT=_T($v),S6=_u(.42,0,1,1),x6=_u(0,0,.58,1),TT=_u(.42,0,.58,1),C6=e=>Array.isArray(e)&&typeof e[0]!="number",NT=e=>Array.isArray(e)&&typeof e[0]=="number",T6={linear:Br,easeIn:S6,easeInOut:TT,easeOut:x6,circIn:$v,circInOut:CT,circOut:xT,backIn:Fv,backInOut:ET,backOut:bT,anticipate:ST},N6=e=>typeof e=="string",F1=e=>{if(NT(e)){Pv(e.length===4);const[t,n,r,o]=e;return _u(t,n,r,o)}else if(N6(e))return T6[e];return e},sd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],$1={value:null,addProjectionMetrics:null};function k6(e,t){let n=new Set,r=new Set,o=!1,i=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1},l=0;function c(d){a.has(d)&&(u.schedule(d),e()),l++,d(s)}const u={schedule:(d,f=!1,m=!1)=>{const v=m&&o?n:r;return f&&a.add(d),v.has(d)||v.add(d),d},cancel:d=>{r.delete(d),a.delete(d)},process:d=>{if(s=d,o){i=!0;return}o=!0,[n,r]=[r,n],n.forEach(c),t&&$1.value&&$1.value.frameloop[t].push(l),l=0,n.clear(),o=!1,i&&(i=!1,u.process(d))}};return u}const A6=40;function kT(e,t){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=sd.reduce((w,x)=>(w[x]=k6(i,t?x:void 0),w),{}),{setup:s,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:f,render:m,postRender:y}=a,v=()=>{const w=pi.useManualTiming?o.timestamp:performance.now();n=!1,pi.useManualTiming||(o.delta=r?1e3/60:Math.max(Math.min(w-o.timestamp,A6),1)),o.timestamp=w,o.isProcessing=!0,s.process(o),l.process(o),c.process(o),u.process(o),d.process(o),f.process(o),m.process(o),y.process(o),o.isProcessing=!1,n&&t&&(r=!1,e(v))},S=()=>{n=!0,r=!0,o.isProcessing||e(v)};return{schedule:sd.reduce((w,x)=>{const N=a[x];return w[x]=(C,T=!1,k=!1)=>(n||S(),N.schedule(C,T,k)),w},{}),cancel:w=>{for(let x=0;x<sd.length;x++)a[sd[x]].cancel(w)},state:o,steps:a}}const{schedule:Nt,cancel:ca,state:mn,steps:Sh}=kT(typeof requestAnimationFrame<"u"?requestAnimationFrame:Br,!0);let Bd;function R6(){Bd=void 0}const er={now:()=>(Bd===void 0&&er.set(mn.isProcessing||pi.useManualTiming?mn.timestamp:performance.now()),Bd),set:e=>{Bd=e,queueMicrotask(R6)}},AT=e=>t=>typeof t=="string"&&t.startsWith(e),RT=AT("--"),I6=AT("var(--"),Bv=e=>I6(e)?L6.test(e.split("/*")[0].trim()):!1,L6=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yl={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},tu={...yl,transform:e=>fi(0,1,e)},ld={...yl,default:1},Tc=e=>Math.round(e*1e5)/1e5,Vv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function O6(e){return e==null}const P6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Uv=(e,t)=>n=>!!(typeof n=="string"&&P6.test(n)&&n.startsWith(e)||t&&!O6(n)&&Object.prototype.hasOwnProperty.call(n,t)),IT=(e,t,n)=>r=>{if(typeof r!="string")return r;const[o,i,a,s]=r.match(Vv);return{[e]:parseFloat(o),[t]:parseFloat(i),[n]:parseFloat(a),alpha:s!==void 0?parseFloat(s):1}},M6=e=>fi(0,255,e),xh={...yl,transform:e=>Math.round(M6(e))},ja={test:Uv("rgb","red"),parse:IT("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+xh.transform(e)+", "+xh.transform(t)+", "+xh.transform(n)+", "+Tc(tu.transform(r))+")"};function D6(e){let t="",n="",r="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,r+=r,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const Sg={test:Uv("#"),parse:D6,transform:ja.transform},wu=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ri=wu("deg"),Do=wu("%"),Me=wu("px"),F6=wu("vh"),$6=wu("vw"),B1=(()=>({...Do,parse:e=>Do.parse(e)/100,transform:e=>Do.transform(e*100)}))(),Ms={test:Uv("hsl","hue"),parse:IT("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Do.transform(Tc(t))+", "+Do.transform(Tc(n))+", "+Tc(tu.transform(r))+")"},jt={test:e=>ja.test(e)||Sg.test(e)||Ms.test(e),parse:e=>ja.test(e)?ja.parse(e):Ms.test(e)?Ms.parse(e):Sg.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ja.transform(e):Ms.transform(e),getAnimatableNone:e=>{const t=jt.parse(e);return t.alpha=0,jt.transform(t)}},B6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function V6(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Vv))==null?void 0:t.length)||0)+(((n=e.match(B6))==null?void 0:n.length)||0)>0}const LT="number",OT="color",U6="var",z6="var(",V1="${}",j6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function nu(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},o=[];let i=0;const s=t.replace(j6,l=>(jt.test(l)?(r.color.push(i),o.push(OT),n.push(jt.parse(l))):l.startsWith(z6)?(r.var.push(i),o.push(U6),n.push(l)):(r.number.push(i),o.push(LT),n.push(parseFloat(l))),++i,V1)).split(V1);return{values:n,split:s,indexes:r,types:o}}function PT(e){return nu(e).values}function MT(e){const{split:t,types:n}=nu(e),r=t.length;return o=>{let i="";for(let a=0;a<r;a++)if(i+=t[a],o[a]!==void 0){const s=n[a];s===LT?i+=Tc(o[a]):s===OT?i+=jt.transform(o[a]):i+=o[a]}return i}}const W6=e=>typeof e=="number"?0:jt.test(e)?jt.getAnimatableNone(e):e;function G6(e){const t=PT(e);return MT(e)(t.map(W6))}const ua={test:V6,parse:PT,createTransformer:MT,getAnimatableNone:G6};function Ch(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function H6({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let o=0,i=0,a=0;if(!t)o=i=a=n;else{const s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;o=Ch(l,s,e+1/3),i=Ch(l,s,e),a=Ch(l,s,e-1/3)}return{red:Math.round(o*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}function Df(e,t){return n=>n>0?t:e}const Lt=(e,t,n)=>e+(t-e)*n,Th=(e,t,n)=>{const r=e*e,o=n*(t*t-r)+r;return o<0?0:Math.sqrt(o)},X6=[Sg,ja,Ms],Y6=e=>X6.find(t=>t.test(e));function U1(e){const t=Y6(e);if(!t)return!1;let n=t.parse(e);return t===Ms&&(n=H6(n)),n}const z1=(e,t)=>{const n=U1(e),r=U1(t);if(!n||!r)return Df(e,t);const o={...n};return i=>(o.red=Th(n.red,r.red,i),o.green=Th(n.green,r.green,i),o.blue=Th(n.blue,r.blue,i),o.alpha=Lt(n.alpha,r.alpha,i),ja.transform(o))},xg=new Set(["none","hidden"]);function q6(e,t){return xg.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function K6(e,t){return n=>Lt(e,t,n)}function zv(e){return typeof e=="number"?K6:typeof e=="string"?Bv(e)?Df:jt.test(e)?z1:J6:Array.isArray(e)?DT:typeof e=="object"?jt.test(e)?z1:Z6:Df}function DT(e,t){const n=[...e],r=n.length,o=e.map((i,a)=>zv(i)(i,t[a]));return i=>{for(let a=0;a<r;a++)n[a]=o[a](i);return n}}function Z6(e,t){const n={...e,...t},r={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(r[o]=zv(e[o])(e[o],t[o]));return o=>{for(const i in r)n[i]=r[i](o);return n}}function Q6(e,t){const n=[],r={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const i=t.types[o],a=e.indexes[i][r[i]],s=e.values[a]??0;n[o]=s,r[i]++}return n}const J6=(e,t)=>{const n=ua.createTransformer(t),r=nu(e),o=nu(t);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?xg.has(e)&&!o.values.length||xg.has(t)&&!r.values.length?q6(e,t):vu(DT(Q6(r,o),o.values),n):Df(e,t)};function FT(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Lt(e,t,n):zv(e)(e,t)}const eB=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Nt.update(t,n),stop:()=>ca(t),now:()=>mn.isProcessing?mn.timestamp:er.now()}},$T=(e,t,n=10)=>{let r="";const o=Math.max(Math.round(t/n),2);for(let i=0;i<o;i++)r+=Math.round(e(i/(o-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Ff=2e4;function jv(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Ff;)t+=n,r=e.next(t);return t>=Ff?1/0:t}function tB(e,t=100,n){const r=n({...e,keyframes:[0,t]}),o=Math.min(jv(r),Ff);return{type:"keyframes",ease:i=>r.next(o*i).value/t,duration:Mr(o)}}const nB=5;function BT(e,t,n){const r=Math.max(t-nB,0);return yT(n-e(r),t-r)}const Ft={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Nh=.001;function rB({duration:e=Ft.duration,bounce:t=Ft.bounce,velocity:n=Ft.velocity,mass:r=Ft.mass}){let o,i,a=1-t;a=fi(Ft.minDamping,Ft.maxDamping,a),e=fi(Ft.minDuration,Ft.maxDuration,Mr(e)),a<1?(o=c=>{const u=c*a,d=u*e,f=u-n,m=Cg(c,a),y=Math.exp(-d);return Nh-f/m*y},i=c=>{const d=c*a*e,f=d*n+n,m=Math.pow(a,2)*Math.pow(c,2)*e,y=Math.exp(-d),v=Cg(Math.pow(c,2),a);return(-o(c)+Nh>0?-1:1)*((f-m)*y)/v}):(o=c=>{const u=Math.exp(-c*e),d=(c-n)*e+1;return-Nh+u*d},i=c=>{const u=Math.exp(-c*e),d=(n-c)*(e*e);return u*d});const s=5/e,l=iB(o,i,s);if(e=Mo(e),isNaN(l))return{stiffness:Ft.stiffness,damping:Ft.damping,duration:e};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:e}}}const oB=12;function iB(e,t,n){let r=n;for(let o=1;o<oB;o++)r=r-e(r)/t(r);return r}function Cg(e,t){return e*Math.sqrt(1-t*t)}const aB=["duration","bounce"],sB=["stiffness","damping","mass"];function j1(e,t){return t.some(n=>e[n]!==void 0)}function lB(e){let t={velocity:Ft.velocity,stiffness:Ft.stiffness,damping:Ft.damping,mass:Ft.mass,isResolvedFromDuration:!1,...e};if(!j1(e,sB)&&j1(e,aB))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),o=r*r,i=2*fi(.05,1,1-(e.bounce||0))*Math.sqrt(o);t={...t,mass:Ft.mass,stiffness:o,damping:i}}else{const n=rB(e);t={...t,...n,mass:Ft.mass},t.isResolvedFromDuration=!0}return t}function $f(e=Ft.visualDuration,t=Ft.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:o}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],s={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:m}=lB({...n,velocity:-Mr(n.velocity||0)}),y=f||0,v=c/(2*Math.sqrt(l*u)),S=a-i,_=Mr(Math.sqrt(l/u)),b=Math.abs(S)<5;r||(r=b?Ft.restSpeed.granular:Ft.restSpeed.default),o||(o=b?Ft.restDelta.granular:Ft.restDelta.default);let w;if(v<1){const N=Cg(_,v);w=C=>{const T=Math.exp(-v*_*C);return a-T*((y+v*_*S)/N*Math.sin(N*C)+S*Math.cos(N*C))}}else if(v===1)w=N=>a-Math.exp(-_*N)*(S+(y+_*S)*N);else{const N=_*Math.sqrt(v*v-1);w=C=>{const T=Math.exp(-v*_*C),k=Math.min(N*C,300);return a-T*((y+v*_*S)*Math.sinh(k)+N*S*Math.cosh(k))/N}}const x={calculatedDuration:m&&d||null,next:N=>{const C=w(N);if(m)s.done=N>=d;else{let T=N===0?y:0;v<1&&(T=N===0?Mo(y):BT(w,N,C));const k=Math.abs(T)<=r,D=Math.abs(a-C)<=o;s.done=k&&D}return s.value=s.done?a:C,s},toString:()=>{const N=Math.min(jv(x),Ff),C=$T(T=>x.next(N*T).value,N,30);return N+"ms "+C},toTransition:()=>{}};return x}$f.applyToOptions=e=>{const t=tB(e,100,$f);return e.ease=t.ease,e.duration=Mo(t.duration),e.type="keyframes",e};function Tg({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:i=500,modifyTarget:a,min:s,max:l,restDelta:c=.5,restSpeed:u}){const d=e[0],f={done:!1,value:d},m=k=>s!==void 0&&k<s||l!==void 0&&k>l,y=k=>s===void 0?l:l===void 0||Math.abs(s-k)<Math.abs(l-k)?s:l;let v=n*t;const S=d+v,_=a===void 0?S:a(S);_!==S&&(v=_-d);const b=k=>-v*Math.exp(-k/r),w=k=>_+b(k),x=k=>{const D=b(k),R=w(k);f.done=Math.abs(D)<=c,f.value=f.done?_:R};let N,C;const T=k=>{m(f.value)&&(N=k,C=$f({keyframes:[f.value,y(f.value)],velocity:BT(w,k,f.value),damping:o,stiffness:i,restDelta:c,restSpeed:u}))};return T(0),{calculatedDuration:null,next:k=>{let D=!1;return!C&&N===void 0&&(D=!0,x(k),T(k)),N!==void 0&&k>=N?C.next(k-N):(!D&&x(k),f)}}}function cB(e,t,n){const r=[],o=n||pi.mix||FT,i=e.length-1;for(let a=0;a<i;a++){let s=o(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]||Br:t;s=vu(l,s)}r.push(s)}return r}function uB(e,t,{clamp:n=!0,ease:r,mixer:o}={}){const i=e.length;if(Pv(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=cB(t,r,o),l=s.length,c=u=>{if(a&&u<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const f=eu(e[d],e[d+1],u);return s[d](f)};return n?u=>c(fi(e[0],e[i-1],u)):c}function dB(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const o=eu(0,t,r);e.push(Lt(n,1,o))}}function fB(e){const t=[0];return dB(t,e.length-1),t}function pB(e,t){return e.map(n=>n*t)}function hB(e,t){return e.map(()=>t||TT).splice(0,e.length-1)}function Nc({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const o=C6(r)?r.map(F1):F1(r),i={done:!1,value:t[0]},a=pB(n&&n.length===t.length?n:fB(t),e),s=uB(a,t,{ease:Array.isArray(o)?o:hB(t,o)});return{calculatedDuration:e,next:l=>(i.value=s(l),i.done=l>=e,i)}}const mB=e=>e!==null;function Wv(e,{repeat:t,repeatType:n="loop"},r,o=1){const i=e.filter(mB),s=o<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const gB={decay:Tg,inertia:Tg,tween:Nc,keyframes:Nc,spring:$f};function VT(e){typeof e.type=="string"&&(e.type=gB[e.type])}class Gv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const yB=e=>e/100;class Hv extends Gv{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,o;const{motionValue:n}=this.options;n&&n.updatedAt!==er.now()&&this.tick(er.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(r=this.options).onStop)==null||o.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;VT(t);const{type:n=Nc,repeat:r=0,repeatDelay:o=0,repeatType:i,velocity:a=0}=t;let{keyframes:s}=t;const l=n||Nc;l!==Nc&&typeof s[0]!="number"&&(this.mixKeyframes=vu(yB,FT(s[0],s[1])),s=[0,100]);const c=l({...t,keyframes:s});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...s].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=jv(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+o,this.totalDuration=this.resolvedDuration*(r+1)-o,this.generator=c}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:o,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:s,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:d,repeatType:f,repeatDelay:m,type:y,onUpdate:v,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-o/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const _=this.currentTime-c*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?_<0:_>o;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let w=this.currentTime,x=r;if(d){const k=Math.min(this.currentTime,o)/s;let D=Math.floor(k),R=k%1;!R&&k>=1&&(R=1),R===1&&D--,D=Math.min(D,d+1),!!(D%2)&&(f==="reverse"?(R=1-R,m&&(R-=m/s)):f==="mirror"&&(x=a)),w=fi(0,1,R)*s}const N=b?{done:!1,value:u[0]}:x.next(w);i&&(N.value=i(N.value));let{done:C}=N;!b&&l!==null&&(C=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return T&&y!==Tg&&(N.value=Wv(u,this.options,S,this.speed)),v&&v(N.value),T&&this.finish(),N}then(t,n){return this.finished.then(t,n)}get duration(){return Mr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Mr(t)}get time(){return Mr(this.currentTime)}set time(t){var n;t=Mo(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(er.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Mr(this.currentTime))}play(){var o,i;if(this.isStopped)return;const{driver:t=eB,startTime:n}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(i=(o=this.options).onPlay)==null||i.call(o);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(er.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function vB(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Wa=e=>e*180/Math.PI,Ng=e=>{const t=Wa(Math.atan2(e[1],e[0]));return kg(t)},_B={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Ng,rotateZ:Ng,skewX:e=>Wa(Math.atan(e[1])),skewY:e=>Wa(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},kg=e=>(e=e%360,e<0&&(e+=360),e),W1=Ng,G1=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),H1=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),wB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:G1,scaleY:H1,scale:e=>(G1(e)+H1(e))/2,rotateX:e=>kg(Wa(Math.atan2(e[6],e[5]))),rotateY:e=>kg(Wa(Math.atan2(-e[2],e[0]))),rotateZ:W1,rotate:W1,skewX:e=>Wa(Math.atan(e[4])),skewY:e=>Wa(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Ag(e){return e.includes("scale")?1:0}function Rg(e,t){if(!e||e==="none")return Ag(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,o;if(n)r=wB,o=n;else{const s=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=_B,o=s}if(!o)return Ag(t);const i=r[t],a=o[1].split(",").map(EB);return typeof i=="function"?i(a):a[i]}const bB=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Rg(n,t)};function EB(e){return parseFloat(e.trim())}const vl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_l=(()=>new Set(vl))(),X1=e=>e===yl||e===Me,SB=new Set(["x","y","z"]),xB=vl.filter(e=>!SB.has(e));function CB(e){const t=[];return xB.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Ya={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Rg(t,"x"),y:(e,{transform:t})=>Rg(t,"y")};Ya.translateX=Ya.x;Ya.translateY=Ya.y;const qa=new Set;let Ig=!1,Lg=!1,Og=!1;function UT(){if(Lg){const e=Array.from(qa).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const o=CB(r);o.length&&(n.set(r,o),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const o=n.get(r);o&&o.forEach(([i,a])=>{var s;(s=r.getValue(i))==null||s.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Lg=!1,Ig=!1,qa.forEach(e=>e.complete(Og)),qa.clear()}function zT(){qa.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Lg=!0)})}function TB(){Og=!0,zT(),UT(),Og=!1}class Xv{constructor(t,n,r,o,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=o,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(qa.add(this),Ig||(Ig=!0,Nt.read(zT),Nt.resolveKeyframes(UT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:o}=this;if(t[0]===null){const i=o==null?void 0:o.get(),a=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const s=r.readValue(n,a);s!=null&&(t[0]=s)}t[0]===void 0&&(t[0]=a),o&&i===void 0&&o.set(t[0])}vB(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),qa.delete(this)}cancel(){this.state==="scheduled"&&(qa.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const NB=e=>e.startsWith("--");function kB(e,t,n){NB(t)?e.style.setProperty(t,n):e.style[t]=n}const AB=Mv(()=>window.ScrollTimeline!==void 0),RB={};function IB(e,t){const n=Mv(e);return()=>RB[t]??n()}const jT=IB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),lc=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Y1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:lc([0,.65,.55,1]),circOut:lc([.55,0,1,.45]),backIn:lc([.31,.01,.66,-.59]),backOut:lc([.33,1.53,.69,.99])};function WT(e,t){if(e)return typeof e=="function"?jT()?$T(e,t):"ease-out":NT(e)?lc(e):Array.isArray(e)?e.map(n=>WT(n,t)||Y1.easeOut):Y1[e]}function LB(e,t,n,{delay:r=0,duration:o=300,repeat:i=0,repeatType:a="loop",ease:s="easeOut",times:l}={},c=void 0){const u={[t]:n};l&&(u.offset=l);const d=WT(s,o);Array.isArray(d)&&(u.easing=d);const f={delay:r,duration:o,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),e.animate(u,f)}function GT(e){return typeof e=="function"&&"applyToOptions"in e}function OB({type:e,...t}){return GT(e)&&jT()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class PB extends Gv{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:o,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:s,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=t,Pv(typeof t.type!="string");const c=OB(t);this.animation=LB(n,r,o,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=Wv(o,this.options,s,this.speed);this.updateMotionValue?this.updateMotionValue(u):kB(n,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Mr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Mr(t)}get time(){return Mr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Mo(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&AB()?(this.animation.timeline=t,Br):n(this)}}const HT={anticipate:ST,backInOut:ET,circInOut:CT};function MB(e){return e in HT}function DB(e){typeof e.ease=="string"&&MB(e.ease)&&(e.ease=HT[e.ease])}const q1=10;class FB extends PB{constructor(t){DB(t),VT(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:o,element:i,...a}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const s=new Hv({...a,autoplay:!1}),l=Mo(this.finishedTime??this.time);n.setWithVelocity(s.sample(l-q1).value,s.sample(l).value,q1),s.stop()}}const K1=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ua.test(e)||e==="0")&&!e.startsWith("url("));function $B(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function BB(e,t,n,r){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],a=K1(o,t),s=K1(i,t);return!a||!s?!1:$B(e)||(n==="spring"||GT(n))&&r}function Pg(e){e.duration=0,e.type="keyframes"}const VB=new Set(["opacity","clipPath","filter","transform"]),UB=Mv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function zB(e){var u;const{motionValue:t,name:n,repeatDelay:r,repeatType:o,damping:i,type:a}=e;if(!(((u=t==null?void 0:t.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return UB()&&n&&VB.has(n)&&(n!=="transform"||!c)&&!l&&!r&&o!=="mirror"&&i!==0&&a!=="inertia"}const jB=40;class WB extends Gv{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:o=0,repeatDelay:i=0,repeatType:a="loop",keyframes:s,name:l,motionValue:c,element:u,...d}){var y;super(),this.stop=()=>{var v,S;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(S=this.keyframeResolver)==null||S.cancel()},this.createdAt=er.now();const f={autoplay:t,delay:n,type:r,repeat:o,repeatDelay:i,repeatType:a,name:l,motionValue:c,element:u,...d},m=(u==null?void 0:u.KeyframeResolver)||Xv;this.keyframeResolver=new m(s,(v,S,_)=>this.onKeyframesResolved(v,S,f,!_),l,c,u),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(t,n,r,o){this.keyframeResolver=void 0;const{name:i,type:a,velocity:s,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=er.now(),BB(t,i,a,s)||((pi.instantAnimations||!l)&&(u==null||u(Wv(t,r,n))),t[0]=t[t.length-1],Pg(r),r.repeat=0);const f={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>jB?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},m=!c&&zB(f)?new FB({...f,element:f.motionValue.owner.current}):new Hv(f);m.finished.then(()=>this.notifyFinished()).catch(Br),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),TB()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const GB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function HB(e){const t=GB.exec(e);if(!t)return[,];const[,n,r,o]=t;return[`--${n??r}`,o]}function XT(e,t,n=1){const[r,o]=HB(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const a=i.trim();return hT(a)?parseFloat(a):a}return Bv(o)?XT(o,t,n+1):o}function Yv(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const YT=new Set(["width","height","top","left","right","bottom",...vl]),XB={test:e=>e==="auto",parse:e=>e},qT=e=>t=>t.test(e),KT=[yl,Me,Do,Ri,$6,F6,XB],Z1=e=>KT.find(qT(e));function YB(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||gT(e):!0}const qB=new Set(["brightness","contrast","saturate","opacity"]);function KB(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Vv)||[];if(!r)return e;const o=n.replace(r,"");let i=qB.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+o+")"}const ZB=/\b([a-z-]*)\(.*?\)/gu,Mg={...ua,getAnimatableNone:e=>{const t=e.match(ZB);return t?t.map(KB).join(" "):e}},Q1={...yl,transform:Math.round},QB={rotate:Ri,rotateX:Ri,rotateY:Ri,rotateZ:Ri,scale:ld,scaleX:ld,scaleY:ld,scaleZ:ld,skew:Ri,skewX:Ri,skewY:Ri,distance:Me,translateX:Me,translateY:Me,translateZ:Me,x:Me,y:Me,z:Me,perspective:Me,transformPerspective:Me,opacity:tu,originX:B1,originY:B1,originZ:Me},qv={borderWidth:Me,borderTopWidth:Me,borderRightWidth:Me,borderBottomWidth:Me,borderLeftWidth:Me,borderRadius:Me,radius:Me,borderTopLeftRadius:Me,borderTopRightRadius:Me,borderBottomRightRadius:Me,borderBottomLeftRadius:Me,width:Me,maxWidth:Me,height:Me,maxHeight:Me,top:Me,right:Me,bottom:Me,left:Me,padding:Me,paddingTop:Me,paddingRight:Me,paddingBottom:Me,paddingLeft:Me,margin:Me,marginTop:Me,marginRight:Me,marginBottom:Me,marginLeft:Me,backgroundPositionX:Me,backgroundPositionY:Me,...QB,zIndex:Q1,fillOpacity:tu,strokeOpacity:tu,numOctaves:Q1},JB={...qv,color:jt,backgroundColor:jt,outlineColor:jt,fill:jt,stroke:jt,borderColor:jt,borderTopColor:jt,borderRightColor:jt,borderBottomColor:jt,borderLeftColor:jt,filter:Mg,WebkitFilter:Mg},ZT=e=>JB[e];function QT(e,t){let n=ZT(e);return n!==Mg&&(n=ua),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const e8=new Set(["auto","none","0"]);function t8(e,t,n){let r=0,o;for(;r<e.length&&!o;){const i=e[r];typeof i=="string"&&!e8.has(i)&&nu(i).values.length&&(o=e[r]),r++}if(o&&n)for(const i of t)e[i]=QT(n,o)}class n8 extends Xv{constructor(t,n,r,o,i){super(t,n,r,o,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),Bv(c))){const u=XT(c,n.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!YT.has(r)||t.length!==2)return;const[o,i]=t,a=Z1(o),s=Z1(i);if(a!==s)if(X1(a)&&X1(s))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else Ya[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let o=0;o<t.length;o++)(t[o]===null||YB(t[o]))&&r.push(o);r.length&&t8(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ya[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&t.getValue(r,o).jump(o,!1)}measureEndState(){var s;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const o=t.getValue(n);o&&o.jump(this.measuredOrigin,!1);const i=r.length-1,a=r[i];r[i]=Ya[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(s=this.removedTransforms)!=null&&s.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function r8(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;t&&(r=t.current);const o=(n==null?void 0:n[e])??r.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}const JT=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function eN(e){return mT(e)&&"offsetHeight"in e}const J1=30,o8=e=>!isNaN(parseFloat(e));class i8{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const o=er.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=er.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=o8(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Dv);const r=this.events[t].add(n);return t==="change"?()=>{r(),Nt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=er.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>J1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,J1);return yT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ol(e,t){return new i8(e,t)}const{schedule:Kv,cancel:Lie}=kT(queueMicrotask,!1),Jr={x:!1,y:!1};function tN(){return Jr.x||Jr.y}function a8(e){return e==="x"||e==="y"?Jr[e]?null:(Jr[e]=!0,()=>{Jr[e]=!1}):Jr.x||Jr.y?null:(Jr.x=Jr.y=!0,()=>{Jr.x=Jr.y=!1})}function nN(e,t){const n=r8(e),r=new AbortController,o={passive:!0,...t,signal:r.signal};return[n,o,()=>r.abort()]}function ew(e){return!(e.pointerType==="touch"||tN())}function s8(e,t,n={}){const[r,o,i]=nN(e,n),a=s=>{if(!ew(s))return;const{target:l}=s,c=t(l,s);if(typeof c!="function"||!l)return;const u=d=>{ew(d)&&(c(d),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,o)};return r.forEach(s=>{s.addEventListener("pointerenter",a,o)}),i}const rN=(e,t)=>t?e===t?!0:rN(e,t.parentElement):!1,Zv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,l8=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function c8(e){return l8.has(e.tagName)||e.tabIndex!==-1}const Vd=new WeakSet;function tw(e){return t=>{t.key==="Enter"&&e(t)}}function kh(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const u8=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=tw(()=>{if(Vd.has(n))return;kh(n,"down");const o=tw(()=>{kh(n,"up")}),i=()=>kh(n,"cancel");n.addEventListener("keyup",o,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function nw(e){return Zv(e)&&!tN()}function d8(e,t,n={}){const[r,o,i]=nN(e,n),a=s=>{const l=s.currentTarget;if(!nw(s))return;Vd.add(l);const c=t(l,s),u=(m,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),Vd.has(l)&&Vd.delete(l),nw(m)&&typeof c=="function"&&c(m,{success:y})},d=m=>{u(m,l===window||l===document||n.useGlobalTarget||rN(l,m.target))},f=m=>{u(m,!1)};window.addEventListener("pointerup",d,o),window.addEventListener("pointercancel",f,o)};return r.forEach(s=>{(n.useGlobalTarget?window:s).addEventListener("pointerdown",a,o),eN(s)&&(s.addEventListener("focus",c=>u8(c,o)),!c8(s)&&!s.hasAttribute("tabindex")&&(s.tabIndex=0))}),i}function oN(e){return mT(e)&&"ownerSVGElement"in e}function f8(e){return oN(e)&&e.tagName==="svg"}const Tn=e=>!!(e&&e.getVelocity),p8=[...KT,jt,ua],h8=e=>p8.find(qT(e)),Qv=h.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function rw(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function m8(...e){return t=>{let n=!1;const r=e.map(o=>{const i=rw(o,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let o=0;o<r.length;o++){const i=r[o];typeof i=="function"?i():rw(e[o],null)}}}}function g8(...e){return h.useCallback(m8(...e),e)}class y8 extends h.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,o=eN(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=o-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function v8({children:e,isPresent:t,anchorX:n,root:r}){const o=h.useId(),i=h.useRef(null),a=h.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:s}=h.useContext(Qv),l=g8(i,e==null?void 0:e.ref);return h.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:f,right:m}=a.current;if(t||!i.current||!c||!u)return;const y=n==="left"?`left: ${f}`:`right: ${m}`;i.current.dataset.motionPopId=o;const v=document.createElement("style");s&&(v.nonce=s);const S=r??document.head;return S.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${y}px !important;
            top: ${d}px !important;
          }
        `),()=>{S.contains(v)&&S.removeChild(v)}},[t]),p(y8,{isPresent:t,childRef:i,sizeRef:a,children:h.cloneElement(e,{ref:l})})}const _8=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:i,mode:a,anchorX:s,root:l})=>{const c=Rv(w8),u=h.useId();let d=!0,f=h.useMemo(()=>(d=!1,{id:u,initial:t,isPresent:n,custom:o,onExitComplete:m=>{c.set(m,!0);for(const y of c.values())if(!y)return;r&&r()},register:m=>(c.set(m,!1),()=>c.delete(m))}),[n,c,r]);return i&&d&&(f={...f}),h.useMemo(()=>{c.forEach((m,y)=>c.set(y,!1))},[n]),h.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),a==="popLayout"&&(e=p(v8,{isPresent:n,anchorX:s,root:l,children:e})),p(Tp.Provider,{value:f,children:e})};function w8(){return new Map}function iN(e=!0){const t=h.useContext(Tp);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:o}=t,i=h.useId();h.useEffect(()=>{if(e)return o(i)},[e]);const a=h.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,a]:[!0]}const cd=e=>e.key||"";function ow(e){const t=[];return h.Children.forEach(e,n=>{h.isValidElement(n)&&t.push(n)}),t}const bu=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:o=!0,mode:i="sync",propagate:a=!1,anchorX:s="left",root:l})=>{const[c,u]=iN(a),d=h.useMemo(()=>ow(e),[e]),f=a&&!c?[]:d.map(cd),m=h.useRef(!0),y=h.useRef(d),v=Rv(()=>new Map),[S,_]=h.useState(d),[b,w]=h.useState(d);pT(()=>{m.current=!1,y.current=d;for(let C=0;C<b.length;C++){const T=cd(b[C]);f.includes(T)?v.delete(T):v.get(T)!==!0&&v.set(T,!1)}},[b,f.length,f.join("-")]);const x=[];if(d!==S){let C=[...d];for(let T=0;T<b.length;T++){const k=b[T],D=cd(k);f.includes(D)||(C.splice(T,0,k),x.push(k))}return i==="wait"&&x.length&&(C=x),w(ow(C)),_(d),null}const{forceRender:N}=h.useContext(Av);return p(gt,{children:b.map(C=>{const T=cd(C),k=a&&!c?!1:d===b||f.includes(T),D=()=>{if(v.has(T))v.set(T,!0);else return;let R=!0;v.forEach(I=>{I||(R=!1)}),R&&(N==null||N(),w(y.current),a&&(u==null||u()),r&&r())};return p(_8,{isPresent:k,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:o,mode:i,root:l,onExitComplete:k?void 0:D,anchorX:s,children:C},T)})})},aN=h.createContext({strict:!1}),iw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},il={};for(const e in iw)il[e]={isEnabled:t=>iw[e].some(n=>!!t[n])};function b8(e){for(const t in e)il[t]={...il[t],...e[t]}}const E8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Bf(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||E8.has(e)}let sN=e=>!Bf(e);function S8(e){typeof e=="function"&&(sN=t=>t.startsWith("on")?!Bf(t):e(t))}try{S8(require("@emotion/is-prop-valid").default)}catch{}function x8(e,t,n){const r={};for(const o in e)o==="values"&&typeof e.values=="object"||(sN(o)||n===!0&&Bf(o)||!t&&!Bf(o)||e.draggable&&o.startsWith("onDrag"))&&(r[o]=e[o]);return r}const Np=h.createContext({});function kp(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ru(e){return typeof e=="string"||Array.isArray(e)}const Jv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],e0=["initial",...Jv];function Ap(e){return kp(e.animate)||e0.some(t=>ru(e[t]))}function lN(e){return!!(Ap(e)||e.variants)}function C8(e,t){if(Ap(e)){const{initial:n,animate:r}=e;return{initial:n===!1||ru(n)?n:void 0,animate:ru(r)?r:void 0}}return e.inherit!==!1?t:{}}function T8(e){const{initial:t,animate:n}=C8(e,h.useContext(Np));return h.useMemo(()=>({initial:t,animate:n}),[aw(t),aw(n)])}function aw(e){return Array.isArray(e)?e.join(" "):e}function sw(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Fl={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Me.test(e))e=parseFloat(e);else return e;const n=sw(e,t.target.x),r=sw(e,t.target.y);return`${n}% ${r}%`}},N8={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,o=ua.parse(e);if(o.length>5)return r;const i=ua.createTransformer(e),a=typeof o[0]!="number"?1:0,s=n.x.scale*t.x,l=n.y.scale*t.y;o[0+a]/=s,o[1+a]/=l;const c=Lt(s,l,.5);return typeof o[2+a]=="number"&&(o[2+a]/=c),typeof o[3+a]=="number"&&(o[3+a]/=c),i(o)}},Dg={borderRadius:{...Fl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fl,borderTopRightRadius:Fl,borderBottomLeftRadius:Fl,borderBottomRightRadius:Fl,boxShadow:N8};function cN(e,{layout:t,layoutId:n}){return _l.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Dg[e]||e==="opacity")}const k8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},A8=vl.length;function R8(e,t,n){let r="",o=!0;for(let i=0;i<A8;i++){const a=vl[i],s=e[a];if(s===void 0)continue;let l=!0;if(typeof s=="number"?l=s===(a.startsWith("scale")?1:0):l=parseFloat(s)===0,!l||n){const c=JT(s,qv[a]);if(!l){o=!1;const u=k8[a]||a;r+=`${u}(${c}) `}n&&(t[a]=c)}}return r=r.trim(),n?r=n(t,o?"":r):o&&(r="none"),r}function t0(e,t,n){const{style:r,vars:o,transformOrigin:i}=e;let a=!1,s=!1;for(const l in t){const c=t[l];if(_l.has(l)){a=!0;continue}else if(RT(l)){o[l]=c;continue}else{const u=JT(c,qv[l]);l.startsWith("origin")?(s=!0,i[l]=u):r[l]=u}}if(t.transform||(a||n?r.transform=R8(t,e.transform,n):r.transform&&(r.transform="none")),s){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;r.transformOrigin=`${l} ${c} ${u}`}}const n0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function uN(e,t,n){for(const r in t)!Tn(t[r])&&!cN(r,n)&&(e[r]=t[r])}function I8({transformTemplate:e},t){return h.useMemo(()=>{const n=n0();return t0(n,t,e),Object.assign({},n.vars,n.style)},[t])}function L8(e,t){const n=e.style||{},r={};return uN(r,n,e),Object.assign(r,I8(e,t)),r}function O8(e,t){const n={},r=L8(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const P8={offset:"stroke-dashoffset",array:"stroke-dasharray"},M8={offset:"strokeDashoffset",array:"strokeDasharray"};function D8(e,t,n=1,r=0,o=!0){e.pathLength=1;const i=o?P8:M8;e[i.offset]=Me.transform(-r);const a=Me.transform(t),s=Me.transform(n);e[i.array]=`${a} ${s}`}function dN(e,{attrX:t,attrY:n,attrScale:r,pathLength:o,pathSpacing:i=1,pathOffset:a=0,...s},l,c,u){if(t0(e,s,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:d,style:f}=e;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),f.transform&&(f.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete d.transformBox),t!==void 0&&(d.x=t),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),o!==void 0&&D8(d,o,i,a,!1)}const fN=()=>({...n0(),attrs:{}}),pN=e=>typeof e=="string"&&e.toLowerCase()==="svg";function F8(e,t,n,r){const o=h.useMemo(()=>{const i=fN();return dN(i,t,pN(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};uN(i,e.style,e),o.style={...i,...o.style}}return o}const $8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function r0(e){return typeof e!="string"||e.includes("-")?!1:!!($8.indexOf(e)>-1||/[A-Z]/u.test(e))}function B8(e,t,n,{latestValues:r},o,i=!1){const s=(r0(e)?F8:O8)(t,r,o,e),l=x8(t,typeof e=="string",i),c=e!==h.Fragment?{...l,...s,ref:n}:{},{children:u}=t,d=h.useMemo(()=>Tn(u)?u.get():u,[u]);return h.createElement(e,{...c,children:d})}function lw(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function o0(e,t,n,r){if(typeof t=="function"){const[o,i]=lw(r);t=t(n!==void 0?n:e.custom,o,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,i]=lw(r);t=t(n!==void 0?n:e.custom,o,i)}return t}function Ud(e){return Tn(e)?e.get():e}function V8({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,o){return{latestValues:U8(n,r,o,e),renderState:t()}}function U8(e,t,n,r){const o={},i=r(e,{});for(const f in i)o[f]=Ud(i[f]);let{initial:a,animate:s}=e;const l=Ap(e),c=lN(e);t&&c&&!l&&e.inherit!==!1&&(a===void 0&&(a=t.initial),s===void 0&&(s=t.animate));let u=n?n.initial===!1:!1;u=u||a===!1;const d=u?s:a;if(d&&typeof d!="boolean"&&!kp(d)){const f=Array.isArray(d)?d:[d];for(let m=0;m<f.length;m++){const y=o0(e,f[m]);if(y){const{transitionEnd:v,transition:S,..._}=y;for(const b in _){let w=_[b];if(Array.isArray(w)){const x=u?w.length-1:0;w=w[x]}w!==null&&(o[b]=w)}for(const b in v)o[b]=v[b]}}}return o}const hN=e=>(t,n)=>{const r=h.useContext(Np),o=h.useContext(Tp),i=()=>V8(e,t,r,o);return n?i():Rv(i)};function i0(e,t,n){var i;const{style:r}=e,o={};for(const a in r)(Tn(r[a])||t.style&&Tn(t.style[a])||cN(a,e)||((i=n==null?void 0:n.getValue(a))==null?void 0:i.liveStyle)!==void 0)&&(o[a]=r[a]);return o}const z8=hN({scrapeMotionValuesFromProps:i0,createRenderState:n0});function mN(e,t,n){const r=i0(e,t,n);for(const o in e)if(Tn(e[o])||Tn(t[o])){const i=vl.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[i]=e[o]}return r}const j8=hN({scrapeMotionValuesFromProps:mN,createRenderState:fN}),W8=Symbol.for("motionComponentSymbol");function Ds(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function G8(e,t,n){return h.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Ds(n)&&(n.current=r))},[t])}const a0=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),H8="framerAppearId",gN="data-"+a0(H8),yN=h.createContext({});function X8(e,t,n,r,o){var v,S;const{visualElement:i}=h.useContext(Np),a=h.useContext(aN),s=h.useContext(Tp),l=h.useContext(Qv).reducedMotion,c=h.useRef(null);r=r||a.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:i,props:n,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,d=h.useContext(yN);u&&!u.projection&&o&&(u.type==="html"||u.type==="svg")&&Y8(c.current,n,o,d);const f=h.useRef(!1);h.useInsertionEffect(()=>{u&&f.current&&u.update(n,s)});const m=n[gN],y=h.useRef(!!m&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,m))&&((S=window.MotionHasOptimisedAnimation)==null?void 0:S.call(window,m)));return pT(()=>{u&&(f.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),y.current&&u.animationState&&u.animationState.animateChanges())}),h.useEffect(()=>{u&&(!y.current&&u.animationState&&u.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)==null||_.call(window,m)}),y.current=!1),u.enteringChildren=void 0)}),u}function Y8(e,t,n,r){const{layoutId:o,layout:i,drag:a,dragConstraints:s,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:vN(e.parent)),e.projection.setOptions({layoutId:o,layout:i,alwaysMeasureLayout:!!a||s&&Ds(s),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function vN(e){if(e)return e.options.allowProjection!==!1?e.projection:vN(e.parent)}function Ah(e,{forwardMotionProps:t=!1}={},n,r){n&&b8(n);const o=r0(e)?j8:z8;function i(s,l){let c;const u={...h.useContext(Qv),...s,layoutId:q8(s)},{isStatic:d}=u,f=T8(s),m=o(s,d);if(!d&&Iv){K8();const y=Z8(u);c=y.MeasureLayout,f.visualElement=X8(e,m,u,r,y.ProjectionNode)}return L(Np.Provider,{value:f,children:[c&&f.visualElement?p(c,{visualElement:f.visualElement,...u}):null,B8(e,s,G8(m,f.visualElement,l),m,d,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const a=h.forwardRef(i);return a[W8]=e,a}function q8({layoutId:e}){const t=h.useContext(Av).id;return t&&e!==void 0?t+"-"+e:e}function K8(e,t){h.useContext(aN).strict}function Z8(e){const{drag:t,layout:n}=il;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Q8(e,t){if(typeof Proxy>"u")return Ah;const n=new Map,r=(i,a)=>Ah(i,a,e,t),o=(i,a)=>r(i,a);return new Proxy(o,{get:(i,a)=>a==="create"?r:(n.has(a)||n.set(a,Ah(a,void 0,e,t)),n.get(a))})}function _N({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function J8({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function eV(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Rh(e){return e===void 0||e===1}function Fg({scale:e,scaleX:t,scaleY:n}){return!Rh(e)||!Rh(t)||!Rh(n)}function Ma(e){return Fg(e)||wN(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function wN(e){return cw(e.x)||cw(e.y)}function cw(e){return e&&e!=="0%"}function Vf(e,t,n){const r=e-n,o=t*r;return n+o}function uw(e,t,n,r,o){return o!==void 0&&(e=Vf(e,o,r)),Vf(e,n,r)+t}function $g(e,t=0,n=1,r,o){e.min=uw(e.min,t,n,r,o),e.max=uw(e.max,t,n,r,o)}function bN(e,{x:t,y:n}){$g(e.x,t.translate,t.scale,t.originPoint),$g(e.y,n.translate,n.scale,n.originPoint)}const dw=.999999999999,fw=1.0000000000001;function tV(e,t,n,r=!1){const o=n.length;if(!o)return;t.x=t.y=1;let i,a;for(let s=0;s<o;s++){i=n[s],a=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&$s(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,bN(e,a)),r&&Ma(i.latestValues)&&$s(e,i.latestValues))}t.x<fw&&t.x>dw&&(t.x=1),t.y<fw&&t.y>dw&&(t.y=1)}function Fs(e,t){e.min=e.min+t,e.max=e.max+t}function pw(e,t,n,r,o=.5){const i=Lt(e.min,e.max,o);$g(e,t,n,i,r)}function $s(e,t){pw(e.x,t.x,t.scaleX,t.scale,t.originX),pw(e.y,t.y,t.scaleY,t.scale,t.originY)}function EN(e,t){return _N(eV(e.getBoundingClientRect(),t))}function nV(e,t,n){const r=EN(e,n),{scroll:o}=t;return o&&(Fs(r.x,o.offset.x),Fs(r.y,o.offset.y)),r}const hw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Bs=()=>({x:hw(),y:hw()}),mw=()=>({min:0,max:0}),Kt=()=>({x:mw(),y:mw()}),Bg={current:null},SN={current:!1};function rV(){if(SN.current=!0,!!Iv)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Bg.current=e.matches;e.addEventListener("change",t),t()}else Bg.current=!1}const oV=new WeakMap;function iV(e,t,n){for(const r in t){const o=t[r],i=n[r];if(Tn(o))e.addValue(r,o);else if(Tn(i))e.addValue(r,ol(o,{owner:e}));else if(i!==o)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(o):a.hasAnimated||a.set(o)}else{const a=e.getStaticValue(r);e.addValue(r,ol(a!==void 0?a:o,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const gw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class aV{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:i,visualState:a},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=er.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Nt.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=s,this.blockInitialAnimation=!!i,this.isControllingVariants=Ap(n),this.isVariantNode=lN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const m=d[f];l[f]!==void 0&&Tn(m)&&m.set(l[f])}}mount(t){var n;this.current=t,oV.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,o)=>this.bindToMotionValue(o,r)),SN.current||rV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Bg.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),ca(this.notifyUpdate),ca(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=_l.has(t);r&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Nt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{o(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in il){const n=il[t];if(!n)continue;const{isEnabled:r,Feature:o}=n;if(!this.features[t]&&o&&r(this.props)&&(this.features[t]=new o(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Kt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<gw.length;r++){const o=gw[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const i="on"+o,a=t[i];a&&(this.propEventSubscriptions[o]=this.on(o,a))}this.prevMotionValues=iV(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=ol(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(hT(r)||gT(r))?r=parseFloat(r):!h8(r)&&ua.test(n)&&(r=QT(t,n)),this.setBaseTarget(t,Tn(r)?r.get():r)),Tn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=o0(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!Tn(o)?o:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Dv),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){Kv.render(this.render)}}class xN extends aV{constructor(){super(...arguments),this.KeyframeResolver=n8}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Tn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function CN(e,{style:t,vars:n},r,o){const i=e.style;let a;for(a in t)i[a]=t[a];o==null||o.applyProjectionStyles(i,r);for(a in n)i.setProperty(a,n[a])}function sV(e){return window.getComputedStyle(e)}class lV extends xN{constructor(){super(...arguments),this.type="html",this.renderInstance=CN}readValueFromInstance(t,n){var r;if(_l.has(n))return(r=this.projection)!=null&&r.isProjecting?Ag(n):bB(t,n);{const o=sV(t),i=(RT(n)?o.getPropertyValue(n):o[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return EN(t,n)}build(t,n,r){t0(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return i0(t,n,r)}}const TN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function cV(e,t,n,r){CN(e,t,void 0,r);for(const o in t.attrs)e.setAttribute(TN.has(o)?o:a0(o),t.attrs[o])}class uV extends xN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Kt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(_l.has(n)){const r=ZT(n);return r&&r.default||0}return n=TN.has(n)?n:a0(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return mN(t,n,r)}build(t,n,r){dN(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,o){cV(t,n,r,o)}mount(t){this.isSVGTag=pN(t.tagName),super.mount(t)}}const dV=(e,t)=>r0(e)?new uV(t):new lV(t,{allowProjection:e!==h.Fragment});function Xs(e,t,n){const r=e.getProps();return o0(r,t,n!==void 0?n:r.custom,e)}const Vg=e=>Array.isArray(e);function fV(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ol(n))}function pV(e){return Vg(e)?e[e.length-1]||0:e}function hV(e,t){const n=Xs(e,t);let{transitionEnd:r={},transition:o={},...i}=n||{};i={...i,...r};for(const a in i){const s=pV(i[a]);fV(e,a,s)}}function mV(e){return!!(Tn(e)&&e.add)}function Ug(e,t){const n=e.getValue("willChange");if(mV(n))return n.add(t);if(!n&&pi.WillChange){const r=new pi.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function NN(e){return e.props[gN]}const gV=e=>e!==null;function yV(e,{repeat:t,repeatType:n="loop"},r){const o=e.filter(gV),i=t&&n!=="loop"&&t%2===1?0:o.length-1;return!i||r===void 0?o[i]:r}const vV={type:"spring",stiffness:500,damping:25,restSpeed:10},_V=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),wV={type:"keyframes",duration:.8},bV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},EV=(e,{keyframes:t})=>t.length>2?wV:_l.has(e)?e.startsWith("scale")?_V(t[1]):vV:bV;function SV({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:i,repeatType:a,repeatDelay:s,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const s0=(e,t,n,r={},o,i)=>a=>{const s=Yv(r,e)||{},l=s.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Mo(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...s,delay:-c,onUpdate:f=>{t.set(f),s.onUpdate&&s.onUpdate(f)},onComplete:()=>{a(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:i?void 0:o};SV(s)||Object.assign(u,EV(e,u)),u.duration&&(u.duration=Mo(u.duration)),u.repeatDelay&&(u.repeatDelay=Mo(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(Pg(u),u.delay===0&&(d=!0)),(pi.instantAnimations||pi.skipAnimations)&&(d=!0,Pg(u),u.delay=0),u.allowFlatten=!s.type&&!s.ease,d&&!i&&t.get()!==void 0){const f=yV(u.keyframes,s);if(f!==void 0){Nt.update(()=>{u.onUpdate(f),u.onComplete()});return}}return s.isSync?new Hv(u):new WB(u)};function xV({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function kN(e,t,{delay:n=0,transitionOverride:r,type:o}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...s}=t;r&&(i=r);const l=[],c=o&&e.animationState&&e.animationState.getState()[o];for(const u in s){const d=e.getValue(u,e.latestValues[u]??null),f=s[u];if(f===void 0||c&&xV(c,u))continue;const m={delay:n,...Yv(i||{},u)},y=d.get();if(y!==void 0&&!d.isAnimating&&!Array.isArray(f)&&f===y&&!m.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const _=NN(e);if(_){const b=window.MotionHandoffAnimation(_,u,Nt);b!==null&&(m.startTime=b,v=!0)}}Ug(e,u),d.start(s0(u,d,f,e.shouldReduceMotion&&YT.has(u)?{type:!1}:m,e,v));const S=d.animation;S&&l.push(S)}return a&&Promise.all(l).then(()=>{Nt.update(()=>{a&&hV(e,a)})}),l}function AN(e,t,n,r=0,o=1){const i=Array.from(e).sort((c,u)=>c.sortNodePosition(u)).indexOf(t),a=e.size,s=(a-1)*r;return typeof n=="function"?n(i,a):o===1?i*r:s-i*r}function zg(e,t,n={}){var l;const r=Xs(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const i=r?()=>Promise.all(kN(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=o;return CV(e,t,c,u,d,f,n)}:()=>Promise.resolve(),{when:s}=o;if(s){const[c,u]=s==="beforeChildren"?[i,a]:[a,i];return c().then(()=>u())}else return Promise.all([i(),a(n.delay)])}function CV(e,t,n=0,r=0,o=0,i=1,a){const s=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),s.push(zg(l,t,{...a,delay:n+(typeof r=="function"?0:r)+AN(e.variantChildren,l,r,o,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(s)}function TV(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const o=t.map(i=>zg(e,i,n));r=Promise.all(o)}else if(typeof t=="string")r=zg(e,t,n);else{const o=typeof t=="function"?Xs(e,t,n.custom):t;r=Promise.all(kN(e,o,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function RN(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const NV=e0.length;function IN(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?IN(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<NV;n++){const r=e0[n],o=e.props[r];(ru(o)||o===!1)&&(t[r]=o)}return t}const kV=[...Jv].reverse(),AV=Jv.length;function RV(e){return t=>Promise.all(t.map(({animation:n,options:r})=>TV(e,n,r)))}function IV(e){let t=RV(e),n=yw(),r=!0;const o=l=>(c,u)=>{var f;const d=Xs(e,u,l==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(d){const{transition:m,transitionEnd:y,...v}=d;c={...c,...v,...y}}return c};function i(l){t=l(e)}function a(l){const{props:c}=e,u=IN(e.parent)||{},d=[],f=new Set;let m={},y=1/0;for(let S=0;S<AV;S++){const _=kV[S],b=n[_],w=c[_]!==void 0?c[_]:u[_],x=ru(w),N=_===l?b.isActive:null;N===!1&&(y=S);let C=w===u[_]&&w!==c[_]&&x;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),b.protectedKeys={...m},!b.isActive&&N===null||!w&&!b.prevProp||kp(w)||typeof w=="boolean")continue;const T=LV(b.prevProp,w);let k=T||_===l&&b.isActive&&!C&&x||S>y&&x,D=!1;const R=Array.isArray(w)?w:[w];let I=R.reduce(o(_),{});N===!1&&(I={});const{prevResolvedValues:z={}}=b,O={...z,...I},U=M=>{k=!0,f.has(M)&&(D=!0,f.delete(M)),b.needsAnimating[M]=!0;const P=e.getValue(M);P&&(P.liveStyle=!1)};for(const M in O){const P=I[M],B=z[M];if(m.hasOwnProperty(M))continue;let V=!1;Vg(P)&&Vg(B)?V=!RN(P,B):V=P!==B,V?P!=null?U(M):f.add(M):P!==void 0&&f.has(M)?U(M):b.protectedKeys[M]=!0}b.prevProp=w,b.prevResolvedValues=I,b.isActive&&(m={...m,...I}),r&&e.blockInitialAnimation&&(k=!1);const W=C&&T;k&&(!W||D)&&d.push(...R.map(M=>{const P={type:_};if(typeof M=="string"&&r&&!W&&e.manuallyAnimateOnMount&&e.parent){const{parent:B}=e,V=Xs(B,M);if(B.enteringChildren&&V){const{delayChildren:q}=V.transition||{};P.delay=AN(B.enteringChildren,e,q)}}return{animation:M,options:P}}))}if(f.size){const S={};if(typeof c.initial!="boolean"){const _=Xs(e,Array.isArray(c.initial)?c.initial[0]:c.initial);_&&_.transition&&(S.transition=_.transition)}f.forEach(_=>{const b=e.getBaseTarget(_),w=e.getValue(_);w&&(w.liveStyle=!0),S[_]=b??null}),d.push({animation:S})}let v=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(d):Promise.resolve()}function s(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=e.variantChildren)==null||d.forEach(f=>{var m;return(m=f.animationState)==null?void 0:m.setActive(l,c)}),n[l].isActive=c;const u=a(l);for(const f in n)n[f].protectedKeys={};return u}return{animateChanges:a,setActive:s,setAnimateFunction:i,getState:()=>n,reset:()=>{n=yw()}}}function LV(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!RN(t,e):!1}function Aa(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function yw(){return{animate:Aa(!0),whileInView:Aa(),whileHover:Aa(),whileTap:Aa(),whileDrag:Aa(),whileFocus:Aa(),exit:Aa()}}class va{constructor(t){this.isMounted=!1,this.node=t}update(){}}class OV extends va{constructor(t){super(t),t.animationState||(t.animationState=IV(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();kp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let PV=0;class MV extends va{constructor(){super(...arguments),this.id=PV++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const DV={animation:{Feature:OV},exit:{Feature:MV}};function ou(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Eu(e){return{point:{x:e.pageX,y:e.pageY}}}const FV=e=>t=>Zv(t)&&e(t,Eu(t));function kc(e,t,n,r){return ou(e,t,FV(n),r)}const LN=1e-4,$V=1-LN,BV=1+LN,ON=.01,VV=0-ON,UV=0+ON;function Mn(e){return e.max-e.min}function zV(e,t,n){return Math.abs(e-t)<=n}function vw(e,t,n,r=.5){e.origin=r,e.originPoint=Lt(t.min,t.max,e.origin),e.scale=Mn(n)/Mn(t),e.translate=Lt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=$V&&e.scale<=BV||isNaN(e.scale))&&(e.scale=1),(e.translate>=VV&&e.translate<=UV||isNaN(e.translate))&&(e.translate=0)}function Ac(e,t,n,r){vw(e.x,t.x,n.x,r?r.originX:void 0),vw(e.y,t.y,n.y,r?r.originY:void 0)}function _w(e,t,n){e.min=n.min+t.min,e.max=e.min+Mn(t)}function jV(e,t,n){_w(e.x,t.x,n.x),_w(e.y,t.y,n.y)}function ww(e,t,n){e.min=t.min-n.min,e.max=e.min+Mn(t)}function Uf(e,t,n){ww(e.x,t.x,n.x),ww(e.y,t.y,n.y)}function Nr(e){return[e("x"),e("y")]}const PN=({current:e})=>e?e.ownerDocument.defaultView:null,bw=(e,t)=>Math.abs(e-t);function WV(e,t){const n=bw(e.x,t.x),r=bw(e.y,t.y);return Math.sqrt(n**2+r**2)}class MN{constructor(t,n,{transformPagePoint:r,contextWindow:o=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Lh(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=WV(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!y)return;const{point:v}=f,{timestamp:S}=mn;this.history.push({...v,timestamp:S});const{onStart:_,onMove:b}=this.handlers;m||(_&&_(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Ih(m,this.transformPagePoint),Nt.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:y,onSessionEnd:v,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Lh(f.type==="pointercancel"?this.lastMoveEventInfo:Ih(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(f,_),v&&v(f,_)},!Zv(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=o||window;const s=Eu(t),l=Ih(s,this.transformPagePoint),{point:c}=l,{timestamp:u}=mn;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,Lh(l,this.history)),this.removeListeners=vu(kc(this.contextWindow,"pointermove",this.handlePointerMove),kc(this.contextWindow,"pointerup",this.handlePointerUp),kc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ca(this.updatePoint)}}function Ih(e,t){return t?{point:t(e.point)}:e}function Ew(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Lh({point:e},t){return{point:e,delta:Ew(e,DN(t)),offset:Ew(e,GV(t)),velocity:HV(t,.1)}}function GV(e){return e[0]}function DN(e){return e[e.length-1]}function HV(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const o=DN(e);for(;n>=0&&(r=e[n],!(o.timestamp-r.timestamp>Mo(t)));)n--;if(!r)return{x:0,y:0};const i=Mr(o.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(o.x-r.x)/i,y:(o.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function XV(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Lt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Lt(n,e,r.max):Math.min(e,n)),e}function Sw(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function YV(e,{top:t,left:n,bottom:r,right:o}){return{x:Sw(e.x,n,o),y:Sw(e.y,t,r)}}function xw(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function qV(e,t){return{x:xw(e.x,t.x),y:xw(e.y,t.y)}}function KV(e,t){let n=.5;const r=Mn(e),o=Mn(t);return o>r?n=eu(t.min,t.max-r,e.min):r>o&&(n=eu(e.min,e.max-o,t.min)),fi(0,1,n)}function ZV(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const jg=.35;function QV(e=jg){return e===!1?e=0:e===!0&&(e=jg),{x:Cw(e,"left","right"),y:Cw(e,"top","bottom")}}function Cw(e,t,n){return{min:Tw(e,t),max:Tw(e,n)}}function Tw(e,t){return typeof e=="number"?e:e[t]||0}const JV=new WeakMap;class e9{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Kt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Eu(d).point)},a=(d,f)=>{const{drag:m,dragPropagation:y,onDragStart:v}=this.getProps();if(m&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=a8(m),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Nr(_=>{let b=this.getAxisMotionValue(_).get()||0;if(Do.test(b)){const{projection:w}=this.visualElement;if(w&&w.layout){const x=w.layout.layoutBox[_];x&&(b=Mn(x)*(parseFloat(b)/100))}}this.originPoint[_]=b}),v&&Nt.postRender(()=>v(d,f)),Ug(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},s=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f;const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:v,onDrag:S}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:_}=f;if(y&&this.currentDirection===null){this.currentDirection=t9(_),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,_),this.updateAxis("y",f.point,_),this.visualElement.render(),S&&S(d,f)},l=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f,this.stop(d,f),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Nr(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)==null?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new MN(t,{onSessionStart:i,onStart:a,onMove:s,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:PN(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,o=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!o||!r)return;const{velocity:a}=o;this.startAnimation(a);const{onDragEnd:s}=this.getProps();s&&Nt.postRender(()=>s(r,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:o}=this.getProps();if(!r||!ud(t,o,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=XV(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,o=this.constraints;t&&Ds(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=YV(r.layoutBox,t):this.constraints=!1,this.elastic=QV(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Nr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=ZV(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Ds(t))return!1;const r=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const i=nV(r,o.root,this.visualElement.getTransformPagePoint());let a=qV(o.layout.layoutBox,i);if(n){const s=n(J8(a));this.hasMutatedConstraints=!!s,s&&(a=_N(s))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:s}=this.getProps(),l=this.constraints||{},c=Nr(u=>{if(!ud(u,n,this.currentDirection))return;let d=l&&l[u]||{};a&&(d={min:0,max:0});const f=o?200:1e6,m=o?40:1e7,y={type:"inertia",velocity:r?t[u]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(s)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Ug(this.visualElement,t),r.start(s0(t,r,0,n,this.visualElement,!1))}stopAnimation(){Nr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Nr(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Nr(n=>{const{drag:r}=this.getProps();if(!ud(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,i=this.getAxisMotionValue(n);if(o&&o.layout){const{min:a,max:s}=o.layout.layoutBox[n];i.set(t[n]-Lt(a,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ds(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Nr(a=>{const s=this.getAxisMotionValue(a);if(s&&this.constraints!==!1){const l=s.get();o[a]=KV({min:l,max:l},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Nr(a=>{if(!ud(a,t,null))return;const s=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];s.set(Lt(l,c,o[a]))})}addListeners(){if(!this.visualElement.current)return;JV.set(this.visualElement,this);const t=this.visualElement.current,n=kc(t,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ds(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,i=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Nt.read(r);const a=ou(window,"resize",()=>this.scalePositionWithinConstraints()),s=o.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Nr(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),s&&s()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:i=!1,dragElastic:a=jg,dragMomentum:s=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:i,dragElastic:a,dragMomentum:s}}}function ud(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function t9(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class n9 extends va{constructor(t){super(t),this.removeGroupControls=Br,this.removeListeners=Br,this.controls=new e9(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Br}unmount(){this.removeGroupControls(),this.removeListeners()}}const Nw=e=>(t,n)=>{e&&Nt.postRender(()=>e(t,n))};class r9 extends va{constructor(){super(...arguments),this.removePointerDownListener=Br}onPointerDown(t){this.session=new MN(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:PN(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:Nw(t),onStart:Nw(n),onMove:r,onEnd:(i,a)=>{delete this.session,o&&Nt.postRender(()=>o(i,a))}}}mount(){this.removePointerDownListener=kc(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const zd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Oh=!1;class o9 extends h.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:i}=t;i&&(n.group&&n.group.add(i),r&&r.register&&o&&r.register(i),Oh&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),zd.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:o,isPresent:i}=this.props,{projection:a}=r;return a&&(a.isPresent=i,Oh=!0,o||t.layoutDependency!==n||n===void 0||t.isPresent!==i?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||Nt.postRender(()=>{const s=a.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Kv.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=t;Oh=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function FN(e){const[t,n]=iN(),r=h.useContext(Av);return p(o9,{...e,layoutGroup:r,switchLayoutGroup:h.useContext(yN),isPresent:t,safeToRemove:n})}function i9(e,t,n){const r=Tn(e)?e:ol(e);return r.start(s0("",r,t,n)),r.animation}const a9=(e,t)=>e.depth-t.depth;class s9{constructor(){this.children=[],this.isDirty=!1}add(t){Lv(this.children,t),this.isDirty=!0}remove(t){Ov(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(a9),this.isDirty=!1,this.children.forEach(t)}}function l9(e,t){const n=er.now(),r=({timestamp:o})=>{const i=o-n;i>=t&&(ca(r),e(i-t))};return Nt.setup(r,!0),()=>ca(r)}const $N=["TopLeft","TopRight","BottomLeft","BottomRight"],c9=$N.length,kw=e=>typeof e=="string"?parseFloat(e):e,Aw=e=>typeof e=="number"||Me.test(e);function u9(e,t,n,r,o,i){o?(e.opacity=Lt(0,n.opacity??1,d9(r)),e.opacityExit=Lt(t.opacity??1,0,f9(r))):i&&(e.opacity=Lt(t.opacity??1,n.opacity??1,r));for(let a=0;a<c9;a++){const s=`border${$N[a]}Radius`;let l=Rw(t,s),c=Rw(n,s);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Aw(l)===Aw(c)?(e[s]=Math.max(Lt(kw(l),kw(c),r),0),(Do.test(c)||Do.test(l))&&(e[s]+="%")):e[s]=c}(t.rotate||n.rotate)&&(e.rotate=Lt(t.rotate||0,n.rotate||0,r))}function Rw(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const d9=BN(0,.5,xT),f9=BN(.5,.95,Br);function BN(e,t,n){return r=>r<e?0:r>t?1:n(eu(e,t,r))}function Iw(e,t){e.min=t.min,e.max=t.max}function qr(e,t){Iw(e.x,t.x),Iw(e.y,t.y)}function Lw(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Ow(e,t,n,r,o){return e-=t,e=Vf(e,1/n,r),o!==void 0&&(e=Vf(e,1/o,r)),e}function p9(e,t=0,n=1,r=.5,o,i=e,a=e){if(Do.test(t)&&(t=parseFloat(t),t=Lt(a.min,a.max,t/100)-a.min),typeof t!="number")return;let s=Lt(i.min,i.max,r);e===i&&(s-=t),e.min=Ow(e.min,t,n,s,o),e.max=Ow(e.max,t,n,s,o)}function Pw(e,t,[n,r,o],i,a){p9(e,t[n],t[r],t[o],t.scale,i,a)}const h9=["x","scaleX","originX"],m9=["y","scaleY","originY"];function Mw(e,t,n,r){Pw(e.x,t,h9,n?n.x:void 0,r?r.x:void 0),Pw(e.y,t,m9,n?n.y:void 0,r?r.y:void 0)}function Dw(e){return e.translate===0&&e.scale===1}function VN(e){return Dw(e.x)&&Dw(e.y)}function Fw(e,t){return e.min===t.min&&e.max===t.max}function g9(e,t){return Fw(e.x,t.x)&&Fw(e.y,t.y)}function $w(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function UN(e,t){return $w(e.x,t.x)&&$w(e.y,t.y)}function Bw(e){return Mn(e.x)/Mn(e.y)}function Vw(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class y9{constructor(){this.members=[]}add(t){Lv(this.members,t),t.scheduleRender()}remove(t){if(Ov(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(o=>t===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const i=this.members[o];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function v9(e,t,n){let r="";const o=e.x.translate/t.x,i=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((o||i||a)&&(r=`translate3d(${o}px, ${i}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:f,skewX:m,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),y&&(r+=`skewY(${y}deg) `)}const s=e.x.scale*t.x,l=e.y.scale*t.y;return(s!==1||l!==1)&&(r+=`scale(${s}, ${l})`),r||"none"}const Ph=["","X","Y","Z"],_9=1e3;let w9=0;function Mh(e,t,n,r){const{latestValues:o}=t;o[e]&&(n[e]=o[e],t.setStaticValue(e,0),r&&(r[e]=0))}function zN(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=NN(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Nt,!(o||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&zN(r)}function jN({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(a={},s=t==null?void 0:t()){this.id=w9++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(S9),this.nodes.forEach(N9),this.nodes.forEach(k9),this.nodes.forEach(x9)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new s9)}addEventListener(a,s){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Dv),this.eventHandlers.get(a).add(s)}notifyListeners(a,...s){const l=this.eventHandlers.get(a);l&&l.notify(...s)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=oN(a)&&!f8(a),this.instance=a;const{layoutId:s,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||s)&&(this.isLayoutDirty=!0),e){let u,d=0;const f=()=>this.root.updateBlockedByResize=!1;Nt.read(()=>{d=window.innerWidth}),e(a,()=>{const m=window.innerWidth;m!==d&&(d=m,this.root.updateBlockedByResize=!0,u&&u(),u=l9(f,250),zd.hasAnimatedSinceResize&&(zd.hasAnimatedSinceResize=!1,this.nodes.forEach(jw)))})}s&&this.root.registerSharedNode(s,this),this.options.animate!==!1&&c&&(s||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||O9,{onLayoutAnimationStart:v,onLayoutAnimationComplete:S}=c.getProps(),_=!this.targetLayout||!UN(this.targetLayout,m),b=!d&&f;if(this.options.layoutRoot||this.resumeFrom||b||d&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...Yv(y,"layout"),onPlay:v,onComplete:S};(c.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(u,b)}else d||jw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ca(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(A9),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&zN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:s,layout:l}=this.options;if(s===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Uw);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(zw);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(T9),this.nodes.forEach(b9),this.nodes.forEach(E9)):this.nodes.forEach(zw),this.clearAllSnapshots();const s=er.now();mn.delta=fi(0,1e3/60,s-mn.timestamp),mn.timestamp=s,mn.isProcessing=!0,Sh.update.process(mn),Sh.preRender.process(mn),Sh.render.process(mn),mn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Kv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(C9),this.sharedNodes.forEach(R9)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Nt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Nt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Mn(this.snapshot.measuredBox.x)&&!Mn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Kt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let s=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(s=!1),s&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!o)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,s=this.projectionDelta&&!VN(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;a&&this.instance&&(s||Ma(this.latestValues)||u)&&(o(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const s=this.measurePageBox();let l=this.removeElementScroll(s);return a&&(l=this.removeTransform(l)),P9(l),{animationId:this.root.animationId,measuredBox:s,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:a}=this.options;if(!a)return Kt();const s=a.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(M9))){const{scroll:u}=this.root;u&&(Fs(s.x,u.offset.x),Fs(s.y,u.offset.y))}return s}removeElementScroll(a){var l;const s=Kt();if(qr(s,a),(l=this.scroll)!=null&&l.wasRoot)return s;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&qr(s,a),Fs(s.x,d.offset.x),Fs(s.y,d.offset.y))}return s}applyTransform(a,s=!1){const l=Kt();qr(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];!s&&u.options.layoutScroll&&u.scroll&&u!==u.root&&$s(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ma(u.latestValues)&&$s(l,u.latestValues)}return Ma(this.latestValues)&&$s(l,this.latestValues),l}removeTransform(a){const s=Kt();qr(s,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ma(c.latestValues))continue;Fg(c.latestValues)&&c.updateSnapshot();const u=Kt(),d=c.measurePageBox();qr(u,d),Mw(s,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Ma(this.latestValues)&&Mw(s,this.latestValues),s}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var m;const s=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=s.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=s.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=s.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==s;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:d}=this.options;if(!this.layout||!(u||d))return;this.resolvedRelativeTargetAt=mn.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Kt(),this.targetWithTransforms=Kt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),jV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qr(this.target,this.layout.layoutBox),bN(this.target,this.targetDelta)):qr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Fg(this.parent.latestValues)||wN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,s,l){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Kt(),this.relativeTargetOrigin=Kt(),Uf(this.relativeTargetOrigin,s,l),qr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var y;const a=this.getLead(),s=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),s&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===mn.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;qr(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;tV(this.layoutCorrected,this.treeScale,this.path,s),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Kt());const{target:m}=a;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Lw(this.prevProjectionDelta.x,this.projectionDelta.x),Lw(this.prevProjectionDelta.y,this.projectionDelta.y)),Ac(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!Vw(this.projectionDelta.x,this.prevProjectionDelta.x)||!Vw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var s;if((s=this.options.visualElement)==null||s.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Bs(),this.projectionDelta=Bs(),this.projectionDeltaWithTransform=Bs()}setAnimationOrigin(a,s=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=Bs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const f=Kt(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,v=m!==y,S=this.getStack(),_=!S||S.members.length<=1,b=!!(v&&!_&&this.options.crossfade===!0&&!this.path.some(L9));this.animationProgress=0;let w;this.mixTargetDelta=x=>{const N=x/1e3;Ww(d.x,a.x,N),Ww(d.y,a.y,N),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Uf(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),I9(this.relativeTarget,this.relativeTargetOrigin,f,N),w&&g9(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Kt()),qr(w,this.relativeTarget)),v&&(this.animationValues=u,u9(u,c,this.latestValues,N,b,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var s,l,c;this.notifyListeners("animationStart"),(s=this.currentAnimation)==null||s.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(ca(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Nt.update(()=>{zd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ol(0)),this.currentAnimation=i9(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_9),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:s,target:l,layout:c,latestValues:u}=a;if(!(!s||!l||!c)){if(this!==a&&this.layout&&c&&WN(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Kt();const d=Mn(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const f=Mn(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}qr(s,l),$s(s,u),Ac(this.projectionDeltaWithTransform,this.layoutCorrected,s,u)}}registerSharedNode(a,s){this.sharedNodes.has(a)||this.sharedNodes.set(a,new y9),this.sharedNodes.get(a).add(s);const c=s.options.initialPromotionConfig;s.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(s):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())==null?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())==null?void 0:s.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:s,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let s=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(s=!0),!s)return;const c={};l.z&&Mh("z",a,c,this.animationValues);for(let u=0;u<Ph.length;u++)Mh(`rotate${Ph[u]}`,a,c,this.animationValues),Mh(`skew${Ph[u]}`,a,c,this.animationValues);a.render();for(const u in c)a.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);a.scheduleRender()}applyProjectionStyles(a,s){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=Ud(s==null?void 0:s.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=Ud(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Ma(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let d=v9(this.projectionDeltaWithTransform,this.treeScale,u);l&&(d=l(u,d)),a.transform=d;const{x:f,y:m}=this.projectionDelta;a.transformOrigin=`${f.origin*100}% ${m.origin*100}% 0`,c.animationValues?a.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:a.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const y in Dg){if(u[y]===void 0)continue;const{correct:v,applyTo:S,isCSSVariable:_}=Dg[y],b=d==="none"?u[y]:v(u[y],c);if(S){const w=S.length;for(let x=0;x<w;x++)a[S[x]]=b}else _?this.options.visualElement.renderState.vars[y]=b:a[y]=b}this.options.layoutId&&(a.pointerEvents=c===this?Ud(s==null?void 0:s.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var s;return(s=a.currentAnimation)==null?void 0:s.stop()}),this.root.nodes.forEach(Uw),this.root.sharedNodes.clear()}}}function b9(e){e.updateLayout()}function E9(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=e.layout,{animationType:i}=e.options,a=t.source!==e.layout.source;i==="size"?Nr(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],m=Mn(f);f.min=r[d].min,f.max=f.min+m}):WN(i,t.layoutBox,r)&&Nr(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],m=Mn(r[d]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+m)});const s=Bs();Ac(s,r,t.layoutBox);const l=Bs();a?Ac(l,e.applyTransform(o,!0),t.measuredBox):Ac(l,r,t.layoutBox);const c=!VN(s);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:m}=d;if(f&&m){const y=Kt();Uf(y,t.layoutBox,f.layoutBox);const v=Kt();Uf(v,r,m.layoutBox),UN(y,v)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=y,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function S9(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function x9(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function C9(e){e.clearSnapshot()}function Uw(e){e.clearMeasurements()}function zw(e){e.isLayoutDirty=!1}function T9(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function jw(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function N9(e){e.resolveTargetDelta()}function k9(e){e.calcProjection()}function A9(e){e.resetSkewAndRotation()}function R9(e){e.removeLeadSnapshot()}function Ww(e,t,n){e.translate=Lt(t.translate,0,n),e.scale=Lt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Gw(e,t,n,r){e.min=Lt(t.min,n.min,r),e.max=Lt(t.max,n.max,r)}function I9(e,t,n,r){Gw(e.x,t.x,n.x,r),Gw(e.y,t.y,n.y,r)}function L9(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const O9={duration:.45,ease:[.4,0,.1,1]},Hw=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Xw=Hw("applewebkit/")&&!Hw("chrome/")?Math.round:Br;function Yw(e){e.min=Xw(e.min),e.max=Xw(e.max)}function P9(e){Yw(e.x),Yw(e.y)}function WN(e,t,n){return e==="position"||e==="preserve-aspect"&&!zV(Bw(t),Bw(n),.2)}function M9(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const D9=jN({attachResizeListener:(e,t)=>ou(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Dh={current:void 0},GN=jN({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Dh.current){const e=new D9({});e.mount(window),e.setOptions({layoutScroll:!0}),Dh.current=e}return Dh.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),F9={pan:{Feature:r9},drag:{Feature:n9,ProjectionNode:GN,MeasureLayout:FN}};function qw(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,i=r[o];i&&Nt.postRender(()=>i(t,Eu(t)))}class $9 extends va{mount(){const{current:t}=this.node;t&&(this.unmount=s8(t,(n,r)=>(qw(this.node,r,"Start"),o=>qw(this.node,o,"End"))))}unmount(){}}class B9 extends va{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vu(ou(this.node.current,"focus",()=>this.onFocus()),ou(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Kw(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),i=r[o];i&&Nt.postRender(()=>i(t,Eu(t)))}class V9 extends va{mount(){const{current:t}=this.node;t&&(this.unmount=d8(t,(n,r)=>(Kw(this.node,r,"Start"),(o,{success:i})=>Kw(this.node,o,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Wg=new WeakMap,Fh=new WeakMap,U9=e=>{const t=Wg.get(e.target);t&&t(e)},z9=e=>{e.forEach(U9)};function j9({root:e,...t}){const n=e||document;Fh.has(n)||Fh.set(n,{});const r=Fh.get(n),o=JSON.stringify(t);return r[o]||(r[o]=new IntersectionObserver(z9,{root:e,...t})),r[o]}function W9(e,t,n){const r=j9(t);return Wg.set(e,n),r.observe(e),()=>{Wg.delete(e),r.unobserve(e)}}const G9={some:0,all:1};class H9 extends va{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:i}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:G9[o]},s=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return W9(this.node.current,a,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(X9(t,n))&&this.startObserver()}unmount(){}}function X9({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Y9={inView:{Feature:H9},tap:{Feature:V9},focus:{Feature:B9},hover:{Feature:$9}},q9={layout:{ProjectionNode:GN,MeasureLayout:FN}},K9={...DV,...Y9,...F9,...q9},un=Q8(K9,dV),HN=h.createContext(void 0),l0={processing:"Processing...",success:"Success",failure:"Failure"};function Z9({TranslationMaps:e,children:t,warnBeforeNavigation:n=!0,navigationWarningMessage:r="Changes you made may not be saved."}){const o=rC(e,l0),[i,a]=h.useState(!1),[s,l]=h.useState(!1),[c,u]=h.useState(null),d=h.useRef(null);h.useEffect(()=>{if(!n||!i)return;const S=_=>(_.preventDefault(),_.returnValue=r,r);return window.addEventListener("beforeunload",S),()=>{window.removeEventListener("beforeunload",S)}},[i,n,r]),h.useEffect(()=>{const S=document.body.style.cursor;return i?document.body.style.cursor="progress":document.body.style.cursor=S||"",()=>{document.body.style.cursor=S||""}},[i]),h.useEffect(()=>()=>{d.current&&(window.clearTimeout(d.current),d.current=null)},[]);const f=()=>{a(!0),l(!1),u(null),d.current&&(window.clearTimeout(d.current),d.current=null)},m=()=>{a(!1)},y=()=>{d.current&&(window.clearTimeout(d.current),d.current=null),u(null),l(!1),m()},v=(S,_)=>{d.current&&(window.clearTimeout(d.current),d.current=null),u(S),l(!!(_!=null&&_.allowManualDismiss)),a(!0),typeof(_==null?void 0:_.autoHide)=="number"&&(d.current=window.setTimeout(()=>{y()},_.autoHide))};return L(HN.Provider,{value:{showProcessingLockModal:f,hideProcessingLockModal:m,setContent:v,clearContent:y},children:[t,p(zn,{isOpen:i,setIsOpen:a,onClose:m,allowClose:s,children:p(bu,{mode:"wait",children:c!==null?p(un.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},className:j(ne.flexCenter,ne.flexRow,ne.flexGapM),children:c},"custom"):L(un.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:j(ne.flexCenter,ne.flexRow,ne.flexGapM),children:[p("div",{className:nl.spinner}),p("p",{className:nl.loadingText,children:o("processing")})]},"loading")})})]})}function Q9({message:e,iconName:t,className:n}){return L(gt,{children:[p(Ht,{iconName:t||"check",className:nl.successIcon,size:60}),p("p",{className:n||nl.messageText,children:e||l0.success})]})}function Zw({message:e,iconName:t,className:n}){return L(gt,{children:[p(Ht,{iconName:t||"x",className:nl.failureIcon,size:60}),p("p",{className:n||nl.messageText,children:e||l0.failure})]})}function XN(){const e=h.useContext(HN);return e===void 0?(console.warn("useProcessingLockModal must be used within a ProcessingLockModalProvider"),{showProcessingLockModal:()=>{},hideProcessingLockModal:()=>{},setContent:()=>{},clearContent:()=>{}}):e}const J9="_button_1l8g7_2",eU="_disabled_1l8g7_10",YN={button:J9,disabled:eU},tU="_primary_1mqkb_1",nU="_secondary_1mqkb_1",rU="_custom_1mqkb_1",oU={primary:tU,secondary:nU,custom:rU},iU={none:{},basic:{whileHover:{scale:1.2,filter:"brightness(1.2)"},whileTap:{scale:.98},transition:{ease:"easeInOut",duration:.1}},bounce:{whileHover:{translateY:"-30%"},whileTap:{scale:1.2,translateY:"-30%"},transition:{type:"tween",duration:.2,ease:"easeInOut"}},nekotech:{whileHover:{translateY:"-30%",scale:1.05},whileTap:{translateY:"-30%",scale:.95},transition:{type:"tween",duration:.2,ease:"easeInOut"}}},aU={getAnimateProps:"spread"};function wl(e,t,n,r=aU){let o;if(e[t])o=e[t];else{const a=Object.keys(e);console.warn(`Theme "${t}" not found. Available themes: ${a.join(", ")}. Using default theme "${a[0]}".`),o=e[a[0]]}const i=(a,s="")=>{if(typeof a=="function")try{return a(n)}catch(l){const c=s.split(".").pop()||"unknown";let u;if(!n)u="No parameters provided (params is null/undefined)";else if(typeof n!="object")u=`Invalid params type: ${typeof n} (expected object)`;else{const d=Object.keys(n);d.length===0?u="Empty parameters object {}":u=`Available params: [${d.join(", ")}]`}throw console.error(`Failed to execute theme function "${c}" at path "${s}". Function expects ${a.length} parameters. ${u}. Error: ${l instanceof Error?l.message:String(l)}`),new Error(`Theme function execution failed at ${s}: ${l}`)}if(Array.isArray(a))return a.map((l,c)=>i(l,`${s}[${c}]`));if(a&&typeof a=="object"){const l={};for(const[c,u]of Object.entries(a)){const d=s?`${s}.${c}`:c,f=i(u,d);if(typeof u=="function"&&r[c]){const m=r[c];typeof m=="string"?m==="spread"?Object.assign(l,f):l[m]=f:l[c]=f}else l[c]=f}return l}return a};return i(o)}const sU=Object.assign({},YN,oU),qe=sU;function Ke({as:e,children:t,className:n,themeType:r="basic",wrapperClassName:o,style:i,disabled:a=!1,type:s,...l}){const c=h.useMemo(()=>wl(iU,r,{}),[r]),u=h.useMemo(()=>{const b=e||"button";return un.create(b)},[e]),d=h.useMemo(()=>({initial:{},hover:c.whileHover||{},tap:c.whileTap||{}}),[c.whileHover,c.whileTap]),f=h.useMemo(()=>({initial:{filter:"grayscale(0)",cursor:"pointer"},hover:{filter:"grayscale(0)"},tap:{filter:"grayscale(0)"},disabled:{filter:"grayscale(1)",cursor:"not-allowed",transition:{duration:.3,type:"tween"}}}),[]),m=h.useMemo(()=>({type:"spring",stiffness:400,damping:10}),[]),y=h.useMemo(()=>({initial:a?"disabled":"initial",animate:a?"disabled":"initial",whileHover:a?void 0:"hover",whileTap:a?void 0:"tap"}),[a]),v=h.useMemo(()=>j(YN.button,n),[n]),S=h.useMemo(()=>j(ne.flexRow,ne.flexCenter,ne.flexGapS,st.paddingS,mv.positionRelative,o),[o]),_=e===void 0||e==="button"?s??"button":void 0;return p(u,{className:v,initial:y.initial,animate:y.animate,whileHover:y.whileHover,whileTap:y.whileTap,variants:f,transition:{duration:.3},disabled:a,style:i,type:_,...l,children:p(un.div,{className:S,variants:d,style:{pointerEvents:"none"},transition:c.transition||m,children:t})})}const lU="_background_c3ofx_1",cU={background:lU};function uU({children:e,gradientDark:t="var(--page-background-secondary, #203a43)",gradientLight:n="var(--page-background-primary, #0f2027)",dotColor:r="var(--color-main-bg-cross-color, rgba(255, 255, 255, 1))",dotSize:o="var(--page-background-decor-radius, 0.5px)",gridSize:i="var(--page-background-decor-spacing, 35px)",className:a,style:s}){const l={"--color-main-bg-grd-dark":t,"--color-main-bg-grd-light":n,"--color-bg-cross-color":r,"--dot-size":o,"--grid-size":i,...s};return p("main",{className:j(cU.background,a),style:l,children:e})}function qN({children:e}){return p(uU,{className:j(st.parentWidth,st.paddingL,ne.flexColumn,ne.alignItemsCenter),style:{minHeight:"100dvh",minWidth:"100%"},children:p("div",{className:j(ne.flexColumn,ne.flexGapM,ne.flexGrow),style:{maxWidth:"1200px",width:"100%"},children:e})})}const dU="_modalContentTemplate_ndb6o_1",fU="_modalContent_ndb6o_1",pU={modalContentTemplate:dU,modalContent:fU};function KN({isOpen:e,setIsOpen:t,initialName:n="",onSubmit:r,allowClose:o=!0}){const[i,a]=h.useState(n);h.useEffect(()=>{e&&a(n)},[e,n]);const s=i.trim(),l=s.length>0;return p(zn,{isOpen:e,setIsOpen:t,allowClose:o,children:L("form",{onSubmit:u=>{u.preventDefault(),l&&(r(s),t(!1))},className:j(pU.modalContent,ne.flexColumn,ne.flexGapM),children:[p("h2",{className:zo.underlineHighlightColorPrimary,children:n?"Rename Conlang":"Name Your Conlang"}),p("input",{type:"text",value:i,onChange:u=>a(u.target.value),placeholder:"Enter conlang name...",autoFocus:!0,style:{padding:"0.5em",fontSize:"1rem",background:"var(--surface-raised)",color:"var(--text-primary)",border:"1px solid var(--border-primary)",borderRadius:"4px",outline:"none"}}),L("div",{className:j(ne.flexRow,ne.justifyContentEnd,ne.flexGapS),children:[o&&p(Ke,{type:"button",className:qe.secondary,onClick:()=>t(!1),children:"Cancel"}),p(Ke,{type:"submit",className:qe.primary,disabled:!l,children:n?"Rename":"Create"})]})]})})}const hU="_dropdownContent_ps9uh_1",mU="_contentContainer_ps9uh_9",Qw={dropdownContent:hU,contentContainer:mU},gU={basic:{content:{getAnimateProps:({isOpen:e,maxHeight:t})=>({initial:{maxHeight:0,opacity:0},animate:{maxHeight:t,opacity:1},exit:{maxHeight:0,opacity:0},transition:{duration:.3,ease:"easeInOut"}})},caret:{getAnimateProps:({isOpen:e})=>({animate:{rotate:e?180:0},transition:{duration:.3,ease:"easeInOut"}})}},nekotech:{content:{getAnimateProps:({isOpen:e,maxHeight:t})=>({initial:{maxHeight:0,opacity:0,scale:.95,transformOrigin:"center center"},animate:{maxHeight:t,opacity:1,scale:1},exit:{maxHeight:0,opacity:0,scale:.95},transition:{duration:.5,ease:[.68,-.55,.265,1.55]}})},caret:{getAnimateProps:({isOpen:e})=>({animate:{rotate:e?180:0,scale:e?1.1:1},transition:{duration:.5,ease:[.68,-.55,.265,1.55]}})}}};function yU(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function vU(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function ZN(){return/apple/i.test(navigator.vendor)}function _U(){return yU().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function wU(){return vU().includes("jsdom/")}const Jw="data-floating-ui-focusable",bU="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Gg(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function al(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&mg(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function ws(e){return"composedPath"in e?e.composedPath()[0]:e.target}function $h(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function EU(e){return e.matches("html,body")}function Ro(e){return(e==null?void 0:e.ownerDocument)||document}function QN(e){return Fn(e)&&e.matches(bU)}function SU(e){if(!e||wU())return!0;try{return e.matches(":focus-visible")}catch{return!0}}function xU(e){return e?e.hasAttribute(Jw)?e:e.querySelector("["+Jw+"]")||e:null}function jd(e,t,n){return n===void 0&&(n=!0),e.filter(o=>{var i;return o.parentId===t&&(!n||((i=o.context)==null?void 0:i.open))}).flatMap(o=>[o,...jd(e,o.id,n)])}function CU(e){return"nativeEvent"in e}function iu(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}var TU=typeof document<"u",NU=function(){},po=TU?h.useLayoutEffect:NU;const kU={...Ic};function dd(e){const t=h.useRef(e);return po(()=>{t.current=e}),t}const AU=kU.useInsertionEffect,RU=AU||(e=>e());function ko(e){const t=h.useRef(()=>{});return RU(()=>{t.current=e}),h.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}const JN=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function e2(e,t){const n=VC(e,JN()),r=n.length;if(r===0)return;const o=Gg(Ro(e)),i=n.indexOf(o),a=i===-1?t===1?0:r-1:i+t;return n[a]}function IU(e){return e2(Ro(e).body,1)||e}function LU(e){return e2(Ro(e).body,-1)||e}function Bh(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!al(n,r)}function OU(e){VC(e,JN()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function eb(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const PU="data-floating-ui-focusable",tb="active",nb="selected",MU={...Ic};let rb=!1,DU=0;const ob=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+DU++;function FU(){const[e,t]=h.useState(()=>rb?ob():void 0);return po(()=>{e==null&&t(ob())},[]),h.useEffect(()=>{rb=!0},[]),e}const $U=MU.useId,Rp=$U||FU,BU=h.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:o},middlewareData:{arrow:i,shift:a}},width:s=14,height:l=7,tipRadius:c=0,strokeWidth:u=0,staticOffset:d,stroke:f,d:m,style:{transform:y,...v}={},...S}=t,_=Rp(),[b,w]=h.useState(!1);if(po(()=>{if(!o)return;_r(o).direction==="rtl"&&w(!0)},[o]),!o)return null;const[x,N]=r.split("-"),C=x==="top"||x==="bottom";let T=d;(C&&a!=null&&a.x||!C&&a!=null&&a.y)&&(T=null);const k=u*2,D=k/2,R=s/2*(c/-8+1),I=l/2*c/4,z=!!m,O=T&&N==="end"?"bottom":"top";let U=T&&N==="end"?"right":"left";T&&b&&(U=N==="end"?"left":"right");const W=(i==null?void 0:i.x)!=null?T||i.x:"",$=(i==null?void 0:i.y)!=null?T||i.y:"",M=m||"M0,0"+(" H"+s)+(" L"+(s-R)+","+(l-I))+(" Q"+s/2+","+l+" "+R+","+(l-I))+" Z",P={top:z?"rotate(180deg)":"",left:z?"rotate(90deg)":"rotate(-90deg)",bottom:z?"":"rotate(180deg)",right:z?"rotate(-90deg)":"rotate(90deg)"}[x];return L("svg",{...S,"aria-hidden":!0,ref:n,width:z?s:s+k,height:s,viewBox:"0 0 "+s+" "+(l>s?l:s),style:{position:"absolute",pointerEvents:"none",[U]:W,[O]:$,[x]:C||z?"100%":"calc(100% - "+k/2+"px)",transform:[P,y].filter(B=>!!B).join(" "),...v},children:[k>0&&p("path",{clipPath:"url(#"+_+")",fill:"none",stroke:f,strokeWidth:k+(m?0:1),d:M}),p("path",{stroke:k&&!m?S.fill:"none",d:M}),p("clipPath",{id:_,children:p("rect",{x:-D,y:D*(z?-1:1),width:s+k,height:s})})]})});function VU(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(o=>o(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const UU=h.createContext(null),zU=h.createContext(null),c0=()=>{var e;return((e=h.useContext(UU))==null?void 0:e.id)||null},u0=()=>h.useContext(zU);function Su(e){return"data-floating-ui-"+e}function Tr(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}const ib=Su("safe-polygon");function Vh(e,t,n){if(n&&!iu(n))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const r=e();return typeof r=="number"?r:r==null?void 0:r[t]}return e==null?void 0:e[t]}function Uh(e){return typeof e=="function"?e():e}function jU(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:o,events:i,elements:a}=e,{enabled:s=!0,delay:l=0,handleClose:c=null,mouseOnly:u=!1,restMs:d=0,move:f=!0}=t,m=u0(),y=c0(),v=dd(c),S=dd(l),_=dd(n),b=dd(d),w=h.useRef(),x=h.useRef(-1),N=h.useRef(),C=h.useRef(-1),T=h.useRef(!0),k=h.useRef(!1),D=h.useRef(()=>{}),R=h.useRef(!1),I=ko(()=>{var M;const P=(M=o.current.openEvent)==null?void 0:M.type;return(P==null?void 0:P.includes("mouse"))&&P!=="mousedown"});h.useEffect(()=>{if(!s)return;function M(P){let{open:B}=P;B||(Tr(x),Tr(C),T.current=!0,R.current=!1)}return i.on("openchange",M),()=>{i.off("openchange",M)}},[s,i]),h.useEffect(()=>{if(!s||!v.current||!n)return;function M(B){I()&&r(!1,B,"hover")}const P=Ro(a.floating).documentElement;return P.addEventListener("mouseleave",M),()=>{P.removeEventListener("mouseleave",M)}},[a.floating,n,r,s,v,I]);const z=h.useCallback(function(M,P,B){P===void 0&&(P=!0),B===void 0&&(B="hover");const V=Vh(S.current,"close",w.current);V&&!N.current?(Tr(x),x.current=window.setTimeout(()=>r(!1,M,B),V)):P&&(Tr(x),r(!1,M,B))},[S,r]),O=ko(()=>{D.current(),N.current=void 0}),U=ko(()=>{if(k.current){const M=Ro(a.floating).body;M.style.pointerEvents="",M.removeAttribute(ib),k.current=!1}}),W=ko(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);h.useEffect(()=>{if(!s)return;function M(Q){if(Tr(x),T.current=!1,u&&!iu(w.current)||Uh(b.current)>0&&!Vh(S.current,"open"))return;const H=Vh(S.current,"open",w.current);H?x.current=window.setTimeout(()=>{_.current||r(!0,Q,"hover")},H):n||r(!0,Q,"hover")}function P(Q){if(W()){U();return}D.current();const H=Ro(a.floating);if(Tr(C),R.current=!1,v.current&&o.current.floatingContext){n||Tr(x),N.current=v.current({...o.current.floatingContext,tree:m,x:Q.clientX,y:Q.clientY,onClose(){U(),O(),W()||z(Q,!0,"safe-polygon")}});const Y=N.current;H.addEventListener("mousemove",Y),D.current=()=>{H.removeEventListener("mousemove",Y)};return}(w.current==="touch"?!al(a.floating,Q.relatedTarget):!0)&&z(Q)}function B(Q){W()||o.current.floatingContext&&(v.current==null||v.current({...o.current.floatingContext,tree:m,x:Q.clientX,y:Q.clientY,onClose(){U(),O(),W()||z(Q)}})(Q))}function V(){Tr(x)}function q(Q){W()||z(Q,!1)}if(bt(a.domReference)){const Q=a.domReference,H=a.floating;return n&&Q.addEventListener("mouseleave",B),f&&Q.addEventListener("mousemove",M,{once:!0}),Q.addEventListener("mouseenter",M),Q.addEventListener("mouseleave",P),H&&(H.addEventListener("mouseleave",B),H.addEventListener("mouseenter",V),H.addEventListener("mouseleave",q)),()=>{n&&Q.removeEventListener("mouseleave",B),f&&Q.removeEventListener("mousemove",M),Q.removeEventListener("mouseenter",M),Q.removeEventListener("mouseleave",P),H&&(H.removeEventListener("mouseleave",B),H.removeEventListener("mouseenter",V),H.removeEventListener("mouseleave",q))}}},[a,s,e,u,f,z,O,U,r,n,_,m,S,v,o,W,b]),po(()=>{var M;if(s&&n&&(M=v.current)!=null&&(M=M.__options)!=null&&M.blockPointerEvents&&I()){k.current=!0;const B=a.floating;if(bt(a.domReference)&&B){var P;const V=Ro(a.floating).body;V.setAttribute(ib,"");const q=a.domReference,Q=m==null||(P=m.nodesRef.current.find(H=>H.id===y))==null||(P=P.context)==null?void 0:P.elements.floating;return Q&&(Q.style.pointerEvents=""),V.style.pointerEvents="none",q.style.pointerEvents="auto",B.style.pointerEvents="auto",()=>{V.style.pointerEvents="",q.style.pointerEvents="",B.style.pointerEvents=""}}}},[s,n,y,a,m,v,I]),po(()=>{n||(w.current=void 0,R.current=!1,O(),U())},[n,O,U]),h.useEffect(()=>()=>{O(),Tr(x),Tr(C),U()},[s,a.domReference,O,U]);const $=h.useMemo(()=>{function M(P){w.current=P.pointerType}return{onPointerDown:M,onPointerEnter:M,onMouseMove(P){const{nativeEvent:B}=P;function V(){!T.current&&!_.current&&r(!0,B,"hover")}u&&!iu(w.current)||n||Uh(b.current)===0||R.current&&P.movementX**2+P.movementY**2<2||(Tr(C),w.current==="touch"?V():(R.current=!0,C.current=window.setTimeout(V,Uh(b.current))))}}},[u,r,n,_,b]);return h.useMemo(()=>s?{reference:$}:{},[s,$])}const t2={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},ab=h.forwardRef(function(t,n){const[r,o]=h.useState();po(()=>{ZN()&&o("button")},[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Su("focus-guard")]:"",style:t2};return p("span",{...t,...i})}),n2=h.createContext(null),sb=Su("portal");function WU(e){e===void 0&&(e={});const{id:t,root:n}=e,r=Rp(),o=GU(),[i,a]=h.useState(null),s=h.useRef(null);return po(()=>()=>{i==null||i.remove(),queueMicrotask(()=>{s.current=null})},[i]),po(()=>{if(!r||s.current)return;const l=t?document.getElementById(t):null;if(!l)return;const c=document.createElement("div");c.id=r,c.setAttribute(sb,""),l.appendChild(c),s.current=c,a(c)},[t,r]),po(()=>{if(n===null||!r||s.current)return;let l=n||(o==null?void 0:o.portalNode);l&&!wv(l)&&(l=l.current),l=l||document.body;let c=null;t&&(c=document.createElement("div"),c.id=t,l.appendChild(c));const u=document.createElement("div");u.id=r,u.setAttribute(sb,""),l=c||l,l.appendChild(u),s.current=u,a(u)},[t,n,r,o]),i}function d0(e){const{children:t,id:n,root:r,preserveTabOrder:o=!0}=e,i=WU({id:n,root:r}),[a,s]=h.useState(null),l=h.useRef(null),c=h.useRef(null),u=h.useRef(null),d=h.useRef(null),f=a==null?void 0:a.modal,m=a==null?void 0:a.open,y=!!a&&!a.modal&&a.open&&o&&!!(r||i);return h.useEffect(()=>{if(!i||!o||f)return;function v(S){i&&Bh(S)&&(S.type==="focusin"?eb:OU)(i)}return i.addEventListener("focusin",v,!0),i.addEventListener("focusout",v,!0),()=>{i.removeEventListener("focusin",v,!0),i.removeEventListener("focusout",v,!0)}},[i,o,f]),h.useEffect(()=>{i&&(m||eb(i))},[m,i]),L(n2.Provider,{value:h.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:u,afterInsideRef:d,portalNode:i,setFocusManagerState:s}),[o,i]),children:[y&&i&&p(ab,{"data-type":"outside",ref:l,onFocus:v=>{if(Bh(v,i)){var S;(S=u.current)==null||S.focus()}else{const _=a?a.domReference:null,b=LU(_);b==null||b.focus()}}}),y&&i&&p("span",{"aria-owns":i.id,style:t2}),i&&ip.createPortal(t,i),y&&i&&p(ab,{"data-type":"outside",ref:c,onFocus:v=>{if(Bh(v,i)){var S;(S=d.current)==null||S.focus()}else{const _=a?a.domReference:null,b=IU(_);b==null||b.focus(),a!=null&&a.closeOnFocusOut&&(a==null||a.onOpenChange(!1,v.nativeEvent,"focus-out"))}}})]})}const GU=()=>h.useContext(n2);function lb(e){return Fn(e.target)&&e.target.tagName==="BUTTON"}function HU(e){return Fn(e.target)&&e.target.tagName==="A"}function cb(e){return QN(e)}function XU(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:o,elements:{domReference:i}}=e,{enabled:a=!0,event:s="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:u=!0,stickIfOpen:d=!0}=t,f=h.useRef(),m=h.useRef(!1),y=h.useMemo(()=>({onPointerDown(v){f.current=v.pointerType},onMouseDown(v){const S=f.current;v.button===0&&s!=="click"&&(iu(S,!0)&&c||(n&&l&&(!(o.current.openEvent&&d)||o.current.openEvent.type==="mousedown")?r(!1,v.nativeEvent,"click"):(v.preventDefault(),r(!0,v.nativeEvent,"click"))))},onClick(v){const S=f.current;if(s==="mousedown"&&f.current){f.current=void 0;return}iu(S,!0)&&c||(n&&l&&(!(o.current.openEvent&&d)||o.current.openEvent.type==="click")?r(!1,v.nativeEvent,"click"):r(!0,v.nativeEvent,"click"))},onKeyDown(v){f.current=void 0,!(v.defaultPrevented||!u||lb(v))&&(v.key===" "&&!cb(i)&&(v.preventDefault(),m.current=!0),!HU(v)&&v.key==="Enter"&&r(!(n&&l),v.nativeEvent,"click"))},onKeyUp(v){v.defaultPrevented||!u||lb(v)||cb(i)||v.key===" "&&m.current&&(m.current=!1,r(!(n&&l),v.nativeEvent,"click"))}}),[o,i,s,c,u,r,n,d,l]);return h.useMemo(()=>a?{reference:y}:{},[a,y])}const YU={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},qU={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},ub=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function f0(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:o,dataRef:i}=e,{enabled:a=!0,escapeKey:s=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:u=!1,referencePressEvent:d="pointerdown",ancestorScroll:f=!1,bubbles:m,capture:y}=t,v=u0(),S=ko(typeof l=="function"?l:()=>!1),_=typeof l=="function"?S:l,b=h.useRef(!1),{escapeKey:w,outsidePress:x}=ub(m),{escapeKey:N,outsidePress:C}=ub(y),T=h.useRef(!1),k=ko(U=>{var W;if(!n||!a||!s||U.key!=="Escape"||T.current)return;const $=(W=i.current.floatingContext)==null?void 0:W.nodeId,M=v?jd(v.nodesRef.current,$):[];if(!w&&(U.stopPropagation(),M.length>0)){let P=!0;if(M.forEach(B=>{var V;if((V=B.context)!=null&&V.open&&!B.context.dataRef.current.__escapeKeyBubbles){P=!1;return}}),!P)return}r(!1,CU(U)?U.nativeEvent:U,"escape-key")}),D=ko(U=>{var W;const $=()=>{var M;k(U),(M=ws(U))==null||M.removeEventListener("keydown",$)};(W=ws(U))==null||W.addEventListener("keydown",$)}),R=ko(U=>{var W;const $=i.current.insideReactTree;i.current.insideReactTree=!1;const M=b.current;if(b.current=!1,c==="click"&&M||$||typeof _=="function"&&!_(U))return;const P=ws(U),B="["+Su("inert")+"]",V=Ro(o.floating).querySelectorAll(B);let q=bt(P)?P:null;for(;q&&!ii(q);){const Y=di(q);if(ii(Y)||!bt(Y))break;q=Y}if(V.length&&bt(P)&&!EU(P)&&!al(P,o.floating)&&Array.from(V).every(Y=>!al(q,Y)))return;if(Fn(P)&&O){const Y=ii(P),ce=_r(P),me=/auto|scroll/,fe=Y||me.test(ce.overflowX),ie=Y||me.test(ce.overflowY),he=fe&&P.clientWidth>0&&P.scrollWidth>P.clientWidth,oe=ie&&P.clientHeight>0&&P.scrollHeight>P.clientHeight,re=ce.direction==="rtl",le=oe&&(re?U.offsetX<=P.offsetWidth-P.clientWidth:U.offsetX>P.clientWidth),Z=he&&U.offsetY>P.clientHeight;if(le||Z)return}const Q=(W=i.current.floatingContext)==null?void 0:W.nodeId,H=v&&jd(v.nodesRef.current,Q).some(Y=>{var ce;return $h(U,(ce=Y.context)==null?void 0:ce.elements.floating)});if($h(U,o.floating)||$h(U,o.domReference)||H)return;const K=v?jd(v.nodesRef.current,Q):[];if(K.length>0){let Y=!0;if(K.forEach(ce=>{var me;if((me=ce.context)!=null&&me.open&&!ce.context.dataRef.current.__outsidePressBubbles){Y=!1;return}}),!Y)return}r(!1,U,"outside-press")}),I=ko(U=>{var W;const $=()=>{var M;R(U),(M=ws(U))==null||M.removeEventListener(c,$)};(W=ws(U))==null||W.addEventListener(c,$)});h.useEffect(()=>{if(!n||!a)return;i.current.__escapeKeyBubbles=w,i.current.__outsidePressBubbles=x;let U=-1;function W(V){r(!1,V,"ancestor-scroll")}function $(){window.clearTimeout(U),T.current=!0}function M(){U=window.setTimeout(()=>{T.current=!1},gp()?5:0)}const P=Ro(o.floating);s&&(P.addEventListener("keydown",N?D:k,N),P.addEventListener("compositionstart",$),P.addEventListener("compositionend",M)),_&&P.addEventListener(c,C?I:R,C);let B=[];return f&&(bt(o.domReference)&&(B=ta(o.domReference)),bt(o.floating)&&(B=B.concat(ta(o.floating))),!bt(o.reference)&&o.reference&&o.reference.contextElement&&(B=B.concat(ta(o.reference.contextElement)))),B=B.filter(V=>{var q;return V!==((q=P.defaultView)==null?void 0:q.visualViewport)}),B.forEach(V=>{V.addEventListener("scroll",W,{passive:!0})}),()=>{s&&(P.removeEventListener("keydown",N?D:k,N),P.removeEventListener("compositionstart",$),P.removeEventListener("compositionend",M)),_&&P.removeEventListener(c,C?I:R,C),B.forEach(V=>{V.removeEventListener("scroll",W)}),window.clearTimeout(U)}},[i,o,s,_,c,n,r,f,a,w,x,k,N,D,R,C,I]),h.useEffect(()=>{i.current.insideReactTree=!1},[i,_,c]);const z=h.useMemo(()=>({onKeyDown:k,...u&&{[YU[d]]:U=>{r(!1,U.nativeEvent,"reference-press")},...d!=="click"&&{onClick(U){r(!1,U.nativeEvent,"reference-press")}}}}),[k,r,u,d]),O=h.useMemo(()=>({onKeyDown:k,onMouseDown(){b.current=!0},onMouseUp(){b.current=!0},[qU[c]]:()=>{i.current.insideReactTree=!0}}),[k,c,i]);return h.useMemo(()=>a?{reference:z,floating:O}:{},[a,z,O])}function KU(e){const{open:t=!1,onOpenChange:n,elements:r}=e,o=Rp(),i=h.useRef({}),[a]=h.useState(()=>VU()),s=c0()!=null,[l,c]=h.useState(r.reference),u=ko((m,y,v)=>{i.current.openEvent=m?y:void 0,a.emit("openchange",{open:m,event:y,reason:v,nested:s}),n==null||n(m,y,v)}),d=h.useMemo(()=>({setPositionReference:c}),[]),f=h.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return h.useMemo(()=>({dataRef:i,open:t,onOpenChange:u,elements:f,events:a,floatingId:o,refs:d}),[t,u,f,a,o,d])}function p0(e){e===void 0&&(e={});const{nodeId:t}=e,n=KU({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,o=r.elements,[i,a]=h.useState(null),[s,l]=h.useState(null),u=(o==null?void 0:o.domReference)||i,d=h.useRef(null),f=u0();po(()=>{u&&(d.current=u)},[u]);const m=g5({...e,elements:{...o,...s&&{reference:s}}}),y=h.useCallback(w=>{const x=bt(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),getClientRects:()=>w.getClientRects(),contextElement:w}:w;l(x),m.refs.setReference(x)},[m.refs]),v=h.useCallback(w=>{(bt(w)||w===null)&&(d.current=w,a(w)),(bt(m.refs.reference.current)||m.refs.reference.current===null||w!==null&&!bt(w))&&m.refs.setReference(w)},[m.refs]),S=h.useMemo(()=>({...m.refs,setReference:v,setPositionReference:y,domReference:d}),[m.refs,v,y]),_=h.useMemo(()=>({...m.elements,domReference:u}),[m.elements,u]),b=h.useMemo(()=>({...m,...r,refs:S,elements:_,nodeId:t}),[m,S,_,t,r]);return po(()=>{r.dataRef.current.floatingContext=b;const w=f==null?void 0:f.nodesRef.current.find(x=>x.id===t);w&&(w.context=b)}),h.useMemo(()=>({...m,context:b,refs:S,elements:_}),[m,S,_,b])}function zh(){return _U()&&ZN()}function ZU(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:o,dataRef:i,elements:a}=e,{enabled:s=!0,visibleOnly:l=!0}=t,c=h.useRef(!1),u=h.useRef(-1),d=h.useRef(!0);h.useEffect(()=>{if(!s)return;const m=ir(a.domReference);function y(){!n&&Fn(a.domReference)&&a.domReference===Gg(Ro(a.domReference))&&(c.current=!0)}function v(){d.current=!0}function S(){d.current=!1}return m.addEventListener("blur",y),zh()&&(m.addEventListener("keydown",v,!0),m.addEventListener("pointerdown",S,!0)),()=>{m.removeEventListener("blur",y),zh()&&(m.removeEventListener("keydown",v,!0),m.removeEventListener("pointerdown",S,!0))}},[a.domReference,n,s]),h.useEffect(()=>{if(!s)return;function m(y){let{reason:v}=y;(v==="reference-press"||v==="escape-key")&&(c.current=!0)}return o.on("openchange",m),()=>{o.off("openchange",m)}},[o,s]),h.useEffect(()=>()=>{Tr(u)},[]);const f=h.useMemo(()=>({onMouseLeave(){c.current=!1},onFocus(m){if(c.current)return;const y=ws(m.nativeEvent);if(l&&bt(y)){if(zh()&&!m.relatedTarget){if(!d.current&&!QN(y))return}else if(!SU(y))return}r(!0,m.nativeEvent,"focus")},onBlur(m){c.current=!1;const y=m.relatedTarget,v=m.nativeEvent,S=bt(y)&&y.hasAttribute(Su("focus-guard"))&&y.getAttribute("data-type")==="outside";u.current=window.setTimeout(()=>{var _;const b=Gg(a.domReference?a.domReference.ownerDocument:document);!y&&b===a.domReference||al((_=i.current.floatingContext)==null?void 0:_.refs.floating.current,b)||al(a.domReference,b)||S||r(!1,v,"focus")})}}),[i,a.domReference,r,l]);return h.useMemo(()=>s?{reference:f}:{},[s,f])}function jh(e,t,n){const r=new Map,o=n==="item";let i=e;if(o&&e){const{[tb]:a,[nb]:s,...l}=e;i=l}return{...n==="floating"&&{tabIndex:-1,[PU]:""},...i,...t.map(a=>{const s=a?a[n]:null;return typeof s=="function"?e?s(e):null:s}).concat(e).reduce((a,s)=>(s&&Object.entries(s).forEach(l=>{let[c,u]=l;if(!(o&&[tb,nb].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof u=="function"){var d;(d=r.get(c))==null||d.push(u),a[c]=function(){for(var f,m=arguments.length,y=new Array(m),v=0;v<m;v++)y[v]=arguments[v];return(f=r.get(c))==null?void 0:f.map(S=>S(...y)).find(S=>S!==void 0)}}}else a[c]=u}),a),{})}}function h0(e){e===void 0&&(e=[]);const t=e.map(s=>s==null?void 0:s.reference),n=e.map(s=>s==null?void 0:s.floating),r=e.map(s=>s==null?void 0:s.item),o=h.useCallback(s=>jh(s,e,"reference"),t),i=h.useCallback(s=>jh(s,e,"floating"),n),a=h.useCallback(s=>jh(s,e,"item"),r);return h.useMemo(()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:a}),[o,i,a])}const QU=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function r2(e,t){var n,r;t===void 0&&(t={});const{open:o,elements:i,floatingId:a}=e,{enabled:s=!0,role:l="dialog"}=t,c=Rp(),u=((n=i.domReference)==null?void 0:n.id)||c,d=h.useMemo(()=>{var b;return((b=xU(i.floating))==null?void 0:b.id)||a},[i.floating,a]),f=(r=QU.get(l))!=null?r:l,y=c0()!=null,v=h.useMemo(()=>f==="tooltip"||l==="label"?{["aria-"+(l==="label"?"labelledby":"describedby")]:o?d:void 0}:{"aria-expanded":o?"true":"false","aria-haspopup":f==="alertdialog"?"dialog":f,"aria-controls":o?d:void 0,...f==="listbox"&&{role:"combobox"},...f==="menu"&&{id:u},...f==="menu"&&y&&{role:"menuitem"},...l==="select"&&{"aria-autocomplete":"none"},...l==="combobox"&&{"aria-autocomplete":"list"}},[f,d,y,o,u,l]),S=h.useMemo(()=>{const b={id:d,...f&&{role:f}};return f==="tooltip"||l==="label"?b:{...b,...f==="menu"&&{"aria-labelledby":u}}},[f,d,u,l]),_=h.useCallback(b=>{let{active:w,selected:x}=b;const N={role:"option",...w&&{id:d+"-fui-option"}};switch(l){case"select":case"combobox":return{...N,"aria-selected":x}}return{}},[d,l]);return h.useMemo(()=>s?{reference:v,floating:S,item:_}:{},[s,v,S,_])}function sl({toggleBtn:e,toggleBtnAs:t="button",showCaret:n=!0,caretClassName:r,caretStyle:o,contentPin:i="bottom-end",toggleWidth:a=!1,toggleBtnClassName:s,toggleBtnStyle:l,maxHeight:c="200px",contentDivClassName:u,contentDivStyle:d,children:f,ariaLabel:m,disabled:y=!1,themeType:v="nekotech",className:S,style:_,isOpen:b,onOpenChange:w,...x}){const N=b!==void 0,[C,T]=h.useState(!1),k=N?b:C,D=me=>{N||T(me),w==null||w(me)},[R,I]=h.useState(-1),z=h.useRef(null),O=h.useId(),U=h.useId(),{refs:W,floatingStyles:$,context:M}=p0({open:k,onOpenChange:D,placement:i,middleware:[qC(8),ZC(),KC({padding:16}),...a?[v5({apply({rects:me,elements:fe}){Object.assign(fe.floating.style,{width:`${me.reference.width}px`})}})]:[]],whileElementsMounted:XC}),P=XU(M,{enabled:!y}),B=f0(M,{enabled:!y}),V=r2(M,{role:"menu"}),{getReferenceProps:q,getFloatingProps:Q}=h0([P,B,V]),H=wl(gU,v,{maxHeight:c,isOpen:k}),K=()=>{if(!z.current)return[];const me='button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"]):not([disabled])';return Array.from(z.current.querySelectorAll(me))};h.useEffect(()=>{const me=fe=>{var oe,re;if(y)return;const ie=K(),he=W.reference.current;switch(fe.key){case"Escape":k&&(fe.preventDefault(),D(!1),I(-1),he==null||he.focus());break;case"ArrowDown":if(k){fe.preventDefault();const le=R<ie.length-1?R+1:0;I(le),(oe=ie[le])==null||oe.focus()}else document.activeElement===he&&(fe.preventDefault(),D(!0),setTimeout(()=>{const le=K();le.length>0&&(I(0),le[0].focus())},100));break;case"ArrowUp":if(k){fe.preventDefault();const le=R>0?R-1:ie.length-1;I(le),(re=ie[le])==null||re.focus()}break;case"Home":k&&ie.length>0&&(fe.preventDefault(),I(0),ie[0].focus());break;case"End":if(k&&ie.length>0){fe.preventDefault();const le=ie.length-1;I(le),ie[le].focus()}break;case"Tab":k&&setTimeout(()=>{const le=document.activeElement,Z=W.floating.current,ae=Z==null?void 0:Z.contains(le),J=he==null?void 0:he.contains(le);!ae&&!J&&(D(!1),I(-1))},0);break}};return k&&document.addEventListener("keydown",me),()=>{document.removeEventListener("keydown",me)}},[k,R,y,W]),h.useEffect(()=>{k||I(-1)},[k]);const Y=p(Ht,{iconName:"three-dots","aria-hidden":"true"}),ce={ref:W.setReference,...q(),id:O,className:j(ne.flex,ne.alignItemsCenter,mv.cursorPointer,st.fitContent,ne.flexGapS,s,S),style:{...l,..._},"aria-expanded":k,"aria-haspopup":"true","aria-controls":U,"aria-label":m||"Toggle dropdown menu",...t==="button"&&{disabled:y,type:"button"},...x};return L(gt,{children:[be.createElement(t,ce,L(gt,{children:[e||Y,n&&p(un.div,{...H.caret,className:j(r),style:o,"aria-hidden":"true",children:p(Ht,{iconName:"caret-down"})})]})),p(d0,{children:p("div",{ref:W.setFloating,...Q(),style:{...$,zIndex:1e4},children:p(bu,{children:k&&p(un.div,{ref:z,id:U,role:"group","aria-labelledby":O,className:j(ne.flexColumn,Qw.dropdownContent,u),style:d,...H.content,"aria-live":"polite",children:p("div",{className:j(Qw.contentContainer),role:"group","aria-label":"Dropdown content",children:f})})})})})]})}const o2=h.forwardRef(({iconName:e,iconColor:t,iconSize:n,iconPosition:r="left",text:o,textColor:i,textSize:a,className:s,style:l,as:c="span",...u},d)=>{const f=e?p(Ht,{iconName:e,color:t,size:n}):null;return L(c,{ref:d,className:j(ne.flex,ne.alignItemsCenter,ne.flexGapS,mv.transformStylePreserve3d,s),style:{...l,color:i,fontSize:a},...u,children:[f&&(r==="left"||r==="both")&&f,o,f&&(r==="right"||r==="both")&&f]})});o2.displayName="IconSpan";function xe({children:e,iconName:t="bounding-box-circles",iconPosition:n="left",iconColor:r,iconSize:o,className:i,themeType:a="basic",...s}){const l=()=>e?t?p(o2,{iconName:t,text:e,iconColor:r,iconSize:o,iconPosition:n}):e:p(Ht,{iconName:t,color:r,size:o});return p(Ke,{themeType:a,className:j(i),...s,children:l()})}const JU="_container_15lg6_1",ez="_title_15lg6_7",tz="_progressBarArea_15lg6_13",nz="_overallLabel_15lg6_17",rz="_overallBarTrack_15lg6_23",oz="_overallBarFill_15lg6_31",iz="_subSteps_15lg6_38",az="_stepRow_15lg6_44",sz="_stepTitle_15lg6_53",lz="_stepCompleted_15lg6_57",cz="_stepBarTrack_15lg6_61",uz="_stepBarFill_15lg6_69",dz="_stepNote_15lg6_76",Rn={container:JU,title:ez,progressBarArea:tz,overallLabel:nz,overallBarTrack:rz,overallBarFill:oz,subSteps:iz,stepRow:az,stepTitle:sz,stepCompleted:lz,stepBarTrack:cz,stepBarFill:uz,stepNote:dz},cc=h.forwardRef(({onClose:e},t)=>{const n=h.useRef([]),[r,o]=h.useState(0),i=h.useRef(-1),[a,s]=h.useState([]),l=h.useRef(null),c=h.useRef([]),u=h.useRef(null),d=h.useRef(null),f=h.useRef(null);h.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]),h.useImperativeHandle(t,()=>({init(y,v){if(n.current=y||[],i.current=n.current.findIndex(S=>S.key==="uploading"),o(0),v!=null&&v.title&&u.current&&(u.current.innerText=v.title),v!=null&&v.subStepsForKey){const S=Object.keys(v.subStepsForKey)[0];if(S){const _=v.subStepsForKey[S]||[];s(_),c.current=_.map(()=>({barRef:null,noteRef:null,titleRef:null}))}}n.current&&n.current.length>0&&u.current&&(u.current.innerText=n.current[0].title)},addSubSteps(y,v){s(v||[]),c.current=v.map(()=>({barRef:null,noteRef:null,titleRef:null}))},updateProgress({mainStepIndex:y,stepIndex:v,stepKey:S,subStepKey:_,percent:b,title:w,note:x,subStepCompleted:N}){var T;if(typeof y=="number"&&(o(y),n.current&&n.current[y]&&u.current&&(u.current.innerText=n.current[y].title)),typeof v=="number"&&v===-1&&typeof b=="number"){if(d.current){const k=Math.max(0,Math.min(1,b));d.current.style.width=`${Math.round(k*100)}%`}return}let C=-1;if(typeof v=="number"&&v>=0?C=v:_&&a?C=a.findIndex(k=>k.key===_):S&&a&&(C=a.findIndex(k=>k.key===S)),C>=0){const k=c.current[C];if(!k)return;if(k.barRef&&typeof b=="number"){const D=Math.max(0,Math.min(1,b));k.barRef.style.width=`${Math.round(D*100)}%`,k.barRef.setAttribute("aria-valuenow",String(Math.round(D*100)))}k.titleRef&&w&&(k.titleRef.innerText=w),k.noteRef&&(k.noteRef.innerText=x||""),N&&k.titleRef&&k.titleRef.classList.add(Rn.stepCompleted);try{(T=k.titleRef)==null||T.scrollIntoView({behavior:"smooth",block:"center"})}catch{}}},increment(y,v){let S=typeof y=="number"?y:a.findIndex(x=>x.key===y);if(S==null||S<0)return;const _=c.current[S];if(!_||!_.barRef)return;const b=parseFloat(_.barRef.style.width.replace("%","")||"0"),w=Math.max(0,Math.min(100,b+v*100));_.barRef.style.width=`${Math.round(w)}%`,_.barRef.setAttribute("aria-valuenow",String(Math.round(w)))},complete(y,v,S=1e3){u.current&&(u.current.innerText=v||(y?"Completed":"Failed")),S!=null&&y&&(f.current=setTimeout(()=>{e&&e()},S))},close(){e&&e()}}),[e,a]);const m=a.length>0&&r===i.current;return L("div",{className:Rn.container,children:[p("div",{className:Rn.title,ref:y=>{u.current=y},children:"Processing..."}),L("div",{className:Rn.progressBarArea,children:[p("div",{className:Rn.overallLabel,children:"Overall progress"}),p("div",{className:Rn.overallBarWrap,children:p("div",{className:Rn.overallBarTrack,children:p("div",{className:Rn.overallBarFill,ref:y=>{d.current=y},style:{width:"0%"},"aria-hidden":!0})})})]}),m&&p("div",{className:Rn.subSteps,ref:y=>{l.current=y},children:a.map((y,v)=>L("div",{className:Rn.stepRow,children:[p("div",{className:Rn.stepTitle,ref:S=>{c.current[v]&&(c.current[v].titleRef=S)},children:y.title}),p("div",{className:Rn.stepBar,children:p("div",{className:Rn.stepBarTrack,children:p("div",{className:Rn.stepBarFill,ref:S=>{c.current[v]&&(c.current[v].barRef=S)},style:{width:"0%"},role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0})})}),p("div",{className:Rn.stepNote,ref:S=>{c.current[v]&&(c.current[v].noteRef=S)}})]},y.key||`${v}`))})]})});function i2(e,t){var c;const{padding:n=20,backgroundColor:r="white",includeStyles:o=!0}=t??{},i=e.cloneNode(!0),a=((c=i.getAttribute("viewBox"))==null?void 0:c.split(" ").map(Number))??[];if(a.length===4){const[u,d,f,m]=a;i.setAttribute("viewBox",`${u-n} ${d-n} ${f+n*2} ${m+n*2}`)}if(r){const u=document.createElementNS("http://www.w3.org/2000/svg","rect");a.length===4&&(u.setAttribute("x",String(a[0]-n)),u.setAttribute("y",String(a[1]-n)),u.setAttribute("width",String(a[2]+n*2)),u.setAttribute("height",String(a[3]+n*2))),u.setAttribute("fill",r),i.insertBefore(u,i.firstChild)}const l=new XMLSerializer().serializeToString(i);return new Blob([l],{type:"image/svg+xml;charset=utf-8"})}async function fz(e,t){const{padding:n=20,backgroundColor:r="white",scale:o=2,quality:i=.95}=t??{},a=i2(e,{padding:n,backgroundColor:r}),s=URL.createObjectURL(a);try{const l=new Image;await new Promise((f,m)=>{l.onload=()=>f(),l.onerror=()=>m(new Error("Failed to load SVG image")),l.src=s});const c=document.createElement("canvas"),u=c.getContext("2d");if(!u)throw new Error("Failed to get canvas 2D context");return c.width=l.width*o,c.height=l.height*o,u.scale(o,o),u.drawImage(l,0,0),await new Promise((f,m)=>{c.toBlob(y=>{y?f(y):m(new Error("Canvas to blob conversion failed"))},"image/png",i)})}finally{URL.revokeObjectURL(s)}}function zf(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}function db(e,t){const n=e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"").substring(0,50),r=Date.now();return`${n||"translation"}-${r}.${t}`}const Hg=["glyphs","graphemes","grapheme_glyphs","phonemes","lexicon","lexicon_spelling","lexicon_ancestry","lexicon_ancestry_closure"],pz=["glyphs","graphemes","grapheme_glyphs","phonemes","lexicon","lexicon_spelling","lexicon_ancestry"],a2=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?t>>>1^3988292384:t>>>1;a2[e]=t}function s2(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^a2[(t^e[n])&255];return(t^4294967295)>>>0}const l2=Hg;function hz(e,t){const n=e.exec(`SELECT * FROM ${t}`);if(n.length===0)return[];const{columns:r,values:o}=n[0];return o.map(i=>{const a={};return r.forEach((s,l)=>{a[s]=i[l]}),a})}function c2(){const e=Ie(),t=sp(),n={};for(const r of l2)n[r]=hz(e,r);return{magic:"ETYMOLOG_EXPORT",version:1,exportedAt:new Date().toISOString(),conlangName:t.conlangName,settings:t,tables:n}}function u2(e){return JSON.stringify(e,null,2)}function d2(e){let t;try{t=JSON.parse(e)}catch{throw new Error("Invalid JSON: could not parse the input")}if(t.magic!=="ETYMOLOG_EXPORT")throw new Error("Not an Etymolog export file");if(t.version!==1)throw new Error(`Unsupported export version: ${t.version}`);if(!t.tables||typeof t.tables!="object")throw new Error("Missing tables object");for(const n of l2){if(!(n in t.tables))throw new Error(`Missing table: ${n}`);if(!Array.isArray(t.tables[n]))throw new Error(`Table ${n} is not an array`)}if(!t.settings||typeof t.settings!="object")throw new Error("Missing settings");return t}function f2(e,t){Cx();const n=Ie(),r=Hg.reduce((i,a)=>i+e.tables[a].length,0);let o=0;for(const i of Hg){const a=e.tables[i];if(a.length===0)continue;const s=Object.keys(a[0]),l=s.map(()=>"?").join(", "),c=`INSERT INTO ${i} (${s.join(", ")}) VALUES (${l})`;for(const u of a){const d=s.map(f=>u[f]);n.run(c,d),o++,t==null||t("import",.2+.7*(o/r),`Importing ${i}...`)}}for(const i of pz)e.tables[i].length>0&&n.run(`UPDATE sqlite_sequence SET seq = (SELECT MAX(id) FROM ${i}) WHERE name = '${i}'`);ut(),localStorage.setItem("etymolog_settings_v1",JSON.stringify(e.settings))}async function mz(e){const t=new CompressionStream("gzip"),n=t.writable.getWriter();n.write(e),n.close();const r=t.readable.getReader(),o=[];for(;;){const{done:i,value:a}=await r.read();if(i)break;o.push(a)}return p2(o)}async function gz(e){const t=new DecompressionStream("gzip"),n=t.writable.getWriter();n.write(e),n.close();const r=t.readable.getReader(),o=[];for(;;){const{done:i,value:a}=await r.read();if(i)break;o.push(a)}return p2(o)}function p2(e){const t=e.reduce((o,i)=>o+i.length,0),n=new Uint8Array(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return n}const Xg=new Uint8Array([69,84,89,77,79,76,79,71]),Yg=new Uint8Array([69,78,68,69,84,89,77,79]),h2=1,uc=13,m2=12;function yz(e,t){const n=uc+e.length+m2,r=new Uint8Array(n);let o=0;r.set(Xg,o),o+=8,r[o++]=h2,r[o++]=e.length>>>24&255,r[o++]=e.length>>>16&255,r[o++]=e.length>>>8&255,r[o++]=e.length&255,r.set(e,o),o+=e.length,r[o++]=t>>>24&255,r[o++]=t>>>16&255,r[o++]=t>>>8&255,r[o++]=t&255,r.set(Yg,o);const i=Math.ceil(n/3),a=Math.ceil(Math.sqrt(i)),s=Math.ceil(i/a),l=new Uint8ClampedArray(a*s*4);for(let c=0;c<a*s;c++){const u=c*3;l[c*4+0]=u<n?r[u]:0,l[c*4+1]=u+1<n?r[u+1]:0,l[c*4+2]=u+2<n?r[u+2]:0,l[c*4+3]=255}return{pixels:l,width:a,height:s}}function vz(e,t,n){const r=t*n,o=new Uint8Array(r*3);for(let d=0;d<r;d++)o[d*3+0]=e[d*4+0],o[d*3+1]=e[d*4+1],o[d*3+2]=e[d*4+2];for(let d=0;d<Xg.length;d++)if(o[d]!==Xg[d])throw new Error("Invalid data: missing start marker");const i=o[8];if(i!==h2)throw new Error(`Unsupported pixel codec version: ${i}`);const a=o[9]<<24|o[10]<<16|o[11]<<8|o[12];if(a<0||uc+a+m2>o.length)throw new Error("Invalid data: wrong data length");const s=o.slice(uc,uc+a),l=uc+a,c=(o[l]<<24|o[l+1]<<16|o[l+2]<<8|o[l+3])>>>0,u=l+4;for(let d=0;d<Yg.length;d++)if(o[u+d]!==Yg[d])throw new Error("Invalid data: missing end marker");return{compressedData:s,crc:c}}async function _z(e){const t=new TextEncoder().encode(e),n=s2(t),r=await mz(t);return yz(r,n)}async function wz(e,t,n){const{compressedData:r,crc:o}=vz(e,t,n),i=await gz(r);if(s2(i)!==o)throw new Error("Data integrity check failed: CRC mismatch");return new TextDecoder().decode(i)}const Fa=20,Rc=48,Wh=48,Ys=[69,88,80];async function bz(e,t,n,r){const o=t+Fa*2,i=n+Rc+Wh,a=document.createElement("canvas");a.width=o,a.height=i;const s=a.getContext("2d");s.fillStyle="#0a0a0f",s.fillRect(0,0,o,i),s.strokeStyle="rgba(0, 212, 255, 0.4)",s.lineWidth=1,s.strokeRect(2,2,o-4,i-4),s.font="16px monospace",s.fillStyle="#00d4ff",s.textAlign="left",s.fillText(r,Fa,Rc-16),s.font="12px monospace",s.fillStyle="#888888",s.textAlign="right",s.fillText("Etymolog",o-Fa,i-Wh+20),s.font="10px monospace",s.fillStyle="#666666",s.fillText("by Kerbash",o-Fa,i-Wh+36);const l=new ImageData(e,t,n);s.putImageData(l,Fa,Rc);const c=s.getImageData(0,0,3,1),u=c.data;return u[0]=Ys[0],u[1]=Ys[1],u[2]=Ys[2],u[3]=255,u[4]=t>>8&255,u[5]=t&255,u[6]=n>>8&255,u[7]=255,u[8]=n&255,u[9]=0,u[10]=0,u[11]=255,s.putImageData(c,0,0),new Promise((d,f)=>{a.toBlob(m=>m?d(m):f(new Error("Failed to create PNG")),"image/png")})}async function Ez(e){const t=await xz(e),{fullW:n,fullH:r,fullPixels:o}=await Sz(t);if(o[0]!==Ys[0]||o[1]!==Ys[1]||o[2]!==Ys[2])throw new Error("Not a valid Etymolog image: missing metadata marker");const i=o[4]<<8|o[5],a=o[6]<<8|o[8];if(i<=0||a<=0||Fa+i>n||Rc+a>r)throw new Error("Invalid Etymolog image: data dimensions out of bounds");const s=new Uint8ClampedArray(i*a*4);for(let l=0;l<a;l++)for(let c=0;c<i;c++){const u=((l+Rc)*n+(c+Fa))*4,d=(l*i+c)*4;s[d]=o[u],s[d+1]=o[u+1],s[d+2]=o[u+2],s[d+3]=o[u+3]}return{pixels:s,width:i,height:a}}function Sz(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>{const o=document.createElement("canvas");o.width=r.width,o.height=r.height;const i=o.getContext("2d");if(!i)return n(new Error("Failed to get canvas context"));i.drawImage(r,0,0);const a=i.getImageData(0,0,r.width,r.height);t({fullW:r.width,fullH:r.height,fullPixels:a.data})},r.onerror=()=>n(new Error("Failed to load image")),r.src=e})}function xz(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=()=>n(new Error("Failed to read file")),r.readAsDataURL(e)})}function Cz(e){e==null||e("collect",0,"Reading database...");const t=c2();e==null||e("serialize",.5,"Serializing...");const n=u2(t);return e==null||e("done",1),n}async function Tz(e){e==null||e("collect",0,"Reading database...");const t=c2();e==null||e("serialize",.15,"Serializing...");const n=u2(t);e==null||e("compress",.3,"Encoding image...");const{pixels:r,width:o,height:i}=await _z(n);e==null||e("frame",.8,"Building PNG frame...");const a=await bz(r,o,i,t.conlangName);return e==null||e("done",1),a}function Nz(e,t){t==null||t("validate",0,"Validating...");const n=d2(e);t==null||t("import",.2,"Importing data..."),f2(n,t),t==null||t("done",1,"Import complete")}async function kz(e,t){t==null||t("extract",0,"Extracting image data...");const{pixels:n,width:r,height:o}=await Ez(e);t==null||t("decode",.15,"Decoding image data...");const i=await wz(n,r,o);t==null||t("validate",.6,"Validating...");const a=d2(i);t==null||t("import",.7,"Importing data..."),f2(a,t),t==null||t("done",1,"Import complete")}function g2(){const{settings:e,refresh:t}=Xt(),{setContent:n,clearContent:r}=XN(),o=h.useCallback(()=>{const l=be.createRef(),c=be.createElement(cc,{ref:l,onClose:r});n(c),setTimeout(()=>{var u,d,f;try{(u=l.current)==null||u.init([{key:"export",title:"Exporting JSON..."}]);const m=Cz((v,S)=>{var _;(_=l.current)==null||_.updateProgress({stepIndex:-1,percent:S})}),y=new Blob([m],{type:"application/json"});zf(y,`${e.conlangName}.etymolog.json`),(d=l.current)==null||d.complete(!0,"Export complete!",2e3)}catch(m){(f=l.current)==null||f.complete(!1,m.message)}},0)},[e.conlangName,n,r]),i=h.useCallback(()=>{const l=be.createRef(),c=be.createElement(cc,{ref:l,onClose:r});n(c),setTimeout(async()=>{var u,d,f;try{(u=l.current)==null||u.init([{key:"export",title:"Exporting Image..."}]);const m=await Tz((y,v)=>{var S;(S=l.current)==null||S.updateProgress({stepIndex:-1,percent:v})});zf(m,`${e.conlangName}.etymolog.png`),(d=l.current)==null||d.complete(!0,"Export complete!",2e3)}catch(m){(f=l.current)==null||f.complete(!1,m.message)}},0)},[e.conlangName,n,r]),a=h.useCallback((l,c)=>{const u=be.createRef(),d=be.createElement(cc,{ref:u,onClose:r});n(d),setTimeout(()=>{var f,m,y;try{(f=u.current)==null||f.init([{key:"import",title:"Importing JSON..."}]),Nz(l,(v,S)=>{var _;(_=u.current)==null||_.updateProgress({stepIndex:-1,percent:S})}),t(),(m=u.current)==null||m.complete(!0,"Import complete!",2e3),c&&setTimeout(c,2e3)}catch(v){(y=u.current)==null||y.complete(!1,v.message)}},0)},[n,r,t]),s=h.useCallback((l,c)=>{const u=be.createRef(),d=be.createElement(cc,{ref:u,onClose:r});n(d),setTimeout(async()=>{var f,m,y;try{(f=u.current)==null||f.init([{key:"import",title:"Importing Image..."}]),await kz(l,(v,S)=>{var _;(_=u.current)==null||_.updateProgress({stepIndex:-1,percent:S})}),t(),(m=u.current)==null||m.complete(!0,"Import complete!",2e3),c&&setTimeout(c,2e3)}catch(v){(y=u.current)==null||y.complete(!1,v.message)}},0)},[n,r,t]);return{handleExportJson:o,handleExportImage:i,handleImportJson:a,handleImportImage:s}}const Az="_modalContentTemplate_4h181_1",Rz="_modalContent_4h181_1",Iz="_menuItem_4h181_12",Lz="_textarea_4h181_32",Oz="_fileInput_4h181_46",Pz="_errorMessage_4h181_53",Mz="_fileName_4h181_59",Dr={modalContentTemplate:Az,modalContent:Rz,menuItem:Iz,textarea:Lz,fileInput:Oz,errorMessage:Pz,fileName:Mz};function Dz({isOpen:e,setIsOpen:t,onImport:n}){const[r,o]=h.useState(""),[i,a]=h.useState("");return h.useEffect(()=>{e&&(o(""),a(""))},[e]),p(zn,{isOpen:e,setIsOpen:t,children:L("form",{onSubmit:l=>{l.preventDefault();const c=r.trim();if(!c){a("Please paste JSON data");return}n(c),t(!1)},className:j(Dr.modalContent,ne.flexColumn,ne.flexGapM),children:[p("h2",{style:{margin:0},children:"Import from JSON"}),p("textarea",{className:Dr.textarea,value:r,onChange:l=>{o(l.target.value),a("")},placeholder:"Paste Etymolog JSON export data here...",autoFocus:!0}),i&&p("p",{className:Dr.errorMessage,children:i}),L("div",{className:j(ne.flexRow,ne.justifyContentEnd,ne.flexGapS),children:[p(Ke,{type:"button",className:qe.secondary,onClick:()=>t(!1),children:"Cancel"}),p(Ke,{type:"submit",className:qe.primary,disabled:!r.trim(),children:"Import"})]})]})})}function Fz({isOpen:e,setIsOpen:t,onImport:n}){const[r,o]=h.useState(null),[i,a]=h.useState("");h.useEffect(()=>{e&&(o(null),a(""))},[e]);const s=c=>{var d;a("");const u=(d=c.target.files)==null?void 0:d[0];u&&o(u)};return p(zn,{isOpen:e,setIsOpen:t,children:L("form",{onSubmit:c=>{if(c.preventDefault(),!r){a("Please select a file");return}n(r),t(!1)},className:j(Dr.modalContent,ne.flexColumn,ne.flexGapM),children:[p("h2",{style:{margin:0},children:"Import from Image"}),p("input",{type:"file",accept:".png",onChange:s,className:Dr.fileInput}),r&&L("p",{className:Dr.fileName,children:["Selected: ",r.name]}),i&&p("p",{className:Dr.errorMessage,children:i}),L("div",{className:j(ne.flexRow,ne.justifyContentEnd,ne.flexGapS),children:[p(Ke,{type:"button",className:qe.secondary,onClick:()=>t(!1),children:"Cancel"}),p(Ke,{type:"submit",className:qe.primary,disabled:!r,children:"Import"})]})]})})}function $z(){const{handleExportJson:e,handleExportImage:t}=g2();return L(sl,{toggleBtn:p(xe,{iconName:"download",children:"Export"}),contentPin:"bottom-end",ariaLabel:"Export conlang data",children:[p("button",{className:Dr.menuItem,onClick:e,children:"Export as JSON"}),p("button",{className:Dr.menuItem,onClick:t,children:"Export as Image"})]})}function y2({onSuccess:e}={}){const{settings:t}=Xt(),{handleImportJson:n,handleImportImage:r}=g2(),[o,i]=h.useState(!1),[a,s]=h.useState(!1),[l,c]=h.useState(!1),[u,d]=h.useState(null),f=v=>{d({type:"json",data:v})},m=v=>{d({type:"image",data:v})},y=()=>{u&&(u.type==="json"?n(u.data,e):r(u.data,e),d(null))};return L(gt,{children:[L(sl,{toggleBtn:p(xe,{iconName:"upload",children:"Import"}),contentPin:"bottom-end",ariaLabel:"Import conlang data",isOpen:o,onOpenChange:i,children:[p("button",{className:Dr.menuItem,onClick:()=>{i(!1),s(!0)},children:"Import JSON"}),p("button",{className:Dr.menuItem,onClick:()=>{i(!1),c(!0)},children:"Import Image"})]}),p(Dz,{isOpen:a,setIsOpen:s,onImport:f}),p(Fz,{isOpen:l,setIsOpen:c,onImport:m}),p(zn,{isOpen:u!==null,setIsOpen:v=>{v||d(null)},children:L("div",{className:j(Dr.modalContent,ne.flexColumn,ne.flexGapM),children:[p("h2",{style:{margin:0},children:"Confirm Import"}),L("p",{style:{margin:0},children:["This will replace ",p("strong",{children:"ALL"})," current data for ",p("strong",{children:t.conlangName}),". Continue?"]}),L("div",{className:j(ne.flexRow,ne.justifyContentEnd,ne.flexGapS),children:[p(Ke,{className:qe.secondary,onClick:()=>d(null),children:"Cancel"}),p(Ke,{className:qe.primary,onClick:y,children:"Confirm Import"})]})]})})]})}function Bz(){const[e,t]=h.useState(!1),{settings:n,updateSettings:r}=tC(),o=An(),i=s=>{r({conlangName:s}),o("/lexicon")},a=n.conlangName.trim().length>0;return L(qN,{children:[p("div",{className:j(ne.flexColumn,ne.alignItemsCenter),style:{flex:1,justifyContent:"center",minHeight:"60vh"},children:L("div",{className:j(ne.flexColumn,ne.alignItemsCenter,ne.flexGapL),children:[L("div",{className:j(ne.flexColumn,ne.alignItemsCenter,ne.flexGapS),children:[p("h1",{style:{fontSize:"2.5rem",margin:0},children:"Etymolog"}),p("p",{style:{color:"var(--text-secondary)",margin:0},children:"Conlang lexicon and script management"})]}),L("div",{className:j(ne.flexColumn,ne.alignItemsCenter,ne.flexGapM),children:[L("div",{className:j(ne.flexRow,ne.flexGapM,ne.alignItemsCenter),children:[p(Ke,{className:qe.primary,onClick:()=>t(!0),children:"New Conlang"}),p(y2,{onSuccess:()=>o("/lexicon")})]}),a&&L(gt,{children:[L("div",{className:j(ne.flexColumn,ne.alignItemsCenter,ne.flexGapS),children:[p("p",{style:{color:"var(--text-secondary)",margin:0,fontSize:"0.875rem"},children:"Currently loaded:"}),p("p",{style:{color:"var(--text-primary)",margin:0,fontSize:"1.25rem",fontWeight:500},children:n.conlangName})]}),p(Ke,{className:qe.secondary,onClick:()=>o("/lexicon"),children:"Go to Conlang"})]})]})]})}),p(KN,{isOpen:e,setIsOpen:t,onSubmit:i})]})}function Vz({children:e}){const{settings:t}=tC();return t.conlangName?p(gt,{children:e}):p(bx,{to:"/new",replace:!0})}const Uz="_modalContentTemplate_ndb6o_1",zz="_modalContent_ndb6o_1",jz={modalContentTemplate:Uz,modalContent:zz},Wz="_toggleContainer_wn2hg_1",Gz="_toggleButton_wn2hg_6",Hz="_active_wn2hg_14",Xz="_tabContainerBorder_wn2hg_40",dc={toggleContainer:Wz,toggleButton:Gz,active:Hz,tabContainerBorder:Xz},Yz={basic:{content:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeInOut"}}},slide:{content:{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3,ease:"easeInOut"}}},nekotech:{content:{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.4,ease:[.68,-.55,.265,1.55]}}}};function qz(...e){const t={};for(const n of e)if(n)for(const r in n){const o=t[r],i=n[r];if(i!==void 0)if(r==="className"){const a=[o,i].filter(Boolean).join(" ").split(" ").filter((s,l,c)=>s&&c.indexOf(s)===l).join(" ");t[r]=a}else if(r==="style"&&typeof i=="object"&&i!==null)typeof o=="object"&&o!==null?t[r]={...o,...i}:t[r]={...i};else if(r.startsWith("on")&&typeof i=="function"&&typeof o=="function"){const a=o,s=i;t[r]=(...l)=>{a(...l),s(...l)}}else t[r]=i}return t}const Kz=e=>{if(!e)return"";let t=e;["strong","b","em","i","span","p","div","small","mark","del","ins","sub","sup","code","kbd","samp"].forEach(i=>{const a=i==="b"?"strong":i==="i"?"em":i,s=new RegExp(`<${i}(\\s[^>]*)?>`,"gi");t=t.replace(s,`<${a}>`);const l=new RegExp(`</${i}>`,"gi");t=t.replace(l,`</${a}>`)}),t=t.replace(/<br\s*\/?>/gi,"<br>").replace(/<hr\s*\/?>/gi,"<hr>");const r="br|hr|strong|em|span|p|div|small|mark|del|ins|sub|sup|code|kbd|samp";return t=t.replace(new RegExp(`<(?!\\/?(?:${r})\\b)[^>]*>`,"gi"),""),t=t.replace(/on\w+\s*=\s*["'][^"']*["']/gi,"").replace(/(javascript|vbscript|data):/gi,""),Object.entries({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&apos;":"'","&nbsp;":" ","&laquo;":"","&raquo;":"","&ldquo;":'"',"&rdquo;":'"',"&lsquo;":"'","&rsquo;":"'","&ndash;":"","&mdash;":"","&hellip;":"","&copy;":"","&reg;":"","&trade;":"","&euro;":"","&pound;":"","&yen;":"","&sect;":"","&para;":"","&bull;":"","&larr;":"","&uarr;":"","&rarr;":"","&darr;":"","&harr;":""}).forEach(([i,a])=>{t=t.replace(new RegExp(i,"gi"),a)}),t=t.replace(/&#(\d+);/g,(i,a)=>{const s=parseInt(a,10);return s>=32&&s<=126||s>=160&&s<=255?String.fromCharCode(s):i}),t=t.replace(/&#x([0-9a-fA-F]+);/g,(i,a)=>{const s=parseInt(a,16);return s>=32&&s<=126||s>=160&&s<=255?String.fromCharCode(s):i}),t=t.trim(),t},Zz=dc.tabContainerBorder;function fb({sections:e,basePath:t,themeType:n,borderColor:r,className:o,style:i,maintainRender:a,contentContainerProps:s,activeSection:l,onSectionChange:c}){var y;const u=wl(Yz,n||"basic",{}),d=qz({className:ne.flexGrow},s),f=(e||[]).map(v=>p("div",{onClick:()=>c(v.path),className:j(dc.toggleButton,{[dc.active]:v.path===l}),children:v.toggle},v.path)),m=(y=(e||[]).find(v=>v.path===l))==null?void 0:y.content;return L("div",{className:j(dc.container,ne.flexColumn,o),style:{"--tab-border-color":r||"var(--border-primary)",...i},children:[p("div",{className:j(dc.toggleContainer,ne.flexRow),children:f}),a?p("div",{...d,children:(e||[]).map(v=>p("div",{style:{display:v.path===l?"block":"none",height:"100%"},children:v.content},v.path))}):p("div",{style:{display:"grid"},...d,children:p(bu,{mode:"wait",children:m&&p(un.div,{style:{gridArea:"1 / 1",height:"100%"},initial:u.content.initial,animate:u.content.animate,exit:u.content.exit,transition:u.content.transition,children:m},l)})})]})}function m0(e){const{sections:t=[],basePath:n=""}=e,r=An(),o=n.endsWith("/")?n.slice(0,-1):n,i=h.useMemo(()=>t.find(d=>d.isVisible)||t[0],[t]),a=(i==null?void 0:i.path)||"",s=d=>{const f=o?`${o}/${d}`:`/${d}`;r(f)},l=t.filter(d=>d.path!==""),c=t.filter(d=>d.path===""),u=c.length>0;return L(du,{children:[l.map(d=>p(ln,{path:`${d.path}/*`,element:p(fb,{...e,activeSection:d.path,onSectionChange:s})},d.path)),c.map(d=>p(ln,{path:"*",element:p(fb,{...e,activeSection:d.path,onSectionChange:s})},"_index")),!u&&p(ln,{path:"*",element:p(bx,{to:`${o}/${a}`,replace:!0})})]})}function Qz(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t=t&t}return t<0?t:-t-1}function Jz(e){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
        <text x="50" y="60" font-family="serif" font-size="48" text-anchor="middle" fill="currentColor">${e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}</text>
    </svg>`}function e7(e,t){return{id:Qz(e),name:e,svg_data:Jz(e),isVirtual:!0,ipaCharacter:e,sourceIndex:t}}function Ip(e,t){return{id:e.id,name:e.name,svg_data:e.svg_data,isVirtual:!1,sourceIndex:t}}function t7(e){if(e.length===0)return null;const t=e[0];if(typeof t=="object"&&t!==null&&"type"in t){const n=t;if(n.type==="grapheme"||n.type==="ipa")return"spelling-display"}return typeof t=="object"&&t!==null&&"glyphs"in t&&Array.isArray(t.glyphs)?"graphemes":typeof t=="object"&&t!==null&&"isVirtual"in t&&"sourceIndex"in t?"renderable":typeof t=="object"&&t!==null&&"svg_data"in t?"glyphs":typeof t=="number"?"ids":null}function n7(e,t){var o;const n=[];let r=0;for(const i of e)if(i.type==="grapheme"&&i.grapheme){const a=(o=t.graphemeMap)==null?void 0:o.get(i.grapheme.id),s=(a==null?void 0:a.glyphs)??i.grapheme.glyphs;if(s&&s.length>0)for(const l of s)n.push(Ip(l,r++))}else i.type==="ipa"&&i.ipaCharacter&&n.push(e7(i.ipaCharacter,r++));return n}function r7(e){return e.map((t,n)=>Ip(t,n))}function o7(e){const t=[];let n=0;for(const r of e)if(r.glyphs)for(const o of r.glyphs)t.push(Ip(o,n++));return t}function i7(e,t){return t.glyphMap?e.map((n,r)=>{var i;const o=(i=t.glyphMap)==null?void 0:i.get(n);return o?"isVirtual"in o?{...o,sourceIndex:r}:Ip(o,r):(console.warn(`normalizeIds: Glyph with id ${n} not found in glyphMap`),null)}).filter(n=>n!==null):(console.warn("normalizeIds: glyphMap is required but not provided"),[])}function a7(e,t={}){if(!e||e.length===0)return[];switch(t7(e)){case"spelling-display":return n7(e,t);case"renderable":return e;case"glyphs":return r7(e);case"graphemes":return o7(e);case"ids":return i7(e,t);default:return console.warn("normalizeGlyphInput: Unknown input type"),[]}}function s7(e,t={}){return h.useMemo(()=>a7(e,t),[e,t.glyphMap,t.graphemeMap])}function Go(e){const{glyphWidth:t,glyphHeight:n,padding:r}=e;return{width:r*2+t,height:r*2+n,minX:0,minY:0,maxX:r*2+t,maxY:r*2+n}}function ho(e,t){if(e.length===0)return Go(t);const{padding:n}=t;let r=1/0,o=1/0,i=-1/0,a=-1/0;for(const s of e)r=Math.min(r,s.x),o=Math.min(o,s.y),i=Math.max(i,s.x+s.width),a=Math.max(a,s.y+s.height);return{width:i-r+n*2,height:a-o+n*2,minX:r-n,minY:o-n,maxX:i+n,maxY:a+n}}function l7(e){return`${e.minX} ${e.minY} ${e.width} ${e.height}`}const v2={name:"ltr",calculate(e,t){if(e.length===0)return{positions:[],bounds:Go(t)};const{glyphWidth:n,glyphHeight:r,spacing:o,padding:i}=t,a=e.map((s,l)=>({glyph:s,index:l,x:i+l*(n+o),y:i,width:n,height:r}));return{positions:a,bounds:ho(a,t)}}},c7={name:"rtl",calculate(e,t){if(e.length===0)return{positions:[],bounds:Go(t)};const{glyphWidth:n,glyphHeight:r,spacing:o,padding:i}=t,a=e.length*n+(e.length-1)*o,s=i+a-n,l=e.map((c,u)=>({glyph:c,index:u,x:s-u*(n+o),y:i,width:n,height:r}));return{positions:l,bounds:ho(l,t)}}},u7={name:"ttb",calculate(e,t){if(e.length===0)return{positions:[],bounds:Go(t)};const{glyphWidth:n,glyphHeight:r,spacing:o,padding:i}=t,a=e.map((s,l)=>({glyph:s,index:l,x:i,y:i+l*(r+o),width:n,height:r}));return{positions:a,bounds:ho(a,t)}}},d7={name:"btt",calculate(e,t){if(e.length===0)return{positions:[],bounds:Go(t)};const{glyphWidth:n,glyphHeight:r,spacing:o,padding:i}=t,a=e.length*r+(e.length-1)*o,s=i+a-r,l=e.map((c,u)=>({glyph:c,index:u,x:i,y:s-u*(r+o),width:n,height:r}));return{positions:l,bounds:ho(l,t)}}},pb={name:"block",calculate(e,t){if(e.length===0)return{positions:[],bounds:Go(t)};const{glyphWidth:n,glyphHeight:r,spacing:o,padding:i,maxWidth:a}=t,s=n+o,l=a?a-i*2:1/0,c=a?Math.max(1,Math.floor((l+o)/s)):5,u=e.map((d,f)=>{const m=f%c,y=Math.floor(f/c);return{glyph:d,index:f,x:i+m*(n+o),y:i+y*(r+o),width:n,height:r}});return{positions:u,bounds:ho(u,t)}}},f7={name:"spiral",calculate(e,t){if(e.length===0)return{positions:[],bounds:Go(t)};const{glyphWidth:n,glyphHeight:r,spacing:o,padding:i}=t,a=n+o,s=r+o,l=[[1,0],[0,-1],[-1,0],[0,1]],c=[];if(e.length===1)c.push({x:0,y:0});else{let _=0,b=0,w=0,x=1,N=0,C=0;for(let T=0;T<e.length;T++)c.push({x:_,y:b}),_+=l[w][0],b+=l[w][1],N++,N===x&&(N=0,w=(w+1)%4,C++,C===2&&(C=0,x++))}let u=0,d=0,f=0,m=0;for(const _ of c)u=Math.min(u,_.x),d=Math.max(d,_.x),f=Math.min(f,_.y),m=Math.max(m,_.y);const y=-u*a+i,v=-f*s+i,S=e.map((_,b)=>({glyph:_,index:b,x:c[b].x*a+y,y:c[b].y*s+v,width:n,height:r}));return{positions:S,bounds:ho(S,t)}}},p7={name:"circular",calculate(e,t){if(e.length===0)return{positions:[],bounds:Go(t)};const{glyphWidth:n,glyphHeight:r,spacing:o,padding:i}=t;if(e.length===1){const f=[{glyph:e[0],index:0,x:i,y:i,width:n,height:r}];return{positions:f,bounds:ho(f,t)}}if(e.length===2){const f=[{glyph:e[0],index:0,x:i,y:i,width:n,height:r},{glyph:e[1],index:1,x:i+n+o,y:i,width:n,height:r}];return{positions:f,bounds:ho(f,t)}}const a=Math.sqrt(n*n+r*r),s=e.length*(a+o),l=Math.max(a,s/(2*Math.PI)),c=i+l+n/2,u=i+l+r/2,d=e.map((f,m)=>{const y=-Math.PI/2+2*Math.PI*m/e.length;return{glyph:f,index:m,x:c+l*Math.cos(y)-n/2,y:u+l*Math.sin(y)-r/2,width:n,height:r}});return{positions:d,bounds:ho(d,t)}}},h7={name:"boustrophedon",calculate(e,t){if(e.length===0)return{positions:[],bounds:Go(t)};const{glyphWidth:n,glyphHeight:r,spacing:o,padding:i,maxWidth:a}=t,s=n+o,l=a?a-i*2:1/0,c=a?Math.max(1,Math.floor((l+o)/s)):5,u=c*n+(c-1)*o,d=e.map((f,m)=>{const y=Math.floor(m/c),v=m%c,S=y%2===1;let _;return S?_=i+u-n-v*(n+o):_=i+v*(n+o),{glyph:f,index:m,x:_,y:i+y*(r+o),width:n,height:r}});return{positions:d,bounds:ho(d,t)}}};function fc(e){return e==="ltr"||e==="rtl"}function Gh(e){return e==="rtl"||e==="btu"}function m7(e,t,n){const r=new Set(t??[]),o=new Set(n??[]);if(r.size===0&&o.size===0)return[{glyphs:e,isLineBreak:!1}];const i=[];let a=[];for(let s=0;s<e.length;s++)o.has(s)?(a.length>0&&(i.push({glyphs:a,isLineBreak:!1}),a=[]),i.push({glyphs:[e[s]],isLineBreak:!0})):r.has(s)?(a.length>0&&(i.push({glyphs:a,isLineBreak:!1}),a=[]),i.push({glyphs:[e[s]],isLineBreak:!1})):a.push(e[s]);return a.length>0&&i.push({glyphs:a,isLineBreak:!1}),i}function g7(e,t,n,r,o){return e===0?{width:0,height:0}:fc(t)?{width:e*n+(e-1)*o,height:r}:{width:n,height:e*r+(e-1)*o}}function y7(e,t,n){return{name:"composed-block",calculate(r,o){if(r.length===0)return{positions:[],bounds:Go(o)};const{glyphWidth:i,glyphHeight:a,spacing:s,padding:l,maxWidth:c,maxHeight:u}=o,{glyphDirection:d,wordOrder:f,lineProgression:m,baselineAlignment:y}=e,v=m7(r,t,n),S=fc(f),_=fc(m),b=S?c?c-l*2:1/0:u?u-l*2:1/0;console.group("[composedBlockStrategy DEBUG]"),console.log("config:",{glyphWidth:i,glyphHeight:a,spacing:s,padding:l,maxWidth:c,maxHeight:u}),console.log("writingSystem:",{glyphDirection:d,wordOrder:f,lineProgression:m,baselineAlignment:y}),console.log("wordBoundaries:",t),console.log("lineBreaks:",n),console.log("total glyphs:",r.length),console.log("wordGroups:",v.length,"groups:",v.map(R=>({len:R.glyphs.length,isLineBreak:R.isLineBreak}))),console.log("wordFlowHorizontal:",S,"lineFlowHorizontal:",_),console.log("maxPrimaryExtent:",b),console.groupEnd();const w=[];let x={words:[],sizes:[]},N=0;for(const R of v){if(R.isLineBreak){x.words.length>0&&w.push(x),x={words:[],sizes:[]},N=0;continue}const I=g7(R.glyphs.length,d,i,a,s),z=S?I.width:I.height,O=x.words.length>0?s:0,U=N+O+z>b;e.wordWrap!=="none"&&U&&x.words.length>0&&(w.push(x),x={words:[],sizes:[]},N=0),x.words.push(R.glyphs),x.sizes.push(I),N+=(x.words.length>1?s:0)+z}x.words.length>0&&w.push(x),console.log("[composedBlockStrategy] lines created:",w.length,"words per line:",w.map(R=>R.words.length));const C=[];let T=0;const k=Gh(m)?-1:1;let D=0;for(const R of w){let I=0;for(const U of R.sizes){const W=S?U.height:U.width;I=Math.max(I,W)}let z=0;const O=Gh(f)?R.words.map((U,W)=>R.words.length-1-W):R.words.map((U,W)=>W);for(const U of O){const W=R.words[U],$=R.sizes[U],M=Gh(d)?W.map((V,q)=>W.length-1-q):W.map((V,q)=>q);let P=0;for(const V of M){const q=W[V];let Q=l,H=l;const K=D*k;if(_?Q+=K:H+=K,S?Q+=z:H+=z,fc(d)?Q+=P:H+=P,S){const Y=$.height;y==="center"?H+=(I-Y)/2:y==="bottom"&&(H+=I-Y)}else{const Y=$.width;y==="center"?Q+=(I-Y)/2:y==="bottom"&&(Q+=I-Y)}C.push({glyph:q,index:T++,x:Q,y:H,width:i,height:a}),fc(d)?P+=i+s:P+=a+s}const B=S?$.width:$.height;z+=B+s}D+=I+s}return{positions:C,bounds:ho(C,o)}}}}const v7={ltr:v2,rtl:c7,ttb:u7,btt:d7,spiral:f7,block:pb,circular:p7,boustrophedon:h7,"composed-block":pb};function _7(e){const t=v7[e];return t||(console.warn(`Unknown layout strategy: ${e}, falling back to ltr`),v2)}const Hh={glyphWidth:20,glyphHeight:20,spacing:2,padding:4},w7={compact:{glyphWidth:20,glyphHeight:20,spacing:2,padding:4},detailed:{glyphWidth:40,glyphHeight:40,spacing:6,padding:12},tree:{glyphWidth:14,glyphHeight:14,spacing:1,padding:2},input:{glyphWidth:48,glyphHeight:48,spacing:8,padding:16}};function b7(e){return e?typeof e=="string"?{...Hh,...w7[e]}:{...Hh,...e}:Hh}function E7(e,t="ltr",n){return h.useMemo(()=>{const r=b7(n);return(typeof t=="string"?_7(t):t).calculate(e,r)},[e,t,n])}/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:_2,setPrototypeOf:hb,isFrozen:S7,getPrototypeOf:x7,getOwnPropertyDescriptor:C7}=Object;let{freeze:$n,seal:zr,create:qg}=Object,{apply:Kg,construct:Zg}=typeof Reflect<"u"&&Reflect;$n||($n=function(t){return t});zr||(zr=function(t){return t});Kg||(Kg=function(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return t.apply(n,o)});Zg||(Zg=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return new t(...r)});const fd=Bn(Array.prototype.forEach),T7=Bn(Array.prototype.lastIndexOf),mb=Bn(Array.prototype.pop),$l=Bn(Array.prototype.push),N7=Bn(Array.prototype.splice),Wd=Bn(String.prototype.toLowerCase),Xh=Bn(String.prototype.toString),Yh=Bn(String.prototype.match),Bl=Bn(String.prototype.replace),k7=Bn(String.prototype.indexOf),A7=Bn(String.prototype.trim),eo=Bn(Object.prototype.hasOwnProperty),In=Bn(RegExp.prototype.test),Vl=R7(TypeError);function Bn(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Kg(e,t,r)}}function R7(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Zg(e,n)}}function ze(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Wd;hb&&hb(e,null);let r=t.length;for(;r--;){let o=t[r];if(typeof o=="string"){const i=n(o);i!==o&&(S7(t)||(t[r]=i),o=i)}e[o]=!0}return e}function I7(e){for(let t=0;t<e.length;t++)eo(e,t)||(e[t]=null);return e}function xo(e){const t=qg(null);for(const[n,r]of _2(e))eo(e,n)&&(Array.isArray(r)?t[n]=I7(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=xo(r):t[n]=r);return t}function Ul(e,t){for(;e!==null;){const r=C7(e,t);if(r){if(r.get)return Bn(r.get);if(typeof r.value=="function")return Bn(r.value)}e=x7(e)}function n(){return null}return n}const gb=$n(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),qh=$n(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Kh=$n(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),L7=$n(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Zh=$n(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),O7=$n(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),yb=$n(["#text"]),vb=$n(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Qh=$n(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),_b=$n(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),pd=$n(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),P7=zr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),M7=zr(/<%[\w\W]*|[\w\W]*%>/gm),D7=zr(/\$\{[\w\W]*/gm),F7=zr(/^data-[\-\w.\u00B7-\uFFFF]+$/),$7=zr(/^aria-[\-\w]+$/),w2=zr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),B7=zr(/^(?:\w+script|data):/i),V7=zr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),b2=zr(/^html$/i),U7=zr(/^[a-z][.\w]*(-[.\w]+)+$/i);var wb=Object.freeze({__proto__:null,ARIA_ATTR:$7,ATTR_WHITESPACE:V7,CUSTOM_ELEMENT:U7,DATA_ATTR:F7,DOCTYPE_NAME:b2,ERB_EXPR:M7,IS_ALLOWED_URI:w2,IS_SCRIPT_OR_DATA:B7,MUSTACHE_EXPR:P7,TMPLIT_EXPR:D7});const zl={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},z7=function(){return typeof window>"u"?null:window},j7=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const o="data-tt-policy-suffix";n&&n.hasAttribute(o)&&(r=n.getAttribute(o));const i="dompurify"+(r?"#"+r:"");try{return t.createPolicy(i,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},bb=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function E2(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:z7();const t=Te=>E2(Te);if(t.version="3.3.1",t.removed=[],!e||!e.document||e.document.nodeType!==zl.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const r=n,o=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:a,Node:s,Element:l,NodeFilter:c,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:m}=e,y=l.prototype,v=Ul(y,"cloneNode"),S=Ul(y,"remove"),_=Ul(y,"nextSibling"),b=Ul(y,"childNodes"),w=Ul(y,"parentNode");if(typeof a=="function"){const Te=n.createElement("template");Te.content&&Te.content.ownerDocument&&(n=Te.content.ownerDocument)}let x,N="";const{implementation:C,createNodeIterator:T,createDocumentFragment:k,getElementsByTagName:D}=n,{importNode:R}=r;let I=bb();t.isSupported=typeof _2=="function"&&typeof w=="function"&&C&&C.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:z,ERB_EXPR:O,TMPLIT_EXPR:U,DATA_ATTR:W,ARIA_ATTR:$,IS_SCRIPT_OR_DATA:M,ATTR_WHITESPACE:P,CUSTOM_ELEMENT:B}=wb;let{IS_ALLOWED_URI:V}=wb,q=null;const Q=ze({},[...gb,...qh,...Kh,...Zh,...yb]);let H=null;const K=ze({},[...vb,...Qh,..._b,...pd]);let Y=Object.seal(qg(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ce=null,me=null;const fe=Object.seal(qg(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ie=!0,he=!0,oe=!1,re=!0,le=!1,Z=!0,ae=!1,J=!1,ge=!1,we=!1,Je=!1,at=!1,Ne=!0,yt=!1;const rt="user-content-";let rn=!0,Mt=!1,_n={},St=null;const jn=ze({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let yi=null;const Ea=ze({},["audio","video","img","source","image","track"]);let Sa=null;const us=ze({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vi="http://www.w3.org/1998/Math/MathML",Pe="http://www.w3.org/2000/svg",Wn="http://www.w3.org/1999/xhtml";let lr=Wn,_i=!1,cr=null;const ds=ze({},[vi,Pe,Wn],Xh);let wn=ze({},["mi","mo","mn","ms","mtext"]),yo=ze({},["annotation-xml"]);const xa=ze({},["title","style","font","a","script"]);let Wr=null;const ve=["application/xhtml+xml","text/html"],fs="text/html";let ot=null,vt=null;const vo=n.createElement("form"),_o=function(X){return X instanceof RegExp||X instanceof Function},Ca=function(){let X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(vt&&vt===X)){if((!X||typeof X!="object")&&(X={}),X=xo(X),Wr=ve.indexOf(X.PARSER_MEDIA_TYPE)===-1?fs:X.PARSER_MEDIA_TYPE,ot=Wr==="application/xhtml+xml"?Xh:Wd,q=eo(X,"ALLOWED_TAGS")?ze({},X.ALLOWED_TAGS,ot):Q,H=eo(X,"ALLOWED_ATTR")?ze({},X.ALLOWED_ATTR,ot):K,cr=eo(X,"ALLOWED_NAMESPACES")?ze({},X.ALLOWED_NAMESPACES,Xh):ds,Sa=eo(X,"ADD_URI_SAFE_ATTR")?ze(xo(us),X.ADD_URI_SAFE_ATTR,ot):us,yi=eo(X,"ADD_DATA_URI_TAGS")?ze(xo(Ea),X.ADD_DATA_URI_TAGS,ot):Ea,St=eo(X,"FORBID_CONTENTS")?ze({},X.FORBID_CONTENTS,ot):jn,ce=eo(X,"FORBID_TAGS")?ze({},X.FORBID_TAGS,ot):xo({}),me=eo(X,"FORBID_ATTR")?ze({},X.FORBID_ATTR,ot):xo({}),_n=eo(X,"USE_PROFILES")?X.USE_PROFILES:!1,ie=X.ALLOW_ARIA_ATTR!==!1,he=X.ALLOW_DATA_ATTR!==!1,oe=X.ALLOW_UNKNOWN_PROTOCOLS||!1,re=X.ALLOW_SELF_CLOSE_IN_ATTR!==!1,le=X.SAFE_FOR_TEMPLATES||!1,Z=X.SAFE_FOR_XML!==!1,ae=X.WHOLE_DOCUMENT||!1,we=X.RETURN_DOM||!1,Je=X.RETURN_DOM_FRAGMENT||!1,at=X.RETURN_TRUSTED_TYPE||!1,ge=X.FORCE_BODY||!1,Ne=X.SANITIZE_DOM!==!1,yt=X.SANITIZE_NAMED_PROPS||!1,rn=X.KEEP_CONTENT!==!1,Mt=X.IN_PLACE||!1,V=X.ALLOWED_URI_REGEXP||w2,lr=X.NAMESPACE||Wn,wn=X.MATHML_TEXT_INTEGRATION_POINTS||wn,yo=X.HTML_INTEGRATION_POINTS||yo,Y=X.CUSTOM_ELEMENT_HANDLING||{},X.CUSTOM_ELEMENT_HANDLING&&_o(X.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Y.tagNameCheck=X.CUSTOM_ELEMENT_HANDLING.tagNameCheck),X.CUSTOM_ELEMENT_HANDLING&&_o(X.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Y.attributeNameCheck=X.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),X.CUSTOM_ELEMENT_HANDLING&&typeof X.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Y.allowCustomizedBuiltInElements=X.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),le&&(he=!1),Je&&(we=!0),_n&&(q=ze({},yb),H=[],_n.html===!0&&(ze(q,gb),ze(H,vb)),_n.svg===!0&&(ze(q,qh),ze(H,Qh),ze(H,pd)),_n.svgFilters===!0&&(ze(q,Kh),ze(H,Qh),ze(H,pd)),_n.mathMl===!0&&(ze(q,Zh),ze(H,_b),ze(H,pd))),X.ADD_TAGS&&(typeof X.ADD_TAGS=="function"?fe.tagCheck=X.ADD_TAGS:(q===Q&&(q=xo(q)),ze(q,X.ADD_TAGS,ot))),X.ADD_ATTR&&(typeof X.ADD_ATTR=="function"?fe.attributeCheck=X.ADD_ATTR:(H===K&&(H=xo(H)),ze(H,X.ADD_ATTR,ot))),X.ADD_URI_SAFE_ATTR&&ze(Sa,X.ADD_URI_SAFE_ATTR,ot),X.FORBID_CONTENTS&&(St===jn&&(St=xo(St)),ze(St,X.FORBID_CONTENTS,ot)),X.ADD_FORBID_CONTENTS&&(St===jn&&(St=xo(St)),ze(St,X.ADD_FORBID_CONTENTS,ot)),rn&&(q["#text"]=!0),ae&&ze(q,["html","head","body"]),q.table&&(ze(q,["tbody"]),delete ce.tbody),X.TRUSTED_TYPES_POLICY){if(typeof X.TRUSTED_TYPES_POLICY.createHTML!="function")throw Vl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof X.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Vl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=X.TRUSTED_TYPES_POLICY,N=x.createHTML("")}else x===void 0&&(x=j7(m,o)),x!==null&&typeof N=="string"&&(N=x.createHTML(""));$n&&$n(X),vt=X}},wo=ze({},[...qh,...Kh,...L7]),bl=ze({},[...Zh,...O7]),bn=function(X){let pe=w(X);(!pe||!pe.tagName)&&(pe={namespaceURI:lr,tagName:"template"});const Ee=Wd(X.tagName),it=Wd(pe.tagName);return cr[X.namespaceURI]?X.namespaceURI===Pe?pe.namespaceURI===Wn?Ee==="svg":pe.namespaceURI===vi?Ee==="svg"&&(it==="annotation-xml"||wn[it]):!!wo[Ee]:X.namespaceURI===vi?pe.namespaceURI===Wn?Ee==="math":pe.namespaceURI===Pe?Ee==="math"&&yo[it]:!!bl[Ee]:X.namespaceURI===Wn?pe.namespaceURI===Pe&&!yo[it]||pe.namespaceURI===vi&&!wn[it]?!1:!bl[Ee]&&(xa[Ee]||!wo[Ee]):!!(Wr==="application/xhtml+xml"&&cr[X.namespaceURI]):!1},ur=function(X){$l(t.removed,{element:X});try{w(X).removeChild(X)}catch{S(X)}},Gn=function(X,pe){try{$l(t.removed,{attribute:pe.getAttributeNode(X),from:pe})}catch{$l(t.removed,{attribute:null,from:pe})}if(pe.removeAttribute(X),X==="is")if(we||Je)try{ur(pe)}catch{}else try{pe.setAttribute(X,"")}catch{}},El=function(X){let pe=null,Ee=null;if(ge)X="<remove></remove>"+X;else{const kt=Yh(X,/^[\r\n\t ]+/);Ee=kt&&kt[0]}Wr==="application/xhtml+xml"&&lr===Wn&&(X='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+X+"</body></html>");const it=x?x.createHTML(X):X;if(lr===Wn)try{pe=new f().parseFromString(it,Wr)}catch{}if(!pe||!pe.documentElement){pe=C.createDocument(lr,"template",null);try{pe.documentElement.innerHTML=_i?N:it}catch{}}const Yt=pe.body||pe.documentElement;return X&&Ee&&Yt.insertBefore(n.createTextNode(Ee),Yt.childNodes[0]||null),lr===Wn?D.call(pe,ae?"html":"body")[0]:ae?pe.documentElement:Yt},Sl=function(X){return T.call(X.ownerDocument||X,X,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},wi=function(X){return X instanceof d&&(typeof X.nodeName!="string"||typeof X.textContent!="string"||typeof X.removeChild!="function"||!(X.attributes instanceof u)||typeof X.removeAttribute!="function"||typeof X.setAttribute!="function"||typeof X.namespaceURI!="string"||typeof X.insertBefore!="function"||typeof X.hasChildNodes!="function")},on=function(X){return typeof s=="function"&&X instanceof s};function Er(Te,X,pe){fd(Te,Ee=>{Ee.call(t,X,pe,vt)})}const Ru=function(X){let pe=null;if(Er(I.beforeSanitizeElements,X,null),wi(X))return ur(X),!0;const Ee=ot(X.nodeName);if(Er(I.uponSanitizeElement,X,{tagName:Ee,allowedTags:q}),Z&&X.hasChildNodes()&&!on(X.firstElementChild)&&In(/<[/\w!]/g,X.innerHTML)&&In(/<[/\w!]/g,X.textContent)||X.nodeType===zl.progressingInstruction||Z&&X.nodeType===zl.comment&&In(/<[/\w]/g,X.data))return ur(X),!0;if(!(fe.tagCheck instanceof Function&&fe.tagCheck(Ee))&&(!q[Ee]||ce[Ee])){if(!ce[Ee]&&Iu(Ee)&&(Y.tagNameCheck instanceof RegExp&&In(Y.tagNameCheck,Ee)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck(Ee)))return!1;if(rn&&!St[Ee]){const it=w(X)||X.parentNode,Yt=b(X)||X.childNodes;if(Yt&&it){const kt=Yt.length;for(let zt=kt-1;zt>=0;--zt){const Sr=v(Yt[zt],!0);Sr.__removalCount=(X.__removalCount||0)+1,it.insertBefore(Sr,_(X))}}}return ur(X),!0}return X instanceof l&&!bn(X)||(Ee==="noscript"||Ee==="noembed"||Ee==="noframes")&&In(/<\/no(script|embed|frames)/i,X.innerHTML)?(ur(X),!0):(le&&X.nodeType===zl.text&&(pe=X.textContent,fd([z,O,U],it=>{pe=Bl(pe,it," ")}),X.textContent!==pe&&($l(t.removed,{element:X.cloneNode()}),X.textContent=pe)),Er(I.afterSanitizeElements,X,null),!1)},ps=function(X,pe,Ee){if(Ne&&(pe==="id"||pe==="name")&&(Ee in n||Ee in vo))return!1;if(!(he&&!me[pe]&&In(W,pe))){if(!(ie&&In($,pe))){if(!(fe.attributeCheck instanceof Function&&fe.attributeCheck(pe,X))){if(!H[pe]||me[pe]){if(!(Iu(X)&&(Y.tagNameCheck instanceof RegExp&&In(Y.tagNameCheck,X)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck(X))&&(Y.attributeNameCheck instanceof RegExp&&In(Y.attributeNameCheck,pe)||Y.attributeNameCheck instanceof Function&&Y.attributeNameCheck(pe,X))||pe==="is"&&Y.allowCustomizedBuiltInElements&&(Y.tagNameCheck instanceof RegExp&&In(Y.tagNameCheck,Ee)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck(Ee))))return!1}else if(!Sa[pe]){if(!In(V,Bl(Ee,P,""))){if(!((pe==="src"||pe==="xlink:href"||pe==="href")&&X!=="script"&&k7(Ee,"data:")===0&&yi[X])){if(!(oe&&!In(M,Bl(Ee,P,"")))){if(Ee)return!1}}}}}}}return!0},Iu=function(X){return X!=="annotation-xml"&&Yh(X,B)},hs=function(X){Er(I.beforeSanitizeAttributes,X,null);const{attributes:pe}=X;if(!pe||wi(X))return;const Ee={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H,forceKeepAttr:void 0};let it=pe.length;for(;it--;){const Yt=pe[it],{name:kt,namespaceURI:zt,value:Sr}=Yt,Gr=ot(kt),ms=Sr;let xt=kt==="value"?ms:A7(ms);if(Ee.attrName=Gr,Ee.attrValue=xt,Ee.keepAttr=!0,Ee.forceKeepAttr=void 0,Er(I.uponSanitizeAttribute,X,Ee),xt=Ee.attrValue,yt&&(Gr==="id"||Gr==="name")&&(Gn(kt,X),xt=rt+xt),Z&&In(/((--!?|])>)|<\/(style|title|textarea)/i,xt)){Gn(kt,X);continue}if(Gr==="attributename"&&Yh(xt,"href")){Gn(kt,X);continue}if(Ee.forceKeepAttr)continue;if(!Ee.keepAttr){Gn(kt,X);continue}if(!re&&In(/\/>/i,xt)){Gn(kt,X);continue}le&&fd([z,O,U],xl=>{xt=Bl(xt,xl," ")});const gs=ot(X.nodeName);if(!ps(gs,Gr,xt)){Gn(kt,X);continue}if(x&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!zt)switch(m.getAttributeType(gs,Gr)){case"TrustedHTML":{xt=x.createHTML(xt);break}case"TrustedScriptURL":{xt=x.createScriptURL(xt);break}}if(xt!==ms)try{zt?X.setAttributeNS(zt,kt,xt):X.setAttribute(kt,xt),wi(X)?ur(X):mb(t.removed)}catch{Gn(kt,X)}}Er(I.afterSanitizeAttributes,X,null)},Lu=function Te(X){let pe=null;const Ee=Sl(X);for(Er(I.beforeSanitizeShadowDOM,X,null);pe=Ee.nextNode();)Er(I.uponSanitizeShadowNode,pe,null),Ru(pe),hs(pe),pe.content instanceof i&&Te(pe.content);Er(I.afterSanitizeShadowDOM,X,null)};return t.sanitize=function(Te){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=null,Ee=null,it=null,Yt=null;if(_i=!Te,_i&&(Te="<!-->"),typeof Te!="string"&&!on(Te))if(typeof Te.toString=="function"){if(Te=Te.toString(),typeof Te!="string")throw Vl("dirty is not a string, aborting")}else throw Vl("toString is not a function");if(!t.isSupported)return Te;if(J||Ca(X),t.removed=[],typeof Te=="string"&&(Mt=!1),Mt){if(Te.nodeName){const Sr=ot(Te.nodeName);if(!q[Sr]||ce[Sr])throw Vl("root node is forbidden and cannot be sanitized in-place")}}else if(Te instanceof s)pe=El("<!---->"),Ee=pe.ownerDocument.importNode(Te,!0),Ee.nodeType===zl.element&&Ee.nodeName==="BODY"||Ee.nodeName==="HTML"?pe=Ee:pe.appendChild(Ee);else{if(!we&&!le&&!ae&&Te.indexOf("<")===-1)return x&&at?x.createHTML(Te):Te;if(pe=El(Te),!pe)return we?null:at?N:""}pe&&ge&&ur(pe.firstChild);const kt=Sl(Mt?Te:pe);for(;it=kt.nextNode();)Ru(it),hs(it),it.content instanceof i&&Lu(it.content);if(Mt)return Te;if(we){if(Je)for(Yt=k.call(pe.ownerDocument);pe.firstChild;)Yt.appendChild(pe.firstChild);else Yt=pe;return(H.shadowroot||H.shadowrootmode)&&(Yt=R.call(r,Yt,!0)),Yt}let zt=ae?pe.outerHTML:pe.innerHTML;return ae&&q["!doctype"]&&pe.ownerDocument&&pe.ownerDocument.doctype&&pe.ownerDocument.doctype.name&&In(b2,pe.ownerDocument.doctype.name)&&(zt="<!DOCTYPE "+pe.ownerDocument.doctype.name+`>
`+zt),le&&fd([z,O,U],Sr=>{zt=Bl(zt,Sr," ")}),x&&at?x.createHTML(zt):zt},t.setConfig=function(){let Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ca(Te),J=!0},t.clearConfig=function(){vt=null,J=!1},t.isValidAttribute=function(Te,X,pe){vt||Ca({});const Ee=ot(Te),it=ot(X);return ps(Ee,it,pe)},t.addHook=function(Te,X){typeof X=="function"&&$l(I[Te],X)},t.removeHook=function(Te,X){if(X!==void 0){const pe=T7(I[Te],X);return pe===-1?void 0:N7(I[Te],pe,1)[0]}return mb(I[Te])},t.removeHooks=function(Te){I[Te]=[]},t.removeAllHooks=function(){I=bb()},t}var g0=E2();const W7="_container_1j40e_1",G7="_interactive_1j40e_5",H7="_centered_1j40e_9",X7="_empty_1j40e_15",Y7="_svg_1j40e_24",q7="_glyphWrapper_1j40e_28",K7="_virtualGlyph_1j40e_41",Z7="_virtualBorder_1j40e_45",Q7="_interactiveContainer_1j40e_50",J7="_controls_1j40e_60",ej="_controlButton_1j40e_70",tj="_paperEffect_1j40e_97",nj="_paperBackground_1j40e_101",Cn={container:W7,interactive:G7,centered:H7,empty:X7,svg:Y7,glyphWrapper:q7,virtualGlyph:K7,virtualBorder:Z7,interactiveContainer:Q7,controls:J7,controlButton:ej,paperEffect:tj,paperBackground:nj},rj=h.memo(function({positioned:t,showVirtualGlyphStyling:n}){const{glyph:r,x:o,y:i,width:a,height:s,rotation:l}=t,c=h.useMemo(()=>{const d=g0.sanitize(r.svg_data,{USE_PROFILES:{svg:!0,svgFilters:!0}}),y=new DOMParser().parseFromString(d,"image/svg+xml").documentElement;return y.setAttribute("x",String(o)),y.setAttribute("y",String(i)),y.setAttribute("width",String(a)),y.setAttribute("height",String(s)),y.getAttribute("viewBox")||y.setAttribute("viewBox","0 0 100 100"),new XMLSerializer().serializeToString(y)},[r.svg_data,o,i,a,s]),u=l?`rotate(${l} ${o+a/2} ${i+s/2})`:void 0;return L("g",{transform:u,className:j({[Cn.virtualGlyph]:r.isVirtual&&n}),children:[p("g",{dangerouslySetInnerHTML:{__html:c}}),r.isVirtual&&n&&p("rect",{x:o,y:i,width:a,height:s,rx:Math.min(a,s)*.05,ry:Math.min(a,s)*.05,className:Cn.virtualBorder,fill:"none",strokeDasharray:"2,2"})]})}),S2=h.memo(h.forwardRef(function({positions:t,bounds:n,showVirtualGlyphStyling:r=!0,className:o,backgroundColor:i,showPaperEffect:a=!1,zoom:s=1},l){const c=l7(n);return L("svg",{ref:l,className:j(Cn.svg,o,{[Cn.paperEffect]:a}),viewBox:c,preserveAspectRatio:"xMidYMid meet",width:n.width,height:n.height,style:{backgroundColor:i,transform:s!==1?`scale(${s})`:void 0,transformOrigin:"top left"},children:[a&&p("rect",{x:n.minX,y:n.minY,width:n.width,height:n.height,fill:i||"white",className:Cn.paperBackground}),t.map(u=>p(rj,{positioned:u,showVirtualGlyphStyling:r},`glyph-${u.glyph.id}-${u.index}`))]})}));var Fr=function(e,t){return Number(e.toFixed(t))},oj=function(e,t){return typeof e=="number"?e:t},Ct=function(e,t,n){n&&typeof n=="function"&&n(e,t)},ij=function(e){return-Math.cos(e*Math.PI)/2+.5},aj=function(e){return e},sj=function(e){return e*e},lj=function(e){return e*(2-e)},cj=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},uj=function(e){return e*e*e},dj=function(e){return--e*e*e+1},fj=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},pj=function(e){return e*e*e*e},hj=function(e){return 1- --e*e*e*e},mj=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},gj=function(e){return e*e*e*e*e},yj=function(e){return 1+--e*e*e*e*e},vj=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},x2={easeOut:ij,linear:aj,easeInQuad:sj,easeOutQuad:lj,easeInOutQuad:cj,easeInCubic:uj,easeOutCubic:dj,easeInOutCubic:fj,easeInQuart:pj,easeOutQuart:hj,easeInOutQuart:mj,easeInQuint:gj,easeOutQuint:yj,easeInOutQuint:vj},C2=function(e){typeof e=="number"&&cancelAnimationFrame(e)},ao=function(e){e.mounted&&(C2(e.animation),e.animate=!1,e.animation=null,e.velocity=null)};function T2(e,t,n,r){if(e.mounted){var o=new Date().getTime(),i=1;ao(e),e.animation=function(){if(!e.mounted)return C2(e.animation);var a=new Date().getTime()-o,s=a/n,l=x2[t],c=l(s);a>=n?(r(i),e.animation=null):e.animation&&(r(c),requestAnimationFrame(e.animation))},requestAnimationFrame(e.animation)}}function _j(e){var t=e.scale,n=e.positionX,r=e.positionY;return!(Number.isNaN(t)||Number.isNaN(n)||Number.isNaN(r))}function _a(e,t,n,r){var o=_j(t);if(!(!e.mounted||!o)){var i=e.setTransformState,a=e.transformState,s=a.scale,l=a.positionX,c=a.positionY,u=t.scale-s,d=t.positionX-l,f=t.positionY-c;n===0?i(t.scale,t.positionX,t.positionY):T2(e,r,n,function(m){var y=s+u*m,v=l+d*m,S=c+f*m;i(y,v,S)})}}function wj(e,t,n){var r=e.offsetWidth,o=e.offsetHeight,i=t.offsetWidth,a=t.offsetHeight,s=i*n,l=a*n,c=r-s,u=o-l;return{wrapperWidth:r,wrapperHeight:o,newContentWidth:s,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var bj=function(e,t,n,r,o,i,a){var s=e>t?n*(a?1:.5):0,l=r>o?i*(a?1:.5):0,c=e-t-s,u=s,d=r-o-l,f=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:f}},y0=function(e,t){var n=e.wrapperComponent,r=e.contentComponent,o=e.setup.centerZoomedOut;if(!n||!r)throw new Error("Components are not mounted");var i=wj(n,r,t),a=i.wrapperWidth,s=i.wrapperHeight,l=i.newContentWidth,c=i.newDiffWidth,u=i.newContentHeight,d=i.newDiffHeight,f=bj(a,l,c,s,u,d,!!o);return f},Qg=function(e,t,n,r){return r?e<t?Fr(t,2):e>n?Fr(n,2):Fr(e,2):Fr(e,2)},Ka=function(e,t){var n=y0(e,t);return e.bounds=n,n};function xu(e,t,n,r,o,i,a){var s=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,f=0;a&&(d=o,f=i);var m=Qg(e,s-d,c+d,r),y=Qg(t,l-f,u+f,r);return{x:m,y}}function Lp(e,t,n,r,o,i){var a=e.transformState,s=a.scale,l=a.positionX,c=a.positionY,u=r-s;if(typeof t!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-t*u,f=c-n*u,m=xu(d,f,o,i,0,0,null);return m}function Cu(e,t,n,r,o){var i=o?r:0,a=t-i;return!Number.isNaN(n)&&e>=n?n:!Number.isNaN(t)&&e<=a?a:e}var Eb=function(e,t){var n=e.setup.panning.excluded,r=e.isInitialized,o=e.wrapperComponent,i=t.target,a="shadowRoot"in i&&"composedPath"in t,s=a?t.composedPath().some(function(u){return u instanceof Element?o==null?void 0:o.contains(u):!1}):o==null?void 0:o.contains(i),l=r&&i&&s;if(!l)return!1;var c=Op(i,n);return!c},Sb=function(e){var t=e.isInitialized,n=e.isPanning,r=e.setup,o=r.panning.disabled,i=t&&n&&!o;return!!i},Ej=function(e,t){var n=e.transformState,r=n.positionX,o=n.positionY;e.isPanning=!0;var i=t.clientX,a=t.clientY;e.startCoords={x:i-r,y:a-o}},Sj=function(e,t){var n=t.touches,r=e.transformState,o=r.positionX,i=r.positionY;e.isPanning=!0;var a=n.length===1;if(a){var s=n[0].clientX,l=n[0].clientY;e.startCoords={x:s-o,y:l-i}}};function xj(e){var t=e.transformState,n=t.positionX,r=t.positionY,o=t.scale,i=e.setup,a=i.disabled,s=i.limitToBounds,l=i.centerZoomedOut,c=e.wrapperComponent;if(!(a||!c||!e.bounds)){var u=e.bounds,d=u.maxPositionX,f=u.minPositionX,m=u.maxPositionY,y=u.minPositionY,v=n>d||n<f,S=r>m||r<y,_=n>d?c.offsetWidth:e.setup.minPositionX||0,b=r>m?c.offsetHeight:e.setup.minPositionY||0,w=Lp(e,_,b,o,e.bounds,s||l),x=w.x,N=w.y;return{scale:o,positionX:v?x:n,positionY:S?N:r}}}function N2(e,t,n,r,o){var i=e.setup.limitToBounds,a=e.wrapperComponent,s=e.bounds,l=e.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(a===null||s===null||t===u&&n===d)){var f=xu(t,n,s,i,r,o,a),m=f.x,y=f.y;e.setTransformState(c,m,y)}}var Cj=function(e,t,n){var r=e.startCoords,o=e.transformState,i=e.setup.panning,a=i.lockAxisX,s=i.lockAxisY,l=o.positionX,c=o.positionY;if(!r)return{x:l,y:c};var u=t-r.x,d=n-r.y,f=a?l:u,m=s?c:d;return{x:f,y:m}},da=function(e,t){var n=e.setup,r=e.transformState,o=r.scale,i=n.minScale,a=n.disablePadding;return t>0&&o>=i&&!a?t:0},Tj=function(e){var t=e.mounted,n=e.setup,r=n.disabled,o=n.velocityAnimation,i=e.transformState.scale,a=o.disabled,s=!a||i>1||!r||t;return!!s},Nj=function(e){var t=e.mounted,n=e.velocity,r=e.bounds,o=e.setup,i=o.disabled,a=o.velocityAnimation,s=e.transformState.scale,l=a.disabled,c=!l||s>1||!i||t;return!(!c||!n||!r)};function kj(e,t){var n=e.setup.velocityAnimation,r=n.equalToMove,o=n.animationTime,i=n.sensitivity;return r?o*t*i:o}function xb(e,t,n,r,o,i,a,s,l,c){if(o){if(t>a&&n>a){var u=a+(e-a)*c;return u>l?l:u<a?a:u}if(t<i&&n<i){var u=i+(e-i)*c;return u<s?s:u>i?i:u}}return r?t:Qg(e,i,a,o)}function Aj(e,t){var n=1;return t?Math.min(n,e.offsetWidth/window.innerWidth):n}function Rj(e,t){var n=Tj(e);if(n){var r=e.lastMousePosition,o=e.velocityTime,i=e.setup,a=e.wrapperComponent,s=i.velocityAnimation.equalToMove,l=Date.now();if(r&&o&&a){var c=Aj(a,s),u=t.x-r.x,d=t.y-r.y,f=u/c,m=d/c,y=l-o,v=u*u+d*d,S=Math.sqrt(v)/y;e.velocity={velocityX:f,velocityY:m,total:S}}e.lastMousePosition=t,e.velocityTime=l}}function Ij(e){var t=e.velocity,n=e.bounds,r=e.setup,o=e.wrapperComponent,i=Nj(e);if(!(!i||!t||!n||!o)){var a=t.velocityX,s=t.velocityY,l=t.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,f=n.minPositionY,m=r.limitToBounds,y=r.alignmentAnimation,v=r.zoomAnimation,S=r.panning,_=S.lockAxisY,b=S.lockAxisX,w=v.animationType,x=y.sizeX,N=y.sizeY,C=y.velocityAlignmentTime,T=C,k=kj(e,l),D=Math.max(k,T),R=da(e,x),I=da(e,N),z=R*o.offsetWidth/100,O=I*o.offsetHeight/100,U=c+z,W=u-z,$=d+O,M=f-O,P=e.transformState,B=new Date().getTime();T2(e,w,D,function(V){var q=e.transformState,Q=q.scale,H=q.positionX,K=q.positionY,Y=new Date().getTime()-B,ce=Y/T,me=x2[y.animationType],fe=1-me(Math.min(1,ce)),ie=1-V,he=H+a*ie,oe=K+s*ie,re=xb(he,P.positionX,H,b,m,u,c,W,U,fe),le=xb(oe,P.positionY,K,_,m,f,d,M,$,fe);(H!==he||K!==oe)&&e.setTransformState(Q,re,le)})}}function Cb(e,t){var n=e.transformState.scale;ao(e),Ka(e,n),window.TouchEvent!==void 0&&t instanceof TouchEvent?Sj(e,t):Ej(e,t)}function v0(e,t){var n=e.transformState.scale,r=e.setup,o=r.minScale,i=r.alignmentAnimation,a=i.disabled,s=i.sizeX,l=i.sizeY,c=i.animationTime,u=i.animationType,d=a||n<o||!s&&!l;if(!d){var f=xj(e);f&&_a(e,f,t??c,u)}}function Tb(e,t,n){var r=e.startCoords,o=e.setup,i=o.alignmentAnimation,a=i.sizeX,s=i.sizeY;if(r){var l=Cj(e,t,n),c=l.x,u=l.y,d=da(e,a),f=da(e,s);Rj(e,{x:c,y:u}),N2(e,c,u,d,f)}}function Lj(e){if(e.isPanning){var t=e.setup.panning.velocityDisabled,n=e.velocity,r=e.wrapperComponent,o=e.contentComponent;e.isPanning=!1,e.animate=!1,e.animation=null;var i=r==null?void 0:r.getBoundingClientRect(),a=o==null?void 0:o.getBoundingClientRect(),s=(i==null?void 0:i.width)||0,l=(i==null?void 0:i.height)||0,c=(a==null?void 0:a.width)||0,u=(a==null?void 0:a.height)||0,d=s<c||l<u,f=!t&&n&&(n==null?void 0:n.total)>.1&&d;f?Ij(e):v0(e)}}function _0(e,t,n,r){var o=e.setup,i=o.minScale,a=o.maxScale,s=o.limitToBounds,l=Cu(Fr(t,2),i,a,0,!1),c=Ka(e,l),u=Lp(e,n,r,l,c,s),d=u.x,f=u.y;return{scale:l,positionX:d,positionY:f}}function k2(e,t,n){var r=e.transformState.scale,o=e.wrapperComponent,i=e.setup,a=i.minScale,s=i.limitToBounds,l=i.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,f=c||r>=a;if((r>=1||s)&&v0(e),!(f||!o||!e.mounted)){var m=t||o.offsetWidth/2,y=n||o.offsetHeight/2,v=_0(e,a,m,y);v&&_a(e,v,u,d)}}var na=function(){return na=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},na.apply(this,arguments)};function Nb(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var hd={previousScale:1,scale:1,positionX:0,positionY:0},jl={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},Jg={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},A2=function(e){var t,n,r,o;return{previousScale:(t=e.initialScale)!==null&&t!==void 0?t:hd.scale,scale:(n=e.initialScale)!==null&&n!==void 0?n:hd.scale,positionX:(r=e.initialPositionX)!==null&&r!==void 0?r:hd.positionX,positionY:(o=e.initialPositionY)!==null&&o!==void 0?o:hd.positionY}},kb=function(e){var t=na({},jl);return Object.keys(e).forEach(function(n){var r=typeof e[n]<"u",o=typeof jl[n]<"u";if(o&&r){var i=Object.prototype.toString.call(jl[n]),a=i==="[object Object]",s=i==="[object Array]";a?t[n]=na(na({},jl[n]),e[n]):s?t[n]=Nb(Nb([],jl[n],!0),e[n],!0):t[n]=e[n]}}),t},R2=function(e,t,n){var r=e.transformState.scale,o=e.wrapperComponent,i=e.setup,a=i.maxScale,s=i.minScale,l=i.zoomAnimation,c=i.smooth,u=l.size;if(!o)throw new Error("Wrapper is not mounted");var d=c?r*Math.exp(t*n):r+t*n,f=Cu(Fr(d,3),s,a,u,!1);return f};function I2(e,t,n,r,o){var i=e.wrapperComponent,a=e.transformState,s=a.scale,l=a.positionX,c=a.positionY;if(!i)return console.error("No WrapperComponent found");var u=i.offsetWidth,d=i.offsetHeight,f=(u/2-l)/s,m=(d/2-c)/s,y=R2(e,t,n),v=_0(e,y,f,m);if(!v)return console.error("Error during zoom event. New transformation state was not calculated.");_a(e,v,r,o)}function L2(e,t,n,r){var o=e.setup,i=e.wrapperComponent,a=o.limitToBounds,s=A2(e.props),l=e.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(i){var f=y0(e,s.scale),m=xu(s.positionX,s.positionY,f,a,0,0,i),y={scale:s.scale,positionX:m.x,positionY:m.y};c===s.scale&&u===s.positionX&&d===s.positionY||(r==null||r(),_a(e,y,t,n))}}function Oj(e,t,n,r){var o=e.getBoundingClientRect(),i=t.getBoundingClientRect(),a=n.getBoundingClientRect(),s=i.x*r.scale,l=i.y*r.scale;return{x:(o.x-a.x+s)/r.scale,y:(o.y-a.y+l)/r.scale}}function Pj(e,t,n){var r=e.wrapperComponent,o=e.contentComponent,i=e.transformState,a=e.setup,s=a.limitToBounds,l=a.minScale,c=a.maxScale;if(!r||!o)return i;var u=r.getBoundingClientRect(),d=t.getBoundingClientRect(),f=Oj(t,r,o,i),m=f.x,y=f.y,v=d.width/i.scale,S=d.height/i.scale,_=r.offsetWidth/v,b=r.offsetHeight/S,w=Cu(n||Math.min(_,b),l,c,0,!1),x=(u.width-v*w)/2,N=(u.height-S*w)/2,C=(u.left-m)*w+x,T=(u.top-y)*w+N,k=y0(e,w),D=xu(C,T,k,s,0,0,r),R=D.x,I=D.y;return{positionX:R,positionY:I,scale:w}}var Mj=function(e){return function(t,n,r){t===void 0&&(t=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),I2(e,1,t,n,r)}},Dj=function(e){return function(t,n,r){t===void 0&&(t=.5),n===void 0&&(n=300),r===void 0&&(r="easeOut"),I2(e,-1,t,n,r)}},Fj=function(e){return function(t,n,r,o,i){o===void 0&&(o=300),i===void 0&&(i="easeOut");var a=e.transformState,s=a.positionX,l=a.positionY,c=a.scale,u=e.wrapperComponent,d=e.contentComponent,f=e.setup.disabled;if(!(f||!u||!d)){var m={positionX:Number.isNaN(t)?s:t,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(r)?c:r};_a(e,m,o,i)}}},$j=function(e){return function(t,n){t===void 0&&(t=200),n===void 0&&(n="easeOut"),L2(e,t,n)}},Bj=function(e){return function(t,n,r){n===void 0&&(n=200),r===void 0&&(r="easeOut");var o=e.transformState,i=e.wrapperComponent,a=e.contentComponent;if(i&&a){var s=O2(t||o.scale,i,a);_a(e,s,n,r)}}},Vj=function(e){return function(t,n,r,o){r===void 0&&(r=600),o===void 0&&(o="easeOut"),ao(e);var i=e.wrapperComponent,a=typeof t=="string"?document.getElementById(t):t;if(i&&a&&i.contains(a)){var s=Pj(e,a,n);_a(e,s,r,o)}}},ey=function(e){return{instance:e,zoomIn:Mj(e),zoomOut:Dj(e),setTransform:Fj(e),resetTransform:$j(e),centerView:Bj(e),zoomToElement:Vj(e)}},Uj=function(e){return{instance:e,state:e.transformState}},pt=function(e){var t={};return Object.assign(t,Uj(e)),Object.assign(t,ey(e)),t},Jh=!1;function em(){try{var e={get passive(){return Jh=!0,!1}};return e}catch{return Jh=!1,Jh}}var md=".".concat(Jg.wrapperClass),Op=function(e,t){return t.some(function(n){return e.matches("".concat(md," ").concat(n,", ").concat(md," .").concat(n,", ").concat(md," ").concat(n," *, ").concat(md," .").concat(n," *"))})},ty=function(e){e&&clearTimeout(e)},zj=function(e,t,n){return"translate(".concat(e,"px, ").concat(t,"px) scale(").concat(n,")")},O2=function(e,t,n){var r=n.offsetWidth*e,o=n.offsetHeight*e,i=(t.offsetWidth-r)/2,a=(t.offsetHeight-o)/2;return{scale:e,positionX:i,positionY:a}};function jj(e){return function(t){e.forEach(function(n){typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Wj=function(e,t){var n=e.setup.wheel,r=n.disabled,o=n.wheelDisabled,i=n.touchPadDisabled,a=n.excluded,s=e.isInitialized,l=e.isPanning,c=t.target,u=s&&!l&&!r&&c;if(!u||o&&!t.ctrlKey||i&&t.ctrlKey)return!1;var d=Op(c,a);return!d},Gj=function(e){return e?e.deltaY<0?1:-1:0};function Hj(e,t){var n=Gj(e),r=oj(t,n);return r}function P2(e,t,n){var r=t.getBoundingClientRect(),o=0,i=0;if("clientX"in e)o=(e.clientX-r.left)/n,i=(e.clientY-r.top)/n;else{var a=e.touches[0];o=(a.clientX-r.left)/n,i=(a.clientY-r.top)/n}return(Number.isNaN(o)||Number.isNaN(i))&&console.error("No mouse or touch offset found"),{x:o,y:i}}var Xj=function(e,t,n,r,o){var i=e.transformState.scale,a=e.wrapperComponent,s=e.setup,l=s.maxScale,c=s.minScale,u=s.zoomAnimation,d=s.disablePadding,f=u.size,m=u.disabled;if(!a)throw new Error("Wrapper is not mounted");var y=i+t*n;if(o)return y;var v=r?!1:!m,S=Cu(Fr(y,3),c,l,f,v&&!d);return S},Yj=function(e,t){var n=e.previousWheelEvent,r=e.transformState.scale,o=e.setup,i=o.maxScale,a=o.minScale;return n?r<i||r>a||Math.sign(n.deltaY)!==Math.sign(t.deltaY)||n.deltaY>0&&n.deltaY<t.deltaY||n.deltaY<0&&n.deltaY>t.deltaY||Math.sign(n.deltaY)!==Math.sign(t.deltaY):!1},qj=function(e,t){var n=e.setup.pinch,r=n.disabled,o=n.excluded,i=e.isInitialized,a=t.target,s=i&&!r&&a;if(!s)return!1;var l=Op(a,o);return!l},Kj=function(e){var t=e.setup.pinch.disabled,n=e.isInitialized,r=e.pinchStartDistance,o=n&&!t&&r;return!!o},Zj=function(e,t,n){var r=n.getBoundingClientRect(),o=e.touches,i=Fr(o[0].clientX-r.left,5),a=Fr(o[0].clientY-r.top,5),s=Fr(o[1].clientX-r.left,5),l=Fr(o[1].clientY-r.top,5);return{x:(i+s)/2/t,y:(a+l)/2/t}},M2=function(e){return Math.sqrt(Math.pow(e.touches[0].pageX-e.touches[1].pageX,2)+Math.pow(e.touches[0].pageY-e.touches[1].pageY,2))},Qj=function(e,t){var n=e.pinchStartScale,r=e.pinchStartDistance,o=e.setup,i=o.maxScale,a=o.minScale,s=o.zoomAnimation,l=o.disablePadding,c=s.size,u=s.disabled;if(!n||r===null||!t)throw new Error("Pinch touches distance was not provided");if(t<0)return e.transformState.scale;var d=t/r,f=d*n;return Cu(Fr(f,2),a,i,c,!u&&!l)},Jj=160,eW=100,tW=function(e,t){var n=e.props,r=n.onWheelStart,o=n.onZoomStart;e.wheelStopEventTimer||(ao(e),Ct(pt(e),t,r),Ct(pt(e),t,o))},nW=function(e,t){var n=e.props,r=n.onWheel,o=n.onZoom,i=e.contentComponent,a=e.setup,s=e.transformState,l=s.scale,c=a.limitToBounds,u=a.centerZoomedOut,d=a.zoomAnimation,f=a.wheel,m=a.disablePadding,y=a.smooth,v=d.size,S=d.disabled,_=f.step,b=f.smoothStep;if(!i)throw new Error("Component not mounted");t.preventDefault(),t.stopPropagation();var w=Hj(t,null),x=y?b*Math.abs(t.deltaY):_,N=Xj(e,w,x,!t.ctrlKey);if(l!==N){var C=Ka(e,N),T=P2(t,i,l),k=S||v===0||u||m,D=c&&k,R=Lp(e,T.x,T.y,N,C,D),I=R.x,z=R.y;e.previousWheelEvent=t,e.setTransformState(N,I,z),Ct(pt(e),t,r),Ct(pt(e),t,o)}},rW=function(e,t){var n=e.props,r=n.onWheelStop,o=n.onZoomStop;ty(e.wheelAnimationTimer),e.wheelAnimationTimer=setTimeout(function(){e.mounted&&(k2(e,t.x,t.y),e.wheelAnimationTimer=null)},eW);var i=Yj(e,t);i&&(ty(e.wheelStopEventTimer),e.wheelStopEventTimer=setTimeout(function(){e.mounted&&(e.wheelStopEventTimer=null,Ct(pt(e),t,r),Ct(pt(e),t,o))},Jj))},D2=function(e){for(var t=0,n=0,r=0;r<2;r+=1)t+=e.touches[r].clientX,n+=e.touches[r].clientY;var o=t/2,i=n/2;return{x:o,y:i}},oW=function(e,t){var n=M2(t);e.pinchStartDistance=n,e.lastDistance=n,e.pinchStartScale=e.transformState.scale,e.isPanning=!1;var r=D2(t);e.pinchLastCenterX=r.x,e.pinchLastCenterY=r.y,ao(e)},iW=function(e,t){var n=e.contentComponent,r=e.pinchStartDistance,o=e.wrapperComponent,i=e.transformState.scale,a=e.setup,s=a.limitToBounds,l=a.centerZoomedOut,c=a.zoomAnimation,u=a.alignmentAnimation,d=c.disabled,f=c.size;if(!(r===null||!n)){var m=Zj(t,i,n);if(!(!Number.isFinite(m.x)||!Number.isFinite(m.y))){var y=M2(t),v=Qj(e,y),S=D2(t),_=S.x-(e.pinchLastCenterX||0),b=S.y-(e.pinchLastCenterY||0);if(!(v===i&&_===0&&b===0)){e.pinchLastCenterX=S.x,e.pinchLastCenterY=S.y;var w=Ka(e,v),x=d||f===0||l,N=s&&x,C=Lp(e,m.x,m.y,v,w,N),T=C.x,k=C.y;e.pinchMidpoint=m,e.lastDistance=y;var D=u.sizeX,R=u.sizeY,I=da(e,D),z=da(e,R),O=T+_,U=k+b,W=xu(O,U,w,s,I,z,o),$=W.x,M=W.y;e.setTransformState(v,$,M)}}}},aW=function(e){var t=e.pinchMidpoint;e.velocity=null,e.lastDistance=null,e.pinchMidpoint=null,e.pinchStartScale=null,e.pinchStartDistance=null,k2(e,t==null?void 0:t.x,t==null?void 0:t.y)},F2=function(e,t){var n=e.props.onZoomStop,r=e.setup.doubleClick.animationTime;ty(e.doubleClickStopEventTimer),e.doubleClickStopEventTimer=setTimeout(function(){e.doubleClickStopEventTimer=null,Ct(pt(e),t,n)},r)},sW=function(e,t){var n=e.props,r=n.onZoomStart,o=n.onZoom,i=e.setup.doubleClick,a=i.animationTime,s=i.animationType;Ct(pt(e),t,r),L2(e,a,s,function(){return Ct(pt(e),t,o)}),F2(e,t)};function lW(e,t){return e==="toggle"?t===1?1:-1:e==="zoomOut"?-1:1}function cW(e,t){var n=e.setup,r=e.doubleClickStopEventTimer,o=e.transformState,i=e.contentComponent,a=o.scale,s=e.props,l=s.onZoomStart,c=s.onZoom,u=n.doubleClick,d=u.disabled,f=u.mode,m=u.step,y=u.animationTime,v=u.animationType;if(!d&&!r){if(f==="reset")return sW(e,t);if(!i)return console.error("No ContentComponent found");var S=lW(f,e.transformState.scale),_=R2(e,S,m);if(a!==_){Ct(pt(e),t,l);var b=P2(t,i,a),w=_0(e,_,b.x,b.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");Ct(pt(e),t,c),_a(e,w,y,v),F2(e,t)}}}var uW=function(e,t){var n=e.isInitialized,r=e.setup,o=e.wrapperComponent,i=r.doubleClick,a=i.disabled,s=i.excluded,l=t.target,c=o==null?void 0:o.contains(l),u=n&&l&&c&&!a;if(!u)return!1;var d=Op(l,s);return!d},dW=function(){function e(t){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(r){n.props=r,Ka(n,n.transformState.scale),n.setup=kb(r)},this.initializeWindowEvents=function(){var r,o,i=em(),a=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,s=a==null?void 0:a.defaultView;(o=n.wrapperComponent)===null||o===void 0||o.addEventListener("wheel",n.onWheelPanning,i),s==null||s.addEventListener("mousedown",n.onPanningStart,i),s==null||s.addEventListener("mousemove",n.onPanning,i),s==null||s.addEventListener("mouseup",n.onPanningStop,i),a==null||a.addEventListener("mouseleave",n.clearPanning,i),s==null||s.addEventListener("keyup",n.setKeyUnPressed,i),s==null||s.addEventListener("keydown",n.setKeyPressed,i)},this.cleanupWindowEvents=function(){var r,o,i=em(),a=(r=n.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,s=a==null?void 0:a.defaultView;s==null||s.removeEventListener("mousedown",n.onPanningStart,i),s==null||s.removeEventListener("mousemove",n.onPanning,i),s==null||s.removeEventListener("mouseup",n.onPanningStop,i),a==null||a.removeEventListener("mouseleave",n.clearPanning,i),s==null||s.removeEventListener("keyup",n.setKeyUnPressed,i),s==null||s.removeEventListener("keydown",n.setKeyPressed,i),document.removeEventListener("mouseleave",n.clearPanning,i),ao(n),(o=n.observer)===null||o===void 0||o.disconnect()},this.handleInitializeWrapperEvents=function(r){var o=em();r.addEventListener("wheel",n.onWheelZoom,o),r.addEventListener("dblclick",n.onDoubleClick,o),r.addEventListener("touchstart",n.onTouchPanningStart,o),r.addEventListener("touchmove",n.onTouchPanning,o),r.addEventListener("touchend",n.onTouchPanningStop,o)},this.handleInitialize=function(r,o){var i=!1,a=n.setup.centerOnInit,s=function(l,c){for(var u=0,d=l;u<d.length;u++){var f=d[u];if(f.target===c)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(l){l(pt(n))}),n.observer=new ResizeObserver(function(l){if(s(l,r)||s(l,o))if(a&&!i){var c=o.offsetWidth,u=o.offsetHeight;(c>0||u>0)&&(i=!0,n.setCenter())}else ao(n),Ka(n,n.transformState.scale),v0(n,0)}),n.observer.observe(r),n.observer.observe(o)},this.onWheelZoom=function(r){var o=n.setup.disabled;if(!o){var i=Wj(n,r);if(i){var a=n.isPressingKeys(n.setup.wheel.activationKeys);a&&(tW(n,r),nW(n,r),rW(n,r))}}},this.onWheelPanning=function(r){var o=n.setup,i=o.disabled,a=o.wheel,s=o.panning;if(!(!n.wrapperComponent||!n.contentComponent||i||!a.wheelDisabled||s.disabled||!s.wheelPanning||r.ctrlKey)){r.preventDefault(),r.stopPropagation();var l=n.transformState,c=l.positionX,u=l.positionY,d=c-r.deltaX,f=u-r.deltaY,m=s.lockAxisX?c:d,y=s.lockAxisY?u:f,v=n.setup.alignmentAnimation,S=v.sizeX,_=v.sizeY,b=da(n,S),w=da(n,_);m===c&&y===u||N2(n,m,y,b,w)}},this.onPanningStart=function(r){var o=n.setup.disabled,i=n.props.onPanningStart;if(!o){var a=Eb(n,r);if(a){var s=n.isPressingKeys(n.setup.panning.activationKeys);s&&(r.button===0&&!n.setup.panning.allowLeftClickPan||r.button===1&&!n.setup.panning.allowMiddleClickPan||r.button===2&&!n.setup.panning.allowRightClickPan||(r.preventDefault(),r.stopPropagation(),ao(n),Cb(n,r),Ct(pt(n),r,i)))}}},this.onPanning=function(r){var o=n.setup.disabled,i=n.props.onPanning;if(!o){var a=Sb(n);if(a){var s=n.isPressingKeys(n.setup.panning.activationKeys);s&&(r.preventDefault(),r.stopPropagation(),Tb(n,r.clientX,r.clientY),Ct(pt(n),r,i))}}},this.onPanningStop=function(r){var o=n.props.onPanningStop;n.isPanning&&(Lj(n),Ct(pt(n),r,o))},this.onPinchStart=function(r){var o=n.setup.disabled,i=n.props,a=i.onPinchingStart,s=i.onZoomStart;if(!o){var l=qj(n,r);l&&(oW(n,r),ao(n),Ct(pt(n),r,a),Ct(pt(n),r,s))}},this.onPinch=function(r){var o=n.setup.disabled,i=n.props,a=i.onPinching,s=i.onZoom;if(!o){var l=Kj(n);l&&(r.preventDefault(),r.stopPropagation(),iW(n,r),Ct(pt(n),r,a),Ct(pt(n),r,s))}},this.onPinchStop=function(r){var o=n.props,i=o.onPinchingStop,a=o.onZoomStop;n.pinchStartScale&&(aW(n),Ct(pt(n),r,i),Ct(pt(n),r,a))},this.onTouchPanningStart=function(r){var o=n.setup.disabled,i=n.props.onPanningStart;if(!o){var a=Eb(n,r);if(a){var s=n.lastTouch&&+new Date-n.lastTouch<200&&r.touches.length===1;if(!s){n.lastTouch=+new Date,ao(n);var l=r.touches,c=l.length===1,u=l.length===2;c&&(ao(n),Cb(n,r),Ct(pt(n),r,i)),u&&n.onPinchStart(r)}}}},this.onTouchPanning=function(r){var o=n.setup.disabled,i=n.props.onPanning;if(n.isPanning&&r.touches.length===1){if(o)return;var a=Sb(n);if(!a)return;r.preventDefault(),r.stopPropagation();var s=r.touches[0];Tb(n,s.clientX,s.clientY),Ct(pt(n),r,i)}else r.touches.length>1&&n.onPinch(r)},this.onTouchPanningStop=function(r){n.onPanningStop(r),n.onPinchStop(r)},this.onDoubleClick=function(r){var o=n.setup.disabled;if(!o){var i=uW(n,r);i&&cW(n,r)}},this.clearPanning=function(r){n.isPanning&&n.onPanningStop(r)},this.setKeyPressed=function(r){n.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){n.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(o){return n.pressedKeys[o]}):!0},this.setTransformState=function(r,o,i){var a=n.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(o)&&!Number.isNaN(i)){r!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=r),n.transformState.positionX=o,n.transformState.positionY=i,n.applyTransformation();var s=pt(n);n.onChangeCallbacks.forEach(function(l){return l(s)}),Ct(s,{scale:r,positionX:o,positionY:i},a)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var r=O2(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,o,i){return n.props.customTransform?n.props.customTransform(r,o,i):zj(r,o,i)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var r=n.transformState,o=r.scale,i=r.positionX,a=r.positionY,s=n.handleTransformStyles(i,a,o);n.contentComponent.style.transform=s}},this.getContext=function(){return pt(n)},this.onChange=function(r){return n.onChangeCallbacks.has(r)||n.onChangeCallbacks.add(r),function(){n.onChangeCallbacks.delete(r)}},this.onInit=function(r){return n.onInitCallbacks.has(r)||n.onInitCallbacks.add(r),function(){n.onInitCallbacks.delete(r)}},this.init=function(r,o){n.cleanupWindowEvents(),n.wrapperComponent=r,n.contentComponent=o,Ka(n,n.transformState.scale),n.handleInitializeWrapperEvents(r),n.handleInitialize(r,o),n.initializeWindowEvents(),n.isInitialized=!0;var i=pt(n);Ct(i,void 0,n.props.onInit)},this.props=t,this.setup=kb(this.props),this.transformState=A2(this.props)}return e}(),w0=be.createContext(null),fW=function(e,t){return typeof e=="function"?e(t):e},b0=be.forwardRef(function(e,t){var n=h.useRef(new dW(e)).current,r=fW(e.children,ey(n));return h.useImperativeHandle(t,function(){return ey(n)},[n]),h.useEffect(function(){n.update(e)},[n,e]),be.createElement(w0.Provider,{value:n},r)});be.forwardRef(function(e,t){var n=h.useRef(null),r=h.useContext(w0);return h.useEffect(function(){return r.onChange(function(o){if(n.current){var i=0,a=0;n.current.style.transform=r.handleTransformStyles(i,a,1/o.instance.transformState.scale)}})},[r]),be.createElement("div",na({},e,{ref:jj([n,t])}))});function pW(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",n==="top"&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var hW=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,Ab={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};pW(hW);var E0=function(e){var t=e.children,n=e.wrapperClass,r=n===void 0?"":n,o=e.contentClass,i=o===void 0?"":o,a=e.wrapperStyle,s=e.contentStyle,l=e.wrapperProps,c=l===void 0?{}:l,u=e.contentProps,d=u===void 0?{}:u,f=h.useContext(w0),m=f.init,y=f.cleanupWindowEvents,v=h.useRef(null),S=h.useRef(null);return h.useEffect(function(){var _=v.current,b=S.current;return _!==null&&b!==null&&m&&(m==null||m(_,b)),function(){y==null||y()}},[]),be.createElement("div",na({},c,{ref:v,className:"".concat(Jg.wrapperClass," ").concat(Ab.wrapper," ").concat(r),style:a}),be.createElement("div",na({},d,{ref:S,className:"".concat(Jg.contentClass," ").concat(Ab.content," ").concat(i),style:s}),t))};const mW={width:void 0,height:void 0,initialZoom:1,minZoom:.1,maxZoom:5,initialX:0,initialY:0};function gW(e){return{...mW,...e}}function yW(e,t,n){const r=h.useRef(null),o=h.useMemo(()=>gW(t),[t]),i=h.useCallback(()=>{var y;const m=(y=r.current)==null?void 0:y.instance;return m?{scale:m.transformState.scale,positionX:m.transformState.positionX,positionY:m.transformState.positionY}:{scale:o.initialZoom,positionX:o.initialX,positionY:o.initialY}},[o]),a=h.useCallback(()=>{var m;(m=r.current)==null||m.resetTransform()},[]),s=h.useCallback(()=>{var m;(m=r.current)==null||m.centerView()},[]),l=h.useCallback(m=>{var v;const y=Math.max(o.minZoom,Math.min(o.maxZoom,m));(v=r.current)==null||v.setTransform(i().positionX,i().positionY,y)},[o.minZoom,o.maxZoom,i]),c=h.useCallback((m,y)=>{var v;(v=r.current)==null||v.setTransform(m,y,i().scale)},[i]),u=h.useCallback(()=>e,[e]),d=h.useCallback(m=>{n&&n({scale:m.state.scale,positionX:m.state.positionX,positionY:m.state.positionY})},[n]),f=h.useMemo(()=>({resetView:a,fitToView:s,setZoom:l,panTo:c,getTransform:i,getContentBounds:u}),[a,s,l,c,i,u]);return{transformRef:r,resolvedConfig:o,refMethods:f,handleTransformChange:d}}const vW=h.forwardRef(function({positions:t,bounds:n,showVirtualGlyphStyling:r=!0,viewport:o,canvas:i,disableInteraction:a=!1,showControls:s=!0,onTransformChange:l,className:c},u){const{transformRef:d,resolvedConfig:f,refMethods:m,handleTransformChange:y}=yW(n,o,l),v=h.useRef(null);h.useImperativeHandle(u,()=>({...m,getSvgElement:()=>v.current}),[m]);const S=(i==null?void 0:i.width)??n.width,_=(i==null?void 0:i.height)??n.height,b=(o==null?void 0:o.width)??"100%",w=(o==null?void 0:o.height)??_;return p("div",{className:j(Cn.interactiveContainer,c),style:{width:b,height:w},children:p(b0,{ref:d,initialScale:f.initialZoom,minScale:f.minZoom,maxScale:f.maxZoom,initialPositionX:f.initialX,initialPositionY:f.initialY,centerOnInit:!0,doubleClick:{disabled:a,mode:"reset"},wheel:{disabled:a,step:.1},panning:{disabled:a,velocityDisabled:!1},pinch:{disabled:a},onTransformed:y,children:({zoomIn:x,zoomOut:N,resetTransform:C})=>L(gt,{children:[p(E0,{wrapperStyle:{width:"100%",height:"100%",overflow:"hidden"},contentStyle:{width:S,height:_},children:p(S2,{ref:v,positions:t,bounds:n,showVirtualGlyphStyling:r,backgroundColor:i==null?void 0:i.backgroundColor,showPaperEffect:i==null?void 0:i.showPaperEffect})}),s&&!a&&L("div",{className:Cn.controls,children:[p("button",{type:"button",className:Cn.controlButton,onClick:()=>x(),"aria-label":"Zoom in",children:"+"}),p("button",{type:"button",className:Cn.controlButton,onClick:()=>N(),"aria-label":"Zoom out",children:""}),p("button",{type:"button",className:Cn.controlButton,onClick:()=>C(),"aria-label":"Reset view",children:""})]})]})})})}),wa=h.forwardRef(function({glyphs:t,strategy:n="ltr",config:r,width:o,height:i,overflow:a="clip",mode:s="static",canvas:l,viewport:c,disableInteraction:u=!1,showControls:d=!0,onTransformChange:f,glyphMap:m,graphemeMap:y,emptyContent:v,showVirtualGlyphStyling:S=!0,className:_,style:b,glyphEmPx:w,zoom:x=1,writingSystem:N,wordBoundaries:C,lineBreaks:T},k){const D=h.useRef(null),R=h.useRef(null),I=h.useMemo(()=>({glyphMap:m,graphemeMap:y}),[m,y]),z=s7(t,I),O=h.useMemo(()=>{const q={...typeof r=="string"?{}:r??{}};return l!=null&&l.width&&(n==="block"||n==="composed-block"||!n)&&(q.maxWidth=l.width),l!=null&&l.height&&(n==="block"||n==="composed-block"||!n)&&(q.maxHeight=l.height),typeof w=="number"&&w>0&&(q.glyphWidth=w,q.glyphHeight=w),q},[r,l==null?void 0:l.width,l==null?void 0:l.height,n,w]),U=h.useMemo(()=>l!=null&&l.width&&n==="ltr"?"block":n,[n,l==null?void 0:l.width]),W=h.useMemo(()=>N&&(U==="block"||U==="composed-block")?y7(N,C,T):U,[N,C,T,U]),{positions:$,bounds:M}=E7(z,W,O);h.useImperativeHandle(k,()=>({resetView:()=>{var V;return(V=D.current)==null?void 0:V.resetView()},fitToView:()=>{var V;return(V=D.current)==null?void 0:V.fitToView()},setZoom:V=>{var q;return(q=D.current)==null?void 0:q.setZoom(V)},panTo:(V,q)=>{var Q;return(Q=D.current)==null?void 0:Q.panTo(V,q)},getTransform:()=>{var V;return((V=D.current)==null?void 0:V.getTransform())??{scale:1,positionX:0,positionY:0}},getContentBounds:()=>{var V;return((V=D.current)==null?void 0:V.getContentBounds())??M},getSvgElement:()=>{var V;return(V=D.current)!=null&&V.getSvgElement?D.current.getSvgElement():R.current}}),[M]);const P={clip:"hidden",scroll:"auto",visible:"visible"},B=h.useMemo(()=>({...b,width:typeof o=="number"?o*x:o??M.width*x,height:typeof i=="number"?i*x:i??M.height*x,overflow:P[a],display:"flex",alignItems:"center",justifyContent:"center",fontSize:w?`${w}px`:void 0}),[b,o,i,M.width,M.height,a,w,x]);return z.length===0?v?p("div",{className:j(Cn.container,Cn.empty,_),style:b,children:v}):null:s==="interactive"?p("div",{className:j(Cn.container,Cn.interactive,_),style:b,children:p(vW,{ref:D,positions:$,bounds:M,showVirtualGlyphStyling:S,viewport:c,canvas:l,disableInteraction:u,showControls:d,onTransformChange:f})}):p("div",{className:j(Cn.container,Cn.centered,_),style:B,children:p(S2,{ref:R,positions:$,bounds:M,showVirtualGlyphStyling:S,zoom:x})})}),_W="_detailedLexiconDisplay_2k594_1",wW="_detailedLexiconLeft_2k594_12",bW="_detailedLexiconSvg_2k594_21",EW="_detailedLexiconNoSpelling_2k594_31",SW="_detailedLexiconLemma_2k594_44",xW="_detailedLexiconPronunciation_2k594_51",CW="_detailedLexiconBadges_2k594_57",TW="_externalBadge_2k594_63",NW="_autoSpellBadge_2k594_72",kW="_detailedLexiconRight_2k594_81",AW="_detailSection_2k594_90",RW="_sectionHeader_2k594_96",IW="_meaningText_2k594_103",LW="_posValue_2k594_110",OW="_graphemeList_2k594_120",PW="_graphemeName_2k594_126",MW="_etymologySection_2k594_135",DW="_etymologyStats_2k594_141",FW="_etymologyStat_2k594_141",$W="_ancestorList_2k594_152",BW="_ancestorItem_2k594_158",VW="_ancestorType_2k594_165",UW="_ancestorLemma_2k594_171",zW="_notesText_2k594_176",jW="_ipaChar_2k594_184",Xe={detailedLexiconDisplay:_W,detailedLexiconLeft:wW,detailedLexiconSvg:bW,detailedLexiconNoSpelling:EW,detailedLexiconLemma:SW,detailedLexiconPronunciation:xW,detailedLexiconBadges:CW,externalBadge:TW,autoSpellBadge:NW,detailedLexiconRight:kW,detailSection:AW,sectionHeader:RW,meaningText:IW,posValue:LW,graphemeList:OW,graphemeName:PW,etymologySection:MW,etymologyStats:DW,etymologyStat:FW,ancestorList:$W,ancestorItem:BW,ancestorType:VW,ancestorLemma:UW,notesText:zW,ipaChar:jW};function $2({lexiconData:e,graphemeMap:t,showAncestry:n=!0}){var a,s,l;const r=((a=e.ancestors)==null?void 0:a.length)??0,o=((s=e.descendants)==null?void 0:s.length)??0,i=e.spellingDisplay&&e.spellingDisplay.length>0;return console.log("graphemeMap:",t," SpellingDisplay:",e.spellingDisplay),L("div",{className:Xe.detailedLexiconDisplay,children:[L("div",{className:Xe.detailedLexiconLeft,children:[i?p("div",{className:Xe.detailedLexiconSvg,children:p(wa,{glyphs:e.spellingDisplay,graphemeMap:t,strategy:"ltr",config:"compact",glyphEmPx:64,zoom:1,emptyContent:p("span",{children:"No spelling"})})}):p("div",{className:Xe.detailedLexiconNoSpelling,children:"No spelling"}),p("h2",{className:Xe.detailedLexiconLemma,children:e.pronunciation?`/${e.pronunciation}/`:e.lemma}),L("div",{className:Xe.detailedLexiconBadges,children:[!e.is_native&&p("span",{className:Xe.externalBadge,children:"External"}),e.auto_spell&&p("span",{className:Xe.autoSpellBadge,children:"Auto-spell"})]})]}),L("div",{className:Xe.detailedLexiconRight,children:[e.meaning&&L("div",{className:Xe.detailSection,children:[p("h3",{className:Xe.sectionHeader,children:"Meaning"}),p("p",{className:Xe.meaningText,children:e.meaning})]}),e.part_of_speech&&L("div",{className:Xe.detailSection,children:[p("h3",{className:Xe.sectionHeader,children:"Part of Speech"}),p("span",{className:Xe.posValue,children:e.part_of_speech})]}),e.spellingDisplay&&e.spellingDisplay.length>0&&L("div",{className:Xe.detailSection,children:[p("h3",{className:Xe.sectionHeader,children:"Spelling"}),p("div",{className:Xe.graphemeList,children:e.spellingDisplay.map((c,u)=>{var d,f;return c.type==="grapheme"?p("span",{className:Xe.graphemeName,children:((d=c.grapheme)==null?void 0:d.name)??""},`g-${(f=c.grapheme)==null?void 0:f.id}-${u}`):p("span",{className:Xe.ipaChar,title:`IPA: ${c.ipaCharacter}`,children:c.ipaCharacter},`ipa-${u}`)})})]}),n&&(r>0||o>0)&&L("div",{className:`${Xe.detailSection} ${Xe.etymologySection}`,children:[p("h3",{className:Xe.sectionHeader,children:"Etymology"}),L("div",{className:Xe.etymologyStats,children:[r>0&&L("span",{className:Xe.etymologyStat,children:[r," ancestor",r!==1?"s":""]}),o>0&&L("span",{className:Xe.etymologyStat,children:[o," descendant",o!==1?"s":""]})]}),((l=e.ancestors)==null?void 0:l.length)>0&&p("div",{className:Xe.ancestorList,children:e.ancestors.map((c,u)=>L("span",{className:Xe.ancestorItem,children:[p("span",{className:Xe.ancestorType,children:c.ancestry_type}),p("span",{className:Xe.ancestorLemma,children:c.ancestor.pronunciation??c.ancestor.lemma})]},`${c.ancestor.id}-${u}`))})]}),e.notes&&L("div",{className:Xe.detailSection,children:[p("h3",{className:Xe.sectionHeader,children:"Notes"}),p("p",{className:Xe.notesText,children:e.notes})]})]})]})}const WW="_compactCard_1c42p_1",GW="_clickable_1c42p_14",HW="_lemma_1c42p_24",XW="_spellingContainer_1c42p_36",YW="_scaledSpellingWrapper_1c42p_52",qW="_scaledSpellingContent_1c42p_65",KW="_noSpelling_1c42p_70",ZW="_pronunciation_1c42p_82",QW="_meaning_1c42p_88",JW="_badges_1c42p_98",eG="_externalBadge_1c42p_106",tG="_posBadge_1c42p_116",nG="_spellingText_1c42p_124",rG="_ipaChar_1c42p_135",kr={compactCard:WW,clickable:GW,lemma:HW,spellingContainer:XW,scaledSpellingWrapper:YW,scaledSpellingContent:qW,noSpelling:KW,pronunciation:ZW,meaning:QW,badges:JW,externalBadge:eG,posBadge:tG,spellingText:nG,ipaChar:rG};function oG({glyphs:e,graphemeMap:t,maxWidth:n,maxHeight:r}){const o=h.useRef(null),[i,a]=h.useState(1);return h.useEffect(()=>{if(!o.current)return;const s=()=>{const d=o.current;if(!d)return;let f=d.getBoundingClientRect(),m=f.width,y=f.height;if((m===0||y===0)&&d.firstElementChild){const b=d.firstElementChild.getBoundingClientRect();m=b.width||m,y=b.height||y}if(m===0||y===0){const b=d.querySelector("svg");if(b){const w=b.getBoundingClientRect();m=w.width||m,y=w.height||y}}if(m===0||y===0)return;const v=n&&m>n?n/m:1,S=r&&y>r?r/y:1,_=Math.min(v,S,1);a(b=>Math.abs(b-_)<1e-4?b:_)},l=new ResizeObserver(()=>{s()});l.observe(o.current);const c=requestAnimationFrame(s),u=()=>s();return window.addEventListener("resize",u),()=>{l.disconnect(),cancelAnimationFrame(c),window.removeEventListener("resize",u)}},[n,r]),!e||e.length===0?null:p("div",{className:kr.scaledSpellingWrapper,children:p("div",{ref:o,className:kr.scaledSpellingContent,style:{display:"inline-block",transform:`scale(${i})`,transformOrigin:"center center"},children:p(wa,{glyphs:e,graphemeMap:t,strategy:"ltr",config:"compact",glyphEmPx:32})})})}function iG({lexiconData:e,graphemeMap:t,onClick:n}){const r=(e.spellingDisplay??e.spelling.map(a=>({type:"grapheme",grapheme:a}))).map(a=>{var s;return a.type==="grapheme"?((s=a.grapheme)==null?void 0:s.name)??"?":a.ipaCharacter??a}).join(" "),o=e.meaning?e.meaning.length>50?`${e.meaning.substring(0,47)}...`:e.meaning:null,i=e.spellingDisplay&&e.spellingDisplay.length>0;return L("div",{className:j(kr.compactCard,{[kr.clickable]:!!n}),onClick:n,children:[p("h3",{className:kr.lemma,children:e.pronunciation?`/${e.pronunciation}/`:e.lemma}),i?p("div",{className:kr.spellingContainer,children:p(oG,{glyphs:e.spellingDisplay,graphemeMap:t,maxWidth:180,maxHeight:60})}):p("div",{className:kr.noSpelling,children:"(no spelling)"}),p("div",{className:kr.spellingText,title:r,children:r}),o&&p("p",{className:kr.meaning,children:o}),L("div",{className:kr.badges,children:[!e.is_native&&p("span",{className:kr.externalBadge,children:"External"}),e.part_of_speech&&p("span",{className:kr.posBadge,children:e.part_of_speech})]})]})}const aG="_container_rjmn1_1",sG="_toolbar_rjmn1_9",lG="_toolbarLeft_rjmn1_17",cG="_toolbarRight_rjmn1_25",uG="_searchContainer_rjmn1_32",dG="_searchInput_rjmn1_39",fG="_searchIcon_rjmn1_59",pG="_filterButton_rjmn1_68",hG="_filterActive_rjmn1_72",mG="_filterDropdown_rjmn1_83",gG="_sortContainer_rjmn1_88",yG="_sortLabel_rjmn1_94",vG="_viewToggle_rjmn1_100",_G="_viewButton_rjmn1_107",wG="_viewButtonActive_rjmn1_126",bG="_resultsPerPage_rjmn1_134",EG="_resultCount_rjmn1_142",SG="_content_rjmn1_148",xG="_grid_rjmn1_154",CG="_gridCompact_rjmn1_159",TG="_gridDetailed_rjmn1_163",NG="_virtualContainer_rjmn1_167",kG="_virtualContent_rjmn1_172",AG="_galleryItem_rjmn1_179",RG="_galleryItemGrow_rjmn1_191",IG="_galleryItemClickable_rjmn1_195",LG="_categoryHeader_rjmn1_206",OG="_categoryToggle_rjmn1_219",PG="_categoryChevron_rjmn1_241",MG="_categoryChevronCollapsed_rjmn1_247",DG="_categoryTitle_rjmn1_251",FG="_categoryCount_rjmn1_258",$G="_pagination_rjmn1_264",BG="_paginationLabel_rjmn1_272",VG="_paginationInput_rjmn1_279",UG="_paginationInputWrapper_rjmn1_294",zG="_paginationButton_rjmn1_302",jG="_stateSlot_rjmn1_327",WG="_loadingSlot_rjmn1_337",GG="_loadingSpinner_rjmn1_341",HG="_spin_rjmn1_1",XG="_loadingText_rjmn1_356",YG="_loadingProgress_rjmn1_360",qG="_loadingProgressBar_rjmn1_369",KG="_errorSlot_rjmn1_375",ZG="_errorIcon_rjmn1_379",QG="_errorMessage_rjmn1_384",JG="_retryButton_rjmn1_390",eH="_emptySlot_rjmn1_406",tH="_emptyIcon_rjmn1_410",nH="_emptyMessage_rjmn1_416",rH="_emptySubMessage_rjmn1_421",oH="_srOnly_rjmn1_426",_e={container:aG,toolbar:sG,toolbarLeft:lG,toolbarRight:cG,searchContainer:uG,searchInput:dG,searchIcon:fG,filterButton:pG,filterActive:hG,filterDropdown:mG,sortContainer:gG,sortLabel:yG,viewToggle:vG,viewButton:_G,viewButtonActive:wG,resultsPerPage:bG,resultCount:EG,content:SG,grid:xG,gridCompact:CG,gridDetailed:TG,virtualContainer:NG,virtualContent:kG,galleryItem:AG,galleryItemGrow:RG,galleryItemClickable:IG,categoryHeader:LG,categoryToggle:OG,categoryChevron:PG,categoryChevronCollapsed:MG,categoryTitle:DG,categoryCount:FG,pagination:$G,paginationLabel:BG,paginationInput:VG,paginationInputWrapper:UG,paginationButton:zG,stateSlot:jG,loadingSlot:WG,loadingSpinner:GG,spin:HG,loadingText:XG,loadingProgress:YG,loadingProgressBar:qG,errorSlot:KG,errorIcon:ZG,errorMessage:QG,retryButton:JG,emptySlot:eH,emptyIcon:tH,emptyMessage:nH,emptySubMessage:rH,srOnly:oH};function iH({itemCount:e,options:t={},columnsPerRow:n=1,containerRef:r,onItemActivate:o}){const{enabled:i=!0,mode:a="roving",wrapAround:s=!0,homeEndKeys:l=!0,pageUpDownKeys:c=!0,pageJumpSize:u}=t,[d,f]=h.useState(-1),m=h.useRef(new Map),y=h.useMemo(()=>u??Math.max(n,5),[u,n]),v=h.useCallback(O=>{if(O<0||O>=e)return;f(O);const U=m.current.get(O);U&&a==="roving"&&U.focus()},[e,a]),S=h.useCallback(()=>{if(d<0){v(0);return}const O=d-n;if(O>=0)v(O);else if(s){const U=Math.floor((e-1)/n)*n,W=Math.min(U+d%n,e-1);v(W)}},[d,n,e,s,v]),_=h.useCallback(()=>{if(d<0){v(0);return}const O=d+n;if(O<e)v(O);else if(s){const U=d%n;v(Math.min(U,e-1))}},[d,n,e,s,v]),b=h.useCallback(()=>{if(d<0){v(0);return}d>0?v(d-1):s&&v(e-1)},[d,e,s,v]),w=h.useCallback(()=>{if(d<0){v(0);return}d<e-1?v(d+1):s&&v(0)},[d,e,s,v]),x=h.useCallback(()=>{v(0)},[v]),N=h.useCallback(()=>{v(e-1)},[v,e]),C=h.useCallback(()=>{const O=Math.max(0,d-y);v(O)},[d,y,v]),T=h.useCallback(()=>{const O=Math.min(e-1,d+y);v(O)},[d,e,y,v]),k=h.useCallback(()=>{d>=0&&o&&o(d)},[d,o]),D=h.useCallback(O=>{if(i)switch(O.key){case"ArrowUp":O.preventDefault(),S();break;case"ArrowDown":O.preventDefault(),_();break;case"ArrowLeft":O.preventDefault(),b();break;case"ArrowRight":O.preventDefault(),w();break;case"Home":l&&(O.preventDefault(),x());break;case"End":l&&(O.preventDefault(),N());break;case"PageUp":c&&(O.preventDefault(),C());break;case"PageDown":c&&(O.preventDefault(),T());break;case"Enter":case" ":d>=0&&(O.preventDefault(),k());break}},[i,S,_,b,w,x,N,C,T,l,c,d,k]),R=h.useCallback(O=>U=>{!i||a!=="roving"||D(U)},[i,a,D]),I=h.useCallback(O=>({tabIndex:a==="roving"?d===O?0:-1:0,"data-focused":d===O,onKeyDown:R(O),onFocus:()=>f(O),onClick:()=>{f(O),o&&o(O)},ref:U=>{U?m.current.set(O,U):m.current.delete(O)}}),[a,d,R,o]),z=h.useMemo(()=>({role:"grid","aria-activedescendant":d>=0?`gallery-item-${d}`:void 0,onKeyDown:a==="tab-only"?D:()=>{}}),[d,a,D]);return h.useEffect(()=>{d>=e&&f(Math.max(0,e-1))},[e,d]),{focusedIndex:d,setFocusedIndex:f,getItemProps:I,containerProps:z}}function aH({items:e,options:t={},containerRef:n,columnsPerRow:r=1}){const{enabled:o,autoEnableThreshold:i=100,estimatedItemHeight:a=200,overscan:s=3}=t,l=h.useMemo(()=>o!==void 0?o:e.length>i,[o,e.length,i]),[c,u]=h.useState(0),[d,f]=h.useState(0),m=h.useRef(new Map);h.useEffect(()=>{if(!l||!n.current)return;const w=n.current,x=()=>{u(w.scrollTop)},N=()=>{f(w.clientHeight)};return N(),w.addEventListener("scroll",x,{passive:!0}),window.addEventListener("resize",N),()=>{w.removeEventListener("scroll",x),window.removeEventListener("resize",N)}},[l,n]);const y=h.useMemo(()=>Math.ceil(e.length/r),[e.length,r]),{virtualItems:v,totalSize:S}=h.useMemo(()=>{if(!l)return{virtualItems:e.map((T,k)=>({index:k,start:0,size:a,lane:k%r})),totalSize:y*a};const w=a,x=Math.max(0,Math.floor(c/w)-s),N=Math.min(y-1,Math.ceil((c+d)/w)+s),C=[];for(let T=x;T<=N;T++)for(let k=0;k<r;k++){const D=T*r+k;D<e.length&&C.push({index:D,start:T*w,size:m.current.get(D)??w,lane:k})}return{virtualItems:C,totalSize:y*w}},[l,e,c,d,a,s,r,y]),_=h.useCallback(w=>{if(!n.current)return;const N=Math.floor(w/r)*a;n.current.scrollTo({top:N,behavior:"smooth"})},[n,r,a]),b=h.useCallback(w=>x=>{if(x){const N=x.getBoundingClientRect().height;m.current.get(w)!==N&&m.current.set(w,N)}},[]);return{virtualItems:v,totalSize:S,isVirtualized:l,scrollToIndex:_,measureElement:b}}function sH(e,t){const[n,r]=h.useState(e);return h.useEffect(()=>{const o=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(o)}},[e,t]),n}function lH({containerRef:e,minItemWidth:t,gap:n}){const[r,o]=h.useState(1);return h.useEffect(()=>{if(!e.current)return;const i=()=>{if(!e.current)return;const s=e.current.clientWidth,l=Math.max(1,Math.floor((s+n)/(t+n)));o(l)};i();const a=new ResizeObserver(i);return a.observe(e.current),()=>a.disconnect()},[e,t,n]),r}function cH({data:e,groupBy:t,categoryOrder:n="natural",collapsedCategories:r}){return h.useMemo(()=>{if(!t)return{categoryGroups:[],elements:e.map((f,m)=>({type:"item",item:f,index:m})),visibleItemCount:e.length,headerIndices:new Set};const o=new Map,i=[];e.forEach(f=>{const m=t(f);o.has(m)||(o.set(m,[]),i.push(m)),o.get(m).push(f)});let a;if(n==="natural")a=i;else if(n==="alphabetical")a=[...i].sort((f,m)=>f.localeCompare(m));else{const f=new Set(n),m=n.filter(v=>o.has(v)),y=i.filter(v=>!f.has(v));a=[...m,...y]}const s=a.map(f=>({category:f,items:o.get(f)||[]})),l=[],c=new Set;let u=0;for(const f of s){const m=r.has(f.category);if(c.add(l.length),l.push({type:"header",category:f.category,items:f.items,isCollapsed:m}),m)u+=f.items.length;else for(const y of f.items)l.push({type:"item",item:y,index:u}),u++}const d=l.filter(f=>f.type==="item").length;return{categoryGroups:s,elements:l,visibleItemCount:d,headerIndices:c}},[e,t,n,r])}const uH="_chevron_1nelv_1",dH="_isAbsolutePosition_1nelv_1",fH="_blockPosition_1nelv_4",pH="_isRight_1nelv_10",hH="_isLeft_1nelv_13",mH="_chevronOpen_1nelv_19",gH="_toggleBtn_1nelv_23",Xo={chevron:uH,isAbsolutePosition:dH,blockPosition:fH,isRight:pH,isLeft:hH,chevronOpen:mH,toggleBtn:gH},yH={basic:{initial:{maxHeight:0,opacity:0},animate:{maxHeight:"1000px",opacity:1},exit:{maxHeight:0,opacity:0},transition:{ease:"easeInOut",duration:.2}}};function vH({main:e,children:t,chevronLocation:n="right",darkenBackground:r=!0,brightenSelected:o=!0,isOpen:i,setIsOpen:a,isAbsolutePosition:s=!0,defaultIsOpen:l=!1,themeType:c="basic"}){const u=h.useMemo(()=>wl(yH,c,{}),[c]),[d,f]=h.useState(l),m=i??d,y=a??f;return L(bu,{children:[L("div",{onClick:()=>y(!m),className:j(ne.flexRow,ne.alignItemsCenter,Xo.toggleBtn,o&&m&&Xo.brightenBackground),children:[e,n!=="none"&&p(Ht,{iconName:"chevron-down",color:"var(--interactive-base, white)",className:j(Xo.chevron,m&&Xo.chevronOpen,n==="left"?Xo.isLeft:Xo.isRight,s?Xo.isAbsolutePosition:Xo.blockPosition)})]}),m&&p(un.div,{...u,className:j(r&&Xo.darkenBackground),children:t},"sidebar")]})}function Rb({searchFn:e,searchQuery:t,onSearchQueryChange:n,searchPlaceholder:r="Search...",searchDebounceMs:o=300,showSearchIcon:i=!0,filterMenu:a,filterMenuRef:s,filterButtonLabel:l="Filter options",sortOptions:c,sortBy:u,setSortBy:d,sortLabel:f="Sort by:",showViewToggle:m=!1,viewMode:y,setViewMode:v,showResultsPerPage:S=!1,maxResultPerPage:_,setMaxResultPerPage:b,maxResultOptions:w=[],totalCount:x,filteredCount:N,toolbarStartSlot:C,toolbarEndSlot:T,styling:k={}}){var H,K,Y,ce,me,fe,ie,he,oe,re,le,Z,ae,J,ge,we,Je,at;const[D,R]=h.useState(""),[I,z]=h.useState(!1),O=t??D,U=n??R,W=sH(O,o);h.useEffect(()=>{var Ne,yt;if(e){const rt=(yt=(Ne=s==null?void 0:s.current)==null?void 0:Ne.getValue)==null?void 0:yt.call(Ne);e(W,rt)}},[W,e,s]);const $=h.useCallback(Ne=>{U(Ne.target.value)},[U]),M=h.useCallback(()=>{if(e&&(s!=null&&s.current)){const Ne=s.current.getValue();e(O,Ne)}z(!1)},[e,s,O]),P=h.useCallback(Ne=>{d&&d(Ne)},[d]),B=h.useCallback(Ne=>{v&&v(Ne)},[v]),V=h.useCallback(Ne=>{b&&b(Ne)},[b]),q=h.useMemo(()=>N!==void 0&&x!==void 0?`${N} of ${x}`:x!==void 0?`${x} items`:null,[N,x]),Q=h.useMemo(()=>c==null?void 0:c.find(Ne=>Ne.value===u),[c,u]);return L("div",{className:j(_e.toolbar,(H=k.toolbar)==null?void 0:H.className),style:(K=k.toolbar)==null?void 0:K.style,children:[C,L("div",{className:_e.toolbarLeft,children:[e&&L("div",{className:j(_e.searchContainer,(Y=k.searchInput)==null?void 0:Y.className),style:(ce=k.searchInput)==null?void 0:ce.style,children:[p("input",{type:"text",value:O,onChange:$,placeholder:r,className:j(_e.searchInput,(me=k.searchInput)==null?void 0:me.inputClassName),style:(fe=k.searchInput)==null?void 0:fe.inputStyle,"aria-label":r}),i&&p(Ht,{iconName:"search",size:"1rem",className:_e.searchIcon})]}),a&&p("div",{className:j(_e.filterButton,(ie=k.filterButton)==null?void 0:ie.className),style:(he=k.filterButton)==null?void 0:he.style,children:p(vH,{main:p(xe,{iconName:"funnel","aria-label":l,"aria-expanded":I,onClick:Ne=>{Ne.stopPropagation()}}),isOpen:I,setIsOpen:z,isAbsolutePosition:!0,chevronLocation:"none",children:L("div",{className:_e.filterDropdown,children:[a,p("div",{style:{marginTop:"0.75rem",display:"flex",justifyContent:"flex-end"},children:p(xe,{iconName:"check-lg",onClick:M,children:"Apply"})})]})})})]}),L("div",{className:_e.toolbarRight,children:[c&&c.length>0&&d&&L("div",{className:j(_e.sortContainer,(oe=k.sortDropdown)==null?void 0:oe.className),style:(re=k.sortDropdown)==null?void 0:re.style,children:[f&&p("span",{className:_e.sortLabel,children:f}),p(sl,{toggleBtn:p("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:(Q==null?void 0:Q.displayComponent)??"Select..."}),showCaret:!0,contentPin:"bottom-end",children:c.map(Ne=>p("button",{onClick:()=>P(Ne.value),style:{display:"block",width:"100%",padding:"0.5rem 0.75rem",textAlign:"left",background:u===Ne.value?"var(--surface-hover)":"transparent",border:"none",cursor:"pointer"},children:Ne.displayComponent},Ne.value))})]}),m&&v&&L("div",{className:j(_e.viewToggle,(le=k.viewToggle)==null?void 0:le.className),style:(Z=k.viewToggle)==null?void 0:Z.style,role:"group","aria-label":"View mode",children:[p("button",{type:"button",className:j(_e.viewButton,y==="detailed"&&_e.viewButtonActive,(ae=k.viewToggle)==null?void 0:ae.buttonClassName,y==="detailed"&&((J=k.viewToggle)==null?void 0:J.activeButtonClassName)),onClick:()=>B("detailed"),"aria-pressed":y==="detailed",title:"List view",children:p(Ht,{iconName:"list",size:"1.25rem"})}),p("button",{type:"button",className:j(_e.viewButton,y==="compact"&&_e.viewButtonActive,(ge=k.viewToggle)==null?void 0:ge.buttonClassName,y==="compact"&&((we=k.viewToggle)==null?void 0:we.activeButtonClassName)),onClick:()=>B("compact"),"aria-pressed":y==="compact",title:"Grid view",children:p(Ht,{iconName:"grid-3x3-gap",size:"1.25rem"})})]}),S&&w.length>0&&b&&L("div",{className:j(_e.resultsPerPage,(Je=k.resultsPerPage)==null?void 0:Je.className),style:(at=k.resultsPerPage)==null?void 0:at.style,children:[p("span",{children:"Show:"}),p(sl,{toggleBtn:p("span",{children:_}),showCaret:!0,contentPin:"bottom-end",children:w.map(Ne=>p("button",{onClick:()=>V(Ne),style:{display:"block",width:"100%",padding:"0.5rem 0.75rem",textAlign:"left",background:_===Ne?"var(--surface-hover)":"transparent",border:"none",cursor:"pointer"},children:Ne},Ne))})]}),q&&p("span",{className:_e.resultCount,children:q}),T]})]})}function _H({category:e,items:t,isCollapsed:n,collapsible:r,onToggle:o,showCount:i,renderCustomHeader:a,styling:s={}}){var u,d,f,m,y,v,S;const l=h.useCallback(()=>{r&&o&&o(e,!n)},[r,o,e,n]),c=h.useCallback(_=>{r&&(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),l())},[r,l]);return a?p("div",{className:j(_e.categoryHeader,(u=s.categoryHeader)==null?void 0:u.className),style:(d=s.categoryHeader)==null?void 0:d.style,role:"rowheader","aria-expanded":r?!n:void 0,"aria-controls":r?`category-items-${e}`:void 0,tabIndex:r?0:void 0,onClick:r?l:void 0,onKeyDown:r?c:void 0,children:a(e,t,n)}):p("div",{className:j(_e.categoryHeader,(f=s.categoryHeader)==null?void 0:f.className),style:(m=s.categoryHeader)==null?void 0:m.style,role:"rowheader","aria-expanded":r?!n:void 0,"aria-controls":r?`category-items-${e}`:void 0,children:r?L("button",{type:"button",className:j(_e.categoryToggle,(y=s.categoryHeader)==null?void 0:y.toggleClassName),onClick:l,onKeyDown:c,"aria-label":`${n?"Expand":"Collapse"} ${e}`,children:[p("svg",{className:j(_e.categoryChevron,n&&_e.categoryChevronCollapsed),width:"16",height:"16",viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",children:p("path",{d:"M4 6L8 10L12 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),p("h3",{className:j(_e.categoryTitle,(v=s.categoryHeader)==null?void 0:v.titleClassName),children:e}),i&&L("span",{className:_e.categoryCount,children:["(",t.length,")"]})]}):L(gt,{children:[p("h3",{className:j(_e.categoryTitle,(S=s.categoryHeader)==null?void 0:S.titleClassName),children:e}),i&&L("span",{className:_e.categoryCount,children:["(",t.length,")"]})]})})}function wH({data:e,keyExtractor:t,renderItem:n,viewMode:r,itemGrow:o=!1,minItemWidth:i="160px",maxItemWidth:a="1fr",itemGap:s="1rem",keyboardNavigation:l,onItemFocus:c,onItemActivate:u,virtualization:d,groupBy:f,renderCategoryHeader:m,categoryOrder:y="natural",collapsibleCategories:v=!0,collapsedCategories:S=new Set,onCategoryToggle:_,showCategoryCount:b=!0,styling:w={}}){var Q,H,K,Y,ce,me;const x=h.useRef(null),N=h.useMemo(()=>{const fe=i.match(/^(\d+(?:\.\d+)?)/);return fe?parseFloat(fe[1]):160},[i]),C=h.useMemo(()=>{const fe=s.match(/^(\d+(?:\.\d+)?)/);if(!fe)return 16;const ie=parseFloat(fe[1]);return s.includes("rem")?ie*16:ie},[s]),T=lH({containerRef:x,minItemWidth:N,gap:C}),k=r==="detailed"?1:T,{elements:D,visibleItemCount:R,headerIndices:I}=cH({data:e,groupBy:f,categoryOrder:y,collapsedCategories:S}),z=!!f,O=h.useCallback(fe=>{u&&e[fe]&&u(e[fe],fe)},[u,e]),U=h.useCallback(fe=>{c&&e[fe]&&c(e[fe],fe)},[c,e]),{getItemProps:W,containerProps:$}=iH({itemCount:z?R:e.length,options:{...l,onItemActivate:O},columnsPerRow:k,containerRef:x}),{virtualItems:M,totalSize:P,isVirtualized:B}=aH({items:e,options:d,containerRef:x,columnsPerRow:k}),V=h.useMemo(()=>({"--gallery-min-width":i,"--gallery-max-width":a,"--gallery-gap":s}),[i,a,s]),q=h.useCallback((fe,ie,he)=>{var ae,J;const oe=t(fe,ie),le=(l==null?void 0:l.enabled)!==!1?W(ie):null,Z=he!==void 0?{position:"absolute",top:he,left:0,right:0}:{};return p("div",{id:`gallery-item-${ie}`,className:j(_e.galleryItem,o&&_e.galleryItemGrow,u&&_e.galleryItemClickable,(ae=w.card)==null?void 0:ae.className),style:{...Z,...(J=w.card)==null?void 0:J.style},role:"gridcell","aria-rowindex":Math.floor(ie/k)+1,"aria-colindex":ie%k+1,tabIndex:(le==null?void 0:le.tabIndex)??0,"data-focused":(le==null?void 0:le["data-focused"])??!1,onKeyDown:le==null?void 0:le.onKeyDown,ref:le==null?void 0:le.ref,onFocus:()=>{var ge;U(ie),(ge=le==null?void 0:le.onFocus)==null||ge.call(le)},onClick:()=>{var ge;(ge=le==null?void 0:le.onClick)==null||ge.call(le)},children:n(fe,ie)},oe)},[t,W,l,o,u,w,k,U,n]);if(B)return p("div",{ref:x,className:j(_e.content,(Q=w.content)==null?void 0:Q.className),style:(H=w.content)==null?void 0:H.style,...$,children:p("div",{className:_e.virtualContainer,style:{height:P},children:p("div",{className:j(_e.grid,r==="compact"?_e.gridCompact:_e.gridDetailed),style:V,children:M.map(fe=>{const ie=e[fe.index];return q(ie,fe.index,fe.start)})})})});if(z){let fe=0;return p("div",{ref:x,className:j(_e.content,(K=w.content)==null?void 0:K.className),style:(Y=w.content)==null?void 0:Y.style,...$,children:p("div",{className:j(_e.grid,r==="compact"?_e.gridCompact:_e.gridDetailed),style:V,role:"grid","aria-rowcount":Math.ceil(R/k),"aria-colcount":k,children:D.map(ie=>{if(ie.type==="header")return p(_H,{category:ie.category,items:ie.items,isCollapsed:ie.isCollapsed,collapsible:v,onToggle:_,showCount:b,renderCustomHeader:m,styling:w},`header-${ie.category}`);const he=fe++;return q(ie.item,he)})})})}return p("div",{ref:x,className:j(_e.content,(ce=w.content)==null?void 0:ce.className),style:(me=w.content)==null?void 0:me.style,...$,children:p("div",{className:j(_e.grid,r==="compact"?_e.gridCompact:_e.gridDetailed),style:V,role:"grid","aria-rowcount":Math.ceil(e.length/k),"aria-colcount":k,children:e.map((fe,ie)=>q(fe,ie))})})}function bH({curPage:e,setCurPage:t,maxPage:n,labelFormat:r="{current} of {max}",styling:o={},disabled:i=!1}){var S,_;const[a,s]=h.useState(String(e));h.useEffect(()=>{s(String(e))},[e]);const l=h.useCallback(()=>{const b=parseInt(a,10);isNaN(b)||b<1?(t(1),s("1")):b>n?(t(n),s(String(n))):(t(b),s(String(b)))},[a,n,t]),c=h.useCallback(b=>{b.key==="Enter"&&(l(),b.target.blur())},[l]),u=h.useCallback(()=>{e>1&&t(e-1)},[e,t]),d=h.useCallback(()=>{e<n&&t(e+1)},[e,n,t]),f=h.useCallback(()=>{t(1)},[t]),m=h.useCallback(()=>{t(n)},[t,n]);if(n<=1)return null;const y=i||e<=1,v=i||e>=n;return L("nav",{className:j(_e.pagination,(S=o.pagination)==null?void 0:S.className),style:(_=o.pagination)==null?void 0:_.style,"aria-label":"Pagination",children:[p("button",{type:"button",className:_e.paginationButton,onClick:f,disabled:y,"aria-label":"Go to first page",title:"First page",children:p(Ht,{iconName:"chevron-bar-left",size:"1rem"})}),p("button",{type:"button",className:_e.paginationButton,onClick:u,disabled:y,"aria-label":"Go to previous page",title:"Previous page",children:p(Ht,{iconName:"chevron-left",size:"1rem"})}),L("div",{className:_e.paginationInputWrapper,children:[p("input",{type:"text",value:a,onChange:b=>s(b.target.value),onBlur:l,onKeyDown:c,className:_e.paginationInput,"aria-label":"Current page",disabled:i}),L("span",{children:["of ",n]})]}),p("button",{type:"button",className:_e.paginationButton,onClick:d,disabled:v,"aria-label":"Go to next page",title:"Next page",children:p(Ht,{iconName:"chevron-right",size:"1rem"})}),p("button",{type:"button",className:_e.paginationButton,onClick:m,disabled:v,"aria-label":"Go to last page",title:"Last page",children:p(Ht,{iconName:"chevron-bar-right",size:"1rem"})})]})}function EH({loadingSlot:e,progress:t,styling:n}){var r,o,i,a,s,l;return e?typeof e=="function"?p("div",{className:j(_e.stateSlot,_e.loadingSlot,(r=n==null?void 0:n.loadingState)==null?void 0:r.className),style:(o=n==null?void 0:n.loadingState)==null?void 0:o.style,role:"status","aria-busy":"true","aria-live":"polite",children:e({progress:t})}):p("div",{className:j(_e.stateSlot,_e.loadingSlot,(i=n==null?void 0:n.loadingState)==null?void 0:i.className),style:(a=n==null?void 0:n.loadingState)==null?void 0:a.style,role:"status","aria-busy":"true","aria-live":"polite",children:e}):L("div",{className:j(_e.stateSlot,_e.loadingSlot,(s=n==null?void 0:n.loadingState)==null?void 0:s.className),style:(l=n==null?void 0:n.loadingState)==null?void 0:l.style,role:"status","aria-busy":"true","aria-live":"polite",children:[p("div",{className:_e.loadingSpinner,"aria-hidden":"true"}),p("span",{className:_e.loadingText,children:"Loading..."}),t!==void 0&&p("div",{className:_e.loadingProgress,children:p("div",{className:_e.loadingProgressBar,style:{width:`${Math.round(t*100)}%`},role:"progressbar","aria-valuenow":Math.round(t*100),"aria-valuemin":0,"aria-valuemax":100})})]})}function SH({error:e,errorSlot:t,onRetry:n,styling:r}){var o,i,a,s,l,c;return t?typeof t=="function"?p("div",{className:j(_e.stateSlot,_e.errorSlot,(o=r==null?void 0:r.errorState)==null?void 0:o.className),style:(i=r==null?void 0:r.errorState)==null?void 0:i.style,role:"alert",children:t({error:e,onRetry:n})}):p("div",{className:j(_e.stateSlot,_e.errorSlot,(a=r==null?void 0:r.errorState)==null?void 0:a.className),style:(s=r==null?void 0:r.errorState)==null?void 0:s.style,role:"alert",children:t}):L("div",{className:j(_e.stateSlot,_e.errorSlot,(l=r==null?void 0:r.errorState)==null?void 0:l.className),style:(c=r==null?void 0:r.errorState)==null?void 0:c.style,role:"alert",children:[p(Ht,{iconName:"exclamation-triangle-fill",className:_e.errorIcon,size:"2.5rem"}),p("p",{className:_e.errorMessage,children:e.message||"An error occurred while loading data."}),n&&p(Ke,{onClick:n,className:_e.retryButton,children:"Try Again"})]})}function xH({emptySlot:e,emptyMessage:t="No items found",noResultsMessage:n,searchQuery:r,hasActiveFilters:o=!1,styling:i}){var d,f,m,y,v,S;const a=!!(r!=null&&r.trim()||o),s=h.useMemo(()=>({searchQuery:r,hasActiveFilters:o}),[r,o]);if(e)return typeof e=="function"?p("div",{className:j(_e.stateSlot,_e.emptySlot,(d=i==null?void 0:i.emptyState)==null?void 0:d.className),style:(f=i==null?void 0:i.emptyState)==null?void 0:f.style,role:"status",children:e(s)}):p("div",{className:j(_e.stateSlot,_e.emptySlot,(m=i==null?void 0:i.emptyState)==null?void 0:m.className),style:(y=i==null?void 0:i.emptyState)==null?void 0:y.style,role:"status",children:e});const l=a?"search":"inbox",c=a?n||`No results found${r?` for "${r}"`:""}`:t,u=a?"Try adjusting your search or filters":"Items will appear here once added";return L("div",{className:j(_e.stateSlot,_e.emptySlot,(v=i==null?void 0:i.emptyState)==null?void 0:v.className),style:(S=i==null?void 0:i.emptyState)==null?void 0:S.style,role:"status",children:[p(Ht,{iconName:l,className:_e.emptyIcon,size:"3rem"}),p("p",{className:_e.emptyMessage,children:c}),p("p",{className:_e.emptySubMessage,children:u})]})}function S0({data:e,keyExtractor:t,renderDetailed:n,renderCompact:r,itemGrow:o=!1,minItemWidth:i="160px",maxItemWidth:a="1fr",itemGap:s="1rem",toolbarStartSlot:l,toolbarEndSlot:c,searchFn:u,searchQuery:d,onSearchQueryChange:f,searchPlaceholder:m="Search...",searchDebounceMs:y=300,showSearchIcon:v=!0,filterMenu:S,filterMenuRef:_,filterButtonLabel:b="Filter options",sortOptions:w,sortBy:x,setSortBy:N,sortLabel:C="Sort by:",showDisplaySwitch:T=!1,viewMode:k,setViewMode:D,defaultViewMode:R="detailed",curPage:I=1,setCurPage:z,maxPage:O=1,maxResultPerPage:U,setMaxResultPerPage:W,maxResultOptions:$,totalCount:M,paginationLabelFormat:P="{current} of {max}",showResultsPerPage:B,isLoading:V=!1,loadingSlot:q,loadingProgress:Q,error:H,errorSlot:K,onRetry:Y,emptySlot:ce,emptyMessage:me="No items found",noResultsMessage:fe,keyboardNavigation:ie,onItemFocus:he,onItemActivate:oe,virtualization:re,groupBy:le,renderCategoryHeader:Z,categoryOrder:ae="natural",collapsibleCategories:J,defaultCollapsedCategories:ge=[],collapsedCategories:we,onCategoryToggle:Je,showCategoryCount:at=!0,styling:Ne={},ariaLabel:yt,ariaLabelledBy:rt,ariaDescribedBy:rn}){var cr,ds,wn,yo,xa,Wr,ve,fs;const Mt=h.useId(),[_n,St]=h.useState(R),jn=k??_n,yi=D??St,[Ea,Sa]=h.useState(()=>new Set(ge)),us=we??Ea,vi=J??!!le,Pe=h.useCallback((ot,vt)=>{we||Sa(vo=>{const _o=new Set(vo);return vt?_o.add(ot):_o.delete(ot),_o}),Je==null||Je(ot,vt)},[we,Je]),Wn=h.useMemo(()=>jn==="compact"&&r?r:n,[jn,r,n]),lr=h.useMemo(()=>B!==void 0?B:!!$&&$.length>0&&!!W,[B,$,W]),_i=h.useMemo(()=>{var vt,vo;if(!(_!=null&&_.current))return!1;const ot=(vo=(vt=_.current).getValue)==null?void 0:vo.call(vt);return ot!=null},[_]);return V?p("div",{className:j(_e.container,(cr=Ne.container)==null?void 0:cr.className),style:(ds=Ne.container)==null?void 0:ds.style,role:"region","aria-label":yt||"Gallery","aria-labelledby":rt,"aria-describedby":rn,"aria-busy":"true",children:p(EH,{loadingSlot:q,progress:Q,styling:Ne})}):H?p("div",{className:j(_e.container,(wn=Ne.container)==null?void 0:wn.className),style:(yo=Ne.container)==null?void 0:yo.style,role:"region","aria-label":yt||"Gallery","aria-labelledby":rt,"aria-describedby":rn,children:p(SH,{error:H,errorSlot:K,onRetry:Y,styling:Ne})}):e.length===0?L("div",{className:j(_e.container,(xa=Ne.container)==null?void 0:xa.className),style:(Wr=Ne.container)==null?void 0:Wr.style,role:"region","aria-label":yt||"Gallery","aria-labelledby":rt,"aria-describedby":rn,children:[p(Rb,{searchFn:u,searchQuery:d,onSearchQueryChange:f,searchPlaceholder:m,searchDebounceMs:y,showSearchIcon:v,filterMenu:S,filterMenuRef:_,filterButtonLabel:b,sortOptions:w,sortBy:x,setSortBy:N,sortLabel:C,showViewToggle:T,viewMode:jn,setViewMode:yi,showResultsPerPage:lr,maxResultPerPage:U,setMaxResultPerPage:W,maxResultOptions:$,totalCount:M,filteredCount:0,toolbarStartSlot:l,toolbarEndSlot:c,styling:Ne}),p(xH,{emptySlot:ce,emptyMessage:me,noResultsMessage:fe,searchQuery:d,hasActiveFilters:_i,styling:Ne})]}):L("div",{className:j(_e.container,(ve=Ne.container)==null?void 0:ve.className),style:(fs=Ne.container)==null?void 0:fs.style,role:"region","aria-label":yt||"Gallery","aria-labelledby":rt,"aria-describedby":rn,id:`gallery-${Mt}`,children:[p(Rb,{searchFn:u,searchQuery:d,onSearchQueryChange:f,searchPlaceholder:m,searchDebounceMs:y,showSearchIcon:v,filterMenu:S,filterMenuRef:_,filterButtonLabel:b,sortOptions:w,sortBy:x,setSortBy:N,sortLabel:C,showViewToggle:T,viewMode:jn,setViewMode:yi,showResultsPerPage:lr,maxResultPerPage:U,setMaxResultPerPage:W,maxResultOptions:$,totalCount:M,filteredCount:e.length,toolbarStartSlot:l,toolbarEndSlot:c,styling:Ne}),p(wH,{data:e,keyExtractor:t,renderItem:Wn,viewMode:jn,itemGrow:o,minItemWidth:i,maxItemWidth:a,itemGap:s,keyboardNavigation:ie,onItemFocus:he,onItemActivate:oe,virtualization:re,groupBy:le,renderCategoryHeader:Z,categoryOrder:ae,collapsibleCategories:vi,collapsedCategories:us,onCategoryToggle:Pe,showCategoryCount:at,styling:Ne}),z&&O>1&&p(bH,{curPage:I,setCurPage:z,maxPage:O,labelFormat:P,styling:Ne})]})}const CH=[{value:"pronunciation-asc",displayComponent:p("span",{children:"Pronunciation (A-Z)"})},{value:"pronunciation-desc",displayComponent:p("span",{children:"Pronunciation (Z-A)"})},{value:"descendants-desc",displayComponent:p("span",{children:"Most Descendants"})},{value:"descendants-asc",displayComponent:p("span",{children:"Fewest Descendants"})},{value:"created-desc",displayComponent:p("span",{children:"Newest First"})},{value:"created-asc",displayComponent:p("span",{children:"Oldest First"})}],TH=[12,24,48,96];function NH({lexicons:e,graphemeMap:t,isLoading:n,error:r,defaultViewMode:o="expanded",onLexiconClick:i}){const{api:a,refresh:s}=Xt(),[l,c]=h.useState(null),[u,d]=h.useState(!1),[f,m]=h.useState(null),y=H=>H==="expanded"?"detailed":"compact",[v,S]=h.useState(y(o)),[_,b]=h.useState(""),[w,x]=h.useState("pronunciation-asc"),[N,C]=h.useState(1),[T,k]=h.useState(24),[D,R]=h.useState("all"),I=h.useMemo(()=>{let H=e;if(D==="native"?H=H.filter(K=>K.is_native):D==="external"&&(H=H.filter(K=>!K.is_native)),_.trim()){const K=_.toLowerCase().trim();H=H.filter(Y=>{var ce,me;return!!((ce=Y.pronunciation)!=null&&ce.toLowerCase().includes(K)||Y.lemma.toLowerCase().includes(K)||(me=Y.meaning)!=null&&me.toLowerCase().includes(K))})}return H=[...H].sort((K,Y)=>{var ce,me,fe,ie;switch(w){case"pronunciation-asc":return(K.pronunciation??K.lemma).localeCompare(Y.pronunciation??Y.lemma);case"pronunciation-desc":return(Y.pronunciation??Y.lemma).localeCompare(K.pronunciation??K.lemma);case"descendants-desc":return(((ce=Y.descendants)==null?void 0:ce.length)??0)-(((me=K.descendants)==null?void 0:me.length)??0);case"descendants-asc":return(((fe=K.descendants)==null?void 0:fe.length)??0)-(((ie=Y.descendants)==null?void 0:ie.length)??0);case"created-desc":return new Date(Y.created_at).getTime()-new Date(K.created_at).getTime();case"created-asc":return new Date(K.created_at).getTime()-new Date(Y.created_at).getTime();default:return 0}}),H},[e,_,w,D]),z=Math.max(1,Math.ceil(I.length/T)),O=Math.min(N,z);O!==N&&C(O);const U=h.useMemo(()=>{const H=(O-1)*T;return I.slice(H,H+T)},[I,O,T]),W=h.useCallback(H=>{b(H),C(1)},[]),$=h.useCallback(H=>{i&&i(H)},[i]),M=h.useCallback((H,K)=>{var ce;K==null||K.stopPropagation();const Y=((ce=H.descendants)==null?void 0:ce.length)??0;if(Y>0){const me=H.descendants.slice(0,3).map(ie=>ie.descendant.lemma).join(", "),fe=Y>3?` and ${Y-3} more`:"";m(`This word has ${Y} descendant${Y!==1?"s":""}: ${me}${fe}. Deleting it will remove the etymology links from those words.`)}else m(null);c(H)},[]),P=h.useCallback(async()=>{var H;if(l){d(!0);try{const K=a.lexicon.delete(l.id);if(!K.success)console.error("Failed to delete lexicon entry:",(H=K.error)==null?void 0:H.message);else try{s==null||s()}catch{}c(null),m(null)}catch(K){console.error("Failed to delete lexicon entry",K)}finally{d(!1)}}},[a,s,l]),B=h.useCallback(H=>L("div",{onClick:()=>i==null?void 0:i(H),style:{cursor:i?"pointer":"default",transition:"transform 0.2s ease, box-shadow 0.2s ease",borderRadius:"8px",position:"relative"},className:i?"lexicon-clickable":void 0,role:i?"button":void 0,tabIndex:i?0:void 0,onKeyDown:i?K=>{(K.key==="Enter"||K.key===" ")&&(K.preventDefault(),i(H))}:void 0,onMouseEnter:K=>{i&&(K.currentTarget.style.transform="translateY(-2px)",K.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)")},onMouseLeave:K=>{i&&(K.currentTarget.style.transform="translateY(0)",K.currentTarget.style.boxShadow="none")},children:[p("div",{style:{position:"absolute",top:8,right:8,zIndex:10},children:p(xe,{iconName:"trash",iconColor:"var(--status-bad)",onClick:K=>M(H,K),"aria-label":`Delete ${H.pronunciation??H.lemma}`})}),p($2,{lexiconData:H,graphemeMap:t})]}),[i,M,t]),V=h.useCallback(H=>L("div",{style:{position:"relative"},children:[p("div",{style:{position:"absolute",top:6,right:6,zIndex:10},children:p(xe,{iconName:"trash",iconColor:"var(--status-bad)",onClick:K=>M(H,K),"aria-label":`Delete ${H.pronunciation??H.lemma}`})}),p(iG,{lexiconData:H,graphemeMap:t,onClick:i?()=>i(H):void 0})]}),[i,M,t]),q=h.useMemo(()=>L("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[p("span",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Filter:"}),L("select",{value:D,onChange:H=>{R(H.target.value),C(1)},style:{padding:"0.25rem 0.5rem",borderRadius:"4px",border:"1px solid var(--border-primary)",background:"var(--surface-base)",color:"var(--text-primary)",fontSize:"0.875rem"},children:[p("option",{value:"all",children:"All Words"}),p("option",{value:"native",children:"Native Only"}),p("option",{value:"external",children:"External Only"})]})]}),[D]),Q=h.useCallback(({searchQuery:H,hasActiveFilters:K})=>H||(K||D!=="all")?L("div",{style:{textAlign:"center",padding:"2rem"},children:[L("p",{children:["No words match your search ",H&&`"${H}"`]}),p("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Try adjusting your search or filter settings"})]}):L("div",{style:{textAlign:"center",padding:"2rem"},children:[p("p",{children:"No words found. Create one to get started!"}),p(xe,{as:mt,to:"/lexicon/create",iconName:"plus-lg",className:qe.primary,style:{marginTop:"1rem"},children:"Create Your First Word"})]}),[D]);return L(gt,{children:[p("div",{style:{marginBottom:"0.5rem"},children:q}),p(S0,{data:U,keyExtractor:H=>H.id,renderDetailed:B,renderCompact:V,minItemWidth:"200px",itemGap:"1rem",searchFn:W,searchQuery:_,onSearchQueryChange:b,searchPlaceholder:"Search by lemma, pronunciation, meaning...",sortOptions:CH,sortBy:w,setSortBy:x,viewMode:v,setViewMode:S,showDisplaySwitch:!0,curPage:O,setCurPage:C,maxPage:z,maxResultPerPage:T,setMaxResultPerPage:k,maxResultOptions:TH,totalCount:I.length,isLoading:n,error:r,emptySlot:Q,onItemActivate:$,keyboardNavigation:{enabled:!0,mode:"roving",wrapAround:!0},virtualization:{autoEnableThreshold:100,estimatedItemHeight:v==="detailed"?180:200},styling:{content:{style:{padding:"1rem"}}},ariaLabel:"Lexicon gallery"}),p(zn,{isOpen:l!==null,setIsOpen:H=>{H||(c(null),m(null))},onClose:()=>{c(null),m(null)},allowClose:!0,children:L("div",{style:{padding:"1rem",minWidth:320},children:[p("h2",{style:{marginTop:0},children:"Delete word"}),L("p",{children:["Are you sure you want to delete ",p("strong",{children:(l==null?void 0:l.pronunciation)??(l==null?void 0:l.lemma)}),"?"]}),f&&L("div",{style:{padding:"0.75rem",background:"var(--status-warning-bg, #fef3cd)",border:"1px solid var(--status-warning, #ffc107)",borderRadius:"4px",marginBottom:"1rem",fontSize:"0.875rem"},children:[p("strong",{children:"Warning:"})," ",f]}),L("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"1rem"},children:[p(Ke,{onClick:()=>{c(null),m(null)},disabled:u,children:"Cancel"}),p(Ke,{onClick:P,disabled:u,style:{background:"var(--danger)",color:"white"},children:u?"Deleting...":"Delete Word"})]})]})})]})}function kH(){const e=An(),{data:t,isLoading:n,error:r}=Xt(),o=t.lexiconComplete??[],i=h.useMemo(()=>new Map((t.graphemesComplete??[]).map(s=>[s.id,s])),[t.graphemesComplete]),a=h.useCallback(s=>{e(`/lexicon/db/${s.id}`)},[e]);return L("div",{className:j(ne.flexColumn,st.parentSize),style:{gap:"1rem"},children:[L("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 0.5rem"},children:[p("h2",{style:{margin:0},children:"Lexicon"}),p(xe,{as:mt,to:"/lexicon/create",iconName:"plus-lg",className:qe.primary,children:"New Word"})]}),p("div",{style:{flex:1,minHeight:0,overflow:"auto"},children:p(NH,{lexicons:o,graphemeMap:i,isLoading:n,error:r,onLexiconClick:a})})]})}async function AH(e,t){await Promise.all(e.map(n=>Promise.resolve(n(t))))}function RH(e){const t=n=>async r=>{const o=[...e[n],...e.all];await AH(o,r)};return{onChange:t("onChange"),onBlur:t("onBlur"),onFocus:t("onFocus"),onInput:t("onInput"),onSubmit:t("onSubmit")}}const B2=e=>e===void 0||e===""||e===null,V2=(e,t,n,r,o=!1)=>{let i=null,a=null,s;if(t!=null)i=t,a=t,s=!1;else if(n){const l=e!==void 0?e:"",c=n.validator(l,r);a=c,c!==null&&!o?i=null:i=c,s=c===null}else s=!0;return{warning:i,isValid:s,actualWarning:a}},ny=(e,t,n)=>({isEmpty:B2(e),isTouched:!1,warning:t,isInputValid:n,isChanged:!1}),Wl=(e,t,n)=>{e(r=>({...r,[t]:{...r[t],...n}}))},IH=(e,t)=>()=>{e(n=>{const r=n[t];return(r==null?void 0:r.isTouched)===!0?n:{...n,[t]:{...n[t],isTouched:!0}}})},LH=(e,t)=>n=>{var i;const r=((i=n.currentTarget)==null?void 0:i.value)||n.target.value,o=B2(r);e(a=>{const s=a[t];return(s==null?void 0:s.isEmpty)===o?a:{...a,[t]:{...a[t],isEmpty:o}}})},OH=(e,t,n,r)=>async(o,i)=>{if(n)try{const a=n(i);a===null&&r&&r(o,i),e(s=>{var d,f;const l=s[t],c=a===null,u=((d=l==null?void 0:l.warning)==null?void 0:d.message)!==(a==null?void 0:a.message)||((f=l==null?void 0:l.warning)==null?void 0:f.type)!==(a==null?void 0:a.type);return(l==null?void 0:l.isInputValid)===c&&!u?s:{...s,[t]:{...s[t],warning:a,isInputValid:c}}})}catch(a){console.error("Unexpected validation error",a),e(s=>({...s,[t]:{...s[t],warning:{message:"Validation error occurred",type:"error",category:"validation_error"},isInputValid:!1}}))}},PH=e=>async t=>{if(!e)return;const r=t.target.type==="file"?t.target.files:t.target.value;await e(t,r)},MH=(e,t,n,r)=>()=>{const o=n();if(!o){console.warn(`Cannot reset field "${t}": initial options not found`);return}const i=o.defaultValue||void 0,a=o.showWarningOnInitial===!0,{warning:s,isValid:l}=V2(i,o.defaultWarning,o.validation,t,a),c=ny(i,s,l);e(f=>({...f,[t]:c}));const u=r(),d=u==null?void 0:u.current;d&&(i!==void 0?d.value=i:d.value="")};async function DH(e,t){const n=(t==null?void 0:t.quality)??.8;return new Promise((r,o)=>{const i=new Image,a=document.createElement("canvas"),s=a.getContext("2d");if(!s){o(new Error("Canvas context failed - your browser is cooked "));return}i.onload=()=>{a.width=i.width,a.height=i.height,s.drawImage(i,0,0),a.toBlob(l=>{if(!l){o(new Error("Compression failed"));return}const c=new File([l],e.name,{type:"image/jpeg",lastModified:Date.now()});r(c)},"image/jpeg",n)},i.onerror=()=>o(new Error("Failed to load image")),i.src=URL.createObjectURL(e)})}var U2={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.11.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2025
 * @license MIT
 */(function(e){(function(){var t="input is invalid type",n=typeof window=="object",r=n?window:{};r.JS_SHA256_NO_WINDOW&&(n=!1);var o=!n&&typeof self=="object",i=!r.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node&&process.type!="renderer";i?r=tA:o&&(r=self);var a=!r.JS_SHA256_NO_COMMON_JS&&!0&&e.exports,s=!r.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),c=[-2147483648,8388608,32768,128],u=[24,16,8,0],d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f=["hex","array","digest","arrayBuffer"],m=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(C){return Object.prototype.toString.call(C)==="[object Array]"}),s&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(C){return typeof C=="object"&&C.buffer&&C.buffer.constructor===ArrayBuffer});var y=function(C,T){return function(k){return new w(T,!0).update(k)[C]()}},v=function(C){var T=y("hex",C);i&&(T=S(T,C)),T.create=function(){return new w(C)},T.update=function(R){return T.create().update(R)};for(var k=0;k<f.length;++k){var D=f[k];T[D]=y(D,C)}return T},S=function(C,T){var k=_f,D=_f.Buffer,R=T?"sha224":"sha256",I;D.from&&!r.JS_SHA256_NO_BUFFER_FROM?I=D.from:I=function(O){return new D(O)};var z=function(O){if(typeof O=="string")return k.createHash(R).update(O,"utf8").digest("hex");if(O==null)throw new Error(t);return O.constructor===ArrayBuffer&&(O=new Uint8Array(O)),Array.isArray(O)||ArrayBuffer.isView(O)||O.constructor===D?k.createHash(R).update(I(O)).digest("hex"):C(O)};return z},_=function(C,T){return function(k,D){return new x(k,T,!0).update(D)[C]()}},b=function(C){var T=_("hex",C);T.create=function(R){return new x(R,C)},T.update=function(R,I){return T.create(R).update(I)};for(var k=0;k<f.length;++k){var D=f[k];T[D]=_(D,C)}return T};function w(C,T){T?(m[0]=m[16]=m[1]=m[2]=m[3]=m[4]=m[5]=m[6]=m[7]=m[8]=m[9]=m[10]=m[11]=m[12]=m[13]=m[14]=m[15]=0,this.blocks=m):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=C}w.prototype.update=function(C){if(!this.finalized){var T,k=typeof C;if(k!=="string"){if(k==="object"){if(C===null)throw new Error(t);if(s&&C.constructor===ArrayBuffer)C=new Uint8Array(C);else if(!Array.isArray(C)&&(!s||!ArrayBuffer.isView(C)))throw new Error(t)}else throw new Error(t);T=!0}for(var D,R=0,I,z=C.length,O=this.blocks;R<z;){if(this.hashed&&(this.hashed=!1,O[0]=this.block,this.block=O[16]=O[1]=O[2]=O[3]=O[4]=O[5]=O[6]=O[7]=O[8]=O[9]=O[10]=O[11]=O[12]=O[13]=O[14]=O[15]=0),T)for(I=this.start;R<z&&I<64;++R)O[I>>>2]|=C[R]<<u[I++&3];else for(I=this.start;R<z&&I<64;++R)D=C.charCodeAt(R),D<128?O[I>>>2]|=D<<u[I++&3]:D<2048?(O[I>>>2]|=(192|D>>>6)<<u[I++&3],O[I>>>2]|=(128|D&63)<<u[I++&3]):D<55296||D>=57344?(O[I>>>2]|=(224|D>>>12)<<u[I++&3],O[I>>>2]|=(128|D>>>6&63)<<u[I++&3],O[I>>>2]|=(128|D&63)<<u[I++&3]):(D=65536+((D&1023)<<10|C.charCodeAt(++R)&1023),O[I>>>2]|=(240|D>>>18)<<u[I++&3],O[I>>>2]|=(128|D>>>12&63)<<u[I++&3],O[I>>>2]|=(128|D>>>6&63)<<u[I++&3],O[I>>>2]|=(128|D&63)<<u[I++&3]);this.lastByteIndex=I,this.bytes+=I-this.start,I>=64?(this.block=O[16],this.start=I-64,this.hash(),this.hashed=!0):this.start=I}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},w.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var C=this.blocks,T=this.lastByteIndex;C[16]=this.block,C[T>>>2]|=c[T&3],this.block=C[16],T>=56&&(this.hashed||this.hash(),C[0]=this.block,C[16]=C[1]=C[2]=C[3]=C[4]=C[5]=C[6]=C[7]=C[8]=C[9]=C[10]=C[11]=C[12]=C[13]=C[14]=C[15]=0),C[14]=this.hBytes<<3|this.bytes>>>29,C[15]=this.bytes<<3,this.hash()}},w.prototype.hash=function(){var C=this.h0,T=this.h1,k=this.h2,D=this.h3,R=this.h4,I=this.h5,z=this.h6,O=this.h7,U=this.blocks,W,$,M,P,B,V,q,Q,H,K,Y;for(W=16;W<64;++W)B=U[W-15],$=(B>>>7|B<<25)^(B>>>18|B<<14)^B>>>3,B=U[W-2],M=(B>>>17|B<<15)^(B>>>19|B<<13)^B>>>10,U[W]=U[W-16]+$+U[W-7]+M<<0;for(Y=T&k,W=0;W<64;W+=4)this.first?(this.is224?(Q=300032,B=U[0]-1413257819,O=B-150054599<<0,D=B+24177077<<0):(Q=704751109,B=U[0]-210244248,O=B-1521486534<<0,D=B+143694565<<0),this.first=!1):($=(C>>>2|C<<30)^(C>>>13|C<<19)^(C>>>22|C<<10),M=(R>>>6|R<<26)^(R>>>11|R<<21)^(R>>>25|R<<7),Q=C&T,P=Q^C&k^Y,q=R&I^~R&z,B=O+M+q+d[W]+U[W],V=$+P,O=D+B<<0,D=B+V<<0),$=(D>>>2|D<<30)^(D>>>13|D<<19)^(D>>>22|D<<10),M=(O>>>6|O<<26)^(O>>>11|O<<21)^(O>>>25|O<<7),H=D&C,P=H^D&T^Q,q=O&R^~O&I,B=z+M+q+d[W+1]+U[W+1],V=$+P,z=k+B<<0,k=B+V<<0,$=(k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10),M=(z>>>6|z<<26)^(z>>>11|z<<21)^(z>>>25|z<<7),K=k&D,P=K^k&C^H,q=z&O^~z&R,B=I+M+q+d[W+2]+U[W+2],V=$+P,I=T+B<<0,T=B+V<<0,$=(T>>>2|T<<30)^(T>>>13|T<<19)^(T>>>22|T<<10),M=(I>>>6|I<<26)^(I>>>11|I<<21)^(I>>>25|I<<7),Y=T&k,P=Y^T&D^K,q=I&z^~I&O,B=R+M+q+d[W+3]+U[W+3],V=$+P,R=C+B<<0,C=B+V<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+C<<0,this.h1=this.h1+T<<0,this.h2=this.h2+k<<0,this.h3=this.h3+D<<0,this.h4=this.h4+R<<0,this.h5=this.h5+I<<0,this.h6=this.h6+z<<0,this.h7=this.h7+O<<0},w.prototype.hex=function(){this.finalize();var C=this.h0,T=this.h1,k=this.h2,D=this.h3,R=this.h4,I=this.h5,z=this.h6,O=this.h7,U=l[C>>>28&15]+l[C>>>24&15]+l[C>>>20&15]+l[C>>>16&15]+l[C>>>12&15]+l[C>>>8&15]+l[C>>>4&15]+l[C&15]+l[T>>>28&15]+l[T>>>24&15]+l[T>>>20&15]+l[T>>>16&15]+l[T>>>12&15]+l[T>>>8&15]+l[T>>>4&15]+l[T&15]+l[k>>>28&15]+l[k>>>24&15]+l[k>>>20&15]+l[k>>>16&15]+l[k>>>12&15]+l[k>>>8&15]+l[k>>>4&15]+l[k&15]+l[D>>>28&15]+l[D>>>24&15]+l[D>>>20&15]+l[D>>>16&15]+l[D>>>12&15]+l[D>>>8&15]+l[D>>>4&15]+l[D&15]+l[R>>>28&15]+l[R>>>24&15]+l[R>>>20&15]+l[R>>>16&15]+l[R>>>12&15]+l[R>>>8&15]+l[R>>>4&15]+l[R&15]+l[I>>>28&15]+l[I>>>24&15]+l[I>>>20&15]+l[I>>>16&15]+l[I>>>12&15]+l[I>>>8&15]+l[I>>>4&15]+l[I&15]+l[z>>>28&15]+l[z>>>24&15]+l[z>>>20&15]+l[z>>>16&15]+l[z>>>12&15]+l[z>>>8&15]+l[z>>>4&15]+l[z&15];return this.is224||(U+=l[O>>>28&15]+l[O>>>24&15]+l[O>>>20&15]+l[O>>>16&15]+l[O>>>12&15]+l[O>>>8&15]+l[O>>>4&15]+l[O&15]),U},w.prototype.toString=w.prototype.hex,w.prototype.digest=function(){this.finalize();var C=this.h0,T=this.h1,k=this.h2,D=this.h3,R=this.h4,I=this.h5,z=this.h6,O=this.h7,U=[C>>>24&255,C>>>16&255,C>>>8&255,C&255,T>>>24&255,T>>>16&255,T>>>8&255,T&255,k>>>24&255,k>>>16&255,k>>>8&255,k&255,D>>>24&255,D>>>16&255,D>>>8&255,D&255,R>>>24&255,R>>>16&255,R>>>8&255,R&255,I>>>24&255,I>>>16&255,I>>>8&255,I&255,z>>>24&255,z>>>16&255,z>>>8&255,z&255];return this.is224||U.push(O>>>24&255,O>>>16&255,O>>>8&255,O&255),U},w.prototype.array=w.prototype.digest,w.prototype.arrayBuffer=function(){this.finalize();var C=new ArrayBuffer(this.is224?28:32),T=new DataView(C);return T.setUint32(0,this.h0),T.setUint32(4,this.h1),T.setUint32(8,this.h2),T.setUint32(12,this.h3),T.setUint32(16,this.h4),T.setUint32(20,this.h5),T.setUint32(24,this.h6),this.is224||T.setUint32(28,this.h7),C};function x(C,T,k){var D,R=typeof C;if(R==="string"){var I=[],z=C.length,O=0,U;for(D=0;D<z;++D)U=C.charCodeAt(D),U<128?I[O++]=U:U<2048?(I[O++]=192|U>>>6,I[O++]=128|U&63):U<55296||U>=57344?(I[O++]=224|U>>>12,I[O++]=128|U>>>6&63,I[O++]=128|U&63):(U=65536+((U&1023)<<10|C.charCodeAt(++D)&1023),I[O++]=240|U>>>18,I[O++]=128|U>>>12&63,I[O++]=128|U>>>6&63,I[O++]=128|U&63);C=I}else if(R==="object"){if(C===null)throw new Error(t);if(s&&C.constructor===ArrayBuffer)C=new Uint8Array(C);else if(!Array.isArray(C)&&(!s||!ArrayBuffer.isView(C)))throw new Error(t)}else throw new Error(t);C.length>64&&(C=new w(T,!0).update(C).array());var W=[],$=[];for(D=0;D<64;++D){var M=C[D]||0;W[D]=92^M,$[D]=54^M}w.call(this,T,k),this.update($),this.oKeyPad=W,this.inner=!0,this.sharedMemory=k}x.prototype=new w,x.prototype.finalize=function(){if(w.prototype.finalize.call(this),this.inner){this.inner=!1;var C=this.array();w.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(C),w.prototype.finalize.call(this)}};var N=v();N.sha256=N,N.sha224=v(!0),N.sha256.hmac=b(),N.sha224.hmac=b(!0),a?e.exports=N:(r.sha256=N.sha256,r.sha224=N.sha224)})()})(U2);var FH=U2.exports;async function $H(e){const t=await e.arrayBuffer(),n=FH.sha256(t),r=[];for(let a=0;a<n.length;a+=2)r.push(parseInt(n.substring(a,a+2),16));const o=new Uint8Array(r);let i="";for(let a=0;a<o.length;a++)i+=String.fromCharCode(o[a]);return btoa(i)}const Rr={CDN_INVALID_ASSET_TYPE:"smartForm.cdn.error.invalidAssetType",CDN_INVALID_JSON:"smartForm.cdn.error.invalidJson",CDN_MISSING_FIELDS:"smartForm.cdn.error.missingFields",CDN_FILE_TOO_LARGE:"smartForm.cdn.error.fileTooLarge",CDN_INVALID_MIME_TYPE:"smartForm.cdn.error.invalidMimeType",CDN_DEDUP_CHECK_FAILED:"smartForm.cdn.error.dedupCheckFailed",CDN_UPLOAD_FAILED:"smartForm.cdn.error.uploadFailed",CDN_PERMISSION_DENIED:"smartForm.cdn.error.permissionDenied",CDN_NOT_FOUND:"smartForm.cdn.error.notFound",CDN_VALIDATION_ERROR:"smartForm.cdn.error.validationError",CDN_INTERNAL_ERROR:"smartForm.cdn.error.internalError",CDN_WEBHOOK_INVALID_PAYLOAD:"smartForm.cdn.error.webhookInvalidPayload",PREPROCESS_COMPRESSION_DISABLED:"smartForm.preprocess.error.compressionDisabled",PREPROCESS_VIDEO_TOO_LARGE:"smartForm.preprocess.error.videoTooLarge",PREPROCESS_UNSUPPORTED_TYPE:"smartForm.preprocess.error.unsupportedType",UPLOAD_INVALID_FIELD:"smartForm.upload.error.invalidField",UPLOAD_PRESIGN_FAILED:"smartForm.upload.error.presignFailed",UPLOAD_FAILED:"smartForm.upload.error.uploadFailed",S3_NO_BODY:"smartForm.s3.error.noBody",S3_DOWNLOAD_FAILED:"smartForm.s3.error.downloadFailed",S3_DELETE_FAILED:"smartForm.s3.error.deleteFailed",SQL_INTEGRITY_ERROR:"smartForm.sql.error.integrityError",SQL_OPERATION_FAILED:"smartForm.sql.error.operationFailed",INFRA_DATABASE_UNAVAILABLE:"smartForm.infra.error.databaseUnavailable",INFRA_DATABASE_CONNECTION_FAILED:"smartForm.infra.error.databaseConnectionFailed",INFRA_DATABASE_TIMEOUT:"smartForm.infra.error.databaseTimeout",INFRA_SERVICE_UNAVAILABLE:"smartForm.infra.error.serviceUnavailable",INFRA_INTERNAL_ERROR:"smartForm.infra.error.internalError",WEBHOOK_MISSING_METADATA:"smartForm.webhook.error.missingMetadata"};class Ir extends Error{constructor(t,n,r=400){super(n),this.name="SmartFormError",this.code=t,this.statusCode=r}}async function BH({file:e,assetType:t,options:n}){if(n!=null&&n.maxSizeInBytes&&e.size>n.maxSizeInBytes)switch(!0){case e.type.startsWith("image/"):if(!(n!=null&&n.doCompression))throw new Ir(Rr.PREPROCESS_COMPRESSION_DISABLED,"Image file too large - compression disabled ",400);e=await DH(e,n);break;case e.type.startsWith("video/"):throw new Ir(Rr.PREPROCESS_VIDEO_TOO_LARGE,"Video files too large - compress server-side ",400);default:throw new Ir(Rr.PREPROCESS_UNSUPPORTED_TYPE,`File type ${e.type} cannot be compressed`,400)}const r=await $H(e);return{file:e,assetType:t,presignRequest:{checksum:r,type:e.type,size:e.size,lastModified:e.lastModified}}}function VH(e,t){if(t)return t;const n={}.NEXT_PUBLIC_SMARTFORM_CDN_PRESIGN_URL||{}.NEXT_PUBLIC_CDN_DEFAULT_PRESIGN_URL;if(!n)throw new Ir(Rr.CDN_INTERNAL_ERROR,"NEXT_PUBLIC_SMARTFORM_CDN_PRESIGN_URL is not configured. Set this environment variable or provide a custom presignEndpoint.",500);if(!e)throw new Ir(Rr.CDN_INVALID_ASSET_TYPE,"Asset type is required for CDN upload",400);return`${n}/${e}`}function UH(e){const t={}.NEXT_PUBLIC_SMARTFORM_CDN_CONFIRM_URL||{}.NEXT_PUBLIC_CDN_DEFAULT_CONFIRM_URL;if(t)return`${t}/${e}`;const n={}.NEXT_PUBLIC_SMARTFORM_CDN_PRESIGN_URL||{}.NEXT_PUBLIC_CDN_DEFAULT_PRESIGN_URL;return n?`${n.replace(/\/presign\/?$/,"/confirm")}/${e}`:`/api/cdn/confirm/${e}`}async function zH(e,t,n){const r=[],o=Object.keys(t),i={},a=()=>{if(!n)return;const c=Object.values(i).reduce((d,f)=>d+f,0),u=o.length>0?Math.round(c/o.length*100):100;n(u,null)};for(const c of o){const u=t[c];if(!u)throw new Ir(Rr.CDN_INTERNAL_ERROR,`No presign configuration found for asset type "${c}". Check your presignFileUploadMap configuration.`,500);const d=(async()=>{i[c]=0,a();const f=e[c];if(f==null)return[c,null];if(!(f instanceof File))throw new Ir(Rr.UPLOAD_INVALID_FIELD,`Field "${u.assetType}" expected a File object, got ${typeof f}. Ensure the input type is "file".`,400);const m=await BH({file:f,assetType:u.assetType,options:u.options}),y=m.presignRequest.checksum,v=VH(u.assetType,u.presignEndpoint),S=await fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(m.presignRequest)});if(!S.ok){const C=await S.json().catch(()=>({}));throw new Ir(Rr.UPLOAD_PRESIGN_FAILED,`Presign request failed for "${u.assetType}": ${S.status} ${S.statusText}. Details: ${JSON.stringify(C)}`,S.status)}const _=await S.json();if(!_.uploadUrl)return i[c]=100,a(),[c,{objectRecordId:_.objectRecordId,blobId:_.blobId,accessUrl:_.accessUrl,deduplicated:!0,parameterizedUrl:_.parameterizedUrl}];if(n)await new Promise((C,T)=>{const k=new XMLHttpRequest;k.open("PUT",_.uploadUrl);const D=_.requiredHeaders||{};Object.entries(D).forEach(([R,I])=>k.setRequestHeader(R,I)),k.setRequestHeader("x-amz-checksum-sha256",y),k.upload.onprogress=R=>{if(R.lengthComputable){const I=Math.round(R.loaded/R.total*100);i[c]=I,n(Math.round(Object.values(i).reduce((z,O)=>z+O,0)/o.length),{fieldName:c,percent:I})}},k.onload=()=>{if(k.status>=200&&k.status<300)i[c]=100,n(Math.round(Object.values(i).reduce((R,I)=>R+I,0)/o.length),{fieldName:c,percent:100}),C();else{const R=k.responseText||k.statusText;T(new Ir(Rr.UPLOAD_FAILED,`File upload to S3 failed for "${u.assetType}": ${k.status} ${k.statusText}. S3 Error: ${R}`,k.status))}},k.onerror=()=>T(new Ir(Rr.UPLOAD_FAILED,`Network error during upload for "${u.assetType}"`,499)),k.send(m.file)});else{const C=await fetch(_.uploadUrl,{method:"PUT",headers:{..._.requiredHeaders||{},"x-amz-checksum-sha256":y},body:m.file});if(!C.ok){const T=await C.text().catch(()=>"Unknown error");throw new Ir(Rr.UPLOAD_FAILED,`File upload to S3 failed for "${u.assetType}": ${C.status} ${C.statusText}. S3 Error: ${T}`,C.status)}i[c]=100,a()}const b=UH(_.objectRecordId),x=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({checksum:y})});if(!x.ok){const C=await x.json().catch(()=>({}));let T;switch(x.status){case 400:T=`Upload validation failed: ${JSON.stringify(C)}`;break;case 403:T="Permission denied: You don't have access to this upload";break;case 404:T="Upload record not found. The presigned URL may have expired.";break;default:T=`Confirm failed: ${x.status} ${x.statusText}`}throw new Ir(Rr.UPLOAD_FAILED,`Upload confirmation failed for "${u.assetType}": ${T}`,x.status)}const N=await x.json();return i[c]=100,a(),[c,{objectRecordId:N.objectRecordId,blobId:N.blobId,accessUrl:N.accessUrl,deduplicated:N.deduplicated,parameterizedUrl:N.parameterizedUrl}]})();r.push(d)}const s=await Promise.all(r),l={};for(const[c,u]of s)u!==null&&(l[c]=u);return l}const jH=({formValues:e,method:t,action:n,target:r})=>{const o=document.createElement("form");o.method=t||"POST",o.action=n||"",Object.entries(e).forEach(([i,a])=>{const s=document.createElement("input");s.type="hidden",s.name=i,Array.isArray(a)||typeof a=="object"&&a!==null?s.value=JSON.stringify(a):s.value=String(a||""),o.appendChild(s)}),r&&(o.target=r),document.body.appendChild(o),o.submit(),document.body.removeChild(o)};function cs({mode:e="onChange"}={}){const t=h.useRef({}),[n,r]=h.useState({}),o=h.useRef({}),[i,a]=h.useState({}),s=h.useRef(null),{showProcessingLockModal:l,setContent:c}=XN(),u=h.useRef({}),d=h.useMemo(()=>{const S=Object.values(n);return S.length>0&&S.every(_=>_.isInputValid)},[n]),f=h.useCallback(S=>{if(!t.current[S]){const _={current:null};return t.current={...t.current,[S]:_},_}return t.current[S]},[]);h.useLayoutEffect(()=>{const S=o.current;if(Object.keys(S).length===0)return;const _={};Object.entries(S).forEach(([b,w])=>{if(n[b])return;const x=w.defaultValue||void 0,N=w.showWarningOnInitial===!0,{warning:C,isValid:T}=V2(x,w.defaultWarning,w.validation,b,N);_[b]=ny(x,C,T),f(b)}),Object.keys(_).length>0&&(r(b=>({...b,..._})),a(b=>({...b,...S}))),o.current={}}),h.useEffect(()=>{if(Object.keys(n).length===0)return;const S=[100,300,600,1e3],_=[];return S.forEach(b=>{const w=setTimeout(()=>{Object.entries(n).forEach(([x,N])=>{var D;if(!N.isEmpty)return;const C=(D=t.current[x])==null?void 0:D.current;if(!C)return;const T=C.value;if(T!=null&&T!==""){const R=i[x];if(R!=null&&R.validation){const I=R.validation.validator,z=I(T,x),O=z===null;r(U=>{var W;return(W=U[x])!=null&&W.isEmpty?{...U,[x]:{...U[x],isEmpty:!1,isInputValid:O,warning:z,isChanged:!0}}:U})}else r(I=>{var z;return(z=I[x])!=null&&z.isEmpty?{...I,[x]:{...I[x],isEmpty:!1,isChanged:!0}}:I})}})},b);_.push(w)}),()=>_.forEach(b=>clearTimeout(b))},[Object.keys(n).join(","),i]);const m=h.useCallback((S,_={})=>{!n[S]&&!o.current[S]&&(o.current={...o.current,[S]:_});const b=_.defaultValue||void 0,w=JSON.stringify({hasValidation:!!_.validation,hasOnChange:!!_.onChange,hasOnBlur:!!_.onBlur,hasOnFocus:!!_.onFocus,hasOnInput:!!_.onInput,hasOnValidated:!!_.onValidated}),x=u.current[S];let N;if(x&&x.optionsHash===w)N=x.handlers;else{const O=IH(r,S),U=LH(r,S);let W;_.validation?W=B=>_.validation.validator(B,S):W=()=>null;const $=OH(r,S,W,_.onValidated),M=PH($),P=MH(r,S,()=>i[S],()=>t.current[S]);N={handleSetTouched:O,handleSetEmpty:U,validateValue:$,handleValidation:M,resetField:P},u.current[S]={handlers:N,optionsHash:w}}let C={};_.validation&&(C=_.validation.htmlAttrs||{});const T={onChange:_.onChange?[_.onChange,N.handleSetEmpty]:[N.handleSetEmpty],onBlur:_.onBlur?[_.onBlur]:[],onFocus:_.onFocus?[_.onFocus,N.handleSetTouched]:[N.handleSetTouched],onInput:_.onInput?[_.onInput,N.handleSetEmpty]:[N.handleSetEmpty],onSubmit:_.onSubmit?[_.onSubmit]:[],all:[]};N.handleValidation&&(T[e].push(N.handleValidation),e==="onChange"&&T.onInput.push(N.handleValidation));const k=f(S),D=RH(T),R=ny(b,_.defaultWarning||null,!1),I=n[S]||R;let z;return _.validation?z=O=>_.validation.validator(O,S):z=()=>null,{registerSmartFieldProps:{name:S,ref:k,...C,...D,...b!==void 0&&{defaultValue:b},disabled:_.disabled||!1,readOnly:_.readOnly||!1},fieldState:{isEmpty:{value:I.isEmpty,setIsEmpty:O=>Wl(r,S,{isEmpty:O})},isTouched:{value:I.isTouched,setIsTouched:O=>Wl(r,S,{isTouched:O})},warning:{value:I.warning,setWarning:O=>Wl(r,S,{warning:O})},isInputValid:{value:I.isInputValid,setIsInputValid:O=>Wl(r,S,{isInputValid:O})},isChanged:{value:I.isChanged,setIsChanged:O=>Wl(r,S,{isChanged:O})}},utils:{validatorFunction:z,validationOptions:_.validation||null,resetField:N.resetField}}},[n,e,f,i]),y=h.useCallback(S=>{if(r(_=>{const b={..._};return delete b[S],b}),t.current[S]){const _={...t.current};delete _[S],t.current=_}if(o.current[S]){const _={...o.current};delete _[S],o.current=_}a(_=>{const b={..._};return delete b[S],b}),u.current[S]&&delete u.current[S]},[]),v=h.useCallback((S,_={})=>{const b=h.useCallback(async()=>{const C=Object.entries(n).map(async([k,D])=>{var z;const R=(z=t.current[k])==null?void 0:z.current;if(!R)return[k,void 0];const I=R.value;if(I!=null&&typeof I=="object"&&typeof I.then=="function"){const O=await I;return[k,O]}return[k,I]}),T=await Promise.all(C);return Object.fromEntries(T)},[n]),w=_.includeCredential!==!1,x=h.useCallback(async(C,T)=>{const k=_.useFormEncoding??!1;let D,R={};if(k){const O=new URLSearchParams;Object.entries(C).forEach(([U,W])=>{W!=null&&O.append(U,String(W))}),D=O,R["Content-Type"]="application/x-www-form-urlencoded"}else D=JSON.stringify(C),R["Content-Type"]="application/json";const I=await fetch(_.action||"",{method:_.method,headers:R,credentials:w?"include":"omit",body:D}),z=I.headers.get("content-type");return z&&z.includes("application/json")?I.json():{html:await I.text(),redirected:I.redirected,url:I.url}},[w,_.action,_.method,_.useFormEncoding]),N=async C=>{var D,R,I,z,O,U,W,$,M,P;C.preventDefault(),C.stopPropagation();let T=await b(),k=null;if(_.lockFormOnSubmit!==!1){l(),k=be.createRef(),c(p(cc,{ref:k,onClose:()=>{}}),{autoHide:null}),await new Promise(V=>setTimeout(V,0));const B=[{key:"verifying",title:"verifing Blah"},{key:"preparing",title:"preparing for upload blah"},{key:"uploading",title:"uploading blah"},{key:"confirming",title:"confirming blah"},{key:"submitting",title:"subitting form blah"}];if(_.presignFileUploadMap){const q=Object.keys(_.presignFileUploadMap).map(Q=>({key:Q,title:`Uploading ${Q}`}));(D=k.current)==null||D.init(B,{title:"Starting submission...",subStepsForKey:{uploading:q}})}else(R=k.current)==null||R.init(B,{title:"Starting submission..."})}try{if(_.presignFileUploadMap){const V=Object.keys(_.presignFileUploadMap),q=V.map(Q=>({key:Q,title:`Uploading ${Q}`}));(I=k==null?void 0:k.current)==null||I.addSubSteps("uploading",q);try{const Q=await zH(T,_.presignFileUploadMap,(H,K)=>{var Y,ce,me,fe,ie,he;(Y=k==null?void 0:k.current)==null||Y.updateProgress({stepIndex:-1,percent:H/100}),H===0?(ce=k==null?void 0:k.current)==null||ce.updateProgress({mainStepIndex:0}):H>0&&H<10?(me=k==null?void 0:k.current)==null||me.updateProgress({mainStepIndex:1}):H>=10&&H<100&&((fe=k==null?void 0:k.current)==null||fe.updateProgress({mainStepIndex:2})),K&&V.findIndex(re=>re===K.fieldName)>=0&&((ie=k==null?void 0:k.current)==null||ie.updateProgress({subStepKey:K.fieldName,percent:K.percent/100,note:`${K.percent}%`}),K.percent>=100&&((he=k==null?void 0:k.current)==null||he.updateProgress({subStepKey:K.fieldName,subStepCompleted:!0})))});(z=k==null?void 0:k.current)==null||z.updateProgress({mainStepIndex:3});for(const[H,K]of Object.entries(Q))T[H]=K.objectRecordId}catch(Q){let H="File upload failed";throw Q instanceof Error&&(H=Q.message),(O=k==null?void 0:k.current)==null||O.complete(!1,H,null),c(p(Zw,{message:H}),{autoHide:null,allowManualDismiss:!0}),Q}}if(_.preSubmit){const V=await _.preSubmit(T,s),[q,Q]=V;if(Q&&(T=Q),!q)return}(U=k==null?void 0:k.current)==null||U.updateProgress({mainStepIndex:4}),(W=k==null?void 0:k.current)==null||W.updateProgress({stepIndex:-1,percent:.95});let B;if(_.submitFunc?B=await _.submitFunc(T,s):_.defaultFormBehavior?jH({formValues:T,method:_.method,action:_.action}):B=await x(T,s),_.handleErrorResponse!==!1&&B&&!B.success){let V=B.message||"An error occurred";throw($=B.error)!=null&&$.message&&(V=B.error.message),B.fieldErrors&&typeof B.fieldErrors=="object"&&Object.keys(B.fieldErrors).length>0&&(V=`Validation failed:
${Object.entries(B.fieldErrors).map(([H,K])=>`${H}: ${K}`).join(`
`)}`),B.formErrors&&Array.isArray(B.formErrors)&&B.formErrors.length>0&&(V=`Form validation failed:
${B.formErrors.join(`
`)}`),console.error("SmartForm: Server returned error response:",B),new Error(V)}_.postSubmit&&_.postSubmit(B,s),_.lockFormOnSubmit!==!1&&((M=k==null?void 0:k.current)==null||M.complete(!0,"Saved",800),c(p(Q9,{}),{autoHide:1e3}))}catch(B){let V="Form submission failed";B instanceof Error?V=B.message:typeof B=="string"&&(V=B),(P=k==null?void 0:k.current)==null||P.complete(!1,V,null),c(p(Zw,{message:V}),{autoHide:null,allowManualDismiss:!0})}};return{registerFormProps:{name:S,ref:s,action:_==null?void 0:_.action,method:_==null?void 0:_.method,onSubmit:N},inputRefs:t.current,getFormValues:b,submitFunctionHelper:x,...(_==null?void 0:_.defaultError)&&{warning:_.defaultError}}},[d,n]);return{registerField:m,unregisterField:y,registerForm:v,isFormValid:d}}const WH="_smartFormNotificationBoard_1c5qd_1",GH="_warning_1c5qd_16",HH="_error_1c5qd_16",XH="_success_1c5qd_20",YH="_info_1c5qd_24",Ib={smartFormNotificationBoard:WH,warning:GH,error:HH,success:XH,info:YH},qH="_warningP_b0gcp_1",KH={warningP:qH};function x0({warning:e,className:t,twinIcon:n=!1,style:r,...o}){return e!=null&&e.message?L("div",{className:j(KH.warningP,ne.flexGapS,ne.flexRow,ne.justifyContentSpaceBetween,t),style:r,...o,children:[p(Ht,{iconName:"exclamation-triangle"}),e.message,n&&p(Ht,{iconName:"exclamation-triangle"})]}):null}function ZH({children:e,mode:t="warning",className:n="",...r}){const o=be.useMemo(()=>{if(typeof e=="string"){const i=Kz(e);return i!==e?p("p",{dangerouslySetInnerHTML:{__html:i}}):p("p",{children:e})}else return Array.isArray(e)&&e.length>1?p("div",{children:e}):e},[e]);return p("div",{className:j(Ib.smartFormNotificationBoard,Ib[t],n),...r,children:p(x0,{twinIcon:!0,warning:{type:t,message:o}})})}const QH=h.createContext(null);function JH({children:e,value:t}){return p(QH.Provider,{value:t,children:e})}const ba=h.forwardRef(({registerFormProps:e,warning:t,inputRefs:n,getFormValues:r=null,submitFunctionHelper:o=null,as:i="form",children:a,className:s="",registerField:l,unregisterField:c,isFormValid:u=!0,...d},f)=>{h.useImperativeHandle(f,()=>({get value(){const v={};for(const S in n)if(n.hasOwnProperty(S)){const _=n[S];_.current&&(v[S]=_.current.value)}return v}}));const m=h.useMemo(()=>!l||!c?null:{registerField:l,unregisterField:c,isFormValid:u},[l,c,u]),y=L(i,{className:j("smart-form",ne.flexColumn,ne.flexGapS,s),...e,...d,children:[t&&p(ZH,{children:t==null?void 0:t.message}),a]});return m?p(JH,{value:m,children:y}):y});ba.displayName="SmartForm";const eX="_labelShiftTextInput_1w43h_2",tX="_notEmpty_1w43h_12",nX="_input_1w43h_12",rX="_label_1w43h_2",oX="_requiredAstrisk_1w43h_19",iX="_readOnly_1w43h_22",aX="_labelShiftTextInput__input_1w43h_27",sX="_labelShiftTextInput__label_1w43h_34",lX="_labelShiftTextInput__asterisk_1w43h_43",Lb={labelShiftTextInput:eX,notEmpty:tX,input:nX,label:rX,requiredAstrisk:oX,readOnly:iX,labelShiftTextInput__input:aX,labelShiftTextInput__label:sX,labelShiftTextInput__asterisk:lX},cX="_fancyTextInput_z7uso_21",uX="_showWarningMargin_z7uso_46",dX="_requiredAstrisk_z7uso_71",fX="_icon_z7uso_77",pX="_wordCounter_z7uso_85",hX="_warning_z7uso_97",mX="_label_z7uso_108",gX="_input_z7uso_118",yX="_description_z7uso_132",vX="_disabled_z7uso_140",_X="_readOnly_z7uso_147",wX="_notEmpty_z7uso_166",bX="_error_z7uso_172",fr={fancyTextInput:cX,showWarningMargin:uX,requiredAstrisk:dX,icon:fX,wordCounter:pX,warning:hX,label:mX,input:gX,description:yX,disabled:vX,readOnly:_X,notEmpty:wX,error:bX},C0=({registerSmartFieldProps:e,fieldState:t,utils:n,children:r,className:o,wrapperClassName:i,style:a,descriptionDisplay:s,displayName:l,hasIcon:c=!0,showCharCounter:u=!1,showWarningMargin:d=!0,iconShift:f="0.5em",inputProps:m={},asInput:y=!0,renderInput:v,renderLabel:S,renderIcon:_,renderCharCounter:b,renderWarning:w,styleModule:x={}})=>{const{isEmpty:{value:N},warning:{value:C}}=t,[T,k]=be.useState(0),D=be.useRef(null),R=be.useMemo(()=>`fancy-input-${e.name||Math.random().toString(36).substr(2,9)}`,[e.name]),I=be.useMemo(()=>`${R}-description`,[R]),z=be.useMemo(()=>`${R}-error`,[R]),O=be.useMemo(()=>`${R}-counter`,[R]),U=be.useCallback(()=>{D.current&&!y&&(D.current.style.height="auto",D.current.style.height=`${D.current.scrollHeight}px`)},[y]);be.useEffect(()=>{const Y=e==null?void 0:e.ref,ce=Y==null?void 0:Y.current;if(!ce)return;const me=()=>{u&&k(ce.value.length),y||U()};return ce.addEventListener("input",me),ce.value&&(u&&k(ce.value.length),y||setTimeout(U,0)),()=>{ce.removeEventListener("input",me)}},[e==null?void 0:e.ref,u,y,U]);const W=be.useCallback(Y=>{e!=null&&e.ref&&(e.ref.current=Y),!y&&Y&&(D.current=Y,setTimeout(()=>U(),0))},[e==null?void 0:e.ref,y,U]),$=be.useMemo(()=>{const Y=[];return s&&Y.push(I),C!=null&&C.message&&Y.push(z),u&&Y.push(O),Y.length>0?Y.join(" "):void 0},[s,C==null?void 0:C.message,u,I,z,O]),M={id:R,className:j(fr.input,x.input),ref:W,name:e.name,defaultValue:e.defaultValue,disabled:e.disabled||e.readOnly,required:e.required,"aria-invalid":!!C,"aria-describedby":$},{ref:P,...B}=e,V=()=>v?v({...M,...B,...m}):y?p("input",{...B,...M,...m}):p("textarea",{...B,...M,...m,rows:1,style:{resize:"none",overflow:"hidden",...(m==null?void 0:m.style)||{}}}),q=()=>{const Y={htmlFor:R,displayName:l||e.name||"",fieldName:e.name,required:e.required,className:j(fr.label,x.label),fieldState:{isEmpty:N,warning:C}};return S?S(Y):L("span",{className:Y.className,children:[Y.displayName,(e==null?void 0:e.required)&&p("span",{className:j(fr.requiredAstrisk,x.requiredAstrisk),"aria-label":"required",children:"*"})]})},Q=()=>{if(!c&&!C)return null;const Y={warning:C,isEmpty:N,className:j(fr.icon,x.icon),iconShift:f};return _?_(Y):null},H=()=>{var me,fe;if(!u)return null;const Y=(fe=(me=n==null?void 0:n.validationOptions)==null?void 0:me.htmlAttrs)==null?void 0:fe.maxLength,ce={id:O,count:T,maxLength:Y,className:j(fr.wordCounter,x.wordCounter)};return b?b(ce):L("span",{id:ce.id,className:ce.className,"aria-label":`Character count: ${ce.count} of ${Y||"unlimited"}`,children:[ce.count," / ",Y||""]})},K=()=>{const Y={id:z,warning:C,className:j(fr.warning,x.warning)};return w?w(Y):C?p("div",{id:Y.id,className:Y.className,style:Y.style,role:"alert","aria-live":"polite","aria-atomic":"true",children:C.message}):null};return L(gt,{children:[s&&p("p",{id:I,className:j(fr.description,x.description),children:s}),L("label",{htmlFor:R,className:j(fr.fancyTextInput,x.fancyTextInput,d&&j(fr.showWarningMargin,x.showWarningMargin),!N&&j(fr.notEmpty,x.notEmpty),C&&j(fr.error,x.error),e.disabled&&j(fr.disabled,x.disabled),e.readOnly&&j(fr.readOnly,x.readOnly),i,o),style:a,children:[V(),Q(),q(),H(),K(),r]})]})};C0.displayName="FancyTextInput";const Fo=e=>{const{isEmpty:{value:t},warning:{value:n}}=e.fieldState,r=i=>!e.hasIcon&&!n?null:p(Ht,{iconName:i.warning?"exclamation-triangle":!i.isEmpty&&e.showIconSuccess?"check-lg":"",className:i.className,style:{"--icon-shift":i.iconShift},size:"1.5em","aria-hidden":"true",role:"img","aria-label":i.warning?"Error indicator":!i.isEmpty&&e.showIconSuccess?"Valid input indicator":""}),o=i=>p(x0,{className:i.className,style:i.style,role:"alert","aria-live":"polite","aria-atomic":"true",id:i.id,warning:i.warning||null});return p(C0,{...e,styleModule:Lb,wrapperClassName:j(Lb.labelShiftTextInput),renderIcon:r,renderWarning:o})};Fo.displayName="LabelShiftTextInput";const EX="_labelShiftTextCustomKeyboardInput_1u0xi_2",SX="_notEmpty_1u0xi_12",xX="_input_1u0xi_12",CX="_label_1u0xi_2",TX="_requiredAstrisk_1u0xi_19",NX="_readOnly_1u0xi_22",kX="_labelShiftTextCustomKeyboardInput__input_1u0xi_27",AX="_labelShiftTextCustomKeyboardInput__label_1u0xi_34",RX="_labelShiftTextCustomKeyboardInput__asterisk_1u0xi_43",Ob={labelShiftTextCustomKeyboardInput:EX,notEmpty:SX,input:xX,label:CX,requiredAstrisk:TX,readOnly:NX,labelShiftTextCustomKeyboardInput__input:kX,labelShiftTextCustomKeyboardInput__label:AX,labelShiftTextCustomKeyboardInput__asterisk:RX},IX="_fancyTextCustomKeyboardInput_ns0e1_8",LX={fancyTextCustomKeyboardInput:IX},OX="_floating_i44kb_8",PX="_floatingInputContainer_i44kb_27",MX="_floatingInput_i44kb_27",DX="_closeButton_i44kb_68",Gl={floating:OX,floatingInputContainer:PX,floatingInput:MX,closeButton:DX},FX="_root_17221_1",$X="_header_17221_8",BX="_searchRow_17221_14",VX="_searchInput_17221_20",UX="_tabs_17221_33",zX="_tab_17221_33",jX="_tabActive_17221_55",WX="_gridWrapper_17221_60",GX="_grid_17221_60",HX="_gridScrollable_17221_73",XX="_keyButton_17221_78",YX="_emptyState_17221_103",qX="_svgContent_17221_110",KX="_imageContent_17221_123",Zn={root:FX,header:$X,searchRow:BX,searchInput:VX,tabs:UX,tab:zX,tabActive:jX,gridWrapper:WX,grid:GX,gridScrollable:HX,keyButton:XX,emptyState:YX,svgContent:qX,imageContent:KX};function ZX(e,t){var r,o,i,a;const n=t.trim().toLowerCase();return!n||e.label.toLowerCase().includes(n)||(r=e.tags)!=null&&r.some(s=>s.toLowerCase().includes(n))||(i=(o=e.metadata)==null?void 0:o.description)!=null&&i.toLowerCase().includes(n)?!0:((a=e.displayData)==null?void 0:a.toLowerCase().includes(n))??!1}function QX(e){switch(e.displayType??"text"){case"svg":return e.displayData?p("span",{className:Zn.svgContent,dangerouslySetInnerHTML:{__html:e.displayData}}):e.label;case"image":return e.displayData?p("img",{src:e.displayData,alt:e.ariaLabel??e.label,className:Zn.imageContent}):e.label;case"text":default:return e.label}}function z2({characters:e,onSelect:t,searchable:n=!0,groupBy:r="category",filterFunction:o,className:i,style:a,height:s,emptyStateText:l="No results",renderCharacter:c}){const[u,d]=h.useState(""),[f,m]=h.useState("All"),y=h.useMemo(()=>{if(r!=="category")return["All"];const _=new Set;for(const b of e)b.category&&b.category.trim()&&_.add(b.category);return["All",...Array.from(_).sort((b,w)=>b.localeCompare(w))]},[e,r]),v=h.useMemo(()=>{const _=o??ZX;let b=e;return r==="category"&&f!=="All"&&(b=b.filter(w=>(w.category??"")===f)),n&&u.trim()&&(b=b.filter(w=>_(w,u))),b},[e,o,r,f,n,u]);be.useEffect(()=>{r==="category"&&(y.includes(f)||m("All"))},[y,f,r]);const S=s?{height:s}:void 0;return L("div",{className:j(Zn.root,i),style:a,children:[L("div",{className:Zn.header,children:[n&&p("div",{className:Zn.searchRow,children:p("input",{className:Zn.searchInput,value:u,onChange:_=>d(_.target.value),placeholder:"Search","aria-label":"Search characters"})}),r==="category"&&y.length>1&&p("div",{className:Zn.tabs,role:"tablist","aria-label":"Character categories",children:y.map(_=>{const b=_===f;return p("button",{type:"button",role:"tab","aria-selected":b,className:j(Zn.tab,b&&Zn.tabActive),onClick:()=>m(_),children:_},_)})})]}),p("div",{className:Zn.gridWrapper,children:v.length===0?p("div",{className:Zn.emptyState,children:l}):p("div",{className:j(Zn.grid,s&&Zn.gridScrollable),style:S,role:"list","aria-label":"Character list",children:v.map(_=>{const b=c??QX;return p("button",{type:"button",className:Zn.keyButton,"aria-label":_.ariaLabel??`Insert ${_.label}`,onClick:()=>t(_),onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),t(_))},children:b(_)},_.id)})})})]})}const Tu=[{id:"ipa_p",label:"p",category:"Plosives",tags:["consonant","plosive","voiceless","bilabial"],metadata:{unicode:"U+0070",description:"Voiceless bilabial plosive",examples:["pat","spin","tip"]}},{id:"ipa_b",label:"b",category:"Plosives",tags:["consonant","plosive","voiced","bilabial"],metadata:{unicode:"U+0062",description:"Voiced bilabial plosive",examples:["bat","rib"]}},{id:"ipa_t",label:"t",category:"Plosives",tags:["consonant","plosive","voiceless","alveolar"],metadata:{unicode:"U+0074",description:"Voiceless alveolar plosive",examples:["top","stick","pot"]}},{id:"ipa_d",label:"d",category:"Plosives",tags:["consonant","plosive","voiced","alveolar"],metadata:{unicode:"U+0064",description:"Voiced alveolar plosive",examples:["dog","odd"]}},{id:"ipa_t_retroflex",label:"",category:"Plosives",tags:["consonant","plosive","voiceless","retroflex"],metadata:{unicode:"U+0288",description:"Voiceless retroflex plosive"}},{id:"ipa_d_retroflex",label:"",category:"Plosives",tags:["consonant","plosive","voiced","retroflex"],metadata:{unicode:"U+0256",description:"Voiced retroflex plosive"}},{id:"ipa_c",label:"c",category:"Plosives",tags:["consonant","plosive","voiceless","palatal"],metadata:{unicode:"U+0063",description:"Voiceless palatal plosive"}},{id:"ipa_barred_dotless_j",label:"",category:"Plosives",tags:["consonant","plosive","voiced","palatal"],metadata:{unicode:"U+025F",description:"Voiced palatal plosive"}},{id:"ipa_k",label:"k",category:"Plosives",tags:["consonant","plosive","voiceless","velar"],metadata:{unicode:"U+006B",description:"Voiceless velar plosive",examples:["cat","skill","back"]}},{id:"ipa_g",label:"g",category:"Plosives",tags:["consonant","plosive","voiced","velar"],metadata:{unicode:"U+0067",description:"Voiced velar plosive",examples:["go","big"]}},{id:"ipa_q",label:"q",category:"Plosives",tags:["consonant","plosive","voiceless","uvular"],metadata:{unicode:"U+0071",description:"Voiceless uvular plosive"}},{id:"ipa_G_small_cap",label:"",category:"Plosives",tags:["consonant","plosive","voiced","uvular"],metadata:{unicode:"U+0262",description:"Voiced uvular plosive"}},{id:"ipa_glottal_stop",label:"",category:"Plosives",tags:["consonant","plosive","voiceless","glottal"],metadata:{unicode:"U+0294",description:"Glottal stop",examples:["uh-oh"]}},{id:"ipa_m",label:"m",category:"Nasals",tags:["consonant","nasal","voiced","bilabial"],metadata:{unicode:"U+006D",description:"Voiced bilabial nasal",examples:["man","ham"]}},{id:"ipa_m_labiodental",label:"",category:"Nasals",tags:["consonant","nasal","voiced","labiodental"],metadata:{unicode:"U+0271",description:"Voiced labiodental nasal"}},{id:"ipa_n",label:"n",category:"Nasals",tags:["consonant","nasal","voiced","alveolar"],metadata:{unicode:"U+006E",description:"Voiced alveolar nasal",examples:["no","pan"]}},{id:"ipa_n_retroflex",label:"",category:"Nasals",tags:["consonant","nasal","voiced","retroflex"],metadata:{unicode:"U+0273",description:"Voiced retroflex nasal"}},{id:"ipa_n_palatal",label:"",category:"Nasals",tags:["consonant","nasal","voiced","palatal"],metadata:{unicode:"U+0272",description:"Voiced palatal nasal",examples:["canyon (Spanish )"]}},{id:"ipa_ng",label:"",category:"Nasals",tags:["consonant","nasal","voiced","velar"],metadata:{unicode:"U+014B",description:"Voiced velar nasal",examples:["sing","think"]}},{id:"ipa_N_small_cap",label:"",category:"Nasals",tags:["consonant","nasal","voiced","uvular"],metadata:{unicode:"U+0274",description:"Voiced uvular nasal"}},{id:"ipa_B_small_cap",label:"",category:"Trills",tags:["consonant","trill","voiced","bilabial"],metadata:{unicode:"U+0299",description:"Voiced bilabial trill"}},{id:"ipa_r",label:"r",category:"Trills",tags:["consonant","trill","voiced","alveolar"],metadata:{unicode:"U+0072",description:"Voiced alveolar trill",examples:["Spanish perro"]}},{id:"ipa_R_small_cap",label:"",category:"Trills",tags:["consonant","trill","voiced","uvular"],metadata:{unicode:"U+0280",description:"Voiced uvular trill",examples:["French r (some dialects)"]}},{id:"ipa_fish_hook_r",label:"",category:"Taps",tags:["consonant","tap","flap","voiced","alveolar"],metadata:{unicode:"U+027E",description:"Voiced alveolar tap",examples:["American English butter"]}},{id:"ipa_r_retroflex_flap",label:"",category:"Taps",tags:["consonant","tap","flap","voiced","retroflex"],metadata:{unicode:"U+027D",description:"Voiced retroflex flap"}},{id:"ipa_phi",label:"",category:"Fricatives",tags:["consonant","fricative","voiceless","bilabial"],metadata:{unicode:"U+0278",description:"Voiceless bilabial fricative"}},{id:"ipa_beta",label:"",category:"Fricatives",tags:["consonant","fricative","voiced","bilabial"],metadata:{unicode:"U+03B2",description:"Voiced bilabial fricative",examples:["Spanish b between vowels"]}},{id:"ipa_f",label:"f",category:"Fricatives",tags:["consonant","fricative","voiceless","labiodental"],metadata:{unicode:"U+0066",description:"Voiceless labiodental fricative",examples:["fan","off"]}},{id:"ipa_v",label:"v",category:"Fricatives",tags:["consonant","fricative","voiced","labiodental"],metadata:{unicode:"U+0076",description:"Voiced labiodental fricative",examples:["van","of"]}},{id:"ipa_theta",label:"",category:"Fricatives",tags:["consonant","fricative","voiceless","dental"],metadata:{unicode:"U+03B8",description:"Voiceless dental fricative",examples:["think","path"]}},{id:"ipa_eth",label:"",category:"Fricatives",tags:["consonant","fricative","voiced","dental"],metadata:{unicode:"U+00F0",description:"Voiced dental fricative",examples:["this","bathe"]}},{id:"ipa_s",label:"s",category:"Fricatives",tags:["consonant","fricative","voiceless","alveolar"],metadata:{unicode:"U+0073",description:"Voiceless alveolar fricative",examples:["see","pass"]}},{id:"ipa_z",label:"z",category:"Fricatives",tags:["consonant","fricative","voiced","alveolar"],metadata:{unicode:"U+007A",description:"Voiced alveolar fricative",examples:["zoo","buzz"]}},{id:"ipa_esh",label:"",category:"Fricatives",tags:["consonant","fricative","voiceless","postalveolar"],metadata:{unicode:"U+0283",description:"Voiceless postalveolar fricative",examples:["ship","wish"]}},{id:"ipa_ezh",label:"",category:"Fricatives",tags:["consonant","fricative","voiced","postalveolar"],metadata:{unicode:"U+0292",description:"Voiced postalveolar fricative",examples:["measure","vision"]}},{id:"ipa_s_retroflex",label:"",category:"Fricatives",tags:["consonant","fricative","voiceless","retroflex"],metadata:{unicode:"U+0282",description:"Voiceless retroflex fricative"}},{id:"ipa_z_retroflex",label:"",category:"Fricatives",tags:["consonant","fricative","voiced","retroflex"],metadata:{unicode:"U+0290",description:"Voiced retroflex fricative"}},{id:"ipa_c_cedilla",label:"",category:"Fricatives",tags:["consonant","fricative","voiceless","palatal"],metadata:{unicode:"U+00E7",description:"Voiceless palatal fricative",examples:["German ich"]}},{id:"ipa_j_curl",label:"",category:"Fricatives",tags:["consonant","fricative","voiced","palatal"],metadata:{unicode:"U+029D",description:"Voiced palatal fricative"}},{id:"ipa_x",label:"x",category:"Fricatives",tags:["consonant","fricative","voiceless","velar"],metadata:{unicode:"U+0078",description:"Voiceless velar fricative",examples:["Scottish loch","German Bach"]}},{id:"ipa_gamma",label:"",category:"Fricatives",tags:["consonant","fricative","voiced","velar"],metadata:{unicode:"U+0263",description:"Voiced velar fricative"}},{id:"ipa_chi",label:"",category:"Fricatives",tags:["consonant","fricative","voiceless","uvular"],metadata:{unicode:"U+03C7",description:"Voiceless uvular fricative"}},{id:"ipa_R_inverted",label:"",category:"Fricatives",tags:["consonant","fricative","voiced","uvular"],metadata:{unicode:"U+0281",description:"Voiced uvular fricative",examples:["French r"]}},{id:"ipa_h_barred",label:"",category:"Fricatives",tags:["consonant","fricative","voiceless","pharyngeal"],metadata:{unicode:"U+0127",description:"Voiceless pharyngeal fricative",examples:["Arabic "]}},{id:"ipa_reversed_glottal_stop",label:"",category:"Fricatives",tags:["consonant","fricative","voiced","pharyngeal"],metadata:{unicode:"U+0295",description:"Voiced pharyngeal fricative",examples:["Arabic "]}},{id:"ipa_h",label:"h",category:"Fricatives",tags:["consonant","fricative","voiceless","glottal"],metadata:{unicode:"U+0068",description:"Voiceless glottal fricative",examples:["hat"]}},{id:"ipa_h_hooktop",label:"",category:"Fricatives",tags:["consonant","fricative","voiced","glottal"],metadata:{unicode:"U+0266",description:"Voiced glottal fricative"}},{id:"ipa_l_belt",label:"",category:"Lateral Fricatives",tags:["consonant","fricative","lateral","voiceless","alveolar"],metadata:{unicode:"U+026C",description:"Voiceless alveolar lateral fricative",examples:["Welsh ll"]}},{id:"ipa_lezh",label:"",category:"Lateral Fricatives",tags:["consonant","fricative","lateral","voiced","alveolar"],metadata:{unicode:"U+026E",description:"Voiced alveolar lateral fricative"}},{id:"ipa_v_turned",label:"",category:"Approximants",tags:["consonant","approximant","voiced","labiodental"],metadata:{unicode:"U+028B",description:"Voiced labiodental approximant"}},{id:"ipa_turned_r",label:"",category:"Approximants",tags:["consonant","approximant","voiced","alveolar"],metadata:{unicode:"U+0279",description:"Voiced alveolar approximant",examples:["English r"]}},{id:"ipa_turned_r_retroflex",label:"",category:"Approximants",tags:["consonant","approximant","voiced","retroflex"],metadata:{unicode:"U+027B",description:"Voiced retroflex approximant"}},{id:"ipa_j",label:"j",category:"Approximants",tags:["consonant","approximant","voiced","palatal"],metadata:{unicode:"U+006A",description:"Voiced palatal approximant",examples:["yes","you"]}},{id:"ipa_turned_m_leg",label:"",category:"Approximants",tags:["consonant","approximant","voiced","velar"],metadata:{unicode:"U+0270",description:"Voiced velar approximant"}},{id:"ipa_l",label:"l",category:"Lateral Approximants",tags:["consonant","approximant","lateral","voiced","alveolar"],metadata:{unicode:"U+006C",description:"Voiced alveolar lateral approximant",examples:["let","ball"]}},{id:"ipa_l_retroflex",label:"",category:"Lateral Approximants",tags:["consonant","approximant","lateral","voiced","retroflex"],metadata:{unicode:"U+026D",description:"Voiced retroflex lateral approximant"}},{id:"ipa_turned_y",label:"",category:"Lateral Approximants",tags:["consonant","approximant","lateral","voiced","palatal"],metadata:{unicode:"U+028E",description:"Voiced palatal lateral approximant",examples:["Italian gl"]}},{id:"ipa_L_small_cap",label:"",category:"Lateral Approximants",tags:["consonant","approximant","lateral","voiced","velar"],metadata:{unicode:"U+029F",description:"Voiced velar lateral approximant"}},{id:"ipa_w",label:"w",category:"Other Consonants",tags:["consonant","approximant","voiced","labiovelar"],metadata:{unicode:"U+0077",description:"Voiced labio-velar approximant",examples:["wet","twin"]}},{id:"ipa_turned_w",label:"",category:"Other Consonants",tags:["consonant","fricative","voiceless","labiovelar"],metadata:{unicode:"U+028D",description:"Voiceless labio-velar fricative",examples:["which (some dialects)"]}},{id:"ipa_turned_h",label:"",category:"Other Consonants",tags:["consonant","approximant","voiced","labiopalatal"],metadata:{unicode:"U+0265",description:"Voiced labio-palatal approximant",examples:["French huit"]}},{id:"ipa_h_hook",label:"",category:"Other Consonants",tags:["consonant","fricative","voiceless","postalveolar-velar"],metadata:{unicode:"U+0267",description:"Voiceless postalveolar-velar fricative",examples:["Swedish sj"]}},{id:"ipa_b_hooktop",label:"",category:"Implosives",tags:["consonant","implosive","voiced","bilabial"],metadata:{unicode:"U+0253",description:"Voiced bilabial implosive"}},{id:"ipa_d_hooktop",label:"",category:"Implosives",tags:["consonant","implosive","voiced","alveolar"],metadata:{unicode:"U+0257",description:"Voiced alveolar implosive"}},{id:"ipa_g_hooktop",label:"",category:"Implosives",tags:["consonant","implosive","voiced","velar"],metadata:{unicode:"U+0260",description:"Voiced velar implosive"}},{id:"ipa_G_hooktop",label:"",category:"Implosives",tags:["consonant","implosive","voiced","uvular"],metadata:{unicode:"U+029B",description:"Voiced uvular implosive"}},{id:"ipa_barred_dotless_j_hooktop",label:"",category:"Implosives",tags:["consonant","implosive","voiced","palatal"],metadata:{unicode:"U+0284",description:"Voiced palatal implosive"}},{id:"ipa_click_bilabial",label:"",category:"Clicks",tags:["consonant","click","bilabial"],metadata:{unicode:"U+0298",description:"Bilabial click"}},{id:"ipa_click_dental",label:"",category:"Clicks",tags:["consonant","click","dental"],metadata:{unicode:"U+01C0",description:"Dental click",examples:["tsk-tsk"]}},{id:"ipa_click_alveolar",label:"",category:"Clicks",tags:["consonant","click","alveolar"],metadata:{unicode:"U+01C3",description:"Alveolar click"}},{id:"ipa_click_palatoalveolar",label:"",category:"Clicks",tags:["consonant","click","palatoalveolar"],metadata:{unicode:"U+01C2",description:"Palatoalveolar click"}},{id:"ipa_click_lateral",label:"",category:"Clicks",tags:["consonant","click","lateral"],metadata:{unicode:"U+01C1",description:"Alveolar lateral click",examples:["giddyup to horse"]}},{id:"ipa_i",label:"i",category:"Close Vowels",tags:["vowel","close","front","unrounded"],metadata:{unicode:"U+0069",description:"Close front unrounded vowel",examples:["see","machine"]}},{id:"ipa_y",label:"y",category:"Close Vowels",tags:["vowel","close","front","rounded"],metadata:{unicode:"U+0079",description:"Close front rounded vowel",examples:["French tu","German "]}},{id:"ipa_i_bar",label:"",category:"Close Vowels",tags:["vowel","close","central","unrounded"],metadata:{unicode:"U+0268",description:"Close central unrounded vowel"}},{id:"ipa_u_bar",label:"",category:"Close Vowels",tags:["vowel","close","central","rounded"],metadata:{unicode:"U+0289",description:"Close central rounded vowel"}},{id:"ipa_turned_m",label:"",category:"Close Vowels",tags:["vowel","close","back","unrounded"],metadata:{unicode:"U+026F",description:"Close back unrounded vowel"}},{id:"ipa_u",label:"u",category:"Close Vowels",tags:["vowel","close","back","rounded"],metadata:{unicode:"U+0075",description:"Close back rounded vowel",examples:["boot","food"]}},{id:"ipa_small_cap_i",label:"",category:"Near-Close Vowels",tags:["vowel","near-close","front","unrounded"],metadata:{unicode:"U+026A",description:"Near-close front unrounded vowel",examples:["bit","sit"]}},{id:"ipa_small_cap_y",label:"",category:"Near-Close Vowels",tags:["vowel","near-close","front","rounded"],metadata:{unicode:"U+028F",description:"Near-close front rounded vowel",examples:["German fnf"]}},{id:"ipa_upsilon",label:"",category:"Near-Close Vowels",tags:["vowel","near-close","back","rounded"],metadata:{unicode:"U+028A",description:"Near-close back rounded vowel",examples:["put","foot"]}},{id:"ipa_e",label:"e",category:"Close-Mid Vowels",tags:["vowel","close-mid","front","unrounded"],metadata:{unicode:"U+0065",description:"Close-mid front unrounded vowel",examples:["Spanish mesa"]}},{id:"ipa_o_slash",label:"",category:"Close-Mid Vowels",tags:["vowel","close-mid","front","rounded"],metadata:{unicode:"U+00F8",description:"Close-mid front rounded vowel",examples:["French peu","German schn"]}},{id:"ipa_reversed_e",label:"",category:"Close-Mid Vowels",tags:["vowel","close-mid","central","unrounded"],metadata:{unicode:"U+0258",description:"Close-mid central unrounded vowel"}},{id:"ipa_barred_o",label:"",category:"Close-Mid Vowels",tags:["vowel","close-mid","central","rounded"],metadata:{unicode:"U+0275",description:"Close-mid central rounded vowel"}},{id:"ipa_rams_horn",label:"",category:"Close-Mid Vowels",tags:["vowel","close-mid","back","unrounded"],metadata:{unicode:"U+0264",description:"Close-mid back unrounded vowel"}},{id:"ipa_o",label:"o",category:"Close-Mid Vowels",tags:["vowel","close-mid","back","rounded"],metadata:{unicode:"U+006F",description:"Close-mid back rounded vowel",examples:["Spanish no"]}},{id:"ipa_schwa",label:"",category:"Mid Vowels",tags:["vowel","mid","central","unrounded","schwa"],metadata:{unicode:"U+0259",description:"Mid central vowel (schwa)",examples:["about","sofa"]}},{id:"ipa_epsilon",label:"",category:"Open-Mid Vowels",tags:["vowel","open-mid","front","unrounded"],metadata:{unicode:"U+025B",description:"Open-mid front unrounded vowel",examples:["bed","dress"]}},{id:"ipa_oe_ligature",label:"",category:"Open-Mid Vowels",tags:["vowel","open-mid","front","rounded"],metadata:{unicode:"U+0153",description:"Open-mid front rounded vowel",examples:["French peur"]}},{id:"ipa_reversed_epsilon",label:"",category:"Open-Mid Vowels",tags:["vowel","open-mid","central","unrounded"],metadata:{unicode:"U+025C",description:"Open-mid central unrounded vowel",examples:["British English bird"]}},{id:"ipa_closed_reversed_epsilon",label:"",category:"Open-Mid Vowels",tags:["vowel","open-mid","central","rounded"],metadata:{unicode:"U+025E",description:"Open-mid central rounded vowel"}},{id:"ipa_turned_v",label:"",category:"Open-Mid Vowels",tags:["vowel","open-mid","back","unrounded"],metadata:{unicode:"U+028C",description:"Open-mid back unrounded vowel",examples:["strut","cup"]}},{id:"ipa_open_o",label:"",category:"Open-Mid Vowels",tags:["vowel","open-mid","back","rounded"],metadata:{unicode:"U+0254",description:"Open-mid back rounded vowel",examples:["thought","law"]}},{id:"ipa_ae_ligature",label:"",category:"Near-Open Vowels",tags:["vowel","near-open","front","unrounded"],metadata:{unicode:"U+00E6",description:"Near-open front unrounded vowel",examples:["trap","cat"]}},{id:"ipa_turned_a",label:"",category:"Near-Open Vowels",tags:["vowel","near-open","central"],metadata:{unicode:"U+0250",description:"Near-open central vowel"}},{id:"ipa_a",label:"a",category:"Open Vowels",tags:["vowel","open","front","unrounded"],metadata:{unicode:"U+0061",description:"Open front unrounded vowel",examples:["Spanish padre"]}},{id:"ipa_OE_ligature",label:"",category:"Open Vowels",tags:["vowel","open","front","rounded"],metadata:{unicode:"U+0276",description:"Open front rounded vowel"}},{id:"ipa_script_a",label:"",category:"Open Vowels",tags:["vowel","open","back","unrounded"],metadata:{unicode:"U+0251",description:"Open back unrounded vowel",examples:["father","palm"]}},{id:"ipa_turned_script_a",label:"",category:"Open Vowels",tags:["vowel","open","back","rounded"],metadata:{unicode:"U+0252",description:"Open back rounded vowel",examples:["British English lot"]}},{id:"ipa_primary_stress",label:"",category:"Suprasegmentals",tags:["suprasegmental","stress","primary"],metadata:{unicode:"U+02C8",description:"Primary stress mark"}},{id:"ipa_secondary_stress",label:"",category:"Suprasegmentals",tags:["suprasegmental","stress","secondary"],metadata:{unicode:"U+02CC",description:"Secondary stress mark"}},{id:"ipa_long",label:"",category:"Suprasegmentals",tags:["suprasegmental","length","long"],metadata:{unicode:"U+02D0",description:"Long vowel/consonant"}},{id:"ipa_half_long",label:"",category:"Suprasegmentals",tags:["suprasegmental","length","half-long"],metadata:{unicode:"U+02D1",description:"Half-long"}},{id:"ipa_extra_short",label:"",category:"Suprasegmentals",tags:["suprasegmental","length","extra-short","diacritic"],metadata:{unicode:"U+0306",description:"Extra-short (combining breve)"}},{id:"ipa_syllable_break",label:".",category:"Suprasegmentals",tags:["suprasegmental","boundary","syllable"],metadata:{unicode:"U+002E",description:"Syllable break"}},{id:"ipa_minor_break",label:"|",category:"Suprasegmentals",tags:["suprasegmental","boundary","foot","minor"],metadata:{unicode:"U+007C",description:"Minor (foot) group"}},{id:"ipa_major_break",label:"",category:"Suprasegmentals",tags:["suprasegmental","boundary","intonation","major"],metadata:{unicode:"U+2016",description:"Major (intonation) group"}},{id:"ipa_linking",label:"",category:"Suprasegmentals",tags:["suprasegmental","linking"],metadata:{unicode:"U+203F",description:"Linking (absence of a break)"}},{id:"ipa_tone_extra_high",label:"",category:"Tones",tags:["tone","level","extra-high"],metadata:{unicode:"U+02E5",description:"Extra-high tone"}},{id:"ipa_tone_high",label:"",category:"Tones",tags:["tone","level","high"],metadata:{unicode:"U+02E6",description:"High tone"}},{id:"ipa_tone_mid",label:"",category:"Tones",tags:["tone","level","mid"],metadata:{unicode:"U+02E7",description:"Mid tone"}},{id:"ipa_tone_low",label:"",category:"Tones",tags:["tone","level","low"],metadata:{unicode:"U+02E8",description:"Low tone"}},{id:"ipa_tone_extra_low",label:"",category:"Tones",tags:["tone","level","extra-low"],metadata:{unicode:"U+02E9",description:"Extra-low tone"}},{id:"ipa_downstep",label:"",category:"Tones",tags:["tone","downstep"],metadata:{unicode:"U+A71C",description:"Downstep"}},{id:"ipa_upstep",label:"",category:"Tones",tags:["tone","upstep"],metadata:{unicode:"U+A71B",description:"Upstep"}},{id:"ipa_global_rise",label:"",category:"Tones",tags:["tone","contour","rising","global"],metadata:{unicode:"U+2197",description:"Global rise"}},{id:"ipa_global_fall",label:"",category:"Tones",tags:["tone","contour","falling","global"],metadata:{unicode:"U+2198",description:"Global fall"}},{id:"ipa_voiceless",label:"",category:"Diacritics",tags:["diacritic","voicing","voiceless"],metadata:{unicode:"U+0325",description:"Voiceless (combining ring below)"}},{id:"ipa_voiced",label:"",category:"Diacritics",tags:["diacritic","voicing","voiced"],metadata:{unicode:"U+032C",description:"Voiced (combining caron below)"}},{id:"ipa_aspirated",label:"",category:"Diacritics",tags:["diacritic","aspiration"],metadata:{unicode:"U+02B0",description:"Aspirated"}},{id:"ipa_more_rounded",label:"",category:"Diacritics",tags:["diacritic","lip","rounded","more"],metadata:{unicode:"U+0339",description:"More rounded"}},{id:"ipa_less_rounded",label:"",category:"Diacritics",tags:["diacritic","lip","rounded","less"],metadata:{unicode:"U+031C",description:"Less rounded"}},{id:"ipa_advanced",label:"",category:"Diacritics",tags:["diacritic","tongue","advanced"],metadata:{unicode:"U+031F",description:"Advanced"}},{id:"ipa_retracted",label:"",category:"Diacritics",tags:["diacritic","tongue","retracted"],metadata:{unicode:"U+0320",description:"Retracted"}},{id:"ipa_centralized",label:"",category:"Diacritics",tags:["diacritic","tongue","centralized"],metadata:{unicode:"U+0308",description:"Centralized"}},{id:"ipa_mid_centralized",label:"",category:"Diacritics",tags:["diacritic","tongue","mid-centralized"],metadata:{unicode:"U+033D",description:"Mid-centralized"}},{id:"ipa_syllabic",label:"",category:"Diacritics",tags:["diacritic","syllabic"],metadata:{unicode:"U+0329",description:"Syllabic"}},{id:"ipa_non_syllabic",label:"",category:"Diacritics",tags:["diacritic","non-syllabic"],metadata:{unicode:"U+032F",description:"Non-syllabic"}},{id:"ipa_rhoticity",label:"",category:"Diacritics",tags:["diacritic","rhoticity","r-colored"],metadata:{unicode:"U+02DE",description:"Rhoticity"}},{id:"ipa_breathy_voiced",label:"",category:"Diacritics",tags:["diacritic","phonation","breathy"],metadata:{unicode:"U+0324",description:"Breathy voiced"}},{id:"ipa_creaky_voiced",label:"",category:"Diacritics",tags:["diacritic","phonation","creaky"],metadata:{unicode:"U+0330",description:"Creaky voiced"}},{id:"ipa_linguolabial",label:"",category:"Diacritics",tags:["diacritic","articulation","linguolabial"],metadata:{unicode:"U+033C",description:"Linguolabial"}},{id:"ipa_labialized",label:"",category:"Diacritics",tags:["diacritic","secondary","labialized"],metadata:{unicode:"U+02B7",description:"Labialized"}},{id:"ipa_palatalized",label:"",category:"Diacritics",tags:["diacritic","secondary","palatalized"],metadata:{unicode:"U+02B2",description:"Palatalized"}},{id:"ipa_velarized",label:"",category:"Diacritics",tags:["diacritic","secondary","velarized"],metadata:{unicode:"U+02E0",description:"Velarized"}},{id:"ipa_pharyngealized",label:"",category:"Diacritics",tags:["diacritic","secondary","pharyngealized"],metadata:{unicode:"U+02E4",description:"Pharyngealized"}},{id:"ipa_velarized_pharyngealized",label:"",category:"Diacritics",tags:["diacritic","secondary","velarized","pharyngealized"],metadata:{unicode:"U+0334",description:"Velarized or pharyngealized (superimposed tilde)"}},{id:"ipa_raised",label:"",category:"Diacritics",tags:["diacritic","tongue","raised"],metadata:{unicode:"U+031D",description:"Raised"}},{id:"ipa_lowered",label:"",category:"Diacritics",tags:["diacritic","tongue","lowered"],metadata:{unicode:"U+031E",description:"Lowered"}},{id:"ipa_advanced_tongue_root",label:"",category:"Diacritics",tags:["diacritic","tongue","atr","advanced-tongue-root"],metadata:{unicode:"U+0318",description:"Advanced tongue root"}},{id:"ipa_retracted_tongue_root",label:"",category:"Diacritics",tags:["diacritic","tongue","rtr","retracted-tongue-root"],metadata:{unicode:"U+0319",description:"Retracted tongue root"}},{id:"ipa_dental",label:"",category:"Diacritics",tags:["diacritic","articulation","dental"],metadata:{unicode:"U+032A",description:"Dental"}},{id:"ipa_apical",label:"",category:"Diacritics",tags:["diacritic","articulation","apical"],metadata:{unicode:"U+033A",description:"Apical"}},{id:"ipa_laminal",label:"",category:"Diacritics",tags:["diacritic","articulation","laminal"],metadata:{unicode:"U+033B",description:"Laminal"}},{id:"ipa_nasalized",label:"",category:"Diacritics",tags:["diacritic","nasalized"],metadata:{unicode:"U+0303",description:"Nasalized"}},{id:"ipa_nasal_release",label:"",category:"Diacritics",tags:["diacritic","release","nasal"],metadata:{unicode:"U+207F",description:"Nasal release"}},{id:"ipa_lateral_release",label:"",category:"Diacritics",tags:["diacritic","release","lateral"],metadata:{unicode:"U+02E1",description:"Lateral release"}},{id:"ipa_no_audible_release",label:"",category:"Diacritics",tags:["diacritic","release","unreleased"],metadata:{unicode:"U+031A",description:"No audible release"}},{id:"ipa_ts",label:"ts",category:"Affricates",tags:["consonant","affricate","voiceless","alveolar"],metadata:{description:"Voiceless alveolar affricate",examples:["cats","German Zeit"]}},{id:"ipa_dz",label:"dz",category:"Affricates",tags:["consonant","affricate","voiced","alveolar"],metadata:{description:"Voiced alveolar affricate"}},{id:"ipa_tesh",label:"t",category:"Affricates",tags:["consonant","affricate","voiceless","postalveolar"],metadata:{description:"Voiceless postalveolar affricate",examples:["church","watch"]}},{id:"ipa_dezh",label:"d",category:"Affricates",tags:["consonant","affricate","voiced","postalveolar"],metadata:{description:"Voiced postalveolar affricate",examples:["judge","bridge"]}},{id:"ipa_ts_retroflex",label:"",category:"Affricates",tags:["consonant","affricate","voiceless","retroflex"],metadata:{description:"Voiceless retroflex affricate"}},{id:"ipa_dz_retroflex",label:"",category:"Affricates",tags:["consonant","affricate","voiced","retroflex"],metadata:{description:"Voiced retroflex affricate"}},{id:"ipa_tc_palatal",label:"t",category:"Affricates",tags:["consonant","affricate","voiceless","alveolo-palatal"],metadata:{description:"Voiceless alveolo-palatal affricate",examples:["Mandarin j"]}},{id:"ipa_dz_palatal",label:"d",category:"Affricates",tags:["consonant","affricate","voiced","alveolo-palatal"],metadata:{description:"Voiced alveolo-palatal affricate"}},{id:"ipa_tl",label:"t",category:"Affricates",tags:["consonant","affricate","voiceless","alveolar","lateral"],metadata:{description:"Voiceless alveolar lateral affricate",examples:["Nahuatl tl"]}},{id:"ipa_dl",label:"d",category:"Affricates",tags:["consonant","affricate","voiced","alveolar","lateral"],metadata:{description:"Voiced alveolar lateral affricate"}},{id:"ipa_tie_bar_above",label:"",category:"Other Symbols",tags:["tie","ligature","combining"],metadata:{unicode:"U+0361",description:"Tie bar (above) for affricates/coarticulation"}},{id:"ipa_tie_bar_below",label:"",category:"Other Symbols",tags:["tie","ligature","combining"],metadata:{unicode:"U+035C",description:"Tie bar (below) for affricates/coarticulation"}},{id:"ipa_alveolo_palatal_fricative_vl",label:"",category:"Other Symbols",tags:["consonant","fricative","voiceless","alveolo-palatal"],metadata:{unicode:"U+0255",description:"Voiceless alveolo-palatal fricative",examples:["Mandarin x"]}},{id:"ipa_alveolo_palatal_fricative_vd",label:"",category:"Other Symbols",tags:["consonant","fricative","voiced","alveolo-palatal"],metadata:{unicode:"U+0291",description:"Voiced alveolo-palatal fricative"}},{id:"ipa_epiglottal_plosive",label:"",category:"Other Symbols",tags:["consonant","plosive","epiglottal"],metadata:{unicode:"U+02A1",description:"Epiglottal plosive"}},{id:"ipa_epiglottal_fricative_vl",label:"",category:"Other Symbols",tags:["consonant","fricative","voiceless","epiglottal"],metadata:{unicode:"U+029C",description:"Voiceless epiglottal fricative"}},{id:"ipa_epiglottal_fricative_vd",label:"",category:"Other Symbols",tags:["consonant","fricative","voiced","epiglottal"],metadata:{unicode:"U+02A2",description:"Voiced epiglottal fricative"}},{id:"ipa_labiodental_flap",label:"",category:"Other Symbols",tags:["consonant","tap","flap","labiodental"],metadata:{unicode:"U+2C71",description:"Labiodental flap"}}];Tu.filter(e=>["ipa_p","ipa_b","ipa_t","ipa_d","ipa_k","ipa_g","ipa_glottal_stop","ipa_m","ipa_n","ipa_ng","ipa_f","ipa_v","ipa_theta","ipa_eth","ipa_s","ipa_z","ipa_esh","ipa_ezh","ipa_h","ipa_l","ipa_turned_r","ipa_j","ipa_w","ipa_i","ipa_small_cap_i","ipa_e","ipa_epsilon","ipa_ae_ligature","ipa_script_a","ipa_open_o","ipa_o","ipa_upsilon","ipa_u","ipa_schwa","ipa_turned_v","ipa_fish_hook_r","ipa_primary_stress","ipa_secondary_stress","ipa_long"].includes(e.id));const j2=e=>{var n;const t=e instanceof HTMLTextAreaElement?window.HTMLTextAreaElement.prototype:window.HTMLInputElement.prototype;return(n=Object.getOwnPropertyDescriptor(t,"value"))==null?void 0:n.set};function JX(e,t){const n=e.selectionStart??e.value.length,r=e.selectionEnd??e.value.length,o=e.value.slice(0,n),i=e.value.slice(r),a=`${o}${t}${i}`,s=n+t.length,l=j2(e);l?l.call(e,a):e.value=a,e.setSelectionRange(s,s),e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0}))}const W2=({characters:e=Tu,keyboardHeight:t="260px",renderCharacter:n,asInput:r=!0,inputProps:o={},styleModule:i,wrapperClassName:a,...s})=>{const l=h.useRef(null),c=h.useRef(null),u=h.useRef(null),d=h.useRef(null),[f,m]=h.useState(!1),[y,v]=h.useState(!1),S=h.useMemo(()=>e??[],[e]),_=s.registerSmartFieldProps.disabled||s.registerSmartFieldProps.readOnly,b=f&&!_,{refs:w,context:x}=p0({open:b,onOpenChange:m}),N=f0(x,{outsidePress:!0,escapeKey:!0}),{getReferenceProps:C,getFloatingProps:T}=h0([N]),k=$=>{u.current={x:$.clientX,y:$.clientY}},D=$=>{const M=u.current;if(!M)return;Math.sqrt(Math.pow($.clientX-M.x,2)+Math.pow($.clientY-M.y,2))<5&&m(!0),u.current=null};h.useEffect(()=>{if(!b){v(!1);return}const $=()=>{const P=l.current,B=w.floating.current;if(!P)return;const V=P.getBoundingClientRect();let q;if(B)q=B.getBoundingClientRect().top;else{const Q=parseFloat(t);q=window.innerHeight-Q}v(V.bottom>q)},M=setTimeout($,50);return requestAnimationFrame($),window.addEventListener("resize",$),window.addEventListener("scroll",$,!0),()=>{clearTimeout(M),window.removeEventListener("resize",$),window.removeEventListener("scroll",$,!0)}},[b,t,w.floating]);const R=()=>{const $=c.current,M=l.current;if(!$||!M)return;const P=j2(M);P?P.call(M,$.value):M.value=$.value,M.dispatchEvent(new Event("input",{bubbles:!0})),M.dispatchEvent(new Event("change",{bubbles:!0}))},I=()=>{const $=c.current,M=l.current;!$||!M||($.value=M.value)},z=()=>{R()},O=$=>{I()};h.useEffect(()=>{if(y&&c.current){const $=c.current,M=l.current;if(M){$.value=M.value;const P=M.selectionStart??M.value.length;$.focus(),$.setSelectionRange(P,P)}else $.focus()}},[y]);const U=h.useCallback($=>{d.current&&d.current($),l.current=$,w.setReference($)},[w]);return L(gt,{children:[p(C0,{...s,asInput:r,inputProps:o,renderInput:$=>{d.current=$.ref;const M=C({onInput:O,onPointerDown:k,onPointerUp:D}),P={...$,...o,...M,ref:U,className:$.className,inputMode:"none",autoComplete:"off",spellCheck:!1};return r?p("input",{...P}):p("textarea",{...P,rows:1,style:{resize:"none",overflow:"hidden",...(o==null?void 0:o.style)||{}}})},styleModule:i,wrapperClassName:j(LX.fancyTextCustomKeyboardInput,a)}),b&&p(d0,{children:L("div",{ref:w.setFloating,...T(),className:Gl.floating,children:[y&&L("div",{className:Gl.floatingInputContainer,children:[r?p("input",{ref:c,className:Gl.floatingInput,inputMode:"none",autoComplete:"off",spellCheck:!1,onInput:z}):p("textarea",{ref:c,className:Gl.floatingInput,inputMode:"none",autoComplete:"off",spellCheck:!1,onInput:z,rows:1,style:{resize:"none",overflow:"hidden"}}),p(xe,{iconName:"check-lg",iconColor:"var(--status-success)",onClick:()=>m(!1),"aria-label":"Close keyboard",className:Gl.closeButton})]}),p(z2,{characters:S,height:t,renderCharacter:n,onSelect:$=>{const M=y?c.current:l.current;M&&(M.focus(),JX(M,$.value??$.label),y&&R())}})]})})]})};W2.displayName="FancyTextCustomKeyboardInput";const T0=({hasIcon:e=!0,showIconSuccess:t=!0,...n})=>{const{isEmpty:{value:r},warning:{value:o}}=n.fieldState,i=s=>!e&&!o?null:p(Ht,{iconName:s.warning?"exclamation-triangle":!s.isEmpty&&t?"check-lg":"",className:s.className,style:{"--icon-shift":s.iconShift},size:"1.5em","aria-hidden":"true",role:"img","aria-label":s.warning?"Error indicator":!s.isEmpty&&t?"Valid input indicator":""}),a=s=>p(x0,{className:s.className,style:s.style,role:"alert","aria-live":"polite","aria-atomic":"true",id:s.id,warning:s.warning||null});return p(W2,{...n,hasIcon:e,showIconSuccess:t,styleModule:Ob,wrapperClassName:j(Ob.labelShiftTextCustomKeyboardInput),renderIcon:i,renderWarning:a})};T0.displayName="LabelShiftTextCustomKeyboardInput";const eY="_tooltipContainer_l8bk9_1",tY="_tooltip_l8bk9_1",nY="_tooltipText_l8bk9_12",tm={tooltipContainer:eY,tooltip:tY,tooltipText:nY},rY={basic:{tooltip:{hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1}},transition:{duration:.2,ease:"easeOut"}},nekotech:{tooltip:{hidden:{opacity:0,scale:.3,rotate:-5},visible:{opacity:1,scale:1,rotate:0}},transition:{duration:.2,ease:[.68,-.55,.265,1.55]}}};function et({contentPin:e="bottom",themeType:t="basic",hoverCountdown:n=.5,tooltipStyles:r={},children:o,content:i,disabled:a=!1,showDelay:s,hideDelay:l,defaultIsOpen:c=!1,ariaLabel:u,isDescription:d=!0,className:f,style:m,...y}){const[v,S]=h.useState(c),_=h.useId(),b=h.useId(),w=h.useRef(null),{refs:x,floatingStyles:N,context:C}=p0({open:v,onOpenChange:S,placement:e,middleware:[qC({mainAxis:10}),ZC(),KC({padding:16}),_5({element:w})],whileElementsMounted:XC}),T=jU(C,{enabled:!a,restMs:s||n*1e3,delay:{open:s||n*1e3,close:l||0}}),k=ZU(C,{enabled:!a}),D=f0(C,{enabled:!a}),R=r2(C,{role:"tooltip"}),{getReferenceProps:I,getFloatingProps:z}=h0([T,k,D,R]),O=wl(rY,t,{});let U=i;typeof i=="string"&&(U=p("span",{className:j(tm.tooltipText),children:i}));const W={...I(),id:b,...u&&{"aria-label":u},...v&&{[d?"aria-describedby":"aria-labelledby"]:_},...typeof o=="object"&&be.isValidElement(o)&&!o.props.tabIndex&&{tabIndex:0}},$=e.includes("-start")||e.includes("-end");return L(gt,{children:[p("div",{ref:x.setReference,...W,className:f,style:m,...y,children:o}),p(d0,{children:p("div",{className:j(tm.tooltipContainer),ref:x.setFloating,...z(),style:N,children:p(bu,{children:v&&L(un.div,{id:_,className:j(tm.tooltip),style:{maxWidth:"200px",textWrap:"wrap",...r},role:"tooltip","aria-live":"polite",initial:"hidden",animate:"visible",exit:"hidden",variants:O.tooltip,transition:O.transition,children:[p(BU,{ref:w,context:C,fill:"var(--border-primary, white)","aria-hidden":"true",staticOffset:$?"45%":null}),U]},"tooltip")})})})]})}const oY="_ancestryInput_19ppo_1",iY="_header_19ppo_7",aY="_label_19ppo_13",sY="_emptyState_19ppo_18",lY="_rowsContainer_19ppo_28",cY="_row_19ppo_28",uY="_hasError_19ppo_45",dY="_rowNumber_19ppo_50",fY="_ancestorSelector_19ppo_57",pY="_selectedAncestor_19ppo_63",hY="_selectedLemma_19ppo_73",mY="_selectedPronunciation_19ppo_78",gY="_searchContainer_19ppo_84",yY="_searchInput_19ppo_88",vY="_dropdown_19ppo_103",_Y="_dropdownItem_19ppo_119",wY="_optionLemma_19ppo_136",bY="_optionPronunciation_19ppo_140",EY="_noOptions_19ppo_146",SY="_moreOptions_19ppo_153",xY="_typeSelect_19ppo_161",CY="_errorMessage_19ppo_176",TY="_previewSection_19ppo_183",At={ancestryInput:oY,header:iY,label:aY,emptyState:sY,rowsContainer:lY,row:cY,hasError:uY,rowNumber:dY,ancestorSelector:fY,selectedAncestor:pY,selectedLemma:hY,selectedPronunciation:mY,searchContainer:gY,searchInput:yY,dropdown:vY,dropdownItem:_Y,optionLemma:wY,optionPronunciation:bY,noOptions:EY,moreOptions:SY,typeSelect:xY,errorMessage:CY,previewSection:TY},$o={direction:"vertical",levelSpacing:80,siblingSpacing:40,nodePadding:12,minNodeWidth:80,minNodeHeight:32},ra={stroke:"var(--border-primary)",strokeWidth:2,curveType:"bezier",showArrow:!1},ji={enabled:!0,staggerDelay:100,animateConnectors:!0};let NY=0;function G2(){return`flowchart-node-${++NY}`}function H2(e,t,n=null,r=0){for(const o of e){const i=o.id??G2();t(o,r,n),o.children&&o.children.length>0&&H2(o.children,t,i,r+1)}}function kY(e,t){const n=[],r=new Map;for(const o of e)r.set(o.id,o);for(const o of e)if(!t.has(o.id))for(const i of o.childIds){const a=r.get(i);if(a){const s=a.originalNode.data,l=s==null?void 0:s.connectionLabel,c=s==null?void 0:s.connectionLabelStyle;n.push({parentId:o.id,childId:i,parentNode:o,childNode:a,label:l,labelStyle:c})}}return n}function AY(e,t){const n=new Map;for(const i of e)n.set(i.id,i);const r=[],o=[t];for(;o.length>0;){const i=o.pop(),a=n.get(i);if(a)for(const s of a.childIds)r.push(s),o.push(s)}return r}function RY(e,t){const n=new Set;for(const r of t){const o=AY(e,r);for(const i of o)n.add(i)}return e.filter(r=>!n.has(r.id))}function N0(e){return e.map(t=>({...t,id:t.id??G2(),children:t.children?N0(t.children):void 0}))}function IY(e,t={}){const[n,r]=h.useState(new Map),[o,i]=h.useState(!0),a=h.useRef(null),s=h.useRef(!1),{nodePadding:l=$o.nodePadding,minNodeWidth:c=$o.minNodeWidth,minNodeHeight:u=$o.minNodeHeight}=t,d=h.useCallback(()=>{const m=N0(e),y=[];return H2(m,v=>{y.push({id:v.id,element:v.displayElement})}),y},[e]);h.useEffect(()=>{s.current=!1,i(!0)},[e]),h.useEffect(()=>{if(s.current||!a.current)return;const m=a.current,y=d(),v=new Map;m.querySelectorAll("[data-node-id]").forEach(_=>{const b=_.getAttribute("data-node-id");if(!b)return;const w=_.getBoundingClientRect();v.set(b,{id:b,width:Math.max(w.width+l*2,c),height:Math.max(w.height+l*2,u)})}),v.size===y.length&&(r(v),i(!1),s.current=!0)},[d,l,c,u]);const f=o?p("div",{ref:a,style:{position:"absolute",left:-9999,top:-9999,visibility:"hidden",pointerEvents:"none",display:"flex",flexDirection:"column",gap:8},"aria-hidden":"true",children:d().map(({id:m,element:y})=>p("div",{"data-node-id":m,style:{display:"inline-block",whiteSpace:"nowrap"},children:y},m))}):null;return{measurements:n,isMeasuring:o,measurementContainer:f}}function LY(e,t,n={},r=new Set){const o={...$o,...n},i=N0(e),a=X2(i,t,o,null,0,r);for(const u of a)Y2(u,o);let s=0;for(const u of a)q2(u,s,o),s+=u.subtreeWidth+o.siblingSpacing;const l=[];for(const u of a)K2(u,l,r);const c=Z2(l);if(c.minX<0){const u=-c.minX;for(const d of l)d.x+=u}return l}function X2(e,t,n,r,o,i){return e.map(a=>{const s=a.id,l=t.get(s),c=Math.max((l==null?void 0:l.width)??n.minNodeWidth,n.minNodeWidth),u=Math.max((l==null?void 0:l.height)??n.minNodeHeight,n.minNodeHeight),f=!i.has(s)&&a.children?X2(a.children,t,n,s,o+1,i):[];return{id:s,originalNode:a,width:c,height:u,depth:o,parentId:r,children:f,x:0,y:0,subtreeWidth:c}})}function Y2(e,t){if(e.children.length===0)return e.subtreeWidth=e.width,e.subtreeWidth;let n=0;for(let r=0;r<e.children.length;r++)n+=Y2(e.children[r],t),r<e.children.length-1&&(n+=t.siblingSpacing);return e.subtreeWidth=Math.max(e.width,n),e.subtreeWidth}function q2(e,t,n){const r=n.direction==="vertical";if(r?e.y=e.depth*(n.levelSpacing+e.height):e.x=e.depth*(n.levelSpacing+e.width),e.children.length===0){r?e.x=t+(e.subtreeWidth-e.width)/2:e.y=t+(e.subtreeWidth-e.height)/2;return}let o=t;for(const s of e.children)q2(s,o,n),o+=s.subtreeWidth+n.siblingSpacing;const i=e.children[0],a=e.children[e.children.length-1];if(r){const s=(i.x+i.width/2+a.x+a.width/2)/2;e.x=s-e.width/2}else{const s=(i.y+i.height/2+a.y+a.height/2)/2;e.y=s-e.height/2}}function K2(e,t,n){t.push({id:e.id,originalNode:e.originalNode,x:e.x,y:e.y,width:e.width,height:e.height,depth:e.depth,parentId:e.parentId,childIds:e.children.map(r=>r.id),isCollapsed:n.has(e.id)});for(const r of e.children)K2(r,t,n)}function Z2(e){if(e.length===0)return{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};let t=1/0,n=1/0,r=-1/0,o=-1/0;for(const i of e)t=Math.min(t,i.x),n=Math.min(n,i.y),r=Math.max(r,i.x+i.width),o=Math.max(o,i.y+i.height);return{minX:t,minY:n,maxX:r,maxY:o,width:r-t,height:o-n}}function OY(e,t,n,r){const o=h.useMemo(()=>t.size===0&&e.length>0?[]:LY(e,t,n,r),[e,t,n,r]),i=h.useMemo(()=>RY(o,r),[o,r]),a=h.useMemo(()=>kY(i,r),[i,r]),s=h.useMemo(()=>Z2(i),[i]);return{positionedNodes:o,visibleNodes:i,connections:a,bounds:s}}function Q2({defaultCollapsedNodes:e=[],collapsedNodes:t,onCollapsedNodesChange:n,onNodeToggle:r}){const[o,i]=h.useState(()=>new Set(e)),a=t!==void 0,s=a?t:o,l=h.useCallback(v=>{a||i(v),n==null||n(v)},[a,n]),c=h.useCallback(v=>{const S=new Set(s),_=S.has(v);_?S.delete(v):S.add(v),l(S),r==null||r(v,_)},[s,l,r]),u=h.useCallback(v=>{if(!s.has(v))return;const S=new Set(s);S.delete(v),l(S),r==null||r(v,!0)},[s,l,r]),d=h.useCallback(v=>{if(s.has(v))return;const S=new Set(s);S.add(v),l(S),r==null||r(v,!1)},[s,l,r]),f=h.useCallback(()=>{l(new Set)},[l]),m=h.useCallback(v=>{l(new Set(v))},[l]),y=h.useCallback(v=>s.has(v),[s]);return{collapsedNodes:s,toggleNode:c,expandNode:u,collapseNode:d,expandAll:f,collapseAll:m,isCollapsed:y}}const PY="_svg_1pea2_2",MY="_connectorsLayer_1pea2_7",DY="_nodesLayer_1pea2_11",FY="_connector_1pea2_7",$Y="_nodeGroup_1pea2_22",BY="_nodeBackground_1pea2_26",VY="_nodeForeignObject_1pea2_41",UY="_nodeContent_1pea2_45",zY="_toggleButton_1pea2_60",jY="_toggleButtonBg_1pea2_69",WY="_toggleButtonText_1pea2_80",GY="_nodeEnter_1pea2_89",HY="_nodeEnterActive_1pea2_94",XY="_loading_1pea2_101",YY="_empty_1pea2_112",qY="_error_1pea2_123",KY="_connectorLabel_1pea2_147",Fe={svg:PY,connectorsLayer:MY,nodesLayer:DY,connector:FY,nodeGroup:$Y,nodeBackground:BY,nodeForeignObject:VY,nodeContent:UY,toggleButton:zY,toggleButtonBg:jY,toggleButtonText:WY,nodeEnter:GY,nodeEnterActive:HY,loading:XY,empty:YY,error:qY,connectorLabel:KY},ZY=h.memo(function({node:t,nodeClassName:n,nodePadding:r,animationEnabled:o,animationDelay:i,onClick:a,onHover:s,onToggle:l,hasChildren:c}){const u=h.useCallback(v=>{v.stopPropagation(),a==null||a(t.originalNode,v)},[a,t.originalNode]),d=h.useCallback(()=>{s==null||s(t.originalNode)},[s,t.originalNode]),f=h.useCallback(()=>{s==null||s(null)},[s]),m=h.useCallback(v=>{v.stopPropagation(),l==null||l(t.id)},[l,t.id]),y=L("g",{className:j(Fe.nodeGroup,n),transform:`translate(${t.x}, ${t.y})`,onClick:u,onMouseEnter:d,onMouseLeave:f,role:"treeitem","aria-expanded":c?!t.isCollapsed:void 0,tabIndex:0,children:[p("rect",{className:Fe.nodeBackground,width:t.width,height:t.height,rx:6,ry:6}),p("foreignObject",{width:t.width,height:t.height,className:Fe.nodeForeignObject,children:p("div",{className:Fe.nodeContent,style:{padding:r},children:t.originalNode.displayElement})}),c&&L("g",{className:Fe.toggleButton,transform:`translate(${t.width/2-8}, ${t.height-4})`,onClick:m,children:[p("circle",{cx:8,cy:8,r:8,className:Fe.toggleButtonBg}),p("text",{x:8,y:12,textAnchor:"middle",className:Fe.toggleButtonText,children:t.isCollapsed?"+":"-"})]})]});return o?p(un.g,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:i/1e3,ease:"easeOut"},children:y}):y});function Nu(e,t,n){return n==="vertical"?{startX:e.x+e.width/2,startY:e.y+e.height,endX:t.x+t.width/2,endY:t.y}:{startX:e.x+e.width,startY:e.y+e.height/2,endX:t.x,endY:t.y+t.height/2}}function QY(e,t,n,r,o){const i=n-e,a=r-t,s=Math.sqrt(i*i+a*a);if(s===0)return{x:n,y:r};const l=i/s,c=a/s;return{x:n-l*o,y:r-c*o}}function JY(e,t,n="vertical",r=0){const{startX:o,startY:i,endX:a,endY:s}=Nu(e,t,n),l=n==="horizontal"?a-r:a,c=n==="vertical"?s-r:s;if(n==="vertical"){const u=(i+c)/2;return`M ${o} ${i} C ${o} ${u}, ${l} ${u}, ${l} ${c}`}else{const u=(o+l)/2;return`M ${o} ${i} C ${u} ${i}, ${u} ${c}, ${l} ${c}`}}function eq(e,t,n="vertical",r=0){const{startX:o,startY:i,endX:a,endY:s}=Nu(e,t,n),l=n==="horizontal"?a-r:a,c=n==="vertical"?s-r:s;if(n==="vertical"){const u=(i+c)/2;return`M ${o} ${i} L ${o} ${u} L ${l} ${u} L ${l} ${c}`}else{const u=(o+l)/2;return`M ${o} ${i} L ${u} ${i} L ${u} ${c} L ${l} ${c}`}}function tq(e,t,n="vertical",r=0){const{startX:o,startY:i,endX:a,endY:s}=Nu(e,t,n);if(r>0){const l=QY(o,i,a,s,r);return`M ${o} ${i} L ${l.x} ${l.y}`}return`M ${o} ${i} L ${a} ${s}`}function nq(e,t,n="bezier",r="vertical",o=0){switch(n){case"step":return eq(e,t,r,o);case"straight":return tq(e,t,r,o);case"bezier":default:return JY(e,t,r,o)}}function rq(e,t,n="bezier",r="vertical"){if(n==="bezier"||n==="step")return r==="vertical"?90:0;const{startX:o,startY:i,endX:a,endY:s}=Nu(e,t,r);return Math.atan2(s-i,a-o)*(180/Math.PI)}function oq(e,t,n="vertical"){const{endX:r,endY:o}=Nu(e,t,n);return{x:r,y:o}}const iq=h.memo(function({connection:t,style:n,direction:r,animationEnabled:o,animationDelay:i,showArrow:a=!1}){var x,N,C;const{stroke:s=ra.stroke,strokeWidth:l=ra.strokeWidth,curveType:c=ra.curveType}=n,u=12,d=nq(t.parentNode,t.childNode,c,r,a?u:0),f=h.useMemo(()=>{if(!a)return null;const T=oq(t.parentNode,t.childNode,r),k=rq(t.parentNode,t.childNode,c,r);return{...T,angle:k}},[a,t.parentNode,t.childNode,r,c]),m=h.useMemo(()=>{if(!t.label)return null;const T=t.parentNode,k=t.childNode,D=r==="horizontal"?T.x+T.width:T.x+T.width/2,R=r==="horizontal"?T.y+T.height/2:T.y+T.height,I=r==="horizontal"?k.x:k.x+k.width/2,z=r==="horizontal"?k.y+k.height/2:k.y;return{x:(D+I)/2,y:(R+z)/2}},[t.label,t.parentNode,t.childNode,r]),y=.5,v=i/1e3,S=`${-u},-${u/2} 0,0 ${-u},${u/2}`,_=((x=t.labelStyle)==null?void 0:x.fontSize)||"0.65rem",b=((N=t.labelStyle)==null?void 0:N.fill)||"var(--text-secondary)",w=((C=t.labelStyle)==null?void 0:C.background)||"var(--surface-base)";return o?L("g",{children:[p(un.path,{d,stroke:s,strokeWidth:l,fill:"none",className:Fe.connector,initial:{pathLength:0},animate:{pathLength:1},transition:{pathLength:{duration:y,delay:v,ease:"easeInOut"}}}),a&&f&&p("g",{transform:`translate(${f.x}, ${f.y}) rotate(${f.angle})`,children:p(un.polygon,{points:S,fill:s,initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{duration:.15,delay:v+y,ease:"easeOut"}})}),t.label&&m&&L(un.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,delay:v+y*.5},children:[p("rect",{x:m.x-2,y:m.y-8,width:t.label.length*5+4,height:14,fill:w,rx:2}),p("text",{x:m.x,y:m.y,fontSize:_,fill:b,textAnchor:"start",dominantBaseline:"middle",className:Fe.connectorLabel,children:t.label})]})]}):L("g",{children:[p("path",{d,stroke:s,strokeWidth:l,fill:"none",className:Fe.connector}),a&&f&&p("polygon",{points:S,fill:s,transform:`translate(${f.x}, ${f.y}) rotate(${f.angle})`}),t.label&&m&&L("g",{children:[p("rect",{x:m.x-2,y:m.y-8,width:t.label.length*5+4,height:14,fill:w,rx:2}),p("text",{x:m.x,y:m.y,fontSize:_,fill:b,textAnchor:"start",dominantBaseline:"middle",className:Fe.connectorLabel,children:t.label})]})]})}),aq="_container_1kibk_1",sq="_box_1kibk_5",lq="_active_1kibk_20",nm={container:aq,box:sq,active:lq};function cq({barAmount:e=10,interval:t=100}){const[n,r]=h.useState(0);return h.useEffect(()=>{const o=setInterval(()=>{r(i=>(i+1)%e)},t);return()=>clearInterval(o)},[e]),p(uq,{currentBar:n,barAmount:e})}function uq({currentBar:e=0,barAmount:t=12,lightUpPast:n=!1}){return p("div",{className:j(nm.container),children:Array.from({length:t}).map((r,o)=>{const i=n?o<=e:o===e;return p("div",{className:j(nm.box,{[nm.active]:i})},o)})})}const dq="_canvasContainer_1222v_4",fq="_loadingOverlay_1222v_29",pq="_controls_1222v_45",hq="_controlButton_1222v_70",To={canvasContainer:dq,"canvasContainer--measuring":"_canvasContainer--measuring_1222v_24",loadingOverlay:fq,"loadingOverlay--hidden":"_loadingOverlay--hidden_1222v_39",controls:pq,"controls--bottom-right":"_controls--bottom-right_1222v_53","controls--bottom-left":"_controls--bottom-left_1222v_57","controls--top-right":"_controls--top-right_1222v_61","controls--top-left":"_controls--top-left_1222v_65",controlButton:hq},mq=h.memo(function({onZoomIn:t,onZoomOut:n,onReset:r,onFitToView:o,position:i="bottom-right",className:a}){return L("div",{className:j(To.controls,To[`controls--${i}`],a),children:[p("button",{type:"button",className:To.controlButton,onClick:t,"aria-label":"Zoom in",title:"Zoom in",children:"+"}),p("button",{type:"button",className:To.controlButton,onClick:n,"aria-label":"Zoom out",title:"Zoom out",children:""}),p("button",{type:"button",className:To.controlButton,onClick:r,"aria-label":"Reset view",title:"Reset view",children:L("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),p("path",{d:"M3 3v5h5"})]})}),o&&p("button",{type:"button",className:To.controlButton,onClick:o,"aria-label":"Fit to view",title:"Fit to view",children:L("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p("path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}),p("path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}),p("path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}),p("path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"})]})})]})});function Pb(e,t,n,r,o="both",i=0,a=.1,s=3){const l=n-i*2,c=r-i*2;if(e<=0||t<=0)return 1;if(l<=0||c<=0)return a;let u;switch(o){case"width":u=l/e;break;case"height":u=c/t;break;case"both":default:u=Math.min(l/e,c/t);break}return Math.max(a,Math.min(s,u))}const Pp=h.forwardRef(function({contentDimensions:t,children:n,initialScale:r=1,minScale:o=.1,maxScale:i=3,showControls:a=!0,centerOnInit:s=!0,enableWheel:l=!0,enablePinch:c=!0,enablePan:u=!0,doubleClickMode:d="reset",enableVelocity:f=!1,onTransformChange:m,className:y,style:v,controlsPosition:S="bottom-right",ariaLabel:_},b){const w=h.useRef(null),x=h.useRef(null),N=t==null?void 0:t.autoFit,C=(N==null?void 0:N.enabled)??!1,[T,k]=h.useState(C),[D,R]=h.useState(null);h.useEffect(()=>{C?(k(!0),R(null)):k(!1)},[C]);const I=h.useCallback((M,P,B,V,q)=>{const Q=q==null?void 0:q.initialPosition;if(!Q)return{x:(M-B)/2,y:(P-V)/2};if(Array.isArray(Q)){const[H,K]=Q,Y=B>0?B/B:1;return{x:M/2-H*Y,y:P/2-K*Y}}switch(Q){case"center":return{x:(M-B)/2,y:(P-V)/2};case"top":return{x:(M-B)/2,y:0};case"top-left":return{x:0,y:0};case"top-right":return{x:M-B,y:0};case"bottom":return{x:(M-B)/2,y:P-V};case"bottom-left":return{x:0,y:P-V};case"bottom-right":return{x:M-B,y:P-V};case"left":return{x:0,y:(P-V)/2};case"right":return{x:M-B,y:(P-V)/2};default:return{x:(M-B)/2,y:(P-V)/2}}},[]),z=h.useCallback((M="both",P=0)=>{const B=w.current;if(!B)return;const{wrapperComponent:V,contentComponent:q}=B.instance;if(!V||!q)return;const Q=V.offsetWidth,H=V.offsetHeight,K=q.scrollWidth,Y=q.scrollHeight,ce=Pb(K,Y,Q,H,M,P,o,i),me=K*ce,fe=Y*ce,{x:ie,y:he}=I(Q,H,me,fe,t);B.setTransform(ie,he,ce)},[o,i,t,I]),O=h.useCallback(M=>{if(C)return;const P=t==null?void 0:t.initialPosition;if(!P)return;const{wrapperComponent:B,contentComponent:V}=M.instance;if(!B||!V)return;const q=B.offsetWidth,Q=B.offsetHeight,H=V.offsetWidth,K=V.offsetHeight,Y=r;let ce=0,me=0;if(Array.isArray(P)){const[fe,ie]=P;ce=q/2-fe*Y,me=Q/2-ie*Y}else switch(P){case"center":ce=(q-H*Y)/2,me=(Q-K*Y)/2;break;case"top":ce=(q-H*Y)/2,me=0;break;case"top-left":ce=0,me=0;break;case"top-right":ce=q-H*Y,me=0;break;case"bottom":ce=(q-H*Y)/2,me=Q-K*Y;break;case"bottom-left":ce=0,me=Q-K*Y;break;case"bottom-right":ce=q-H*Y,me=Q-K*Y;break;case"left":ce=0,me=(Q-K*Y)/2;break;case"right":ce=q-H*Y,me=(Q-K*Y)/2;break}M.setTransform(ce,me,Y)},[t==null?void 0:t.initialPosition,r]),U=h.useCallback(M=>{if(m){const{positionX:P,positionY:B,scale:V}=M.state;m({positionX:P,positionY:B,scale:V})}},[m]);h.useImperativeHandle(b,()=>({resetView:()=>{var M;(M=w.current)==null||M.resetTransform()},fitToView:()=>{var M;(M=w.current)==null||M.centerView()},fitToContent:(M,P)=>{z(M??"both",P??0)},remeasure:()=>{C&&(k(!0),R(null))},zoomIn:()=>{var M;(M=w.current)==null||M.zoomIn()},zoomOut:()=>{var M;(M=w.current)==null||M.zoomOut()},setZoom:M=>{var P;(P=w.current)==null||P.setTransform(w.current.state.positionX,w.current.state.positionY,M)},panTo:(M,P)=>{var B;(B=w.current)==null||B.setTransform(M,P,w.current.state.scale)},getTransform:()=>{var P;const M=(P=w.current)==null?void 0:P.state;return{positionX:(M==null?void 0:M.positionX)??0,positionY:(M==null?void 0:M.positionY)??0,scale:(M==null?void 0:M.scale)??1}}}),[z,C]);const W={disabled:d==="disabled",mode:d==="disabled"?"reset":d};h.useLayoutEffect(()=>{if(!C)return;const M=requestAnimationFrame(()=>{const P=w.current;if(!P){k(!0);return}const{wrapperComponent:B,contentComponent:V}=P.instance;if(!B||!V){k(!0);return}const q=B.offsetWidth,Q=B.offsetHeight,H=V.scrollWidth,K=V.scrollHeight,Y=Pb(H,K,q,Q,(N==null?void 0:N.axis)??"both",(N==null?void 0:N.padding)??0,o,i),ce=H*Y,me=K*Y,{x:fe,y:ie}=I(q,Q,ce,me,t);P.setTransform(fe,ie,Y),R(Y),k(!1)});return()=>cancelAnimationFrame(M)},[C,N==null?void 0:N.axis,N==null?void 0:N.padding,o,i,t,I]),h.useEffect(()=>{if(!C||!(N!=null&&N.refitOnResize))return;const M=x.current;if(!M)return;let P;const B=new ResizeObserver(()=>{clearTimeout(P),P=window.setTimeout(()=>{z(N.axis??"both",N.padding??0)},100)});return B.observe(M),()=>{clearTimeout(P),B.disconnect()}},[C,N==null?void 0:N.refitOnResize,N==null?void 0:N.axis,N==null?void 0:N.padding,z]);const $=C&&D!==null?D:r;return L("div",{ref:x,className:j(To.canvasContainer,{[To["canvasContainer--measuring"]]:T},y),style:v,role:"application","aria-label":_,children:[C&&p("div",{className:j(To.loadingOverlay,{[To["loadingOverlay--hidden"]]:!T}),"aria-hidden":!T,children:p(cq,{barAmount:8,interval:80})}),p(b0,{ref:w,initialScale:$,minScale:o,maxScale:i,centerOnInit:s&&!(t!=null&&t.initialPosition)&&!C,doubleClick:W,wheel:{disabled:!l,step:.1},panning:{disabled:!u,velocityDisabled:!f},pinch:{disabled:!c},onTransformed:U,onInit:O,children:({zoomIn:M,zoomOut:P,resetTransform:B,centerView:V})=>L(gt,{children:[p(E0,{wrapperStyle:{width:"100%",height:"100%"},contentStyle:{width:(t==null?void 0:t.width)??"fit-content",height:(t==null?void 0:t.height)??"fit-content"},children:n}),a&&p(mq,{onZoomIn:()=>M(),onZoomOut:()=>P(),onReset:()=>B(),onFitToView:C?()=>z((N==null?void 0:N.axis)??"both",(N==null?void 0:N.padding)??0):()=>V(),position:S})]})})]})}),gq=h.forwardRef(function({nodes:t,connections:n,bounds:r,direction:o,nodePadding:i,connectorStyle:a,animation:s,initialScale:l=1,minScale:c=.1,maxScale:u=3,showControls:d=!0,showDirectionArrow:f=!0,className:m,nodeClassName:y,ariaLabel:v="Flow chart diagram",onNodeClick:S,onNodeHover:_,onNodeToggle:b},w){const x=h.useRef(null),N=h.useRef(null),{enabled:C=ji.enabled,staggerDelay:T=ji.staggerDelay,animateConnectors:k=ji.animateConnectors}=s,D=40,R=r.width+D*2,I=r.height+D*2,z=h.useMemo(()=>{const W=new Map;for(const $ of t)W.set($.id,$);return W},[t]);h.useImperativeHandle(w,()=>({resetView:()=>{var W;(W=x.current)==null||W.resetView()},fitToView:()=>{var W;(W=x.current)==null||W.fitToView()},focusNode:W=>{const $=z.get(W);if($&&x.current){const M=$.x+$.width/2,P=$.y+$.height/2;x.current.panTo(-M+window.innerWidth/2,-P+window.innerHeight/2)}},exportSvg:()=>N.current?new XMLSerializer().serializeToString(N.current):""}),[z]);const O=h.useCallback(W=>C?W*T:0,[C,T]),U=h.useCallback(W=>!C||!k?0:t.length*T+W*(T/2),[C,k,t.length,T]);return p(Pp,{ref:x,contentDimensions:{width:R,height:I},initialScale:l,minScale:c,maxScale:u,showControls:d,centerOnInit:!0,doubleClickMode:"reset",className:m,ariaLabel:v,children:L("svg",{ref:N,width:R,height:I,viewBox:`${-D} ${-D} ${R} ${I}`,className:Fe.svg,role:"tree","aria-label":v,children:[p("g",{className:Fe.connectorsLayer,children:n.map((W,$)=>p(iq,{connection:W,style:a,direction:o,animationEnabled:C&&k,animationDelay:U($),showArrow:f},`${W.parentId}-${W.childId}`))}),p("g",{className:Fe.nodesLayer,children:t.map((W,$)=>p(ZY,{node:W,nodeClassName:y,nodePadding:i,animationEnabled:C,animationDelay:O($),onClick:S,onHover:_,onToggle:b,hasChildren:W.childIds.length>0||W.isCollapsed},W.id))})]})})});h.forwardRef(function(t,n){const{data:r,layout:o={},connectorStyle:i={},animation:a={},onNodeClick:s,onNodeHover:l,onNodeToggle:c,initialScale:u=1,minScale:d=.1,maxScale:f=3,showControls:m=!0,showDirectionArrow:y=!0,defaultCollapsedNodes:v,collapsedNodes:S,onCollapsedNodesChange:_,className:b,style:w,nodeClassName:x,ariaLabel:N}=t,C=h.useRef(null),T=h.useMemo(()=>({...$o,...o}),[o]),k=h.useMemo(()=>({...ra,...i}),[i]),D=h.useMemo(()=>({...ji,...a}),[a]),{collapsedNodes:R,toggleNode:I}=Q2({defaultCollapsedNodes:v,collapsedNodes:S,onCollapsedNodesChange:_,onNodeToggle:c}),{measurements:z,isMeasuring:O,measurementContainer:U}=IY(r,T),{visibleNodes:W,connections:$,bounds:M}=OY(r,z,T,R);return h.useImperativeHandle(n,()=>({resetView:()=>{var P;return(P=C.current)==null?void 0:P.resetView()},fitToView:()=>{var P;return(P=C.current)==null?void 0:P.fitToView()},focusNode:P=>{var B;return(B=C.current)==null?void 0:B.focusNode(P)},exportSvg:()=>{var P;return((P=C.current)==null?void 0:P.exportSvg())??""},toggleNode:I}),[I]),r.length===0?p("div",{className:j(Fe.canvasContainer,b),style:w,children:p("div",{className:Fe.empty,children:"No data to display"})}):O?L("div",{className:j(Fe.canvasContainer,b),style:w,children:[U,p("div",{className:Fe.loading,children:"Preparing layout..."})]}):p("div",{className:j(Fe.canvasContainer,b),style:w,children:p(gq,{ref:C,nodes:W,connections:$,bounds:M,direction:T.direction,nodePadding:T.nodePadding,connectorStyle:k,animation:D,initialScale:u,minScale:d,maxScale:f,showControls:m,showDirectionArrow:y,nodeClassName:x,ariaLabel:N,onNodeClick:s,onNodeHover:l,onNodeToggle:I})})});function yq(e,t={}){const[n,r]=h.useState(new Map),[o,i]=h.useState(!0),a=h.useRef(null),s=h.useRef(!1),{nodePadding:l=$o.nodePadding,minNodeWidth:c=$o.minNodeWidth,minNodeHeight:u=$o.minNodeHeight}=t,d=h.useCallback(()=>Object.entries(e.nodes).map(([m,y])=>({id:m,element:y.displayElement})),[e.nodes]);h.useEffect(()=>{s.current=!1,i(!0)},[e]),h.useEffect(()=>{if(s.current||!a.current)return;const m=a.current,y=d(),v=setTimeout(()=>{if(o&&!s.current){console.warn("[CanvasDAGChart] Measurement timed out. Using available measures or defaults.");const b=new Map,w=m.querySelectorAll("[data-node-id]"),x=new Set;w.forEach(N=>{const C=N.getAttribute("data-node-id");if(!C)return;x.add(C);const T=N.getBoundingClientRect();b.set(C,{id:C,width:Math.max(T.width+l*2,c),height:Math.max(T.height+l*2,u)})}),y.forEach(({id:N})=>{x.has(N)||b.set(N,{id:N,width:c,height:u})}),r(b),i(!1),s.current=!0}},500),S=new Map;return m.querySelectorAll("[data-node-id]").forEach(b=>{const w=b.getAttribute("data-node-id");if(!w)return;const x=b.getBoundingClientRect();S.set(w,{id:w,width:Math.max(x.width+l*2,c),height:Math.max(x.height+l*2,u)})}),(S.size===y.length||y.length===0)&&(clearTimeout(v),r(S),i(!1),s.current=!0),()=>clearTimeout(v)},[d,l,c,u,o]);const f=o?p("div",{ref:a,style:{position:"absolute",left:-9999,top:-9999,visibility:"hidden",pointerEvents:"none",display:"flex",flexDirection:"column",gap:8},"aria-hidden":"true",children:d().map(({id:m,element:y})=>p("div",{"data-node-id":m,style:{display:"inline-block",whiteSpace:"nowrap"},children:y},m))}):null;return{measurements:n,isMeasuring:o,measurementContainer:f}}function ku(e,t){const n=new Map,r=new Map;for(const o of Object.keys(e))n.set(o,[]),r.set(o,[]);for(const o of t){const i=n.get(o.sourceId);i&&i.push(o.targetId);const a=r.get(o.targetId);a&&a.push(o.sourceId)}return{children:n,parents:r}}function vq(e,t){const{children:n}=ku(e,t),r=0,o=1,i=2,a=new Map,s=new Map,l=Object.keys(e);for(const u of l)a.set(u,r),s.set(u,null);function c(u,d){a.set(u,o),d.push(u);const f=n.get(u)||[];for(const m of f){const y=a.get(m);if(y===o){const v=d.indexOf(m);return d.slice(v).concat(m)}if(y===r){s.set(m,u);const v=c(m,d);if(v)return v}}return a.set(u,i),d.pop(),null}for(const u of l)if(a.get(u)===r){const d=c(u,[]);if(d)return{hasCycle:!0,cycleNodes:d}}return{isAcyclic:!0}}function _q(e,t){const{children:n}=ku(e,t),r=[...t],o=new Map;r.forEach((d,f)=>o.set(`${d.sourceId}->${d.targetId}`,f));const i=0,a=1,s=2,l=new Map,c=Object.keys(e);c.forEach(d=>l.set(d,i));function u(d){l.set(d,a);const f=n.get(d)||[];for(const m of f)if(l.get(m)===a){const y=`${d}->${m}`,v=o.get(y);if(v!==void 0){const S=r[v];r[v]={...S,sourceId:m,targetId:d}}}else l.get(m)===i&&u(m);l.set(d,s)}return c.forEach(d=>{l.get(d)===i&&u(d)}),r}function wq(e,t){const{children:n,parents:r}=ku(e,t),o=Object.keys(e),i=new Map;for(const l of o)i.set(l,(r.get(l)||[]).length);const a=[];for(const l of o)i.get(l)===0&&a.push(l);const s=[];for(;a.length>0;){const l=a.shift();s.push(l);const c=n.get(l)||[];for(const u of c){const d=(i.get(u)||0)-1;i.set(u,d),d===0&&a.push(u)}}if(s.length!==o.length)throw new Error("Graph contains a cycle");return s}function bq(e,t){const{parents:n}=ku(e,t),r=new Map,o=wq(e,t);for(const i of o){const a=n.get(i)||[];if(a.length===0)r.set(i,0);else{let s=0;for(const l of a){const c=r.get(l)||0;s=Math.max(s,c)}r.set(i,s+1)}}return r}function J2(e,t,n,r,o){if(o.has(e))return o.get(e);if(r.has(e))return o.set(e,!0),!0;const a=(n.get(e)||[]).some(s=>J2(s,t,n,r,o)&&!t.has(s));return o.set(e,a),a}function Eq(e,t,n){const r=new Set;for(const i of e)i.parentIds.length===0&&r.add(i.id);const o=new Map;return e.filter(i=>J2(i.id,t,n,r,o))}function Sq(e,t,n){const r=new Map;for(const i of e)r.set(i.id,i);const o=[];for(const i of t){const a=r.get(i.sourceId),s=r.get(i.targetId);!a||!s||n.has(i.sourceId)||o.push({sourceId:i.sourceId,targetId:i.targetId,sourceNode:a,targetNode:s,label:i.label,labelStyle:i.labelStyle,isDummyEdge:a.isDummy||s.isDummy})}return o}function xq(e,t,n={},r=new Set){const o={...$o,...n};if(Object.keys(e.nodes).length===0)return[];const a=_q(e.nodes,e.edges),s=bq(e.nodes,a),{allNodes:l,allEdges:c,dummyIds:u}=Tq(e.nodes,a,s),{children:d,parents:f}=ek(c),m=new Map(s);for(const[b,w]of Object.entries(l))w.isDummy&&m.get(b)===void 0&&console.warn(`Dummy node ${b} missing layer assignment`);const y=Cq(l,m),v=Nq(y,c,4),_=kq(v,l,t,o,u,d,f).filter(b=>!b.isDummy);for(const b of _)b.isCollapsed=r.has(b.id);return _}function ek(e){const t=new Map,n=new Map;for(const r of e)t.has(r.sourceId)||t.set(r.sourceId,[]),t.get(r.sourceId).push(r.targetId),n.has(r.targetId)||n.set(r.targetId,[]),n.get(r.targetId).push(r.sourceId);return{children:t,parents:n}}function Cq(e,t){const n=new Map;for(const r of Object.keys(e)){const o=t.get(r)??0;n.has(o)||n.set(o,[]),n.get(o).push(r)}return n}function Tq(e,t,n,r,o){const i={...e},a=[],s=new Set;let l=0;for(const c of t){const u=n.get(c.sourceId)??0,d=n.get(c.targetId)??0;if(d-u<=1)a.push(c);else{let m=c.sourceId;for(let y=u+1;y<d;y++){const v=`__dummy_${l++}`;s.add(v);const S={displayElement:null,isDummy:!0,originalEdge:{sourceId:c.sourceId,targetId:c.targetId}};i[v]=S,n.set(v,y),a.push({sourceId:m,targetId:v}),m=v}a.push({sourceId:m,targetId:c.targetId,label:c.label,labelStyle:c.labelStyle})}}return{allNodes:i,allEdges:a,dummyIds:s}}function Nq(e,t,n=4){const{children:r,parents:o}=ek(t),i=Array.from(e.keys()).sort((l,c)=>l-c);if(i.length<=1)return e;const a=new Map;for(const[l,c]of e)a.set(l,[...c]);function s(l,c,u){if(c.length===0)return 0;let d=0,f=0;for(const m of c){const y=u.get(m);y!==void 0&&(d+=y,f++)}return f>0?d/f:0}for(let l=0;l<n;l++){for(let c=0;c<i.length-1;c++){const u=i[c],d=i[c+1],f=a.get(u)||[],m=a.get(d)||[],y=new Map;f.forEach((S,_)=>y.set(S,_));const v=new Map;for(const S of m){const _=o.get(S)||[];v.set(S,s(S,_,y))}m.sort((S,_)=>(v.get(S)||0)-(v.get(_)||0)),a.set(d,m)}for(let c=i.length-1;c>0;c--){const u=i[c],d=i[c-1],f=a.get(u)||[],m=a.get(d)||[],y=new Map;f.forEach((S,_)=>y.set(S,_));const v=new Map;for(const S of m){const _=r.get(S)||[];v.set(S,s(S,_,y))}m.sort((S,_)=>(v.get(S)||0)-(v.get(_)||0)),a.set(d,m)}}return a}function kq(e,t,n,r,o,i,a){const s=r.direction==="vertical";function l(w){if(o.has(w))return{width:4,height:4};const x=n.get(w);return{width:Math.max((x==null?void 0:x.width)??r.minNodeWidth,r.minNodeWidth),height:Math.max((x==null?void 0:x.height)??r.minNodeHeight,r.minNodeHeight)}}const c=new Map,u=Array.from(e.keys()).sort((w,x)=>w-x);for(const w of u){const x=e.get(w)||[];let N=0;for(const C of x){const T=l(C),k=s?T.height:T.width;N=Math.max(N,k)}c.set(w,N)}const d=new Map;let f=0;for(const w of u){d.set(w,f);const x=c.get(w)||0;f+=x+r.levelSpacing}const m=[];for(const w of u){const x=e.get(w)||[],N=d.get(w)||0;let C=0;for(let k=0;k<x.length;k++){const D=l(x[k]);C+=s?D.width:D.height,k<x.length-1&&(C+=r.siblingSpacing)}let T=-C/2;for(let k=0;k<x.length;k++){const D=x[k],R=l(D),I=t[D],z=o.has(D);let O,U;s?(O=T,U=N,T+=R.width+r.siblingSpacing):(O=N,U=T,T+=R.height+r.siblingSpacing),m.push({id:D,originalNode:I,x:O,y:U,width:R.width,height:R.height,layer:w,layerPosition:k,parentIds:a.get(D)||[],childIds:i.get(D)||[],isCollapsed:!1,isDummy:z})}}let y=1/0,v=1/0;for(const w of m)y=Math.min(y,w.x),v=Math.min(v,w.y);const S=20,_=-y+S,b=-v+S;for(const w of m)w.x+=_,w.y+=b;return m}function Aq(e){if(e.length===0)return{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};let t=1/0,n=1/0,r=-1/0,o=-1/0;for(const i of e)i.isDummy||(t=Math.min(t,i.x),n=Math.min(n,i.y),r=Math.max(r,i.x+i.width),o=Math.max(o,i.y+i.height));return t===1/0?{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}:{minX:t,minY:n,maxX:r,maxY:o,width:r-t,height:o-n}}function Rq(e,t,n,r){const o=h.useMemo(()=>Object.keys(e.nodes).length===0?{isAcyclic:!0}:vq(e.nodes,e.edges),[e.nodes,e.edges]),i=h.useMemo(()=>ku(e.nodes,e.edges),[e.nodes,e.edges]),a=h.useMemo(()=>{if("hasCycle"in o)return[];const m=Object.keys(e.nodes);return t.size===0&&m.length>0?[]:xq(e,t,n,r)},[e,t,n,r,o]),s=h.useMemo(()=>"hasCycle"in o?[]:Eq(a,r,i.parents),[a,r,i.parents,o]),l=h.useMemo(()=>"hasCycle"in o?[]:Sq(s,e.edges,r),[s,e.edges,r,o]),c=h.useMemo(()=>{const m=Aq(s);return{minX:m.minX,minY:m.minY,maxX:m.maxX,maxY:m.maxY,width:m.width,height:m.height}},[s]),u=Object.keys(e.nodes),d=t.size===0&&u.length>0,f="hasCycle"in o?o:null;return{nodes:s,connections:l,bounds:c,isLoading:d,error:f}}const Iq=h.memo(function({node:t,nodeClassName:n,nodePadding:r,animationEnabled:o,animationDelay:i,onClick:a,onHover:s,onToggle:l,hasChildren:c}){const u=h.useCallback(v=>{v.stopPropagation(),a==null||a(t.id,t.originalNode,v)},[a,t.id,t.originalNode]),d=h.useCallback(()=>{s==null||s(t.id,t.originalNode)},[s,t.id,t.originalNode]),f=h.useCallback(()=>{s==null||s(null,null)},[s]),m=h.useCallback(v=>{v.stopPropagation(),l==null||l(t.id)},[l,t.id]),y=L("g",{className:j(Fe.nodeGroup,n),transform:`translate(${t.x}, ${t.y})`,onClick:u,onMouseEnter:d,onMouseLeave:f,role:"treeitem","aria-expanded":c?!t.isCollapsed:void 0,tabIndex:0,children:[p("rect",{className:Fe.nodeBackground,width:t.width,height:t.height,rx:6,ry:6}),p("foreignObject",{width:t.width,height:t.height,className:Fe.nodeForeignObject,children:p("div",{className:Fe.nodeContent,style:{padding:r},children:t.originalNode.displayElement})}),c&&L("g",{className:Fe.toggleButton,transform:`translate(${t.width/2-8}, ${t.height-4})`,onClick:m,children:[p("circle",{cx:8,cy:8,r:8,className:Fe.toggleButtonBg}),p("text",{x:8,y:12,textAnchor:"middle",className:Fe.toggleButtonText,children:t.isCollapsed?"+":"-"})]})]});return o?p(un.g,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:i/1e3,ease:"easeOut"},children:y}):y});function Au(e,t,n){return n==="vertical"?{startX:e.x+e.width/2,startY:e.y+e.height,endX:t.x+t.width/2,endY:t.y}:{startX:e.x+e.width,startY:e.y+e.height/2,endX:t.x,endY:t.y+t.height/2}}function Lq(e,t,n,r,o){const i=n-e,a=r-t,s=Math.sqrt(i*i+a*a);if(s===0)return{x:n,y:r};const l=i/s,c=a/s;return{x:n-l*o,y:r-c*o}}function Oq(e,t,n,r=0){const{startX:o,startY:i,endX:a,endY:s}=Au(e,t,n),l=n==="horizontal"?a-r:a,c=n==="vertical"?s-r:s;if(n==="vertical"){const u=(i+c)/2;return`M ${o} ${i} C ${o} ${u}, ${l} ${u}, ${l} ${c}`}else{const u=(o+l)/2;return`M ${o} ${i} C ${u} ${i}, ${u} ${c}, ${l} ${c}`}}function Pq(e,t,n,r=0){const{startX:o,startY:i,endX:a,endY:s}=Au(e,t,n),l=n==="horizontal"?a-r:a,c=n==="vertical"?s-r:s;if(n==="vertical"){const u=(i+c)/2;return`M ${o} ${i} L ${o} ${u} L ${l} ${u} L ${l} ${c}`}else{const u=(o+l)/2;return`M ${o} ${i} L ${u} ${i} L ${u} ${c} L ${l} ${c}`}}function Mq(e,t,n,r=0){const{startX:o,startY:i,endX:a,endY:s}=Au(e,t,n);if(r>0){const l=Lq(o,i,a,s,r);return`M ${o} ${i} L ${l.x} ${l.y}`}return`M ${o} ${i} L ${a} ${s}`}function Dq(e,t,n,r,o=0){switch(n){case"step":return Pq(e,t,r,o);case"straight":return Mq(e,t,r,o);case"bezier":default:return Oq(e,t,r,o)}}function Fq(e,t,n,r){if(n==="bezier"||n==="step")return r==="vertical"?90:0;const{startX:o,startY:i,endX:a,endY:s}=Au(e,t,r);return Math.atan2(s-i,a-o)*(180/Math.PI)}function $q(e,t,n){const{endX:r,endY:o}=Au(e,t,n);return{x:r,y:o}}const Bq=h.memo(function({connection:t,style:n,direction:r,animationEnabled:o,animationDelay:i,showArrow:a=!1}){var x,N,C;const{stroke:s=ra.stroke,strokeWidth:l=ra.strokeWidth,curveType:c=ra.curveType}=n,u=12,d=Dq(t.sourceNode,t.targetNode,c,r,a?u:0),f=h.useMemo(()=>{if(!a)return null;const T=$q(t.sourceNode,t.targetNode,r),k=Fq(t.sourceNode,t.targetNode,c,r);return{...T,angle:k}},[a,t.sourceNode,t.targetNode,r,c]),m=h.useMemo(()=>{if(!t.label)return null;const T=t.sourceNode,k=t.targetNode,D=r==="horizontal"?T.x+T.width:T.x+T.width/2,R=r==="horizontal"?T.y+T.height/2:T.y+T.height,I=r==="horizontal"?k.x:k.x+k.width/2,z=r==="horizontal"?k.y+k.height/2:k.y;return{x:(D+I)/2,y:(R+z)/2}},[t.label,t.sourceNode,t.targetNode,r]),y=.5,v=i/1e3,S=`${-u},-${u/2} 0,0 ${-u},${u/2}`,_=((x=t.labelStyle)==null?void 0:x.fontSize)||"0.65rem",b=((N=t.labelStyle)==null?void 0:N.fill)||"var(--text-secondary)",w=((C=t.labelStyle)==null?void 0:C.background)||"var(--surface-base)";return o?L("g",{children:[p(un.path,{d,stroke:s,strokeWidth:l,fill:"none",className:Fe.connector,initial:{pathLength:0},animate:{pathLength:1},transition:{pathLength:{duration:y,delay:v,ease:"easeInOut"}}}),a&&f&&p("g",{transform:`translate(${f.x}, ${f.y}) rotate(${f.angle})`,children:p(un.polygon,{points:S,fill:s,initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{duration:.15,delay:v+y,ease:"easeOut"}})}),t.label&&m&&L(un.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,delay:v+y*.5},children:[p("rect",{x:m.x-2,y:m.y-8,width:t.label.length*5+4,height:14,fill:w,rx:2}),p("text",{x:m.x,y:m.y,fontSize:_,fill:b,textAnchor:"start",dominantBaseline:"middle",className:Fe.connectorLabel,children:t.label})]})]}):L("g",{children:[p("path",{d,stroke:s,strokeWidth:l,fill:"none",className:Fe.connector}),a&&f&&p("polygon",{points:S,fill:s,transform:`translate(${f.x}, ${f.y}) rotate(${f.angle})`}),t.label&&m&&L("g",{children:[p("rect",{x:m.x-2,y:m.y-8,width:t.label.length*5+4,height:14,fill:w,rx:2}),p("text",{x:m.x,y:m.y,fontSize:_,fill:b,textAnchor:"start",dominantBaseline:"middle",className:Fe.connectorLabel,children:t.label})]})]})}),Vq=h.memo(function({onZoomIn:t,onZoomOut:n,onReset:r}){return L("div",{className:Fe.controls,children:[p("button",{type:"button",className:Fe.controlButton,onClick:t,"aria-label":"Zoom in",title:"Zoom in",children:"+"}),p("button",{type:"button",className:Fe.controlButton,onClick:n,"aria-label":"Zoom out",title:"Zoom out",children:"-"}),p("button",{type:"button",className:Fe.controlButton,onClick:r,"aria-label":"Reset view",title:"Reset view",children:L("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),p("path",{d:"M3 3v5h5"})]})})]})}),Uq=h.forwardRef(function(t,n){const{data:r,layout:o={},connectorStyle:i={},animation:a={},onNodeClick:s,onNodeHover:l,onNodeToggle:c,onCycleDetected:u,initialScale:d=1,minScale:f=.1,maxScale:m=3,showControls:y=!0,showDirectionArrow:v=!0,defaultCollapsedNodes:S,collapsedNodes:_,onCollapsedNodesChange:b,className:w,style:x,nodeClassName:N,ariaLabel:C="DAG diagram"}=t,T=h.useRef(null),k=h.useRef(null),D=h.useMemo(()=>({...$o,...o}),[o]),R=h.useMemo(()=>({...ra,...i}),[i]),I=h.useMemo(()=>({...ji,...a}),[a]),{collapsedNodes:z,toggleNode:O}=Q2({defaultCollapsedNodes:S,collapsedNodes:_,onCollapsedNodesChange:b,onNodeToggle:c}),{measurements:U,isMeasuring:W,measurementContainer:$}=yq(r,D),{nodes:M,connections:P,bounds:B,error:V}=Rq(r,U,D,z);h.useEffect(()=>{V&&u&&u(V)},[V,u]);const q=h.useMemo(()=>{const le=new Map;for(const Z of M)le.set(Z.id,Z);return le},[M]);h.useImperativeHandle(n,()=>({resetView:()=>{var le;(le=T.current)==null||le.resetTransform()},fitToView:()=>{var le;(le=T.current)==null||le.centerView()},focusNode:le=>{const Z=q.get(le);if(Z&&T.current){const ae=Z.x+Z.width/2,J=Z.y+Z.height/2;T.current.setTransform(-ae+window.innerWidth/2,-J+window.innerHeight/2,1)}},exportSvg:()=>k.current?new XMLSerializer().serializeToString(k.current):"",toggleNode:O}),[q,O]);const{enabled:Q=ji.enabled,staggerDelay:H=ji.staggerDelay,animateConnectors:K=ji.animateConnectors}=I,Y=h.useCallback(le=>Q?le*H:0,[Q,H]),ce=h.useCallback(le=>!Q||!K?0:M.length*H+le*(H/2),[Q,K,M.length,H]),me=h.useCallback((le,Z,ae)=>{s==null||s({id:le,...Z},ae)},[s]),fe=h.useCallback((le,Z)=>{le&&Z?l==null||l({id:le,...Z}):l==null||l(null)},[l]);if(Object.keys(r.nodes).length===0)return p("div",{className:j(Fe.canvasContainer,w),style:x,children:p("div",{className:Fe.empty,children:"No data to display"})});if(V)return p("div",{className:j(Fe.canvasContainer,w),style:x,children:L("div",{className:Fe.error,children:[p("strong",{children:"Cycle detected in graph"}),L("p",{children:["Path: ",V.cycleNodes.join("  ")]})]})});if(W)return L("div",{className:j(Fe.canvasContainer,w),style:x,children:[$,p("div",{className:Fe.loading,children:"Preparing layout..."})]});const he=40,oe=B.width+he*2,re=B.height+he*2;return p("div",{className:j(Fe.canvasContainer,w),style:x,children:p(b0,{ref:T,initialScale:d,minScale:f,maxScale:m,centerOnInit:!0,doubleClick:{disabled:!1,mode:"reset"},wheel:{disabled:!1,step:.1},panning:{velocityDisabled:!1},pinch:{disabled:!1},children:({zoomIn:le,zoomOut:Z,resetTransform:ae})=>L(gt,{children:[p(E0,{wrapperStyle:{width:"100%",height:"100%"},contentStyle:{width:oe,height:re},children:L("svg",{ref:k,width:oe,height:re,viewBox:`${-he} ${-he} ${oe} ${re}`,className:Fe.svg,role:"img","aria-label":C,children:[p("g",{className:Fe.connectorsLayer,children:P.map((J,ge)=>p(Bq,{connection:J,style:R,direction:D.direction,animationEnabled:Q&&K,animationDelay:ce(ge),showArrow:v},`${J.sourceId}-${J.targetId}`))}),p("g",{className:Fe.nodesLayer,children:M.map((J,ge)=>p(Iq,{node:J,nodeClassName:N,nodePadding:D.nodePadding,animationEnabled:Q,animationDelay:Y(ge),onClick:me,onHover:fe,onToggle:O,hasChildren:J.childIds.length>0||J.isCollapsed},J.id))})]})}),y&&p(Vq,{onZoomIn:()=>le(),onZoomOut:()=>Z(),onReset:()=>ae()})]})})})}),Mp={derived:"var(--status-info)",borrowed:"var(--status-warning)",compound:"var(--status-good)",blend:"var(--color-primary)",calque:"var(--status-neutral, #888)",other:"var(--text-secondary)"};function zq(e,t){const{renderNode:n,currentWordId:r,maxDepth:o=10}=t,i={},a=[],s=new Set,l=`lexicon-${e.entry.id}`;i[l]={displayElement:n(e.entry,!0,null),data:{isCurrentWord:!0,lexiconId:e.entry.id}},s.add(e.entry.id);function c(u,d,f){if(!(f>o))for(const m of u.ancestors??[]){const y=`lexicon-${m.entry.id}`;a.push({sourceId:y,targetId:d,label:m.ancestry_type??void 0,labelStyle:m.ancestry_type?{fill:Mp[m.ancestry_type],fontSize:"0.65rem"}:void 0}),s.has(m.entry.id)||(s.add(m.entry.id),i[y]={displayElement:n(m.entry,m.entry.id===r,m.ancestry_type),data:{lexiconId:m.entry.id,isCurrentWord:m.entry.id===r}},c(m,y,f+1))}}return c(e,l,0),{nodes:i,edges:a}}function jq(e,t,n){const r={},o=[],i=t.id?`lexicon-${t.id}`:"current-word";r[i]={displayElement:n({id:t.id??-1,lemma:t.lemma,pronunciation:null,is_native:!0},!0,null),data:{isCurrentWord:!0,lexiconId:t.id}};for(const{ancestor:a,ancestryType:s}of e){const l=`lexicon-${a.id}`;r[l]||(r[l]={displayElement:n(a,!1,s),data:{lexiconId:a.id,isCurrentWord:!1}}),o.push({sourceId:l,targetId:i,label:s,labelStyle:{fill:Mp[s],fontSize:"0.65rem"}})}return{nodes:r,edges:o}}const Wq="_nodeDisplay_1pz7m_1",Gq="_currentWord_1pz7m_14",Hq="_external_1pz7m_19",Xq="_clickable_1pz7m_24",Yq="_ancestryBadge_1pz7m_34",qq="_externalBadge_1pz7m_46",Kq="_lemma_1pz7m_51",Zq="_pronunciation_1pz7m_56",Qq="_currentIndicator_1pz7m_62",Yo={nodeDisplay:Wq,currentWord:Gq,external:Hq,clickable:Xq,ancestryBadge:Yq,externalBadge:qq,lemma:Kq,pronunciation:Zq,currentIndicator:Qq},Jq=h.memo(function({entry:t,isCurrentWord:n=!1,ancestryType:r,onClick:o}){const i=()=>{o&&t.id>0&&o(t.id)},a=l=>{(l.key==="Enter"||l.key===" ")&&o&&t.id>0&&(l.preventDefault(),o(t.id))},s=!!o&&t.id>0&&!n;return L("div",{className:j(Yo.nodeDisplay,{[Yo.currentWord]:n,[Yo.external]:!t.is_native,[Yo.clickable]:s}),onClick:s?i:void 0,onKeyDown:s?a:void 0,role:s?"button":void 0,tabIndex:s?0:void 0,children:[r&&p("span",{className:Yo.ancestryBadge,style:{backgroundColor:Mp[r]},title:`Relationship: ${r}`,children:r.charAt(0).toUpperCase()}),!t.is_native&&t.id>0&&p("span",{className:Yo.externalBadge,title:"External/borrowed word",children:""}),p("span",{className:Yo.lemma,children:t.lemma}),t.pronunciation&&L("span",{className:Yo.pronunciation,children:["/",t.pronunciation,"/"]}),n&&p("span",{className:Yo.currentIndicator,title:"Current word",children:""})]})}),eK="_previewContainer_15x95_1",tK="_header_15x95_10",nK="_title_15x95_19",rK="_noAncestorsHint_15x95_25",oK="_legend_15x95_32",iK="_legendItem_15x95_39",aK="_legendDot_15x95_45",sK="_chartContainer_15x95_51",lK="_footer_15x95_58",cK="_footerNote_15x95_65",uK="_emptyState_15x95_71",dK="_emptyIcon_15x95_83",fK="_emptyHint_15x95_95",Eo={previewContainer:eK,header:tK,title:nK,noAncestorsHint:rK,legend:oK,legendItem:iK,legendDot:aK,chartContainer:sK,footer:lK,footerNote:cK,emptyState:uK,emptyIcon:dK,emptyHint:fK},pK=h.memo(function({ancestryTree:t,selectedAncestors:n,currentWord:r,maxHeight:o=300,onNodeClick:i}){const a=h.useCallback((u,d,f)=>p(Jq,{entry:u,isCurrentWord:d,ancestryType:f,onClick:i}),[i]),s=h.useMemo(()=>({nodes:{[r.id?`lexicon-${r.id}`:"current-word"]:{displayElement:a({id:r.id??-1,lemma:r.lemma,pronunciation:null,is_native:!0},!0,null),data:{isCurrentWord:!0,lexiconId:r.id}}},edges:[]}),[r.id,r.lemma,a]),l=h.useMemo(()=>{let u=null;if(t&&t.ancestors&&t.ancestors.length>0&&(u=zq(t,{renderNode:a,currentWordId:r.id,maxDepth:10})),n&&n.length>0){const d=jq(n.map(f=>({ancestor:f.ancestor,ancestryType:f.ancestryType})),r,a);if(u){const f={...d.nodes},m=[...d.edges],y=new Set(m.map(v=>`${v.sourceId}->${v.targetId}`));for(const v of n){const S=`lexicon-${v.ancestor.id}`;if(u.nodes[S]){const _=[S],b=new Set;for(;_.length>0;){const w=_.pop();if(b.has(w))continue;b.add(w),!f[w]&&u.nodes[w]&&(f[w]=u.nodes[w]);const x=u.edges.filter(N=>N.targetId===w);for(const N of x){const C=`${N.sourceId}->${N.targetId}`;y.has(C)||(m.push(N),y.add(C)),_.push(N.sourceId)}}}}return{nodes:f,edges:m}}return d}return s},[t,n,r,a,s]),c=(n==null?void 0:n.length)??0;return L("div",{className:Eo.previewContainer,style:{maxHeight:o},children:[L("div",{className:Eo.header,children:[L("span",{className:Eo.title,children:["Etymology Tree Preview",c===0&&p("span",{className:Eo.noAncestorsHint,children:" (no ancestors)"})]}),p("div",{className:Eo.legend,children:Object.entries(Mp).slice(0,4).map(([u,d])=>L("span",{className:Eo.legendItem,children:[p("span",{className:Eo.legendDot,style:{backgroundColor:d}}),u]},u))})]}),p("div",{className:Eo.chartContainer,children:p(Uq,{data:l,layout:{direction:"horizontal",levelSpacing:100,siblingSpacing:30,nodePadding:4,minNodeWidth:60,minNodeHeight:24},connectorStyle:{curveType:"bezier",strokeWidth:2,stroke:"var(--border-primary)",showArrow:!0},animation:{enabled:!0,staggerDelay:50,animateConnectors:!0},showControls:!0,showDirectionArrow:!0,initialScale:.9,minScale:.3,maxScale:2,ariaLabel:"Etymology graph showing word ancestry"})}),p("div",{className:Eo.footer,children:p("span",{className:Eo.footerNote,children:" Root ancestors | Current word "})})]})}),hK=[{value:"derived",label:"Derived"},{value:"borrowed",label:"Borrowed"},{value:"compound",label:"Compound"},{value:"blend",label:"Blend"},{value:"calque",label:"Calque"},{value:"other",label:"Other"}],tk=h.forwardRef(({registerSmartFieldProps:e,fieldState:t,currentLexiconId:n,currentLemma:r="Current Word",availableLexicon:o,excludeIds:i=[],checkCycle:a,ancestryTree:s,showPreview:l=!0,onTreeNodeClick:c,onChange:u,defaultValue:d=[],maxRows:f,className:m},y)=>{const v=h.useId(),S=h.useRef(!0),_=h.useRef(t);_.current=t;const b=h.useRef(!1),[w,x]=h.useState(()=>d.length>0?(b.current=!0,d.map(($,M)=>({id:`${v}-row-${M}`,ancestorId:$.ancestorId,ancestryType:$.ancestryType}))):[]);h.useEffect(()=>{!b.current&&d.length>0&&(b.current=!0,x(d.map(($,M)=>({id:`${v}-row-${M}`,ancestorId:$.ancestorId,ancestryType:$.ancestryType}))))},[d,v]);const[N,C]=h.useState({}),T=new Set([...i,...n?[n]:[],...w.filter($=>$.ancestorId!==null).map($=>$.ancestorId)]);h.useImperativeHandle(e.ref,()=>({get value(){return w.filter($=>$.ancestorId!==null&&!$.error).map($=>({ancestorId:$.ancestorId,ancestryType:$.ancestryType}))}}),[w]),h.useEffect(()=>{if(S.current){S.current=!1;return}_.current.isTouched.setIsTouched(!0),_.current.isChanged.setIsChanged(!0);const $=w.filter(P=>P.ancestorId!==null&&!P.error);_.current.isEmpty.setIsEmpty($.length===0);const M=w.some(P=>P.error);_.current.isInputValid.setIsInputValid(!M),u==null||u($.map(P=>({ancestorId:P.ancestorId,ancestryType:P.ancestryType})))},[w,u]);const k=h.useCallback(()=>{if(f&&w.length>=f)return;const $={id:`${v}-row-${Date.now()}`,ancestorId:null,ancestryType:"derived"};x(M=>[...M,$])},[w.length,f,v]),D=h.useCallback($=>{x(M=>M.filter(P=>P.id!==$)),C(M=>{const P={...M};return delete P[$],P})},[]),R=h.useCallback(($,M)=>{if(n&&a&&a(n,M)){x(B=>B.map(V=>V.id===$?{...V,ancestorId:M,error:"This would create a cycle in the etymology tree"}:V));return}x(P=>P.map(B=>B.id===$?{...B,ancestorId:M,error:void 0}:B)),C(P=>({...P,[$]:""}))},[n,a]),I=h.useCallback(($,M)=>{x(P=>P.map(B=>B.id===$?{...B,ancestryType:M}:B))},[]),z=h.useCallback($=>{x(M=>M.map(P=>P.id===$?{...P,ancestorId:null,error:void 0}:P))},[]),O=$=>o.find(M=>M.id===$),U=$=>{const M=(N[$]||"").toLowerCase().trim(),P=w.find(B=>B.id===$);return o.filter(B=>{var V,q;return(P==null?void 0:P.ancestorId)===B.id?!0:T.has(B.id)?!1:M?B.lemma.toLowerCase().includes(M)||((V=B.pronunciation)==null?void 0:V.toLowerCase().includes(M))||((q=B.meaning)==null?void 0:q.toLowerCase().includes(M)):!0})},W=h.useMemo(()=>w.filter($=>$.ancestorId!==null&&!$.error).map($=>{const M=o.find(P=>P.id===$.ancestorId);return M?{ancestor:M,ancestryType:$.ancestryType}:null}).filter($=>$!==null),[w,o]);return L("div",{className:j(At.ancestryInput,m),children:[L("div",{className:At.header,children:[p("span",{className:At.label,children:"Etymology / Ancestors"}),p(et,{content:"Add an ancestor word",children:p(xe,{iconName:"plus-circle",onClick:k,disabled:f!==void 0&&w.length>=f,iconColor:"var(--green)",iconSize:"1.25rem",themeType:"basic",children:"Add Ancestor"})})]}),w.length===0?p("div",{className:At.emptyState,children:`No ancestors defined. Click "Add Ancestor" to link this word's etymology.`}):p("div",{className:At.rowsContainer,children:w.map(($,M)=>{const P=$.ancestorId?O($.ancestorId):null,B=U($.id);return L("div",{className:j(At.row,{[At.hasError]:$.error}),children:[L("span",{className:At.rowNumber,children:[M+1,"."]}),p("div",{className:At.ancestorSelector,children:P?L("div",{className:At.selectedAncestor,children:[p("span",{className:At.selectedLemma,children:P.lemma}),P.pronunciation&&L("span",{className:At.selectedPronunciation,children:["/",P.pronunciation,"/"]}),p(xe,{iconName:"x",onClick:()=>z($.id),iconColor:"var(--text-secondary)",iconSize:"0.875rem",themeType:"basic"})]}):L("div",{className:At.searchContainer,children:[p("input",{type:"text",placeholder:"Search for ancestor word...",value:N[$.id]||"",onChange:V=>C(q=>({...q,[$.id]:V.target.value})),className:At.searchInput}),(N[$.id]||B.length<=10)&&L("div",{className:At.dropdown,children:[B.slice(0,10).map(V=>L("button",{type:"button",className:At.dropdownItem,onClick:()=>R($.id,V.id),children:[p("span",{className:At.optionLemma,children:V.lemma}),V.pronunciation&&L("span",{className:At.optionPronunciation,children:["/",V.pronunciation,"/"]})]},V.id)),B.length===0&&p("div",{className:At.noOptions,children:"No matching words"}),B.length>10&&L("div",{className:At.moreOptions,children:["Type to filter (",B.length," options)"]})]})]})}),p("select",{value:$.ancestryType,onChange:V=>I($.id,V.target.value),className:At.typeSelect,children:hK.map(V=>p("option",{value:V.value,children:V.label},V.value))}),p(xe,{iconName:"trash3",onClick:()=>D($.id),iconColor:"var(--status-bad)",iconSize:"1rem",themeType:"basic"}),$.error&&p("div",{className:At.errorMessage,children:$.error})]},$.id)})}),l&&p("div",{className:At.previewSection,children:p(pK,{ancestryTree:s,selectedAncestors:W,currentWord:{id:n,lemma:r},maxHeight:300,onNodeClick:c})})]})});tk.displayName="AncestryInput";const mK="_formFields_1ybof_1",gK="_section_1ybof_7",yK="_sectionHeader_1ybof_13",vK="_checkboxRow_1ybof_22",_K="_checkboxLabel_1ybof_28",wK="_disabled_1ybof_41",bK="_helpIcon_1ybof_49",EK="_externalNote_1ybof_63",pn={formFields:mK,section:gK,sectionHeader:yK,checkboxRow:vK,checkboxLabel:_K,disabled:wK,helpIcon:bK,externalNote:EK};function SK(){return{name:"append",insert(e,t,n){return{selection:[...e,t],cursor:null}},remove(e,t){return e.length===0?{selection:[],cursor:null}:{selection:e.slice(0,-1),cursor:null}},clear(){return{selection:[],cursor:null}}}}const xK=SK(),CK="_canvasContainer_9420v_6",TK="_canvasInner_9420v_21",NK="_empty_9420v_26",kK="_emptyText_9420v_33",AK="_svg_9420v_41",RK="_glyphNode_9420v_46",IK="_virtualGlyph_9420v_52",LK="_glyphBackground_9420v_56",OK="_virtualBackground_9420v_64",PK="_virtualContent_9420v_72",MK="_glyphForeignObject_9420v_76",DK="_glyphContent_9420v_80",hr={canvasContainer:CK,canvasInner:TK,empty:NK,emptyText:kK,svg:AK,glyphNode:RK,virtualGlyph:IK,glyphBackground:LK,virtualBackground:OK,virtualContent:PK,glyphForeignObject:MK,glyphContent:DK},FK=h.forwardRef(function({selectedGlyphIds:t,glyphMap:n,layout:r={},initialScale:o=1,minScale:i=.25,maxScale:a=3,showControls:s=!0,emptyStateContent:l,className:c,style:u,minHeight:d="120px"},f){const m=h.useRef(null),y=h.useMemo(()=>t.map(w=>n.get(w)).filter(w=>w!==void 0),[t,n]),v=h.useMemo(()=>gP(y,r),[y,r]),S=h.useMemo(()=>bP(v,r),[v,r]),_=Math.max(S.width,200),b=Math.max(S.height,80);return h.useImperativeHandle(f,()=>({resetView:()=>{var w;(w=m.current)==null||w.resetView()},fitToView:()=>{var w;(w=m.current)==null||w.fitToView()}}),[]),t.length===0?p("div",{className:j(hr.canvasContainer,hr.empty,c),style:{...u,minHeight:d},children:l??p("span",{className:hr.emptyText,children:"No glyphs selected. Click the keyboard button to add glyphs."})}):p("div",{className:j(hr.canvasContainer,c),style:{...u,minHeight:d},children:p(Pp,{ref:m,contentDimensions:{width:_,height:b},initialScale:o,minScale:i,maxScale:a,showControls:s,centerOnInit:!0,enableVelocity:!0,className:hr.canvasInner,ariaLabel:`Canvas with ${t.length} glyphs`,children:p("svg",{width:_,height:b,viewBox:`0 0 ${_} ${b}`,className:hr.svg,role:"img","aria-label":`Canvas with ${t.length} glyphs`,children:v.map(w=>p($K,{positionedGlyph:w},`${w.glyph.id}-${w.index}`))})})})});function $K({positionedGlyph:e}){const{glyph:t,x:n,y:r,width:o,height:i}=e,a=Md(t.id),s=h.useMemo(()=>g0.sanitize(t.svg_data,{USE_PROFILES:{svg:!0,svgFilters:!0}}),[t.svg_data]);return L("g",{className:j(hr.glyphNode,{[hr.virtualGlyph]:a}),transform:`translate(${n}, ${r})`,children:[a&&L("title",{children:["IPA Fallback: ",t.name]}),p("rect",{className:j(hr.glyphBackground,{[hr.virtualBackground]:a}),width:o,height:i,rx:4,ry:4}),p("foreignObject",{width:o,height:i,className:hr.glyphForeignObject,children:p("div",{className:j(hr.glyphContent,{[hr.virtualContent]:a}),dangerouslySetInnerHTML:{__html:s}})})]})}const BK="_overlay_vd05x_6",VK="_slideUp_vd05x_1",UK="_header_vd05x_33",zK="_headerLeft_vd05x_42",jK="_title_vd05x_48",WK="_modeToggle_vd05x_55",GK="_modeButton_vd05x_62",HK="_active_vd05x_75",XK="_actions_vd05x_88",YK="_content_vd05x_94",qK="_emptyState_vd05x_100",KK="_switchModeLink_vd05x_113",ZK="_glyphSvgContent_vd05x_134",QK="_glyphLabelContent_vd05x_149",JK="_keyboardWrapper_vd05x_161",eZ="_keyboardActions_vd05x_169",tZ="_backspaceButton_vd05x_177",nZ="_backspaceLabel_vd05x_206",rZ="_backdrop_vd05x_216",qt={overlay:BK,slideUp:VK,header:UK,headerLeft:zK,title:jK,modeToggle:WK,modeButton:GK,active:HK,actions:XK,content:YK,emptyState:qK,switchModeLink:KK,glyphSvgContent:ZK,glyphLabelContent:QK,keyboardWrapper:JK,keyboardActions:eZ,backspaceButton:tZ,backspaceLabel:nZ,backdrop:rZ};function oZ(e){return{id:String(e.id),label:e.name,value:String(e.id),displayType:"svg",displayData:e.svg_data,category:e.category??"Uncategorized",tags:[e.name.toLowerCase()],ariaLabel:`Insert glyph: ${e.name}`,metadata:{description:e.notes??void 0}}}function iZ(e){if(e.displayType==="svg"&&e.displayData){const t=g0.sanitize(e.displayData,{USE_PROFILES:{svg:!0,svgFilters:!0}});return p(et,{content:e.label,contentPin:"top",children:p("span",{className:qt.glyphSvgContent,dangerouslySetInnerHTML:{__html:t}})})}return p(et,{content:e.label,contentPin:"top",children:p("span",{className:qt.glyphLabelContent,children:e.label})})}function aZ(){return Tu.map(e=>({...e,category:"IPA"}))}function sZ({availableGlyphs:e,onSelect:t,onRemove:n,onClear:r,isOpen:o,onClose:i,searchable:a=!0,height:s="260px",className:l,style:c,enableIpaMode:u=!1,onIpaSelect:d}){const f=h.useRef(null),m=h.useRef(null),[y,v]=h.useState("glyphs"),S=h.useMemo(()=>e.map(oZ),[e]),_=h.useMemo(()=>aZ(),[]),b=y==="glyphs"?S:_,w=h.useMemo(()=>{const T=new Map;for(const k of e)T.set(k.id,k);return T},[e]),x=h.useCallback(T=>{const k=parseInt(T.id,10),D=w.get(k);D&&t(D)},[w,t]),N=h.useCallback(T=>{var I;const k=T.label,D=(I=T.metadata)==null?void 0:I.description,R=Ec(k,D);d&&d(k,R),t({id:R.id,name:R.name,svg_data:R.svg_data,category:R.category,notes:R.notes})},[t,d]),C=h.useCallback(T=>{y==="glyphs"?x(T):N(T)},[y,x,N]);return h.useEffect(()=>{if(!o)return;const T=k=>{if(k.key==="Escape"&&(k.preventDefault(),i()),k.key==="Backspace"&&n){const D=document.activeElement;(D==null?void 0:D.tagName)==="INPUT"||(D==null?void 0:D.tagName)==="TEXTAREA"||(k.preventDefault(),n())}};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[o,i,n]),h.useEffect(()=>{o?(m.current=document.activeElement,setTimeout(()=>{var T;(T=f.current)==null||T.focus()},0)):m.current&&(m.current.focus(),m.current=null)},[o]),o?L("div",{ref:f,className:j(qt.overlay,l),style:c,role:"dialog","aria-label":"Glyph keyboard","aria-modal":"true",tabIndex:-1,children:[L("div",{className:qt.header,children:[L("div",{className:qt.headerLeft,children:[p("span",{className:qt.title,children:y==="glyphs"?"Select Glyph":"Select IPA Character"}),u&&L("div",{className:qt.modeToggle,role:"tablist","aria-label":"Keyboard mode",children:[p("button",{type:"button",role:"tab","aria-selected":y==="glyphs",className:j(qt.modeButton,{[qt.active]:y==="glyphs"}),onClick:()=>v("glyphs"),children:"Glyphs"}),p("button",{type:"button",role:"tab","aria-selected":y==="ipa",className:j(qt.modeButton,{[qt.active]:y==="ipa"}),onClick:()=>v("ipa"),children:"IPA"})]})]}),L("div",{className:qt.actions,children:[n&&p(et,{content:"Backspace",contentPin:"top",children:p(xe,{type:"button",iconName:"backspace",onClick:n,"aria-label":"Remove last glyph",themeType:"basic",iconSize:"1rem"})}),r&&p(et,{content:"Clear all glyphs",contentPin:"top",children:p(xe,{type:"button",iconName:"trash",onClick:r,"aria-label":"Clear all glyphs",themeType:"basic",iconSize:"1rem",iconColor:"var(--status-bad)"})}),p(xe,{iconName:"x",onClick:i,"aria-label":"Close keyboard",themeType:"basic",iconSize:"1.25rem"})]})]}),p("div",{className:qt.content,children:y==="glyphs"&&e.length===0?L("div",{className:qt.emptyState,children:["No glyphs available. Create some glyphs first.",u&&p("button",{type:"button",className:qt.switchModeLink,onClick:()=>v("ipa"),children:"Switch to IPA keyboard"})]}):L("div",{className:qt.keyboardWrapper,children:[p(z2,{characters:b,onSelect:C,searchable:a,groupBy:"category",height:s,emptyStateText:y==="glyphs"?"No matching glyphs":"No matching IPA characters",renderCharacter:y==="glyphs"?iZ:void 0}),n&&p("div",{className:qt.keyboardActions,children:p(et,{content:"Backspace - Remove last glyph",contentPin:"top",children:L("button",{type:"button",className:qt.backspaceButton,onClick:n,"aria-label":"Backspace - Remove last glyph",children:[p("i",{className:"bi-backspace","aria-hidden":"true"}),p("span",{className:qt.backspaceLabel,children:"Backspace"})]})})})]})})]}):null}const lZ="_glyphCanvasInput_1a8c3_2",cZ="_header_1a8c3_12",uZ="_label_1a8c3_18",dZ="_actions_1a8c3_23",fZ="_count_1a8c3_29",pZ="_virtualIndicator_1a8c3_35",hZ="_emptyButton_1a8c3_41",mZ="_autoSpellPreview_1a8c3_64",gZ="_previewSuccess_1a8c3_71",yZ="_previewLabel_1a8c3_78",vZ="_previewGlyphs_1a8c3_84",_Z="_previewGlyph_1a8c3_84",wZ="_previewVirtual_1a8c3_104",bZ="_previewError_1a8c3_112",EZ="_virtualWarning_1a8c3_118",Ln={glyphCanvasInput:lZ,header:cZ,label:uZ,actions:dZ,count:fZ,virtualIndicator:pZ,emptyButton:hZ,autoSpellPreview:mZ,previewSuccess:gZ,previewLabel:yZ,previewGlyphs:vZ,previewGlyph:_Z,previewVirtual:wZ,previewError:bZ,virtualWarning:EZ},nk=h.forwardRef(function({registerSmartFieldProps:t,fieldState:n,availableGlyphs:r=[],defaultValue:o=[],direction:i="ltr",insertionStrategy:a,searchable:s=!0,canvasLayout:l,keyboardHeight:c="260px",label:u="Glyph Sequence",className:d,style:f,onSelectionChange:m,autoSpellPreview:y=null,onRequestAutoSpell:v,enableIpaMode:S=!1,initialVirtualGlyphs:_,initialGlyphOrder:b},w){const x=h.useId(),N=h.useRef(!0),C=h.useRef(n);C.current=n;const T=h.useRef(null),{initialIds:k,initialVirtualsFromGlyphOrder:D}=h.useMemo(()=>{if(!b||b.length===0)return{initialIds:Array.isArray(o)?o:o??[],initialVirtualsFromGlyphOrder:new Map};const Z=[],ae=new Map;for(const J of Sf(b))if(J.type==="grapheme"&&J.graphemeId)Z.push(J.graphemeId);else if(J.type==="ipa"&&J.ipaCharacter){const ge=Ec(J.ipaCharacter);ae.set(ge.id,ge),Z.push(ge.id)}return{initialIds:Z,initialVirtualsFromGlyphOrder:ae}},[b,o]),[R,I]=h.useState(k),[z,O]=h.useState(()=>{const Z=new Map;for(const[ae,J]of D)Z.set(ae,J);if(_)for(const[ae,J]of _)Z.set(ae,J);return Z}),U=h.useRef(R);U.current=R;const W=h.useRef(m);W.current=m;const[$,M]=h.useState(null),[P,B]=h.useState(!1),V=h.useMemo(()=>a??xK,[a]),q=h.useMemo(()=>TP(r),[r]),Q=h.useMemo(()=>{const Z=new Map(q);if(_)for(const[ae,J]of _)Z.set(ae,{id:J.id,name:J.name,svg_data:J.svg_data,category:J.category,notes:J.notes});for(const[ae,J]of z)Z.set(ae,{id:J.id,name:J.name,svg_data:J.svg_data,category:J.category,notes:J.notes});return Z},[q,z,_]),H=h.useMemo(()=>R.some(Z=>Md(Z)||z.has(Z)||(_==null?void 0:_.has(Z))),[R,z,_]),K=h.useMemo(()=>r.map(Xx),[r]),Y=h.useMemo(()=>({direction:i,...l}),[i,l]),ce=h.useCallback(()=>R.map(Z=>{const ae=z.get(Z)||(_==null?void 0:_.get(Z))||D.get(Z);return ae&&ae.ipaCharacter?ae.ipaCharacter:Px(Z)}),[R,z,_,D]),me=h.useRef(ce);me.current=ce,h.useImperativeHandle(t.ref,()=>({get value(){return U.current},get glyphOrder(){return me.current()},resetCanvasView:()=>{var Z;return(Z=T.current)==null?void 0:Z.resetView()},fitCanvasToView:()=>{var Z;return(Z=T.current)==null?void 0:Z.fitToView()},openKeyboard:()=>B(!0),closeKeyboard:()=>B(!1),clear:()=>{const Z=V.clear();I(Z.selection),M(Z.cursor),O(new Map)},setValue:(Z,ae)=>{I(Array.isArray(Z)?Z:[]),(ae==null?void 0:ae.doValidation)!==!1&&(C.current.isTouched.setIsTouched(!0),C.current.isChanged.setIsChanged(!0),C.current.isEmpty.setIsEmpty((Z??[]).length===0))},setGlyphOrder:Z=>{const ae=[],J=new Map;for(const ge of Sf(Z))if(ge.type==="grapheme"&&ge.graphemeId)ae.push(ge.graphemeId);else if(ge.type==="ipa"&&ge.ipaCharacter){const we=Ec(ge.ipaCharacter);J.set(we.id,we),ae.push(we.id)}I(ae),O(ge=>{const we=new Map(ge);for(const[Je,at]of J)we.set(Je,at);return we})}}),[V]),h.useEffect(()=>{var J;if(N.current){N.current=!1;return}C.current.isTouched.setIsTouched(!0),C.current.isChanged.setIsChanged(!0),C.current.isEmpty.setIsEmpty(R.length===0),C.current.isInputValid.setIsInputValid(!0);const Z=me.current();try{const ge=R.some(we=>Md(we));(J=W.current)==null||J.call(W,R.slice(),ge,Z)}catch(ge){console.error("onSelectionChange threw",ge)}const ae=document.querySelector(`input[name="${t.name}"]`);ae&&(ae.value=pv(Z))},[R,t.name]);const fe=h.useCallback(Z=>{Md(Z.id)&&Z.svg_data&&O(J=>{const ge=new Map(J);return ge.set(Z.id,{id:Z.id,ipaCharacter:Z.name??"",name:Z.name??"",svg_data:Z.svg_data??"",category:Z.category??"IPA Fallback",notes:Z.notes??null,source:"virtual-ipa"}),ge});const ae=V.insert(R,Z.id,$);I(ae.selection),M(ae.cursor)},[V,R,$]),ie=h.useCallback(()=>{const Z=V.remove(R,$);I(Z.selection),M(Z.cursor)},[V,R,$]),he=h.useCallback(()=>{const Z=V.clear();I(Z.selection),M(Z.cursor),O(new Map)},[V]),oe=h.useCallback(()=>{if(!(y!=null&&y.success)||!y.spelling)return;const Z=y.spelling.map(ae=>ae.grapheme_id);y.hasVirtualGlyphs&&O(ae=>{const J=new Map(ae);for(const ge of y.spelling)if(ge.isVirtual&&ge.ipaCharacter){const we=Ec(ge.ipaCharacter);J.set(ge.grapheme_id,we)}return J}),I(Z),M(null)},[y]),re=h.useCallback(()=>{B(!0)},[]),le=h.useCallback(()=>{B(!1)},[]);return L("div",{className:j(Ln.glyphCanvasInput,d),style:f,id:`${x}-container`,children:[L("div",{className:Ln.header,children:[p("label",{className:Ln.label,htmlFor:`${x}-canvas`,children:u}),L("div",{className:Ln.actions,children:[L("span",{className:Ln.count,children:[R.length," glyph",R.length!==1?"s":"",H&&p("span",{className:Ln.virtualIndicator,children:" (includes IPA)"})]}),R.length>0&&p(xe,{iconName:"trash",onClick:he,"aria-label":"Clear all glyphs",themeType:"basic",iconSize:"1rem",iconColor:"var(--status-bad)"}),v&&p(xe,{iconName:"bolt",onClick:v,"aria-label":"Request auto-spell preview",themeType:"basic",iconSize:"1.25rem"}),p(xe,{iconName:"keyboard",onClick:re,"aria-label":"Open glyph keyboard",themeType:"basic",iconSize:"1.25rem"})]})]}),y&&p("div",{className:Ln.autoSpellPreview,role:"status","aria-live":"polite",children:y.success?L("div",{className:Ln.previewSuccess,children:[L("span",{className:Ln.previewLabel,children:["Auto-spell ready (",y.spelling.length," glyphs",y.hasVirtualGlyphs&&", includes IPA fallbacks","):"]}),p("div",{className:Ln.previewGlyphs,children:y.spelling.map((Z,ae)=>{const J=q.get(Z.grapheme_id),ge=Z.isVirtual?Z.ipaCharacter:(J==null?void 0:J.name)??`#${Z.grapheme_id}`,we=Z.isVirtual?`IPA: ${Z.ipaCharacter}`:(J==null?void 0:J.name)??`Grapheme #${Z.grapheme_id}`;return p("span",{className:j(Ln.previewGlyph,{[Ln.previewVirtual]:Z.isVirtual}),title:we,children:ge},`${Z.grapheme_id}-${ae}`)})}),p(xe,{iconName:"check",onClick:oe,"aria-label":"Apply auto-spell",themeType:"basic",iconSize:"1rem",iconColor:"var(--status-good, green)",children:"Apply"})]}):p("div",{className:Ln.previewError,children:y.error??"Auto-spell failed"})}),H&&L("div",{className:Ln.virtualWarning,role:"status",children:[p("i",{className:"bi-info-circle","aria-hidden":"true"}),p("span",{children:"IPA characters (dashed borders) will be saved as part of the spelling. You can optionally create graphemes for them later."})]}),p(FK,{ref:T,selectedGlyphIds:R,glyphMap:Q,layout:Y,showControls:R.length>0,minHeight:"120px",emptyStateContent:p("button",{type:"button",className:Ln.emptyButton,onClick:re,children:"Click here or the keyboard button to add glyphs"})}),p(sZ,{availableGlyphs:K,onSelect:fe,onRemove:ie,onClear:he,isOpen:P,onClose:le,searchable:s,height:c,enableIpaMode:S}),p("input",{type:"hidden",name:t.name,value:JSON.stringify(R)})]})});nk.displayName="GlyphCanvasInput";function gd(e,t){var o;const n=(o=e.registerSmartFieldProps.ref)==null?void 0:o.current;if(!n)return!1;n.value=t;const r=t.trim()==="";if(e.fieldState.isEmpty.setIsEmpty(r),e.fieldState.isTouched.setIsTouched(!0),e.fieldState.isChanged.setIsChanged(!0),e.utils.validatorFunction){const i=e.utils.validatorFunction(t);e.fieldState.warning.setWarning(i),e.fieldState.isInputValid.setIsInputValid(i===null)}return!0}function Mb(e){var n;const t=(n=e.registerSmartFieldProps.ref)==null?void 0:n.current;return(t==null?void 0:t.value)??""}function rk({registerField:e,mode:t,initialData:n,className:r,onSpellingChange:o,onGlyphOrderChange:i,onAncestorsChange:a}){const{api:s,data:l}=Xt(),c=h.useRef(!1),u=l.graphemesComplete??[],d=l.lexiconComplete??[],[f,m]=h.useState(()=>{var K;return((K=n==null?void 0:n.spelling)==null?void 0:K.map(Y=>Y.id))??[]}),[y,v]=h.useState(()=>{var K;return n!=null&&n.glyph_order?Dx(n.glyph_order):((K=n==null?void 0:n.spelling)==null?void 0:K.map(Y=>`grapheme-${Y.id}`))??[]}),[S,_]=h.useState(()=>{var K;return((K=n==null?void 0:n.ancestors)==null?void 0:K.map(Y=>({ancestorId:Y.ancestor.id,ancestryType:Y.ancestry_type})))??[]}),[b,w]=h.useState((n==null?void 0:n.is_native)??!0),[x,N]=h.useState((n==null?void 0:n.auto_spell)??!0),[C,T]=h.useState(null),[k,D]=h.useState(new Map),R=h.useCallback((K,Y,ce)=>{m(K),ce&&v(ce)},[]);h.useEffect(()=>{o==null||o(f)},[f,o]),h.useEffect(()=>{i==null||i(y)},[y,i]),h.useEffect(()=>{a==null||a(S)},[S,a]);const I=e("pronunciation",{defaultValue:t==="edit"&&(n!=null&&n.pronunciation)?n.pronunciation:void 0}),z=e("meaning",{defaultValue:t==="edit"&&(n!=null&&n.meaning)?n.meaning:void 0}),O=e("partOfSpeech",{defaultValue:t==="edit"&&(n!=null&&n.part_of_speech)?n.part_of_speech:void 0}),U=e("notes",{defaultValue:t==="edit"&&(n!=null&&n.notes)?n.notes:void 0}),W=e("spelling",{defaultValue:f}),$=e("ancestry",{defaultValue:S});h.useEffect(()=>{t==="edit"&&n&&!c.current&&(c.current=!0,setTimeout(()=>{n.pronunciation&&gd(I,n.pronunciation),n.meaning&&gd(z,n.meaning),n.part_of_speech&&gd(O,n.part_of_speech),n.notes&&gd(U,n.notes)},0))},[t,n,I,z,O,U]);const M=h.useCallback(()=>{var ce;const K=Mb(I);if(!K.trim()){T({success:!1,spelling:[],segments:[],unmatchedParts:[],error:"Enter a pronunciation first",hasVirtualGlyphs:!1}),D(new Map);return}const Y=s.lexicon.previewAutoSpelling(K);if(Y.success&&Y.data)if(T(Y.data),Y.data.hasVirtualGlyphs){const me=MP(Y.data);D(me)}else D(new Map);else T({success:!1,spelling:[],segments:[],unmatchedParts:[],error:((ce=Y.error)==null?void 0:ce.message)??"Auto-spell failed",hasVirtualGlyphs:!1}),D(new Map)},[I,s]),P=h.useCallback((K,Y)=>{const ce=s.lexicon.wouldCreateCycle(K,Y);return ce.success?ce.data??!1:!1},[s]),[B,V]=h.useState([]),[q,Q]=h.useState(null);h.useEffect(()=>{if(!(n!=null&&n.id))return;const K=s.lexicon.getAllDescendantIds(n.id);K.success&&K.data&&V(K.data);const Y=s.lexicon.getAncestryTree(n.id);Y.success&&Y.data&&Q(Y.data)},[n==null?void 0:n.id,s]);const H=h.useMemo(()=>{const K=S.map(Y=>Y.ancestorId);return n!=null&&n.id&&(K.push(n.id),B.length>0&&K.push(...B)),K},[S,n==null?void 0:n.id,B]);return h.useEffect(()=>{var me;if(!ce())return;const K=[];let Y=!1;for(const fe of S){if(new Set(((me=q==null?void 0:q.ancestors)==null?void 0:me.map(oe=>oe.entry.id))??[]).has(fe.ancestorId))continue;const he=s.lexicon.getAncestryTree(fe.ancestorId);he.success&&he.data&&(K.push({...he.data,ancestry_type:fe.ancestryType}),Y=!0)}if(!Y)return;Q(fe=>({entry:(fe==null?void 0:fe.entry)??{id:(n==null?void 0:n.id)??-1,lemma:Mb(I)||"New Word",is_native:!0,auto_spell:!1,meaning:null,part_of_speech:null,notes:null,pronunciation:null,glyph_order:"[]",needs_attention:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},ancestors:[...(fe==null?void 0:fe.ancestors)??[],...K]}));function ce(){var ie;const fe=new Set(((ie=q==null?void 0:q.ancestors)==null?void 0:ie.map(he=>he.entry.id))??[]);return S.some(he=>!fe.has(he.ancestorId))}},[S,q,s,n,I]),L("div",{className:j(pn.formFields,r),children:[L("div",{className:pn.section,children:[L("div",{className:pn.section,children:[p("h3",{className:pn.sectionHeader,children:"Spelling"}),p(nk,{...W,availableGlyphs:u,defaultValue:f,initialGlyphOrder:y,onSelectionChange:R,autoSpellPreview:x?C:null,onRequestAutoSpell:x?M:void 0,enableIpaMode:!0,initialVirtualGlyphs:k}),p("input",{type:"hidden",name:"isNative",value:b.toString()}),p("input",{type:"hidden",name:"autoSpell",value:x.toString()})]}),p("h3",{className:pn.sectionHeader,children:"Basic Information"}),L("div",{className:j(ne.flexCol,ne.flexGapM),children:[p(et,{content:"IPA pronunciation (optional for external words)",children:p(T0,{displayName:"Pronunciation",characters:Tu,...I})}),p(et,{content:"Definition or gloss",children:p(Fo,{displayName:"Meaning",asInput:!0,...z})}),p(et,{content:"Part of speech (e.g., noun, verb, adjective)",children:p(Fo,{displayName:"Part of Speech",asInput:!0,...O})}),p(et,{content:"Additional notes, usage examples, or comments",children:p(Fo,{displayName:"Notes",asInput:!1,...U})})]})]}),L("div",{className:pn.section,children:[p("h3",{className:pn.sectionHeader,children:"Options"}),L("div",{className:pn.checkboxRow,children:[L("label",{className:pn.checkboxLabel,children:[p("input",{type:"checkbox",checked:b,onChange:K=>w(K.target.checked)}),p("span",{children:"Native Word"})]}),p(et,{content:"Check if this word is native to the conlang. External/borrowed words may not have pronunciation.",children:p("span",{className:pn.helpIcon,children:"?"})})]}),L("div",{className:pn.checkboxRow,children:[L("label",{className:j(pn.checkboxLabel,{[pn.disabled]:!b}),children:[p("input",{type:"checkbox",checked:x&&b,onChange:K=>N(K.target.checked),disabled:!b}),p("span",{children:"Auto-Spell"})]}),p(et,{content:"Automatically generate spelling from pronunciation using grapheme mappings.",children:p("span",{className:pn.helpIcon,children:"?"})})]}),!b&&p("div",{className:pn.externalNote,children:"External word: pronunciation is optional and auto-spell is disabled."})]}),L("div",{className:pn.section,children:[p("h3",{className:pn.sectionHeader,children:"Etymology"}),p(tk,{...$,currentLexiconId:n==null?void 0:n.id,currentLemma:(n==null?void 0:n.lemma)??"New Word",availableLexicon:d,excludeIds:H,checkCycle:n!=null&&n.id?P:void 0,ancestryTree:q,defaultValue:S,onChange:_})]})]})}const SZ="_createPage_4ys8k_1",xZ="_header_4ys8k_6",CZ="_title_4ys8k_13",TZ="_formContainer_4ys8k_19",NZ="_actions_4ys8k_25",kZ="_loading_4ys8k_34",AZ="_error_4ys8k_40",Ra={createPage:SZ,header:xZ,title:CZ,formContainer:TZ,actions:NZ,loading:kZ,error:AZ};function RZ(){const e=An(),{api:t,refresh:n,isLoading:r,error:o}=Xt(),{registerField:i,registerForm:a,isFormValid:s}=cs({mode:"onChange"}),l=h.useRef(null),[c,u]=h.useState([]),[d,f]=h.useState([]),[m,y]=h.useState(!0),[v,S]=h.useState(!0),_=h.useCallback(async x=>{var N,C;try{const T=x.pronunciation,k=x.meaning,D=x.partOfSpeech,R=x.notes,I={pronunciation:(T==null?void 0:T.trim())||void 0,is_native:m,auto_spell:v,meaning:(k==null?void 0:k.trim())||void 0,part_of_speech:(D==null?void 0:D.trim())||void 0,notes:(R==null?void 0:R.trim())||void 0,glyph_order:c,ancestry:d.map((O,U)=>({ancestor_id:O.ancestorId,position:U,ancestry_type:O.ancestryType}))},z=t.lexicon.create(I);if(!z.success)throw new Error(((N=z.error)==null?void 0:N.message)||"Failed to create lexicon entry");return n(),e(`/lexicon/db/${(C=z.data)==null?void 0:C.id}`),{success:!0,data:z.data}}catch(T){return console.error("Failed to create lexicon entry:",T),{success:!1,error:T instanceof Error?T.message:"Creation failed"}}},[t,n,e,c,d,m,v]),b=a("createLexiconForm",{submitFunc:_}),w=h.useCallback(x=>{const{name:N,checked:C}=x.target;N==="isNativeCheckbox"?(y(C),C||S(!1)):N==="autoSpellCheckbox"&&S(C)},[]);return r?p("div",{className:Ra.loading,children:"Loading..."}):o?L("div",{className:Ra.error,children:["Error: ",o.message]}):L("div",{className:j(Ra.createPage,ne.flexColumn,st.parentSize),children:[L("div",{className:Ra.header,children:[p(xe,{as:mt,to:"/lexicon",iconName:"arrow-left","aria-label":"Back to Lexicon"}),p("h2",{className:Ra.title,children:"Create New Word"})]}),L(ba,{ref:l,...b,registerField:i,isFormValid:s,className:Ra.formContainer,children:[p(rk,{registerField:i,mode:"create",onGlyphOrderChange:u,onAncestorsChange:f}),L("div",{style:{display:"none"},children:[p("input",{type:"checkbox",name:"isNativeCheckbox",checked:m,onChange:w}),p("input",{type:"checkbox",name:"autoSpellCheckbox",checked:v,onChange:w})]}),L("div",{className:Ra.actions,children:[p(Ke,{as:mt,to:"/lexicon",className:qe.secondary,children:"Cancel"}),p(Ke,{type:"submit",className:qe.primary,disabled:!s,children:"Create Word"})]})]})]})}const IZ="_treeContainer_1k648_1",LZ="_tree_1k648_1",OZ="_emptyTree_1k648_14",PZ="_nodeContainer_1k648_22",MZ="_ancestorsBranch_1k648_29",DZ="_ancestorWrapper_1k648_36",FZ="_connector_1k648_43",$Z="_node_1k648_22",BZ="_root_1k648_63",VZ="_current_1k648_69",UZ="_clickable_1k648_74",zZ="_expandButton_1k648_90",jZ="_ancestryBadge_1k648_94",WZ="_lemma_1k648_103",GZ="_pronunciation_1k648_108",HZ="_moreIndicator_1k648_114",XZ="_legend_1k648_123",YZ="_legendTitle_1k648_133",qZ="_legendItems_1k648_138",KZ="_legendItem_1k648_138",ZZ="_legendColor_1k648_151",Qe={treeContainer:IZ,tree:LZ,emptyTree:OZ,nodeContainer:PZ,ancestorsBranch:MZ,ancestorWrapper:DZ,connector:FZ,node:$Z,root:BZ,current:VZ,clickable:UZ,expandButton:zZ,ancestryBadge:jZ,lemma:WZ,pronunciation:GZ,moreIndicator:HZ,legend:XZ,legendTitle:YZ,legendItems:qZ,legendItem:KZ,legendColor:ZZ},Db={derived:"var(--status-info)",borrowed:"var(--status-warning)",compound:"var(--status-good)",blend:"var(--color-primary)",calque:"var(--status-neutral, #888)",other:"var(--text-secondary)"};function ok({node:e,depth:t,maxDepth:n,isRoot:r=!1,onNodeClick:o,currentWordId:i}){const[a,s]=h.useState(t<2),l=e.ancestors&&e.ancestors.length>0,c=l&&t<n,u=e.entry.id===i,d=h.useCallback(v=>{v.stopPropagation(),s(S=>!S)},[]),f=h.useCallback(()=>{o&&!u&&o(e.entry.id)},[o,e.entry.id,u]),m=h.useCallback(v=>{(v.key==="Enter"||v.key===" ")&&o&&!u&&(v.preventDefault(),o(e.entry.id))},[o,e.entry.id,u]),y=e.ancestry_type?Db[e.ancestry_type]:"var(--border-primary)";return L("div",{className:Qe.nodeContainer,children:[c&&a&&p("div",{className:Qe.ancestorsBranch,children:e.ancestors.map(v=>L("div",{className:Qe.ancestorWrapper,children:[p(ok,{node:v,depth:t+1,maxDepth:n,onNodeClick:o,currentWordId:i}),p("div",{className:Qe.connector,style:{borderColor:v.ancestry_type?Db[v.ancestry_type]:"var(--border-primary)"}})]},v.entry.id))}),L("div",{className:j(Qe.node,{[Qe.root]:r,[Qe.current]:u,[Qe.clickable]:o&&!u}),onClick:f,onKeyDown:m,role:o&&!u?"button":void 0,tabIndex:o&&!u?0:void 0,children:[c&&p(xe,{iconName:a?"chevron-up":"chevron-down",onClick:d,iconSize:"0.75rem",themeType:"basic",className:Qe.expandButton,"aria-label":a?"Collapse":"Expand"}),!r&&e.ancestry_type&&p("span",{className:Qe.ancestryBadge,style:{backgroundColor:y},children:e.ancestry_type}),p("span",{className:Qe.lemma,children:e.entry.pronunciation??e.entry.lemma}),e.entry.pronunciation&&L("span",{className:Qe.pronunciation,children:["/",e.entry.pronunciation,"/"]}),l&&t>=n&&L("span",{className:Qe.moreIndicator,children:["+",e.ancestors.length]})]})]})}function QZ({rootNode:e,direction:t="ancestors",maxDepth:n=3,onNodeClick:r,currentWordId:o}){return!(e.ancestors&&e.ancestors.length>0)&&t==="ancestors"?p("div",{className:Qe.emptyTree,children:p("p",{children:"No etymology data available for this word."})}):L("div",{className:Qe.treeContainer,children:[p("div",{className:Qe.tree,children:p(ok,{node:e,depth:0,maxDepth:n,isRoot:!0,onNodeClick:r,currentWordId:o})}),L("div",{className:Qe.legend,children:[p("span",{className:Qe.legendTitle,children:"Ancestry Types:"}),L("div",{className:Qe.legendItems,children:[L("span",{className:Qe.legendItem,children:[p("span",{className:Qe.legendColor,style:{backgroundColor:"var(--status-info)"}}),"derived"]}),L("span",{className:Qe.legendItem,children:[p("span",{className:Qe.legendColor,style:{backgroundColor:"var(--status-warning)"}}),"borrowed"]}),L("span",{className:Qe.legendItem,children:[p("span",{className:Qe.legendColor,style:{backgroundColor:"var(--status-good)"}}),"compound"]}),L("span",{className:Qe.legendItem,children:[p("span",{className:Qe.legendColor,style:{backgroundColor:"var(--color-primary)"}}),"blend"]}),L("span",{className:Qe.legendItem,children:[p("span",{className:Qe.legendColor,style:{backgroundColor:"var(--status-neutral, #888)"}}),"calque"]}),L("span",{className:Qe.legendItem,children:[p("span",{className:Qe.legendColor,style:{backgroundColor:"var(--text-secondary)"}}),"other"]})]})]})]})}const JZ="_viewPage_gpefp_1",eQ="_header_gpefp_6",tQ="_title_gpefp_13",nQ="_headerActions_gpefp_20",rQ="_content_gpefp_25",oQ="_formContainer_gpefp_33",iQ="_editActions_gpefp_39",aQ="_etymologySection_gpefp_48",sQ="_descendantsSection_gpefp_49",lQ="_sectionTitle_gpefp_56",cQ="_descendantsList_gpefp_62",uQ="_descendantItem_gpefp_68",dQ="_descendantType_gpefp_83",fQ="_descendantLemma_gpefp_90",pQ="_loading_gpefp_95",hQ="_error_gpefp_101",mQ="_notFound_gpefp_102",gQ="_deleteModal_gpefp_114",yQ="_deleteWarning_gpefp_122",vQ="_deleteActions_gpefp_131",Rt={viewPage:JZ,header:eQ,title:tQ,headerActions:nQ,content:rQ,formContainer:oQ,editActions:iQ,etymologySection:aQ,descendantsSection:sQ,sectionTitle:lQ,descendantsList:cQ,descendantItem:uQ,descendantType:dQ,descendantLemma:fQ,loading:pQ,error:hQ,notFound:mQ,deleteModal:gQ,deleteWarning:yQ,deleteActions:vQ};function _Q(){const{id:e}=av(),t=An(),{api:n,data:r,refresh:o,isLoading:i,error:a}=Xt(),[s,l]=h.useState(!1),[c,u]=h.useState(!1),[d,f]=h.useState(!1),[m,y]=h.useState(null),{registerField:v,registerForm:S,isFormValid:_}=cs({mode:"onChange"}),b=h.useRef(null),[w,x]=h.useState([]),[N,C]=h.useState([]),T=e?parseInt(e,10):null,k=h.useMemo(()=>new Map((r.graphemesComplete??[]).map(V=>[V.id,V])),[r.graphemesComplete]),D=T&&!isNaN(T)?n.lexicon.getByIdComplete(T):null,R=D!=null&&D.success?D.data??null:null,I=T&&!isNaN(T)?n.lexicon.getAncestryTree(T,3):null,z=I!=null&&I.success?I.data??null:null,O=h.useCallback(()=>{R&&C(R.ancestors.map(V=>({ancestorId:V.ancestor.id,ancestryType:V.ancestry_type}))),l(!0)},[R]),U=h.useCallback(()=>{l(!1)},[]),W=h.useCallback(async V=>{var q,Q;if(!T)return{success:!1,error:"No lexicon ID"};try{const H=V.pronunciation,K=V.meaning,Y=V.partOfSpeech,ce=V.notes,me={lemma:((H==null?void 0:H.trim())||(R==null?void 0:R.lemma)||"").trim()||void 0,pronunciation:(H==null?void 0:H.trim())||void 0,meaning:(K==null?void 0:K.trim())||null,part_of_speech:(Y==null?void 0:Y.trim())||null,notes:(ce==null?void 0:ce.trim())||null,glyph_order:w},fe=n.lexicon.update(T,me);if(!fe.success)throw new Error(((q=fe.error)==null?void 0:q.message)||"Failed to update");const ie=n.lexicon.updateAncestry(T,{ancestry:N.map((he,oe)=>({ancestor_id:he.ancestorId,position:oe,ancestry_type:he.ancestryType}))});return ie.success||console.warn("Failed to update ancestry:",(Q=ie.error)==null?void 0:Q.message),o(),l(!1),{success:!0}}catch(H){return console.error("Failed to update lexicon:",H),{success:!1,error:H instanceof Error?H.message:"Update failed"}}},[n,T,w,N,o]),$=S("editLexiconForm",{submitFunc:W}),M=h.useCallback(()=>{var V;if(R){const q=((V=R.descendants)==null?void 0:V.length)??0;if(q>0){const Q=R.descendants.slice(0,3).map(K=>K.descendant.pronunciation??K.descendant.lemma).join(", "),H=q>3?` and ${q-3} more`:"";y(`This word has ${q} descendant${q!==1?"s":""}: ${Q}${H}. Deleting it will remove etymology links from those words.`)}else y(null)}u(!0)},[R]),P=h.useCallback(async()=>{var V;if(T){f(!0);try{const q=n.lexicon.delete(T);q.success?(o(),t("/lexicon")):console.error("Delete failed:",(V=q.error)==null?void 0:V.message)}catch(q){console.error("Delete failed:",q)}finally{f(!1),u(!1)}}},[n,T,o,t]),B=h.useCallback(V=>{t(`/lexicon/db/${V}`)},[t]);return i?p("div",{className:Rt.loading,children:"Loading..."}):a?L("div",{className:Rt.error,children:["Error: ",a.message]}):!T||isNaN(T)?L("div",{className:Rt.notFound,children:[p("p",{children:"Invalid lexicon ID"}),p(mt,{to:"/lexicon",children:"Back to Lexicon"})]}):R?L("div",{className:j(Rt.viewPage,ne.flexColumn,st.parentSize),children:[L("div",{className:Rt.header,children:[p(xe,{as:mt,to:"/lexicon",iconName:"arrow-left","aria-label":"Back to Lexicon"}),p("h2",{className:Rt.title,children:R.pronunciation??R.lemma}),p("div",{className:Rt.headerActions,children:!s&&L(gt,{children:[p(xe,{iconName:"pencil",onClick:O,"aria-label":"Edit",children:"Edit"}),p(xe,{iconName:"trash",iconColor:"var(--status-bad)",onClick:M,"aria-label":"Delete",children:"Delete"})]})})]}),p("div",{className:Rt.content,children:s?L(ba,{ref:b,...$,registerField:v,isFormValid:_,className:Rt.formContainer,children:[p(rk,{registerField:v,mode:"edit",initialData:R,onGlyphOrderChange:x,onAncestorsChange:C}),L("div",{className:Rt.editActions,children:[p(Ke,{type:"button",onClick:U,className:qe.secondary,children:"Cancel"}),p(Ke,{type:"submit",className:qe.primary,disabled:!_,children:"Save Changes"})]})]}):L(gt,{children:[p("section",{className:Rt.displaySection,children:p($2,{lexiconData:R,graphemeMap:k,showAncestry:!1})}),z&&L("section",{className:Rt.etymologySection,children:[p("h3",{className:Rt.sectionTitle,children:"Etymology Tree"}),p(QZ,{rootNode:z,direction:"ancestors",maxDepth:3,onNodeClick:B,currentWordId:T})]}),R.descendants&&R.descendants.length>0&&L("section",{className:Rt.descendantsSection,children:[L("h3",{className:Rt.sectionTitle,children:["Descendants (",R.descendants.length,")"]}),p("div",{className:Rt.descendantsList,children:R.descendants.map(V=>L(mt,{to:`/lexicon/db/${V.descendant.id}`,className:Rt.descendantItem,children:[p("span",{className:Rt.descendantType,children:V.ancestry_type}),p("span",{className:Rt.descendantLemma,children:V.descendant.pronunciation??V.descendant.lemma})]},V.descendant.id))})]})]})}),p(zn,{isOpen:c,setIsOpen:u,onClose:()=>u(!1),allowClose:!d,children:L("div",{className:Rt.deleteModal,children:[p("h2",{children:"Delete Word"}),L("p",{children:["Are you sure you want to delete ",p("strong",{children:R.lemma}),"?"]}),m&&L("div",{className:Rt.deleteWarning,children:[p("strong",{children:"Warning:"})," ",m]}),L("div",{className:Rt.deleteActions,children:[p(Ke,{onClick:()=>u(!1),disabled:d,children:"Cancel"}),p(Ke,{onClick:P,disabled:d,style:{background:"var(--danger)",color:"white"},children:d?"Deleting...":"Delete Word"})]})]})})]}):L("div",{className:Rt.notFound,children:[p("p",{children:"Lexicon entry not found"}),p(mt,{to:"/lexicon",children:"Back to Lexicon"})]})}function wQ(){return p("div",{className:j(ne.flexRow,ne.flexGapM,st.paddingM),style:{marginBottom:"1rem"},children:L(du,{children:[p(ln,{index:!0,element:p(kH,{})}),p(ln,{path:"create",element:p(RZ,{})}),p(ln,{path:"db/:id",element:p(_Q,{})})]})})}const bQ="_modalContentTemplate_e07f2_1",EQ="_modalContent_e07f2_1",SQ="_topSection_e07f2_6",xQ="_saveGraphemeButton_e07f2_11",CQ="_formContainer_e07f2_17",TQ="_glyphSelectionContainer_e07f2_21",NQ="_glyphSelectionBox_e07f2_30",kQ="_emptyState_e07f2_41",AQ="_selectedGlyphs_e07f2_49",RQ="_glyphItem_e07f2_56",IQ="_glyphSvg_e07f2_73",LQ="_glyphName_e07f2_88",OQ="_glyphCategory_e07f2_94",PQ="_removeButton_e07f2_100",MQ="_glyphButtons_e07f2_129",DQ="_errorMessage_e07f2_143",FQ="_modalButtons_e07f2_152",Wi={modalContentTemplate:bQ,modalContent:EQ,topSection:SQ,saveGraphemeButton:xQ,formContainer:CQ,glyphSelectionContainer:TQ,glyphSelectionBox:NQ,emptyState:kQ,selectedGlyphs:AQ,glyphItem:RQ,glyphSvg:IQ,glyphName:LQ,glyphCategory:OQ,removeButton:PQ,glyphButtons:MQ,errorMessage:DQ,modalButtons:FQ};function Fb(e){return e==null?!0:typeof e=="string"?e.trim()==="":!1}function ik(e){const t={};return e.required&&(t.required=e.required.value),e.minLength&&(t.minLength=e.minLength.value),e.maxLength&&(t.maxLength=e.maxLength.value),e.length&&(t.minLength=e.length.value,t.maxLength=e.length.value),e.pattern&&(t.pattern=e.pattern.value.source),{validator:(r,o="Field")=>{var i;if((i=e.required)!=null&&i.value&&Fb(r))return{message:e.required.message||`${o} is required`,type:"error"};if(Fb(r))return null;if(e.minLength&&r.length<e.minLength.value)return{message:e.minLength.message||`${o} must be at least ${e.minLength.value} characters`,type:"error"};if(e.maxLength&&r.length>e.maxLength.value)return{message:e.maxLength.message||`${o} must be no more than ${e.maxLength.value} characters`,type:"error"};if(e.length&&r.length!==e.length.value)return{message:e.length.message||`${o} must be exactly ${e.length.value} characters`,type:"error"};if(e.pattern&&!e.pattern.value.test(r))return{message:e.pattern.message||`${o} format is invalid`,type:"error"};if(e.equals&&r!==e.equals.value)return{message:e.equals.message||`${o} must equal ${e.equals.value}`,type:"error"};if(e.oneOf&&!e.oneOf.value.includes(r))return{message:e.oneOf.message||`${o} must be one of: ${e.oneOf.value.join(", ")}`,type:"error"};if(e.validate)for(const[a,s]of Object.entries(e.validate))try{const l=s.validator(r);if(l instanceof Promise){console.warn(`Skipping async validator '${a}' for field '${o}'. Synchronous validation cannot handle async validators. Please use a synchronous validator or handle async validation separately.`);continue}if(l)return{message:l||`${o} failed custom validation: ${a}`,type:"error"}}catch(l){return console.error("Error in custom validation:",a,"for field:",o,l),{message:`${o} failed custom validation: ${a}`,type:"error"}}return null},htmlAttrs:t,options:e}}const $Q="_pronunciationTableInput_j4sz8_2",BQ="_tableContainer_j4sz8_11",VQ="_pronunciationTable_j4sz8_2",UQ="_textInput_j4sz8_65",zQ="_checkbox_j4sz8_85",jQ="_removeButton_j4sz8_92",vs={pronunciationTableInput:$Q,tableContainer:BQ,pronunciationTable:VQ,textInput:UQ,checkbox:zQ,removeButton:jQ},WQ={addPronunciation:"Add Pronunciation",removePronunciation:"Remove",pronunciationLabel:"Pronunciation",useInAutoSpellingLabel:"Use in auto-spelling"},ak=h.forwardRef(({registerSmartFieldProps:e,fieldState:t,TranslationMaps:n={},defaultValue:r=[],maxRows:o,requirePronunciation:i=!1,className:a},s)=>{const l=rC(n,WQ),c=h.useId(),u=h.useRef(!0),d=h.useRef(t);d.current=t;const[f,m]=h.useState(()=>((r==null?void 0:r.length)>0?r:[{pronunciation:"",useInAutoSpelling:!0}]).map((v,S)=>({id:`${c}-row-${S}`,pronunciation:v.pronunciation||"",useInAutoSpelling:v.useInAutoSpelling||!1})));return h.useEffect(()=>{if(u.current){u.current=!1;return}d.current.isTouched.setIsTouched(!0),d.current.isChanged.setIsChanged(!0)},[f]),p(GQ,{rows:f,setRows:m,fieldStateRef:d,registerSmartFieldProps:e,t:l,maxRows:o,requirePronunciation:i,className:a,idPrefix:c})}),GQ=({rows:e,setRows:t,fieldStateRef:n,registerSmartFieldProps:r,t:o,maxRows:i,requirePronunciation:a,className:s,idPrefix:l})=>{const{registerField:c,registerForm:u,unregisterField:d,isFormValid:f}=cs({}),m=h.useRef(null),y=u("pronunciationTableInput",{});h.useImperativeHandle(r.ref,()=>({get value(){var w;const b=((w=m.current)==null?void 0:w.value)||{};return e.map(x=>({pronunciation:b[`pronunciation-${x.id}`]||"",useInAutoSpelling:x.useInAutoSpelling}))}}),[e]),h.useEffect(()=>{var x;const b=((x=m.current)==null?void 0:x.value)||{},w=e.every(N=>{const C=b[`pronunciation-${N.id}`];return!C||C.trim()===""});if(n.current.isEmpty.setIsEmpty(w),a){const N=e.every(C=>{const T=b[`pronunciation-${C.id}`];return T&&T.trim()!==""});n.current.isInputValid.setIsInputValid(N)}else n.current.isInputValid.setIsInputValid(!0)},[e,a,f,n]);const v=h.useCallback(()=>{if(i&&e.length>=i)return;const b={id:`${l}-row-${Date.now()}`,pronunciation:"",useInAutoSpelling:!0};t(w=>[...w,b])},[e.length,i,l,t]),S=h.useCallback(b=>{e.length<=1||(d(`pronunciation-${b}`),t(w=>w.filter(x=>x.id!==b)))},[e.length,d,t]),_=h.useCallback((b,w)=>{t(x=>x.map(N=>N.id===b?{...N,useInAutoSpelling:w}:N))},[t]);return p(ba,{ref:m,as:"div",...y,registerField:c,unregisterField:d,isFormValid:f,className:j(vs.pronunciationTableInput,s),children:p("div",{className:vs.tableContainer,children:L("table",{className:vs.pronunciationTable,children:[p("thead",{children:L("tr",{children:[p("th",{children:o("pronunciationLabel")}),p("th",{children:o("useInAutoSpellingLabel")}),p("th",{children:p(et,{content:"Add a new pronunciation entry",children:p(xe,{iconName:"plus-circle",onClick:v,title:o("addPronunciation"),className:vs.addButton,iconSize:"1.5em",iconColor:"var(--green)",themeType:"basic"})})})]})}),p("tbody",{children:e.map(b=>L("tr",{children:[p("td",{children:p(T0,{...c(`pronunciation-${b.id}`,{defaultValue:b.pronunciation}),characters:Tu,displayName:o("pronunciationLabel"),className:vs.textInput})}),p("td",{children:p("input",{type:"checkbox",checked:b.useInAutoSpelling,onChange:w=>_(b.id,w.target.checked),className:vs.checkbox})}),p("td",{children:p(et,{content:"Remove this row",children:p(xe,{type:"button",onClick:()=>S(b.id),disabled:e.length===1,iconName:"trash3",iconSize:"1.5em",iconColor:"red"})})})]},b.id))})]})})})};ak.displayName="PronunciationTableInput";function $b(e,t,n,r=o=>o){return e*r(.5-t*(.5-n))}function HQ(e){return[-e[0],-e[1]]}function ro(e,t){return[e[0]+t[0],e[1]+t[1]]}function Ar(e,t){return[e[0]-t[0],e[1]-t[1]]}function to(e,t){return[e[0]*t,e[1]*t]}function XQ(e,t){return[e[0]/t,e[1]/t]}function Hl(e){return[e[1],-e[0]]}function Bb(e,t){return e[0]*t[0]+e[1]*t[1]}function YQ(e,t){return e[0]===t[0]&&e[1]===t[1]}function qQ(e){return Math.hypot(e[0],e[1])}function KQ(e){return e[0]*e[0]+e[1]*e[1]}function Vb(e,t){return KQ(Ar(e,t))}function sk(e){return XQ(e,qQ(e))}function ZQ(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function Xl(e,t,n){let r=Math.sin(n),o=Math.cos(n),i=e[0]-t[0],a=e[1]-t[1],s=i*o-a*r,l=i*r+a*o;return[s+t[0],l+t[1]]}function ry(e,t,n){return ro(e,to(Ar(t,e),n))}function Ub(e,t,n){return ro(e,to(t,n))}var{min:_s,PI:QQ}=Math,zb=.275,Yl=QQ+1e-4;function JQ(e,t={}){let{size:n=16,smoothing:r=.5,thinning:o=.5,simulatePressure:i=!0,easing:a=M=>M,start:s={},end:l={},last:c=!1}=t,{cap:u=!0,easing:d=M=>M*(2-M)}=s,{cap:f=!0,easing:m=M=>--M*M*M+1}=l;if(e.length===0||n<=0)return[];let y=e[e.length-1].runningLength,v=s.taper===!1?0:s.taper===!0?Math.max(n,y):s.taper,S=l.taper===!1?0:l.taper===!0?Math.max(n,y):l.taper,_=Math.pow(n*r,2),b=[],w=[],x=e.slice(0,10).reduce((M,P)=>{let B=P.pressure;if(i){let V=_s(1,P.distance/n),q=_s(1,1-V);B=_s(1,M+(q-M)*(V*zb))}return(M+B)/2},e[0].pressure),N=$b(n,o,e[e.length-1].pressure,a),C,T=e[0].vector,k=e[0].point,D=k,R=k,I=D,z=!1;for(let M=0;M<e.length;M++){let{pressure:P}=e[M],{point:B,vector:V,distance:q,runningLength:Q}=e[M];if(M<e.length-1&&y-Q<3)continue;if(o){if(i){let he=_s(1,q/n),oe=_s(1,1-he);P=_s(1,x+(oe-x)*(he*zb))}N=$b(n,o,P,a)}else N=n/2;C===void 0&&(C=N);let H=Q<v?d(Q/v):1,K=y-Q<S?m((y-Q)/S):1;N=Math.max(.01,N*Math.min(H,K));let Y=(M<e.length-1?e[M+1]:e[M]).vector,ce=M<e.length-1?Bb(V,Y):1,me=Bb(V,T)<0&&!z,fe=ce!==null&&ce<0;if(me||fe){let he=to(Hl(T),N);for(let oe=1/13,re=0;re<=1;re+=oe)R=Xl(Ar(B,he),B,Yl*re),b.push(R),I=Xl(ro(B,he),B,Yl*-re),w.push(I);k=R,D=I,fe&&(z=!0);continue}if(z=!1,M===e.length-1){let he=to(Hl(V),N);b.push(Ar(B,he)),w.push(ro(B,he));continue}let ie=to(Hl(ry(Y,V,ce)),N);R=Ar(B,ie),(M<=1||Vb(k,R)>_)&&(b.push(R),k=R),I=ro(B,ie),(M<=1||Vb(D,I)>_)&&(w.push(I),D=I),x=P,T=V}let O=e[0].point.slice(0,2),U=e.length>1?e[e.length-1].point.slice(0,2):ro(e[0].point,[1,1]),W=[],$=[];if(e.length===1){if(!(v||S)||c){let M=Ub(O,sk(Hl(Ar(O,U))),-(C||N)),P=[];for(let B=1/13,V=B;V<=1;V+=B)P.push(Xl(M,O,Yl*2*V));return P}}else{if(!(v||S&&e.length===1))if(u)for(let P=1/13,B=P;B<=1;B+=P){let V=Xl(w[0],O,Yl*B);W.push(V)}else{let P=Ar(b[0],w[0]),B=to(P,.5),V=to(P,.51);W.push(Ar(O,B),Ar(O,V),ro(O,V),ro(O,B))}let M=Hl(HQ(e[e.length-1].vector));if(S||v&&e.length===1)$.push(U);else if(f){let P=Ub(U,M,N);for(let B=1/29,V=B;V<1;V+=B)$.push(Xl(P,U,Yl*3*V))}else $.push(ro(U,to(M,N)),ro(U,to(M,N*.99)),Ar(U,to(M,N*.99)),Ar(U,to(M,N)))}return b.concat($,w.reverse(),W)}function eJ(e,t={}){var n;let{streamline:r=.5,size:o=16,last:i=!1}=t;if(e.length===0)return[];let a=.15+(1-r)*.85,s=Array.isArray(e[0])?e:e.map(({x:m,y,pressure:v=.5})=>[m,y,v]);if(s.length===2){let m=s[1];s=s.slice(0,-1);for(let y=1;y<5;y++)s.push(ry(s[0],m,y/4))}s.length===1&&(s=[...s,[...ro(s[0],[1,1]),...s[0].slice(2)]]);let l=[{point:[s[0][0],s[0][1]],pressure:s[0][2]>=0?s[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,u=0,d=l[0],f=s.length-1;for(let m=1;m<s.length;m++){let y=i&&m===f?s[m].slice(0,2):ry(d.point,s[m],a);if(YQ(d.point,y))continue;let v=ZQ(y,d.point);if(u+=v,m<f&&!c){if(u<o)continue;c=!0}d={point:y,pressure:s[m][2]>=0?s[m][2]:.5,vector:sk(Ar(d.point,y)),distance:v,runningLength:u},l.push(d)}return l[0].vector=((n=l[1])==null?void 0:n.vector)||[0,0],l}function tJ(e,t={}){return JQ(eJ(e,t),t)}var yd=tJ;function nJ(e=[]){const[t,n]=h.useState({past:[],present:e,future:[]}),r=t.past.length>0,o=t.future.length>0,i=h.useCallback((u,d=!0)=>{n(f=>d?{past:[...f.past,f.present],present:u,future:[]}:{...f,present:u})},[]),a=h.useCallback(()=>{n(u=>{if(u.past.length===0)return u;const d=[...u.past],f=d.pop();return{past:d,present:f,future:[u.present,...u.future]}})},[]),s=h.useCallback(()=>{n(u=>{if(u.future.length===0)return u;const d=[...u.future],f=d.shift();return{past:[...u.past,u.present],present:f,future:d}})},[]),l=h.useCallback(()=>{n(u=>({past:[...u.past,u.present],present:[],future:[]}))},[]),c=h.useCallback(u=>{n({past:[],present:u,future:[]})},[]);return{elements:t.present,set:i,undo:a,redo:s,clear:l,reset:c,canUndo:r,canRedo:o}}function Ga(){return Math.random().toString(36).substring(2,11)}function vd(e){if(!e.length)return"";const t=e.reduce((n,[r,o],i,a)=>{const[s,l]=a[(i+1)%a.length];return n.push(r,o,(r+s)/2,(o+l)/2),n},["M",...e[0],"Q"]);return t.push("Z"),t.join(" ")}const lk=2,rJ=1,oJ=20,_d=e=>({size:e,thinning:.5,smoothing:.5,streamline:.5,easing:t=>t,start:{taper:0,cap:!0},end:{taper:0,cap:!0}});function jb(e){if(!e)return null;const t=e.match(/-?\d+\.?\d*/g);if(!t||t.length<2)return null;const n=[];for(let s=0;s<t.length-1;s+=2){const l=parseFloat(t[s]),c=parseFloat(t[s+1]);!isNaN(l)&&!isNaN(c)&&n.push({x:l,y:c})}if(n.length===0)return null;let r=1/0,o=1/0,i=-1/0,a=-1/0;for(const s of n)s.x<r&&(r=s.x),s.x>i&&(i=s.x),s.y<o&&(o=s.y),s.y>a&&(a=s.y);return{minX:r,minY:o,maxX:i,maxY:a}}function Wb(e){if(!e)return[];const t=[],o=new DOMParser().parseFromString(e,"image/svg+xml").querySelector("svg");return o?(o.childNodes.forEach(i=>{if(i.nodeType!==Node.ELEMENT_NODE)return;const a=i;switch(a.tagName.toLowerCase()){case"path":{const s=a.getAttribute("d")||"",l=a.getAttribute("fill")||"var(--black)",c={id:Ga(),type:"pen",color:l,selected:!1,points:[],pathData:s,strokeWidth:lk};t.push(c);break}case"circle":{const s=parseFloat(a.getAttribute("cx")||"0"),l=parseFloat(a.getAttribute("cy")||"0"),c=parseFloat(a.getAttribute("r")||"4"),u=a.getAttribute("fill")||"var(--black)",d={id:Ga(),type:"dot",color:u,selected:!1,x:s,y:l,radius:c};t.push(d);break}case"rect":{const s=parseFloat(a.getAttribute("x")||"0"),l=parseFloat(a.getAttribute("y")||"0"),c=parseFloat(a.getAttribute("width")||"0"),u=parseFloat(a.getAttribute("height")||"0"),d=a.getAttribute("fill"),f=!!(d&&d!=="none"),m=f?d:a.getAttribute("stroke")||"var(--black)",y=parseFloat(a.getAttribute("stroke-width")||"2"),v={id:Ga(),type:"square",color:m,selected:!1,x:s,y:l,width:c,height:u,strokeWidth:y,fill:f};t.push(v);break}case"ellipse":{const s=parseFloat(a.getAttribute("cx")||"0"),l=parseFloat(a.getAttribute("cy")||"0"),c=parseFloat(a.getAttribute("rx")||"0"),u=parseFloat(a.getAttribute("ry")||"0"),d=a.getAttribute("fill"),f=!!(d&&d!=="none"),m=f?d:a.getAttribute("stroke")||"var(--black)",y=parseFloat(a.getAttribute("stroke-width")||"2"),v={id:Ga(),type:"circle",color:m,selected:!1,cx:s,cy:l,rx:c,ry:u,strokeWidth:y,fill:f};t.push(v);break}}}),t):[]}function iJ(e={}){const{value:t,onChange:n}=e,r=nJ(),[o,i]=h.useState("pen"),[a,s]=h.useState("var(--black)"),[l,c]=h.useState(!1),[u,d]=h.useState([]),[f,m]=h.useState(null),[y,v]=h.useState(null),[S,_]=h.useState(null),[b,w]=h.useState(null),[x,N]=h.useState(null),[C,T]=h.useState(lk),[k,D]=h.useState(!1),[R,I]=h.useState(null),[z,O]=h.useState(!1),U=h.useRef(null),W=h.useRef(!1);h.useEffect(()=>{if(!W.current&&t){const oe=Wb(t);r.reset(oe),W.current=!0}},[t,r]);const $=h.useCallback(()=>`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 300" width="300" height="300">
  ${r.elements.map(re=>{switch(re.type){case"pen":return`<path d="${re.pathData}" fill="${re.color}" />`;case"dot":return`<circle cx="${re.x}" cy="${re.y}" r="${re.radius}" fill="${re.color}" />`;case"square":return re.fill?`<rect x="${re.x}" y="${re.y}" width="${re.width}" height="${re.height}" fill="${re.color}" />`:`<rect x="${re.x}" y="${re.y}" width="${re.width}" height="${re.height}" fill="none" stroke="${re.color}" stroke-width="${re.strokeWidth}" />`;case"circle":return re.fill?`<ellipse cx="${re.cx}" cy="${re.cy}" rx="${re.rx}" ry="${re.ry}" fill="${re.color}" />`:`<ellipse cx="${re.cx}" cy="${re.cy}" rx="${re.rx}" ry="${re.ry}" fill="none" stroke="${re.color}" stroke-width="${re.strokeWidth}" />`}}).join(`
  `)}
</svg>`,[r.elements]),M=h.useRef("");h.useEffect(()=>{if(n&&W.current){const oe=$();oe!==M.current&&(M.current=oe,n(oe))}},[r.elements,n,$]);const P=h.useCallback(oe=>{const le=oe.currentTarget.getBoundingClientRect();let Z,ae;if("touches"in oe)if(oe.touches.length===0){const J=oe.changedTouches[0];Z=J.clientX,ae=J.clientY}else{const J=oe.touches[0];Z=J.clientX,ae=J.clientY}else Z=oe.clientX,ae=oe.clientY;return{x:Z-le.left,y:ae-le.top,pressure:.5}},[]),B=h.useCallback((oe,re,le)=>{const Z=le??8;for(let ae=re.length-1;ae>=0;ae--){const J=re[ae];switch(J.type){case"dot":if(Math.sqrt((oe.x-J.x)**2+(oe.y-J.y)**2)<=J.radius+Z)return J;break;case"square":if(J.fill){if(oe.x>=J.x-Z&&oe.x<=J.x+J.width+Z&&oe.y>=J.y-Z&&oe.y<=J.y+J.height+Z)return J}else{const rt=Math.abs(oe.x-J.x)<=Z,rn=Math.abs(oe.x-(J.x+J.width))<=Z,Mt=Math.abs(oe.y-J.y)<=Z,_n=Math.abs(oe.y-(J.y+J.height))<=Z,St=oe.x>=J.x-Z&&oe.x<=J.x+J.width+Z,jn=oe.y>=J.y-Z&&oe.y<=J.y+J.height+Z;if(St&&(Mt||_n)||jn&&(rt||rn))return J}break;case"circle":const we=J.rx+Z,Je=J.ry+Z,at=(oe.x-J.cx)/we,Ne=(oe.y-J.cy)/Je,yt=Math.sqrt(at*at+Ne*Ne);if(J.fill){if(yt<=1)return J}else{const rt=(oe.x-J.cx)/Math.max(1,J.rx-Z),rn=(oe.y-J.cy)/Math.max(1,J.ry-Z);if(Math.sqrt(rt*rt+rn*rn)>=1&&yt<=1)return J}break;case"pen":if(J.points.length>0){for(const rt of J.points)if(Math.sqrt((oe.x-rt.x)**2+(oe.y-rt.y)**2)<=Z+2)return J}else{const rt=jb(J.pathData);if(rt&&oe.x>=rt.minX-Z&&oe.x<=rt.maxX+Z&&oe.y>=rt.minY-Z&&oe.y<=rt.maxY+Z)return J}break}}return null},[]),V=h.useCallback(oe=>{switch(oe.type){case"dot":return{x:oe.x-oe.radius,y:oe.y-oe.radius,width:oe.radius*2,height:oe.radius*2};case"square":return{x:oe.x,y:oe.y,width:oe.width,height:oe.height};case"circle":return{x:oe.cx-oe.rx,y:oe.cy-oe.ry,width:oe.rx*2,height:oe.ry*2};case"pen":if(oe.points.length>0){const re=oe.points.map(we=>we.x),le=oe.points.map(we=>we.y),Z=Math.min(...re),ae=Math.max(...re),J=Math.min(...le),ge=Math.max(...le);return{x:Z,y:J,width:ae-Z,height:ge-J}}else{const re=jb(oe.pathData);return re?{x:re.minX,y:re.minY,width:re.maxX-re.minX,height:re.maxY-re.minY}:{x:0,y:0,width:0,height:0}}}},[]),q=h.useCallback((oe,re)=>{const le=V(re),Z=8,ae={nw:{x:le.x,y:le.y},ne:{x:le.x+le.width,y:le.y},sw:{x:le.x,y:le.y+le.height},se:{x:le.x+le.width,y:le.y+le.height}};for(const[J,ge]of Object.entries(ae))if(Math.sqrt((oe.x-ge.x)**2+(oe.y-ge.y)**2)<=Z)return J;return null},[V]),Q=h.useCallback(oe=>{const re=P(oe);switch(c(!0),o){case"pen":d([re]),I(null);break;case"square":case"circle":m(re);break;case"eraser":const le=B(re,r.elements,C/2);if(le){const J=r.elements.filter(ge=>ge.id!==le.id);r.set(J)}break;case"select":const Z=r.elements.find(J=>J.selected);if(Z){const J=q(re,Z);if(J){w(J),N(V(Z)),m(re);return}}const ae=B(re,r.elements);if(ae){U.current=ae.id;let J=0,ge=0;switch(ae.type){case"dot":J=re.x-ae.x,ge=re.y-ae.y;break;case"square":J=re.x-ae.x,ge=re.y-ae.y;break;case"circle":J=re.x-ae.cx,ge=re.y-ae.cy;break;case"pen":ae.points.length>0&&(J=re.x-ae.points[0].x,ge=re.y-ae.points[0].y);break}_({x:J,y:ge});const we=r.elements.map(Je=>({...Je,selected:Je.id===ae.id}));r.set(we,!1)}else{U.current=null;const J=r.elements.map(ge=>({...ge,selected:!1}));r.set(J,!1)}break}},[o,a,r,P,B,q,V,C]),H=h.useCallback(oe=>{const re=P(oe);if(I(re),!!l)switch(o){case"pen":d(Z=>[...Z,re]);break;case"square":if(f){let Z=re.x-f.x,ae=re.y-f.y;if(z){const ge=Math.max(Math.abs(Z),Math.abs(ae));Z=Z>=0?ge:-ge,ae=ae>=0?ge:-ge}const J={id:"preview",type:"square",color:a,selected:!1,x:Z>=0?f.x:f.x+Z,y:ae>=0?f.y:f.y+ae,width:Math.abs(Z),height:Math.abs(ae),strokeWidth:C,fill:k};v(J)}break;case"circle":if(f){let Z=Math.abs(re.x-f.x),ae=Math.abs(re.y-f.y);z&&(Z=ae=Math.max(Z,ae));const J={id:"preview",type:"circle",color:a,selected:!1,cx:f.x,cy:f.y,rx:Z,ry:ae,strokeWidth:C,fill:k};v(J)}break;case"eraser":const le=B(re,r.elements,C/2);if(le){const Z=r.elements.filter(ae=>ae.id!==le.id);r.set(Z,!1)}break;case"select":if(b&&f&&x){let Z=re.x-f.x,ae=re.y-f.y;if(z&&x.width>0&&x.height>0){const ge=x.width/x.height,we=Math.abs(Z),Je=Math.abs(ae);we>Je*ge?ae=we/ge*Math.sign(ae||1):Z=Je*ge*Math.sign(Z||1)}const J=r.elements.map(ge=>{if(!ge.selected)return ge;let we={...x};switch(b){case"nw":we.x=x.x+Z,we.y=x.y+ae,we.width=x.width-Z,we.height=x.height-ae;break;case"ne":we.y=x.y+ae,we.width=x.width+Z,we.height=x.height-ae;break;case"sw":we.x=x.x+Z,we.width=x.width-Z,we.height=x.height+ae;break;case"se":we.width=x.width+Z,we.height=x.height+ae;break}switch(we.width<10&&(we.width=10),we.height<10&&(we.height=10),ge.type){case"square":return{...ge,x:we.x,y:we.y,width:we.width,height:we.height};case"circle":return{...ge,cx:we.x+we.width/2,cy:we.y+we.height/2,rx:we.width/2,ry:we.height/2};case"dot":const Je=Math.min(we.width,we.height)/2;return{...ge,x:we.x+we.width/2,y:we.y+we.height/2,radius:Math.max(2,Je)};case"pen":const at=V(ge);if(at.width===0||at.height===0)return ge;const Ne=we.width/at.width,yt=we.height/at.height,rt=ge.points.map(Mt=>({...Mt,x:we.x+(Mt.x-at.x)*Ne,y:we.y+(Mt.y-at.y)*yt})),rn=yd(rt.map(Mt=>[Mt.x,Mt.y,Mt.pressure??.5]),_d(ge.strokeWidth));return{...ge,points:rt,pathData:vd(rn)};default:return ge}});r.set(J,!1);return}if(U.current&&S){const Z=r.elements.map(ae=>{if(ae.id!==U.current)return ae;const J=re.x-S.x,ge=re.y-S.y;switch(ae.type){case"dot":return{...ae,x:J,y:ge};case"square":return{...ae,x:J,y:ge};case"circle":return{...ae,cx:J,cy:ge};case"pen":const we=J-ae.points[0].x,Je=ge-ae.points[0].y,at=ae.points.map(yt=>({...yt,x:yt.x+we,y:yt.y+Je})),Ne=yd(at.map(yt=>[yt.x,yt.y,yt.pressure??.5]),_d(ae.strokeWidth));return{...ae,points:at,pathData:vd(Ne)};default:return ae}});r.set(Z,!1)}break}},[l,o,f,a,P,r,S,b,x,B,V,z,C,k]),K=h.useCallback(()=>{if(!(!l&&!b)){switch(o){case"pen":if(u.length>1){const oe=yd(u.map(Z=>[Z.x,Z.y,Z.pressure??.5]),_d(C)),re=vd(oe),le={id:Ga(),type:"pen",color:a,selected:!1,points:u,pathData:re,strokeWidth:C};r.set([...r.elements,le])}d([]);break;case"square":if(y&&y.type==="square"){const oe={...y,id:Ga()};r.set([...r.elements,oe])}v(null),m(null);break;case"circle":if(y&&y.type==="circle"){const oe={...y,id:Ga()};r.set([...r.elements,oe])}v(null),m(null);break;case"eraser":r.set([...r.elements],!0);break;case"select":b?(r.set([...r.elements],!0),w(null),N(null),m(null)):U.current&&S&&r.set([...r.elements],!0),_(null);break}c(!1)}},[l,o,u,y,a,r,S,b,C]),Y=h.useCallback(()=>{I(null),(l||b)&&K()},[l,b,K]),ce=h.useCallback(oe=>{if(!oe){r.reset([]);return}const re=Wb(oe);r.reset(re)},[r]),me=h.useCallback(()=>$(),[$]),fe=h.useCallback(()=>{if(r.elements.find(re=>re.selected)){const re=r.elements.filter(le=>!le.selected);r.set(re),U.current=null}},[r]),ie=h.useCallback(()=>{if(r.elements.some(re=>re.selected)){const re=r.elements.map(le=>({...le,selected:!1}));r.set(re,!1),U.current=null}},[r]),he=h.useCallback(()=>{if(u.length<2)return"";const oe=yd(u.map(re=>[re.x,re.y,re.pressure??.5]),_d(C));return vd(oe)},[u,C]);return{elements:r.elements,activeTool:o,activeColor:a,isDrawing:l,currentStroke:u,previewElement:y,activeResizeHandle:b,strokeWidth:C,doFill:k,cursorPosition:R,shiftPressed:z,MIN_STROKE_WIDTH:rJ,MAX_STROKE_WIDTH:oJ,setActiveTool:i,setActiveColor:s,setStrokeWidth:T,setDoFill:D,setShiftPressed:O,handlePointerDown:Q,handlePointerMove:H,handlePointerUp:K,handlePointerLeave:Y,deleteSelected:fe,deselectAll:ie,getCurrentStrokePath:he,exportToSVG:$,getElementBounds:V,getSvgContent:me,setSvgContent:ce,undo:r.undo,redo:r.redo,clear:r.clear,canUndo:r.canUndo,canRedo:r.canRedo}}const aJ="_container_1440j_1",sJ="_canvasWrapper_1440j_13",lJ="_canvas_1440j_13",cJ="_canvasSelect_1440j_29",uJ="_canvasEraser_1440j_33",dJ="_toolbar_1440j_37",fJ="_toolButton_1440j_42",pJ="_toolButtonActive_1440j_57",hJ="_actionBar_1440j_63",mJ="_actionButton_1440j_68",gJ="_actionButtonDanger_1440j_87",yJ="_colorPicker_1440j_93",vJ="_colorSwatch_1440j_99",_J="_colorSwatchActive_1440j_111",wJ="_label_1440j_116",bJ="_selectionBox_1440j_122",EJ="_element_1440j_130",SJ="_elementSelected_1440j_134",xJ="_resizeHandle_1440j_138",CJ="_deleteButtonWrapper_1440j_148",TJ="_deleteButton_1440j_148",NJ="_toolOptionsBar_1440j_167",kJ="_optionGroup_1440j_174",AJ="_sizeSlider_1440j_180",RJ="_sizeValue_1440j_185",IJ="_checkboxLabel_1440j_191",LJ="_cursorPreview_1440j_200",OJ="_gridGroup_1440j_210",PJ="_gridLine_1440j_214",MJ="_gridLineBold_1440j_219",je={container:aJ,canvasWrapper:sJ,canvas:lJ,canvasSelect:cJ,canvasEraser:uJ,toolbar:dJ,toolButton:fJ,toolButtonActive:pJ,actionBar:hJ,actionButton:mJ,actionButtonDanger:gJ,colorPicker:yJ,colorSwatch:vJ,colorSwatchActive:_J,label:wJ,selectionBox:bJ,element:EJ,elementSelected:SJ,resizeHandle:xJ,deleteButtonWrapper:CJ,deleteButton:TJ,toolOptionsBar:NJ,optionGroup:kJ,sizeSlider:AJ,sizeValue:RJ,checkboxLabel:IJ,cursorPreview:LJ,gridGroup:OJ,gridLine:PJ,gridLineBold:MJ},DJ=[{id:"pen",label:"Pen"},{id:"square",label:"Square"},{id:"circle",label:"Circle"},{id:"select",label:"Select"},{id:"eraser",label:"Eraser"}];function FJ({activeTool:e,onToolChange:t,disabled:n}){return p("div",{className:je.toolbar,children:DJ.map(r=>p("button",{type:"button",className:j(je.toolButton,e===r.id&&je.toolButtonActive),onClick:()=>t(r.id),disabled:n,children:r.label},r.id))})}function $J({strokeWidth:e,minStrokeWidth:t,maxStrokeWidth:n,doFill:r,activeTool:o,onStrokeWidthChange:i,onFillChange:a,disabled:s}){const l=["pen","square","circle","eraser"].includes(o),c=["square","circle"].includes(o);return!l&&!c?null:L("div",{className:je.toolOptionsBar,children:[l&&L("div",{className:je.optionGroup,children:[p("span",{className:je.label,children:"Size:"}),p("input",{type:"range",min:t,max:n,value:e,onChange:u=>i(Number(u.target.value)),disabled:s,className:je.sizeSlider}),L("span",{className:je.sizeValue,children:[e,"px"]})]}),c&&L("label",{className:je.checkboxLabel,children:[p("input",{type:"checkbox",checked:r,onChange:u=>a(u.target.checked),disabled:s}),"Fill"]})]})}const BJ=[{name:"black",value:"var(--black)"},{name:"white",value:"var(--white)"},{name:"red",value:"var(--red)"},{name:"blue",value:"var(--blue)"},{name:"green",value:"var(--green)"},{name:"yellow",value:"var(--yellow)"},{name:"purple",value:"var(--purple)"},{name:"orange",value:"var(--orange)"},{name:"pink",value:"var(--pink)"},{name:"teal",value:"var(--teal)"},{name:"cyan",value:"var(--cyan)"}];function VJ({activeColor:e,onColorChange:t,disabled:n}){return L("div",{className:je.colorPicker,children:[p("span",{className:je.label,children:"Color:"}),BJ.map(r=>p("button",{type:"button",className:j(je.colorSwatch,e===r.value&&je.colorSwatchActive),style:{backgroundColor:r.value},onClick:()=>t(r.value),title:r.name,disabled:n},r.name))]})}const wd=300,ql=20,Gb=3;function UJ(){const e=[],t=Math.floor(wd/ql)-1,n=new Set([Gb*ql,wd-Gb*ql]);for(let r=1;r<=t;r++){const o=r*ql,i=n.has(o);e.push(p("line",{x1:o,y1:0,x2:o,y2:wd,className:i?je.gridLineBold:je.gridLine},`v-${r}`))}for(let r=1;r<=t;r++){const o=r*ql,i=n.has(o);e.push(p("line",{x1:0,y1:o,x2:wd,y2:o,className:i?je.gridLineBold:je.gridLine},`h-${r}`))}return p("g",{className:je.gridGroup,children:e})}function Hb(e,t=!1){const n=j(je.element,e.selected&&je.elementSelected),r=t?`preview-${e.id}`:e.id;switch(e.type){case"pen":return p("path",{d:e.pathData,fill:e.color,className:n},r);case"dot":return p("circle",{cx:e.x,cy:e.y,r:e.radius,fill:e.color,className:n},r);case"square":return p("rect",{x:e.x,y:e.y,width:e.width,height:e.height,fill:e.fill?e.color:"none",stroke:e.fill?"none":e.color,strokeWidth:e.fill?void 0:e.strokeWidth,className:n},r);case"circle":return p("ellipse",{cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry,fill:e.fill?e.color:"none",stroke:e.fill?"none":e.color,strokeWidth:e.fill?void 0:e.strokeWidth,className:n},r)}}function zJ(e,t){if(!e.selected)return null;const n=t(e),r=4;return p("rect",{x:n.x-r,y:n.y-r,width:n.width+r*2,height:n.height+r*2,className:je.selectionBox},`selection-${e.id}`)}function jJ(e,t){if(!e.selected)return null;const n=t(e),r=6;return[{handle:"nw",x:n.x,y:n.y,cursor:"nwse-resize"},{handle:"ne",x:n.x+n.width,y:n.y,cursor:"nesw-resize"},{handle:"sw",x:n.x,y:n.y+n.height,cursor:"nesw-resize"},{handle:"se",x:n.x+n.width,y:n.y+n.height,cursor:"nwse-resize"}].map(({handle:i,x:a,y:s,cursor:l})=>p("circle",{cx:a,cy:s,r,className:je.resizeHandle,style:{cursor:l}},`handle-${e.id}-${i}`))}function WJ({elements:e,activeTool:t,activeColor:n,currentStrokePath:r,previewElement:o,cursorPosition:i,strokeWidth:a,onPointerDown:s,onPointerMove:l,onPointerUp:c,onPointerLeave:u,onDeleteSelected:d,getElementBounds:f,disabled:m}){const y=i&&["pen","square","circle","eraser"].includes(t),v=T=>{m||(T.preventDefault(),s(T))},S=T=>{m||(T.preventDefault(),l(T))},_=T=>{m||(T.preventDefault(),c())},b=T=>{m||s(T)},w=T=>{m||l(T)},x=e.find(T=>T.selected),N=t==="select"&&x;let C=null;if(N&&x){const T=f(x);C={x:T.x+T.width,y:T.y-24}}return L("div",{className:je.canvasWrapper,children:[L("svg",{className:j(je.canvas,t==="select"&&je.canvasSelect,t==="eraser"&&je.canvasEraser),width:300,height:300,viewBox:"0 0 300 300",onMouseDown:b,onMouseMove:w,onMouseUp:c,onMouseLeave:u,onTouchStart:v,onTouchMove:S,onTouchEnd:_,style:m?{opacity:.6,pointerEvents:"none"}:void 0,children:[UJ(),e.map(T=>Hb(T)),N&&e.map(T=>zJ(T,f)),N&&e.map(T=>jJ(T,f)),r&&p("path",{d:r,fill:n,opacity:.8}),o&&Hb({...o,selected:!1},!0),y&&p("circle",{cx:i.x,cy:i.y,r:a/2,className:je.cursorPreview})]}),N&&C&&!m&&p("div",{className:je.deleteButtonWrapper,style:{left:C.x,top:C.y},children:p(xe,{iconName:"trash",iconSize:14,onClick:d,className:je.deleteButton,title:"Delete (Del)"})})]})}function GJ({canUndo:e,canRedo:t,hasSelection:n,onUndo:r,onRedo:o,onClear:i,onDelete:a,disabled:s}){return L("div",{className:je.actionBar,children:[p("button",{type:"button",className:je.actionButton,onClick:r,disabled:s||!e,children:"Undo"}),p("button",{type:"button",className:je.actionButton,onClick:o,disabled:s||!t,children:"Redo"}),p("button",{type:"button",className:j(je.actionButton,je.actionButtonDanger),onClick:a,disabled:s||!n,children:"Delete"}),p("button",{type:"button",className:j(je.actionButton,je.actionButtonDanger),onClick:i,disabled:s,children:"Clear"})]})}const HJ=h.forwardRef(function({value:t,onChange:n,disabled:r,readOnly:o},i){const a=r||o,{elements:s,activeTool:l,activeColor:c,previewElement:u,strokeWidth:d,doFill:f,cursorPosition:m,MIN_STROKE_WIDTH:y,MAX_STROKE_WIDTH:v,setActiveTool:S,setActiveColor:_,setStrokeWidth:b,setDoFill:w,setShiftPressed:x,handlePointerDown:N,handlePointerMove:C,handlePointerUp:T,handlePointerLeave:k,deleteSelected:D,deselectAll:R,getCurrentStrokePath:I,getElementBounds:z,getSvgContent:O,setSvgContent:U,undo:W,redo:$,clear:M,canUndo:P,canRedo:B}=iJ({value:t,onChange:n});h.useImperativeHandle(i,()=>({getSvg:O,setSvg:U,clear:M}),[O,U,M]);const V=s.some(Q=>Q.selected),q=h.useCallback(Q=>{l==="select"&&Q!=="select"&&R(),S(Q)},[l,S,R]);return h.useEffect(()=>{if(a)return;const Q=K=>{if(K.key==="Shift"&&x(!0),K.key==="Delete"||K.key==="Backspace"){if(K.target instanceof HTMLInputElement||K.target instanceof HTMLTextAreaElement)return;K.preventDefault(),D()}},H=K=>{K.key==="Shift"&&x(!1)};return window.addEventListener("keydown",Q),window.addEventListener("keyup",H),()=>{window.removeEventListener("keydown",Q),window.removeEventListener("keyup",H)}},[D,a,x]),L("div",{className:je.container,children:[p(FJ,{activeTool:l,onToolChange:q,disabled:a}),p($J,{strokeWidth:d,minStrokeWidth:y,maxStrokeWidth:v,doFill:f,activeTool:l,onStrokeWidthChange:b,onFillChange:w,disabled:a}),p(VJ,{activeColor:c,onColorChange:_,disabled:a}),p(WJ,{elements:s,activeTool:l,activeColor:c,currentStrokePath:I(),previewElement:u,cursorPosition:m,strokeWidth:d,onPointerDown:N,onPointerMove:C,onPointerUp:T,onPointerLeave:k,onDeleteSelected:D,getElementBounds:z,disabled:a}),p(GJ,{canUndo:P,canRedo:B,hasSelection:V,onUndo:W,onRedo:$,onClear:M,onDelete:D,disabled:a})]})}),XJ="_container_18rh6_1",YJ="_label_18rh6_7",qJ="_requiredAsterisk_18rh6_13",KJ="_warning_18rh6_18",bd={container:XJ,label:YJ,requiredAsterisk:qJ,warning:KJ};function Kl(e){if(!e)return!0;const t=e.match(/<svg[^>]*>([\s\S]*?)<\/svg>/);return t?t[1].trim()==="":!0}const ck=h.forwardRef((e,t)=>{const{registerSmartFieldProps:n,fieldState:r,utils:o,displayName:i,disabled:a,readOnly:s,className:l,style:c,renderWarning:u,onSvgChange:d}=e,[f,m]=h.useState(n.defaultValue||null),y=h.useRef(null),v=h.useRef(null),S=h.useRef(n.defaultValue||null),_=!!(a||n.disabled),b=!!(s||n.readOnly),w=h.useCallback(R=>{var I;if(y.current){y.current.value=R||"";const z={target:y.current,currentTarget:y.current,type:"change",preventDefault:()=>{},stopPropagation:()=>{},nativeEvent:new Event("change")};(I=n.onChange)==null||I.call(n,z)}},[n]),x=h.useCallback(R=>{m(R);const I=Kl(R);if(o!=null&&o.validatorFunction){const O=o.validatorFunction(I?null:R);r.warning.setWarning(O),r.isInputValid.setIsInputValid(!O)}r.isEmpty.setIsEmpty(I),r.isTouched.setIsTouched(!0);const z=R!==S.current;r.isChanged.setIsChanged(z),w(I?null:R),d==null||d(I?null:R)},[o,r,w,d]),N=h.useCallback(R=>{v.current&&v.current.setSvg(R),m(R);const I=Kl(R);if(o!=null&&o.validatorFunction){const O=o.validatorFunction(I?null:R);r.warning.setWarning(O),r.isInputValid.setIsInputValid(!O)}r.isEmpty.setIsEmpty(I),r.isTouched.setIsTouched(!0);const z=R!==S.current;r.isChanged.setIsChanged(z),w(I?null:R),d==null||d(I?null:R)},[o,r,w,d]),C=h.useCallback(()=>{if(v.current&&v.current.clear(),m(null),o!=null&&o.validatorFunction){const I=o.validatorFunction(null);r.warning.setWarning(I),r.isInputValid.setIsInputValid(!I)}r.isEmpty.setIsEmpty(!0),r.isTouched.setIsTouched(!0);const R=S.current!==null;r.isChanged.setIsChanged(R),w(null),d==null||d(null)},[o,r,w,d]),T=h.useCallback(()=>{const R=S.current;if(v.current&&v.current.setSvg(R),m(R),o!=null&&o.validatorFunction){const I=o.validatorFunction(R);r.warning.setWarning(I),r.isInputValid.setIsInputValid(!I)}r.isEmpty.setIsEmpty(Kl(R)),r.isTouched.setIsTouched(!1),r.isChanged.setIsChanged(!1),w(R),d==null||d(R)},[o,r,w,d]);h.useImperativeHandle(n.ref,()=>({get value(){if(v.current){const R=v.current.getSvg();return Kl(R)?null:R}return f},reset:T,setSvg:N,clear:C}),[f,T,N,C]),h.useImperativeHandle(t,()=>({get value(){if(v.current){const R=v.current.getSvg();return Kl(R)?null:R}return f},reset:T,setSvg:N,clear:C}),[f,T,N,C]);const k=h.useCallback(R=>R.warning?p("p",{className:R.className,children:R.warning.message}):null,[]),D={warning:r.warning.value,className:bd.warning};return L("div",{className:j(l,bd.container),style:c,children:[i&&L("label",{className:bd.label,children:[i,n.required&&p("span",{className:bd.requiredAsterisk,children:"*"})]}),p("input",{type:"hidden",ref:y,name:n.name,value:f||"",disabled:n.disabled}),p(HJ,{ref:v,value:f,onChange:x,disabled:_,readOnly:b}),u?u(D):k(D)]})});ck.displayName="SvgDrawerInput";function uk({registerField:e,mode:t,initialData:n,className:r}){const o=h.useRef(!1),i=h.useMemo(()=>ik({required:{value:!0,message:"Glyph name is required"}}),[]),a=e("glyphSvg",{defaultValue:t==="edit"&&(n!=null&&n.svg_data)?n.svg_data:void 0}),s=e("glyphName",{defaultValue:t==="edit"&&(n!=null&&n.name)?n.name:void 0,validation:i}),l=e("category",{defaultValue:t==="edit"&&(n!=null&&n.category)?n.category:void 0}),c=e("notes",{defaultValue:t==="edit"&&(n!=null&&n.notes)?n.notes:void 0});return h.useEffect(()=>{t==="edit"&&n&&!o.current&&(o.current=!0,setTimeout(()=>{var m,y,v;const u=(m=s.registerSmartFieldProps.ref)==null?void 0:m.current;u&&n.name&&(u.value=n.name,s.fieldState.isEmpty.setIsEmpty(!1));const d=(y=l.registerSmartFieldProps.ref)==null?void 0:y.current;d&&n.category&&(d.value=n.category,l.fieldState.isEmpty.setIsEmpty(!1));const f=(v=c.registerSmartFieldProps.ref)==null?void 0:v.current;f&&n.notes&&(f.value=n.notes,c.fieldState.isEmpty.setIsEmpty(!1))},0))},[t,n,s,l,c]),L("div",{className:j(ne.flexCol,ne.flexGapM,r),children:[p("div",{className:j(st.parentWidth,ne.flex,ne.justifyContentCenter),children:p(et,{className:j(st.fitContent),content:t==="edit"?"Edit your glyph drawing":"Draw your glyph here",children:p(ck,{...a})})}),p(et,{content:"The name of this glyph",children:p(Fo,{displayName:"Glyph Name",asInput:!0,...s})}),p(et,{content:"Category to organize your glyphs (e.g., Vowels, Consonants, Numbers)",children:p(Fo,{displayName:"Category",asInput:!0,...l})}),p(et,{className:j(st.parentWidth),content:"Additional notes about this glyph",children:p(Fo,{displayName:"Notes",asInput:!1,...c})})]})}const ZJ="_modalContentTemplate_8b73h_2",QJ="_modalContent_8b73h_2",JJ="_errorMessage_8b73h_13",eee="_modalButtons_8b73h_22",tee="_deleteConfirm_8b73h_27",nee="_warningText_8b73h_32",$a={modalContentTemplate:ZJ,modalContent:QJ,errorMessage:JJ,modalButtons:eee,deleteConfirm:tee,warningText:nee};function dk({mode:e,initialData:t,onSuccess:n,onCancel:r,onError:o,onSubmittingChange:i,className:a,extraActions:s}){const{registerField:l,unregisterField:c,registerForm:u,isFormValid:d}=cs({mode:"onChange"}),[f,m]=h.useState(null),[y,v]=h.useState(!1),S=h.useRef(!1),_=eC(),b=u("glyphForm",{submitFunc:async w=>{var x,N,C,T,k;if(S.current)return{success:!1,error:"Already submitting"};S.current=!0,v(!0),i&&i(!0);try{m(null);const D=w;if(!D.glyphSvg||D.glyphSvg.trim()==="")throw new Error("Please draw a glyph");if(!D.glyphName||D.glyphName.trim()==="")throw new Error("Glyph name is required");let R;if(e==="create")R=_.glyph.create({name:D.glyphName.trim(),svg_data:D.glyphSvg,category:((x=D.category)==null?void 0:x.trim())||void 0,notes:((N=D.notes)==null?void 0:N.trim())||void 0});else{if(!t)throw new Error("No glyph to edit");R=_.glyph.update(t.id,{name:D.glyphName.trim(),svg_data:D.glyphSvg,category:((C=D.category)==null?void 0:C.trim())||void 0,notes:((T=D.notes)==null?void 0:T.trim())||void 0})}if(!R.success)throw new Error(((k=R.error)==null?void 0:k.message)||(e==="create"?"Failed to create glyph":"Failed to update glyph"));const I=R.data;return m(null),S.current=!1,v(!1),i&&i(!1),n&&n(I),{success:!0,data:I}}catch(D){S.current=!1,v(!1),i&&i(!1);const R=D instanceof Error?D.message:e==="create"?"Failed to create glyph":"Failed to update glyph";return m(R),o&&o(R),console.error("[GlyphForm] Error:",D),{success:!1,error:R}}}});return L("div",{className:j(a),children:[f&&p("div",{className:$a.errorMessage,children:f}),L(ba,{...b,registerField:l,unregisterField:c,isFormValid:d,className:j(ne.flexCol,ne.flexGapM),children:[p(uk,{registerField:l,mode:e,initialData:t}),L("div",{className:j(ne.flex,ne.flexGapM,$a.modalButtons),children:[p(xe,{className:j(qe.primary),type:"submit",disabled:y,children:y?"Saving...":e==="create"?"Save Glyph":"Save Changes"}),p(xe,{className:j(qe.secondary),onClick:()=>r&&r(),type:"button",disabled:y,children:"Cancel"}),s&&s(y)]})]})]})}function fk({onSuccess:e,onCancel:t,className:n}){const[r,o]=h.useState(null);return L("div",{className:j(n),children:[r&&p("div",{className:Wi.errorMessage,children:r}),p(dk,{mode:"create",onSuccess:i=>{o(null),e&&e(i)},onCancel:()=>t&&t(),onError:i=>o(i)})]})}function ree({isOpen:e,setIsOpen:t,onGlyphCreated:n}){const[r,o]=h.useState(null),i=()=>{o(null),t(!1)};return p(zn,{isOpen:e,setIsOpen:t,onClose:i,allowClose:!0,children:L("div",{className:j(Wi.modalContent),children:[p("h2",{className:zo.underlineHighlightColorPrimary,children:"Create New Glyph"}),r&&p("div",{className:Wi.errorMessage,children:r}),p(fk,{onSuccess:a=>{o(null),t(!1),setTimeout(()=>n(a),20)},onCancel:()=>i()})]})})}function oee({isOpen:e,setIsOpen:t,glyph:n,onGlyphUpdated:r,onGlyphDeleted:o,showDelete:i=!0}){const[a,s]=h.useState(null),[l,c]=h.useState(!1),[u,d]=h.useState(!1),[f,m]=h.useState(!1),y=eC();h.useEffect(()=>{e&&(s(null),d(!1))},[e,n==null?void 0:n.id]);const v=()=>{s(null),d(!1),t(!1)},S=async()=>{var _;if(!(!n||f)){m(!0);try{const b=y.glyph.forceDelete(n.id);if(!b.success)throw new Error(((_=b.error)==null?void 0:_.message)||"Failed to delete glyph");d(!1),t(!1),setTimeout(()=>o==null?void 0:o(n.id),20)}catch(b){console.error("[EditGlyphModal] Delete error:",b),s(b instanceof Error?b.message:"Failed to delete glyph")}finally{m(!1)}}};return n?p(zn,{isOpen:e,setIsOpen:t,onClose:v,allowClose:!l&&!f,children:L("div",{className:j($a.modalContent),children:[L("h2",{className:zo.underlineHighlightColorPrimary,children:["Edit Glyph: ",n.name]}),a&&p("div",{className:$a.errorMessage,children:a}),u?L("div",{className:$a.deleteConfirm,children:[L("p",{children:['Are you sure you want to delete "',n.name,'"?']}),p("p",{className:$a.warningText,children:" This will remove the glyph from this grapheme."}),L("div",{className:j(ne.flex,ne.flexGapM,$a.modalButtons),children:[p(Ke,{onClick:()=>d(!1),disabled:f,children:"Cancel"}),p(Ke,{onClick:S,disabled:f,style:{background:"var(--danger)",color:"white"},children:f?"Deleting...":"Delete Glyph"})]})]}):p(dk,{mode:"edit",initialData:n,onSuccess:_=>{t(!1),setTimeout(()=>r(_),20)},onCancel:v,onError:_=>s(_),onSubmittingChange:_=>c(_),extraActions:_=>i&&p(xe,{className:j(qe.danger),type:"button",iconName:"trash",onClick:()=>d(!0),disabled:_,children:"Delete"})})]})}):null}const iee="_cardLink_ntfqc_2",aee="_container_ntfqc_8",see="_cardWrapper_ntfqc_19",lee="_topRight_ntfqc_39",cee="_name_ntfqc_45",uee="_svgWrapper_ntfqc_54",dee="_svgContainer_ntfqc_69",Ti={cardLink:iee,container:aee,cardWrapper:see,topRight:lee,name:cee,svgWrapper:uee,svgContainer:dee};function pk({glyph:e,onDelete:t,disableLink:n=!1,interactionMode:r,onClick:o,hideDelete:i=!1}){const a=e.usageCount??0,s=a===0?"Not used":`Used by ${a} grapheme${a===1?"":"s"}`,l=r??(n?"none":"route"),c=L("div",{className:j(ne.flexColumn,Ti.container),children:[!i&&t&&p("div",{className:Ti.topRight,children:p(xe,{iconName:"trash",iconColor:"var(--status-bad)",onClick:u=>{u.preventDefault(),u.stopPropagation(),t(e.id)},"aria-label":`Delete glyph ${e.name}`})}),p("div",{className:Ti.name,children:e.name}),p("div",{className:Ti.svgWrapper,children:p("div",{className:Ti.svgContainer,dangerouslySetInnerHTML:{__html:e.svg_data}})})]});return l==="modal"?p(et,{content:s,className:st.fitContent,children:p("div",{className:Ti.cardWrapper,onClick:()=>o==null?void 0:o(e),role:"button",tabIndex:0,onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),o==null||o(e))},children:c})}):l==="none"?p(et,{content:s,className:st.fitContent,children:p("div",{className:Ti.cardWrapper,children:c})}):p(et,{content:s,className:st.fitContent,children:p(mt,{to:`/script-maker/glyphs/db/${e.id}`,className:Ti.cardLink,children:c})})}const fee="_glyphSelectionContainer_1r5qr_3",pee="_glyphSelectionBox_1r5qr_12",hee="_emptyState_1r5qr_23",mee="_selectedGlyphs_1r5qr_31",gee="_glyphItem_1r5qr_38",yee="_glyphSvg_1r5qr_55",vee="_glyphName_1r5qr_70",_ee="_glyphCategory_1r5qr_76",wee="_removeButton_1r5qr_82",bee="_glyphButtons_1r5qr_111",Zl={glyphSelectionContainer:fee,glyphSelectionBox:pee,emptyState:hee,selectedGlyphs:mee,glyphItem:gee,glyphSvg:yee,glyphName:vee,glyphCategory:_ee,removeButton:wee,glyphButtons:bee};function Ql(e,t){var o;const n=(o=e.registerSmartFieldProps.ref)==null?void 0:o.current;if(!n)return!1;n.value=t;const r=t.trim()==="";if(e.fieldState.isEmpty.setIsEmpty(r),e.fieldState.isTouched.setIsTouched(!0),e.fieldState.isChanged.setIsChanged(!0),e.utils.validatorFunction){const i=e.utils.validatorFunction(t);e.fieldState.warning.setWarning(i),e.fieldState.isInputValid.setIsInputValid(i===null)}return!0}function Xb(e){var n;const t=(n=e.registerSmartFieldProps.ref)==null?void 0:n.current;return(t==null?void 0:t.value)??""}function Eee(e){return{...e,usageCount:0}}function hk({registerField:e,mode:t,initialData:n,className:r,onSelectedGlyphsChange:o,selectedGlyphs:i,defaultPronunciations:a}){const s=h.useRef(!1),[l,c]=h.useState(()=>t==="edit"&&(n!=null&&n.glyphs)?n.glyphs:[]),u=i??l,d=h.useCallback(O=>{if(i!==void 0){const U=typeof O=="function"?O(i):O;o==null||o(U)}else c(O)},[i,o]);h.useEffect(()=>{i===void 0&&o&&o(l)},[l,i,o]);const[f,m]=h.useState(!1),[y,v]=h.useState(null),[S,_]=h.useState(!1),b=h.useMemo(()=>a&&a.length>0?a:t==="edit"&&(n!=null&&n.phonemes)&&n.phonemes.length>0?n.phonemes.map(O=>({pronunciation:O.phoneme,useInAutoSpelling:O.use_in_auto_spelling})):[{pronunciation:"",useInAutoSpelling:!0}],[t,n==null?void 0:n.phonemes,a]),w=h.useMemo(()=>ik({required:{value:!0,message:"Grapheme name is required"}}),[]),x=e("graphemeName",{defaultValue:t==="edit"&&(n!=null&&n.name)?n.name:void 0,validation:w}),N=e("category",{defaultValue:t==="edit"&&(n!=null&&n.category)?n.category:void 0}),C=e("notes",{defaultValue:t==="edit"&&(n!=null&&n.notes)?n.notes:void 0}),T=e("pronunciations",{defaultValue:b});h.useEffect(()=>{t==="edit"&&n&&!s.current&&(s.current=!0,setTimeout(()=>{n.name&&Ql(x,n.name),n.category&&Ql(N,n.category),n.notes&&Ql(C,n.notes)},0))},[t,n,x,N,C]);const k=h.useCallback(O=>{d(U=>{if(U.some(M=>M.id===O.id))return U;const W=U.length===0,$=[...U,O];return W&&setTimeout(()=>{try{const M=Xb(x),P=Xb(N);M.trim()===""&&O.name&&Ql(x,O.name),P.trim()===""&&O.category&&Ql(N,O.category)}catch(M){console.warn("[GraphemeFormFields] Failed to auto-fill form fields:",M)}},0),$})},[d,x,N]),D=h.useCallback(O=>{d(U=>U.filter(W=>W.id!==O))},[d]),R=h.useCallback(O=>{const U={id:O.id,name:O.name,svg_data:O.svg_data,category:O.category,notes:O.notes,created_at:O.created_at,updated_at:O.updated_at};v(U),_(!0)},[]),I=h.useCallback(O=>{d(U=>U.map(W=>W.id===O.id?O:W)),v(null)},[d]),z=h.useCallback(O=>{d(U=>U.filter(W=>W.id!==O)),v(null)},[d]);return L(gt,{children:[L("div",{className:j(r),children:[L("div",{className:j(Zl.glyphSelectionContainer),children:[p("h3",{children:"Glyphs"}),L("div",{className:j(Zl.glyphSelectionBox),children:[u.length===0?p("p",{className:Zl.emptyState,children:"No glyphs selected"}):p("div",{className:j(Zl.selectedGlyphs),children:u.map(O=>p(pk,{glyph:Eee(O),onDelete:D,interactionMode:"modal",onClick:R},O.id))}),L("div",{className:j(Zl.glyphButtons),children:[p(xe,{type:"button",onClick:()=>m(!0),className:j(qe.primary),children:"Add New Glyph"}),p(xe,{type:"button",disabled:!0,className:j(qe.secondary),title:"Select from existing glyphs (coming soon)",children:"Select Existing Glyph"})]})]})]}),L("div",{className:j(ne.flexCol,ne.flexGapM),children:[p(et,{content:"The name of the grapheme",children:p(Fo,{displayName:"Grapheme Name",asInput:!0,...x})}),p(et,{content:"Category to organize your graphemes (e.g., Vowels, Consonants, Numbers). Inherited from first glyph but can be changed.",children:p(Fo,{displayName:"Category",asInput:!0,...N})}),p(et,{className:j(st.parentWidth),content:"Additional notes, usage examples, or etymology information",children:p(Fo,{displayName:"Notes",asInput:!1,...C})})]}),p("h2",{className:zo.underlineHighlightColorPrimary,children:"Pronunciation"}),p("div",{children:p(ak,{...T,defaultValue:b,maxRows:10,requirePronunciation:!0})})]}),p(ree,{isOpen:f,setIsOpen:m,onGlyphCreated:k}),p(oee,{isOpen:S,setIsOpen:_,glyph:y,onGlyphUpdated:I,onGlyphDeleted:z,showDelete:!0})]})}function See(){const{registerField:e,unregisterField:t,registerForm:n,isFormValid:r}=cs({mode:"onChange"}),o=An(),[i]=AL(),a=i.get("phoneme")||void 0,{api:s,isLoading:l,error:c}=Xt(),[u,d]=h.useState([]),f=h.useCallback(v=>{d(v)},[]),m=h.useMemo(()=>{if(a)return[{pronunciation:a,useInAutoSpelling:!0}]},[a]),y=n("graphemeForm",{submitFunc:async v=>{var S,_,b,w;try{const x=v;if(u.length===0)throw new Error("Please add at least one glyph");if(!x.graphemeName||x.graphemeName.trim()==="")throw new Error("Grapheme name is required");const N={name:x.graphemeName.trim(),category:((S=x.category)==null?void 0:S.trim())||void 0,notes:((_=x.notes)==null?void 0:_.trim())||void 0,glyphs:u.map((T,k)=>({glyph_id:T.id,position:k})),phonemes:((b=x.pronunciations)==null?void 0:b.filter(T=>T.pronunciation&&T.pronunciation.trim()!=="").map(T=>({phoneme:T.pronunciation.trim(),use_in_auto_spelling:T.useInAutoSpelling})))||[]},C=s.grapheme.create(N);if(!C.success)throw new Error(((w=C.error)==null?void 0:w.message)||"Failed to save grapheme");return console.log("[NewGraphemeForm] Saved grapheme:",C.data),d([]),C.data&&C.data.id?o(`/script-maker/grapheme/db/${C.data.id}`):o("/script-maker"),{success:!0,data:C.data}}catch(x){return console.error("[NewGraphemeForm] Failed to save:",x),{success:!1,error:x instanceof Error?x.message:"Failed to save grapheme"}}}});return l?p("div",{className:j(Wi.formContainer),children:"Loading database..."}):c?L("div",{className:j(Wi.formContainer),children:["Database error: ",c.message]}):L(ba,{...y,registerField:e,unregisterField:t,isFormValid:r,className:j(Wi.formContainer),children:[p("h2",{className:zo.underlineHighlightColorPrimary,children:a?`New Grapheme for "${a}"`:"New Grapheme"}),p(hk,{registerField:e,mode:"create",selectedGlyphs:u,onSelectedGlyphsChange:f,defaultPronunciations:m}),p(xe,{className:j(Wi.saveGraphemeButton,qe.primary),type:"submit",children:"Save Grapheme"})]})}function xee({graphemeData:e}){return L("div",{className:"detailed-grapheme-display",children:[L("div",{className:"detailed-grapheme-left",children:[p("div",{className:"detailed-grapheme-svg",children:p(wa,{glyphs:e.glyphs,strategy:"ltr",config:{glyphWidth:96,glyphHeight:96,spacing:4,padding:8},emptyContent:p("span",{children:"No glyphs"})})}),p("h2",{className:"detailed-grapheme-name",children:e.name}),e.glyphs.length>1&&L("span",{className:"glyph-count",children:[e.glyphs.length," glyphs"]})]}),L("div",{className:"detailed-grapheme-right",children:[p("h3",{className:"pronunciation-header",children:"Pronunciations"}),p("div",{className:"pronunciation-container",children:e.phonemes.length>0?e.phonemes.map(t=>L("div",{className:"pronunciation-item",children:[L("span",{className:"phoneme-symbol",children:["/",t.phoneme,"/"]}),t.context&&p("span",{className:"phoneme-context",children:t.context}),t.use_in_auto_spelling&&p("span",{className:"auto-spelling-badge",children:"Auto"})]},t.id)):p("p",{className:"no-phonemes",children:"No pronunciations defined"})})]})]})}const Cee="_compactCard_1lmct_1",Tee="_clickable_1lmct_13",Nee="_name_1lmct_23",kee="_svgContainer_1lmct_35",Aee="_pronunciation_1lmct_50",Jl={compactCard:Cee,clickable:Tee,name:Nee,svgContainer:kee,pronunciation:Aee};function k0({graphemeData:e,onClick:t}){const n=e.phonemes.find(r=>r.use_in_auto_spelling)||e.phonemes[0];return L("div",{className:j(Jl.compactCard,{[Jl.clickable]:!!t}),onClick:t,children:[p("h3",{className:Jl.name,children:e.name}),p("div",{className:Jl.svgContainer,children:p(wa,{glyphs:e.glyphs,strategy:"ltr",config:{glyphWidth:56,glyphHeight:56,spacing:2,padding:4},emptyContent:p("span",{children:""})})}),p("span",{className:Jl.pronunciation,children:n?`/${n.phoneme}/`:""})]})}const Ree=[{value:"name-asc",displayComponent:p("span",{children:"Name (A-Z)"})},{value:"name-desc",displayComponent:p("span",{children:"Name (Z-A)"})},{value:"glyphs-desc",displayComponent:p("span",{children:"Most Glyphs"})},{value:"glyphs-asc",displayComponent:p("span",{children:"Fewest Glyphs"})}],Iee=[12,24,48,96];function mk({graphemes:e,isLoading:t,error:n,defaultViewMode:r="expanded",onGraphemeClick:o,selectionMode:i=!1,onSelect:a}){const s=Xt(),{api:l,refresh:c,data:u,isLoading:d,error:f}=s||{},m=e??(u==null?void 0:u.graphemesComplete)??[],y=t??!!d,v=n??f??null,[S,_]=h.useState(null),[b,w]=h.useState(!1),x=ie=>ie==="expanded"?"detailed":"compact",[N,C]=h.useState(x(r)),[T,k]=h.useState(""),[D,R]=h.useState("name-asc"),[I,z]=h.useState(1),[O,U]=h.useState(24),W=An(),$=h.useCallback(ie=>{if(i&&a){a(ie);return}W(`/script-maker/grapheme/db/${ie.id}`)},[W,i,a]),M=o??$,P=h.useMemo(()=>{let ie=m;if(T.trim()){const he=T.toLowerCase().trim();ie=ie.filter(oe=>!!(oe.name.toLowerCase().includes(he)||oe.phonemes.some(re=>re.phoneme.toLowerCase().includes(he))||oe.glyphs.some(re=>re.name.toLowerCase().includes(he))))}return ie=[...ie].sort((he,oe)=>{switch(D){case"name-asc":return he.name.localeCompare(oe.name);case"name-desc":return oe.name.localeCompare(he.name);case"glyphs-desc":return oe.glyphs.length-he.glyphs.length;case"glyphs-asc":return he.glyphs.length-oe.glyphs.length;default:return 0}}),ie},[m,T,D]),B=Math.max(1,Math.ceil(P.length/O)),V=Math.min(I,B);V!==I&&z(V);const q=h.useMemo(()=>{const ie=(V-1)*O;return P.slice(ie,ie+O)},[P,V,O]),Q=h.useCallback(ie=>{k(ie),z(1)},[]),H=h.useCallback(ie=>{M&&M(ie)},[M]),K=h.useCallback((ie,he)=>{he==null||he.stopPropagation(),_(ie)},[]),Y=h.useCallback(async ie=>{var he;if(ie!==null){w(!0);try{const oe=l.grapheme.delete(ie);if(!oe.success)console.error("Failed to delete grapheme:",(he=oe.error)==null?void 0:he.message);else try{c==null||c()}catch{}_(null)}catch(oe){console.error("Failed to delete grapheme",oe)}finally{w(!1)}}},[l,c]),ce=h.useCallback(ie=>L("div",{onClick:()=>M==null?void 0:M(ie),style:{cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease",borderRadius:"8px",position:"relative"},className:"grapheme-clickable",role:"button",tabIndex:0,onKeyDown:he=>{(he.key==="Enter"||he.key===" ")&&(he.preventDefault(),M(ie))},onMouseEnter:he=>{he.currentTarget.style.transform="translateY(-2px)",he.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)"},onMouseLeave:he=>{he.currentTarget.style.transform="translateY(0)",he.currentTarget.style.boxShadow="none"},children:[!i&&p("div",{style:{position:"absolute",top:8,right:8,zIndex:10},children:p(xe,{iconName:"trash",iconColor:"var(--status-bad)",onClick:he=>K(ie.id,he),"aria-label":`Delete grapheme ${ie.name}`})}),p(xee,{graphemeData:ie})]}),[M,K,i]),me=h.useCallback(ie=>L("div",{style:{position:"relative"},children:[!i&&p("div",{style:{position:"absolute",top:6,right:6,zIndex:10},children:p(xe,{iconName:"trash",iconColor:"var(--status-bad)",onClick:he=>K(ie.id,he),"aria-label":`Delete grapheme ${ie.name}`})}),p(k0,{graphemeData:ie,onClick:()=>M(ie)})]}),[M,K,i]),fe=h.useCallback(({searchQuery:ie,hasActiveFilters:he})=>ie||he?L("div",{style:{textAlign:"center",padding:"2rem"},children:[L("p",{children:['No graphemes match your search "',ie,'"']}),p("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Try adjusting your search terms"})]}):i?L("div",{style:{textAlign:"center",padding:"2rem"},children:[p("p",{children:"No graphemes available for selection."}),p("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:"Create some graphemes first in the Script Maker."})]}):L("div",{style:{textAlign:"center",padding:"2rem"},children:[p("p",{children:"No graphemes found. Create one to get started!"}),p(xe,{as:mt,to:"/script-maker/create",iconName:"plus-lg",className:qe.primary,style:{marginTop:"1rem"},children:"Add Your First Glyph"})]}),[i]);return L(gt,{children:[p(S0,{data:q,keyExtractor:ie=>ie.id,renderDetailed:ce,renderCompact:me,minItemWidth:"200px",itemGap:"1rem",searchFn:Q,searchQuery:T,onSearchQueryChange:k,searchPlaceholder:"Search by name, pronunciation...",sortOptions:Ree,sortBy:D,setSortBy:R,viewMode:N,setViewMode:C,showDisplaySwitch:!0,curPage:V,setCurPage:z,maxPage:B,maxResultPerPage:O,setMaxResultPerPage:U,maxResultOptions:Iee,totalCount:P.length,isLoading:y,error:v,emptySlot:fe,onItemActivate:H,keyboardNavigation:{enabled:!0,mode:"roving",wrapAround:!0},virtualization:{autoEnableThreshold:100,estimatedItemHeight:N==="detailed"?150:200},ariaLabel:"Grapheme gallery",styling:{content:{style:{padding:"1rem 0.2rem"}}}}),p(zn,{isOpen:S!==null,setIsOpen:ie=>{ie||_(null)},onClose:()=>_(null),allowClose:!0,children:L("div",{style:{padding:"1rem",minWidth:320},children:[p("h2",{style:{marginTop:0},children:"Delete grapheme"}),p("p",{children:"Are you sure you would like to delete this grapheme?"}),L("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"1rem"},children:[p(Ke,{onClick:()=>_(null),disabled:b,children:"Cancel"}),p(Ke,{onClick:()=>Y(S),disabled:b,style:{background:"var(--danger)",color:"white"},children:b?"Deleting...":"Delete grapheme"})]})]})})]})}const Lee="_switchBackground_5s6sw_5",Oee="_switchKnob_5s6sw_20",Pee="_disabled_5s6sw_28",Yb={switchBackground:Lee,switchKnob:Oee,disabled:Pee},Mee={nekotech:{switchKnob:{getAnimateProps:({currentState:e,knobTranslation:t})=>({animate:{x:e?t:"0em"},whileTap:{scale:.7},transition:{x:{type:"spring",damping:8,stiffness:300,mass:.5},scale:{duration:.08,ease:"easeOut"}}})}},basic:{switchKnob:{getAnimateProps:({currentState:e,knobTranslation:t})=>({animate:{x:e?t:"0em"},whileTap:{scale:.9},transition:{x:{duration:.3,ease:"easeInOut"},scale:{duration:.15,ease:"easeOut"}}})}}};function Dee({value:e,onChange:t,defaultValue:n=!1,offColor:r="var(--status-disabled-bg, lightgray)",offKnobColor:o="var(--status-disabled, gray)",offBorderColor:i="var(--status-disabled, gray)",onColor:a="var(--status-good-bg, deepskyblue)",onKnobColor:s="var(--status-good, dodgerblue)",onBorderColor:l="var(--status-good, dodgerblue)",themeType:c="nekotech",width:u="4em"}){const[d,f]=h.useState(n),m=e!==void 0,y=m?e:d,v=`calc(${u} * 0.45)`,S=wl(Mee,c,{currentState:y,knobTranslation:v}),_=()=>{const x=!y;m||f(x),t==null||t(x)},b={backgroundColor:y?a:r,borderColor:y?l:i,"--switch-width":u},w={backgroundColor:y?s:o};return p("div",{children:p("div",{className:j(Yb.switchBackground),style:b,onClick:_,children:p(un.div,{className:j(Yb.switchKnob),style:w,...S.switchKnob})})})}function Fee(){var O,U,W;const{api:e,data:t,settings:n,isLoading:r,error:o}=Xt(),{glyphsWithUsage:i,graphemesComplete:a}=t,[s,l]=h.useState(""),[c,u]=h.useState("name-asc"),[d,f]=h.useState(1),[m,y]=h.useState(24),[v,S]=h.useState(null),[_,b]=h.useState(!1),w=h.useMemo(()=>{const $=new Map;if(!a)return $;for(const M of a)for(const P of M.glyphs){const B=P.id,V=$.get(B)||[];V.push(M),$.set(B,V)}return $},[a]),x=h.useMemo(()=>{if(!i)return[];let $=i;if(s.trim()){const M=s.toLowerCase().trim();$=$.filter(P=>P.name.toLowerCase().includes(M))}return $=[...$].sort((M,P)=>{switch(c){case"name-asc":return M.name.localeCompare(P.name);case"name-desc":return P.name.localeCompare(M.name);case"usage-desc":return(P.usageCount??0)-(M.usageCount??0);case"usage-asc":return(M.usageCount??0)-(P.usageCount??0);default:return 0}}),$},[i,s,c]),N=Math.max(1,Math.ceil(x.length/m)),C=Math.min(d,N);C!==d&&f(C);const T=h.useMemo(()=>{const $=(C-1)*m;return x.slice($,$+m)},[x,C,m]),k=h.useCallback($=>{l($),f(1)},[]),D=h.useCallback($=>{S($)},[]),R=h.useCallback($=>{e.settings.update({autoManageGlyphs:$})},[e]),I=h.useCallback(async $=>{var M;b(!0);try{const P=e.glyph.cascadeDelete($);P.success||console.error("Failed to delete glyph:",(M=P.error)==null?void 0:M.message),S(null)}catch(P){console.error("Failed to delete glyph",P)}finally{b(!1)}},[e]),z=h.useCallback($=>p(pk,{glyph:$,onDelete:D}),[D]);return L(gt,{children:[p(S0,{data:T,keyExtractor:$=>$.id,renderDetailed:z,renderCompact:z,viewMode:"compact",minItemWidth:"160px",maxItemWidth:"1fr",itemGap:"1rem",searchFn:k,searchQuery:s,onSearchQueryChange:l,searchPlaceholder:"Search glyphs...",sortOptions:$ee,sortBy:c,setSortBy:u,curPage:C,setCurPage:f,maxPage:N,maxResultPerPage:m,setMaxResultPerPage:y,maxResultOptions:Bee,totalCount:x.length,isLoading:r,error:o,emptyMessage:"No glyphs found. Create one to get started.",noResultsMessage:"No glyphs match your search",keyboardNavigation:{enabled:!0,mode:"roving",wrapAround:!0},virtualization:{autoEnableThreshold:100,estimatedItemHeight:180},ariaLabel:"Glyph gallery",toolbarEndSlot:L("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginLeft:"0.5rem"},children:[p("label",{htmlFor:"auto-manage-glyphs",style:{fontSize:"0.875rem",whiteSpace:"nowrap",cursor:"pointer"},title:"When enabled, automatically manages orphaned glyphs that are not used by any grapheme",children:"Auto-manage"}),p(Dee,{value:n.autoManageGlyphs,onChange:R,width:"2.5em"})]}),styling:{content:{style:{padding:"0.2rem"}}}}),p(zn,{isOpen:v!==null,setIsOpen:$=>{$||S(null)},onClose:()=>S(null),allowClose:!0,children:L("div",{style:{padding:"1rem",minWidth:360},children:[p("h2",{style:{marginTop:0},children:"Delete glyph"}),L("p",{children:["Are you sure you would like to delete this glyph?",(O=w.get(v??-1))!=null&&O.length?L(gt,{children:[" ","The following grapheme(s) reference this glyph and will also be deleted unless you unlink the glyph from those graphemes first:"]}):null]}),(U=w.get(v??-1))!=null&&U.length?p("div",{style:{display:"grid",gap:"0.5rem",marginTop:"0.5rem",maxHeight:"200px",overflowY:"auto"},children:(W=w.get(v??-1))==null?void 0:W.map($=>p(k0,{graphemeData:$},$.id))}):null,L("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"1rem"},children:[p(Ke,{onClick:()=>S(null),disabled:_,children:"Cancel"}),p(Ke,{onClick:()=>v!==null&&I(v),disabled:_,style:{background:"var(--danger)",color:"white"},children:_?"Deleting...":"Delete glyph"})]})]})})]})}const $ee=[{value:"name-asc",displayComponent:p("span",{children:"Name (A-Z)"})},{value:"name-desc",displayComponent:p("span",{children:"Name (Z-A)"})},{value:"usage-desc",displayComponent:p("span",{children:"Most Used"})},{value:"usage-asc",displayComponent:p("span",{children:"Least Used"})}],Bee=[12,24,48,96],Vee="_modalContentTemplate_1tzq9_2",Uee="_modalContent_1tzq9_2",zee="_pageContainer_1tzq9_7",jee="_nav_1tzq9_13",Wee="_errorMessage_1tzq9_17",Gee="_buttonRow_1tzq9_26",Hee="_deleteButton_1tzq9_31",Xee="_warningText_1tzq9_41",Yee="_graphemeList_1tzq9_46",qee="_modalButtons_1tzq9_57",Xn={modalContentTemplate:Vee,modalContent:Uee,pageContainer:zee,nav:jee,errorMessage:Wee,buttonRow:Gee,deleteButton:Hee,warningText:Xee,graphemeList:Yee,modalButtons:qee};function Kee(){var D;const{id:e}=av(),t=An(),{api:n,data:r,isLoading:o,error:i}=Xt(),{registerField:a,unregisterField:s,registerForm:l,isFormValid:c}=cs({mode:"onChange"}),[u,d]=h.useState(null),[f,m]=h.useState(!1),y=h.useRef(!1),[v,S]=h.useState(!1),[_,b]=h.useState(!1),w=e?parseInt(e,10):null,x=w?n.glyph.getById(w):null,N=x!=null&&x.success?x.data:null,C=((D=r.graphemesComplete)==null?void 0:D.filter(R=>R.glyphs.some(I=>I.id===w)))||[],T=l("editGlyphForm",{submitFunc:async R=>{var I,z,O;if(y.current||!w)return{success:!1,error:"Invalid state"};y.current=!0,m(!0);try{d(null);const U=R;if(!U.glyphSvg||U.glyphSvg.trim()==="")throw new Error("Please draw a glyph");if(!U.glyphName||U.glyphName.trim()==="")throw new Error("Glyph name is required");const W=n.glyph.update(w,{name:U.glyphName.trim(),svg_data:U.glyphSvg,category:((I=U.category)==null?void 0:I.trim())||void 0,notes:((z=U.notes)==null?void 0:z.trim())||void 0});if(!W.success)throw new Error(((O=W.error)==null?void 0:O.message)||"Failed to update glyph");return console.log("[GlyphEditPage] Updated glyph:",W.data),t("/script-maker/glyphs"),{success:!0,data:W.data}}catch(U){const W=U instanceof Error?U.message:"Failed to update glyph";return d(W),console.error("[GlyphEditPage] Error:",U),{success:!1,error:W}}finally{y.current=!1,m(!1)}}}),k=h.useCallback(async()=>{var R;if(!(!w||_)){b(!0);try{const I=n.glyph.cascadeDelete(w);if(!I.success)throw new Error(((R=I.error)==null?void 0:R.message)||"Failed to delete glyph");S(!1),t("/script-maker/glyphs")}catch(I){console.error("[GlyphEditPage] Delete error:",I),d(I instanceof Error?I.message:"Failed to delete glyph")}finally{b(!1)}}},[w,n.glyph,t,_]);return o?p("div",{className:Xn.pageContainer,children:p("p",{children:"Loading..."})}):i?L("div",{className:Xn.pageContainer,children:[L("p",{className:Xn.errorMessage,children:["Error: ",i.message]}),p(xe,{as:mt,to:"/script-maker/glyphs",iconName:"arrow-left",children:"Back to Gallery"})]}):N?L("div",{className:Xn.pageContainer,children:[p("nav",{className:j(ne.flexRow,ne.flexGapM,Xn.nav),children:p(xe,{as:mt,to:"/script-maker/glyphs",iconName:"arrow-left",children:"Back to Gallery"})}),L("h2",{className:zo.underlineHighlightColorPrimary,children:["Edit Glyph: ",N.name]}),u&&p("div",{className:Xn.errorMessage,children:u}),L(ba,{...T,registerField:a,unregisterField:s,isFormValid:c,className:j(ne.flexCol,ne.flexGapM),children:[p(uk,{registerField:a,mode:"edit",initialData:N}),L("div",{className:j(ne.flex,ne.flexGapM,Xn.buttonRow),children:[p(xe,{className:j(qe.primary),type:"submit",disabled:f,children:f?"Saving...":"Save Changes"}),p(xe,{className:j(qe.secondary),type:"button",onClick:()=>t("/script-maker/glyphs"),children:"Cancel"}),p(xe,{className:j(qe.danger,Xn.deleteButton),type:"button",iconName:"trash",onClick:()=>S(!0),children:"Delete"})]})]}),p(zn,{isOpen:v,setIsOpen:S,onClose:()=>S(!1),allowClose:!_,children:L("div",{className:Xn.modalContent,children:[p("h2",{style:{marginTop:0},children:"Delete Glyph"}),L("p",{children:['Are you sure you want to delete "',N.name,'"?']}),C.length>0&&L(gt,{children:[p("p",{className:Xn.warningText,children:" The following grapheme(s) use this glyph and will also be deleted:"}),p("div",{className:Xn.graphemeList,children:C.map(R=>p(k0,{graphemeData:R},R.id))})]}),L("div",{className:j(ne.flex,ne.flexGapM,Xn.modalButtons),children:[p(Ke,{onClick:()=>S(!1),disabled:_,children:"Cancel"}),p(Ke,{onClick:k,disabled:_,style:{background:"var(--danger)",color:"white"},children:_?"Deleting...":"Delete Glyph"})]})]})})]}):L("div",{className:Xn.pageContainer,children:[p("p",{className:Xn.errorMessage,children:"Glyph not found"}),p(xe,{as:mt,to:"/script-maker/glyphs",iconName:"arrow-left",children:"Back to Gallery"})]})}const Zee="_tooltipWrapper_1i3f7_5",Qee="_cell_1i3f7_11",Jee="_small_1i3f7_20",ete="_medium_1i3f7_25",tte="_large_1i3f7_30",nte="_vowel_1i3f7_35",rte="_glyphDisplay_1i3f7_41",ote="_clickable_1i3f7_49",ite="_assigned_1i3f7_62",ate="_unassigned_1i3f7_70",ste="_ipaText_1i3f7_80",lte="_loading_1i3f7_83",cte="_glyphContainer_1i3f7_93",ute="_loadingIndicator_1i3f7_117",dte="_pulse_1i3f7_1",Kr={tooltipWrapper:Zee,cell:Qee,small:Jee,medium:ete,large:tte,vowel:nte,glyphDisplay:rte,clickable:ote,assigned:ite,unassigned:ate,ipaText:ste,loading:lte,glyphContainer:cte,loadingIndicator:ute,pulse:dte};function oy({ipa:e,grapheme:t,onClick:n,isLoading:r=!1,className:o,size:i="medium",description:a}){const s=!!(t&&t.glyphs.length>0),l=()=>{n&&!r&&n(e,t)},c=f=>{(f.key==="Enter"||f.key===" ")&&n&&!r&&(f.preventDefault(),n(e,t))},u=h.useMemo(()=>{const f=[];return a&&f.push(a),s?f.push(`Grapheme: ${t.name}`):f.push("Click to create grapheme"),f.join(`
`)},[a,s,t]),d=p("div",{className:j(Kr.cell,Kr[i],{[Kr.assigned]:s,[Kr.unassigned]:!s,[Kr.loading]:r,[Kr.clickable]:!!n},o),onClick:l,onKeyDown:c,role:"button",tabIndex:n?0:-1,"aria-label":`${e}${a?`: ${a}`:""}`,children:r?p("div",{className:Kr.loadingIndicator,children:"..."}):s?p("div",{className:Kr.glyphContainer,children:p(wa,{glyphs:t.glyphs,strategy:"ltr",config:{glyphWidth:40,glyphHeight:40,spacing:0,padding:0},showVirtualGlyphStyling:!1,className:Kr.glyphDisplay})}):p("span",{className:Kr.ipaText,children:e})});return u?p(et,{content:u,className:Kr.tooltipWrapper,children:d}):d}const rm=[{key:"bilabial",label:"Bilabial",abbr:"Bilab."},{key:"labiodental",label:"Labio-dental",abbr:"Lab-dent."},{key:"dental",label:"Dental",abbr:"Dent."},{key:"alveolar",label:"Alveolar",abbr:"Alv."},{key:"postalveolar",label:"Post-alveolar",abbr:"Post-alv."},{key:"retroflex",label:"Retroflex",abbr:"Retrofl."},{key:"palatal",label:"Palatal",abbr:"Pal."},{key:"velar",label:"Velar",abbr:"Vel."},{key:"uvular",label:"Uvular",abbr:"Uvu."},{key:"pharyngeal",label:"Pharyngeal",abbr:"Phar."},{key:"glottal",label:"Glottal",abbr:"Glot."}],qb=[{key:"plosive",label:"Plosive"},{key:"nasal",label:"Nasal"},{key:"trill",label:"Trill"},{key:"tap",label:"Tap or Flap"},{key:"fricative",label:"Fricative"},{key:"lateral_fricative",label:"Lateral fricative"},{key:"approximant",label:"Approximant"},{key:"lateral_approximant",label:"Lateral approximant"}],A0={plosive:{bilabial:{voiceless:"p",voiced:"b"},labiodental:{voiceless:null,voiced:null},dental:{voiceless:null,voiced:null},alveolar:{voiceless:"t",voiced:"d"},postalveolar:{voiceless:null,voiced:null},retroflex:{voiceless:"",voiced:""},palatal:{voiceless:"c",voiced:""},velar:{voiceless:"k",voiced:"g"},uvular:{voiceless:"q",voiced:""},pharyngeal:{voiceless:null,voiced:null},glottal:{voiceless:"",voiced:null}},nasal:{bilabial:{voiceless:null,voiced:"m"},labiodental:{voiceless:null,voiced:""},dental:{voiceless:null,voiced:null},alveolar:{voiceless:null,voiced:"n"},postalveolar:{voiceless:null,voiced:null},retroflex:{voiceless:null,voiced:""},palatal:{voiceless:null,voiced:""},velar:{voiceless:null,voiced:""},uvular:{voiceless:null,voiced:""},pharyngeal:{voiceless:null,voiced:null},glottal:{voiceless:null,voiced:null}},trill:{bilabial:{voiceless:null,voiced:""},labiodental:{voiceless:null,voiced:null},dental:{voiceless:null,voiced:null},alveolar:{voiceless:null,voiced:"r"},postalveolar:{voiceless:null,voiced:null},retroflex:{voiceless:null,voiced:null},palatal:{voiceless:null,voiced:null},velar:{voiceless:null,voiced:null},uvular:{voiceless:null,voiced:""},pharyngeal:{voiceless:null,voiced:null},glottal:{voiceless:null,voiced:null}},tap:{bilabial:{voiceless:null,voiced:null},labiodental:{voiceless:null,voiced:""},dental:{voiceless:null,voiced:null},alveolar:{voiceless:null,voiced:""},postalveolar:{voiceless:null,voiced:null},retroflex:{voiceless:null,voiced:""},palatal:{voiceless:null,voiced:null},velar:{voiceless:null,voiced:null},uvular:{voiceless:null,voiced:null},pharyngeal:{voiceless:null,voiced:null},glottal:{voiceless:null,voiced:null}},fricative:{bilabial:{voiceless:"",voiced:""},labiodental:{voiceless:"f",voiced:"v"},dental:{voiceless:"",voiced:""},alveolar:{voiceless:"s",voiced:"z"},postalveolar:{voiceless:"",voiced:""},retroflex:{voiceless:"",voiced:""},palatal:{voiceless:"",voiced:""},velar:{voiceless:"x",voiced:""},uvular:{voiceless:"",voiced:""},pharyngeal:{voiceless:"",voiced:""},glottal:{voiceless:"h",voiced:""}},lateral_fricative:{bilabial:{voiceless:null,voiced:null},labiodental:{voiceless:null,voiced:null},dental:{voiceless:null,voiced:null},alveolar:{voiceless:"",voiced:""},postalveolar:{voiceless:null,voiced:null},retroflex:{voiceless:null,voiced:null},palatal:{voiceless:null,voiced:null},velar:{voiceless:null,voiced:null},uvular:{voiceless:null,voiced:null},pharyngeal:{voiceless:null,voiced:null},glottal:{voiceless:null,voiced:null}},approximant:{bilabial:{voiceless:null,voiced:null},labiodental:{voiceless:null,voiced:""},dental:{voiceless:null,voiced:null},alveolar:{voiceless:null,voiced:""},postalveolar:{voiceless:null,voiced:null},retroflex:{voiceless:null,voiced:""},palatal:{voiceless:null,voiced:"j"},velar:{voiceless:null,voiced:""},uvular:{voiceless:null,voiced:null},pharyngeal:{voiceless:null,voiced:null},glottal:{voiceless:null,voiced:null}},lateral_approximant:{bilabial:{voiceless:null,voiced:null},labiodental:{voiceless:null,voiced:null},dental:{voiceless:null,voiced:null},alveolar:{voiceless:null,voiced:"l"},postalveolar:{voiceless:null,voiced:null},retroflex:{voiceless:null,voiced:""},palatal:{voiceless:null,voiced:""},velar:{voiceless:null,voiced:""},uvular:{voiceless:null,voiced:null},pharyngeal:{voiceless:null,voiced:null},glottal:{voiceless:null,voiced:null}}},fte={front:{close:{x:10,y:5},"near-close":{x:15,y:18},"close-mid":{x:20,y:31},mid:{x:25,y:44},"open-mid":{x:30,y:57},"near-open":{x:35,y:70},open:{x:40,y:95}},central:{close:{x:50,y:5},"near-close":{x:50,y:18},"close-mid":{x:50,y:31},mid:{x:50,y:44},"open-mid":{x:50,y:57},"near-open":{x:50,y:70},open:{x:50,y:95}},back:{close:{x:90,y:5},"near-close":{x:85,y:18},"close-mid":{x:80,y:31},mid:{x:75,y:44},"open-mid":{x:70,y:57},"near-open":{x:65,y:70},open:{x:60,y:95}}},gk=[{ipa:"i",height:"close",backness:"front",rounded:!1,name:"Close front unrounded"},{ipa:"y",height:"close",backness:"front",rounded:!0,name:"Close front rounded"},{ipa:"",height:"close",backness:"central",rounded:!1,name:"Close central unrounded"},{ipa:"",height:"close",backness:"central",rounded:!0,name:"Close central rounded"},{ipa:"",height:"close",backness:"back",rounded:!1,name:"Close back unrounded"},{ipa:"u",height:"close",backness:"back",rounded:!0,name:"Close back rounded"},{ipa:"",height:"near-close",backness:"front",rounded:!1,name:"Near-close front unrounded"},{ipa:"",height:"near-close",backness:"front",rounded:!0,name:"Near-close front rounded"},{ipa:"",height:"near-close",backness:"back",rounded:!0,name:"Near-close back rounded"},{ipa:"e",height:"close-mid",backness:"front",rounded:!1,name:"Close-mid front unrounded"},{ipa:"",height:"close-mid",backness:"front",rounded:!0,name:"Close-mid front rounded"},{ipa:"",height:"close-mid",backness:"central",rounded:!1,name:"Close-mid central unrounded"},{ipa:"",height:"close-mid",backness:"central",rounded:!0,name:"Close-mid central rounded"},{ipa:"",height:"close-mid",backness:"back",rounded:!1,name:"Close-mid back unrounded"},{ipa:"o",height:"close-mid",backness:"back",rounded:!0,name:"Close-mid back rounded"},{ipa:"",height:"mid",backness:"central",rounded:!1,name:"Mid central (schwa)"},{ipa:"",height:"open-mid",backness:"front",rounded:!1,name:"Open-mid front unrounded"},{ipa:"",height:"open-mid",backness:"front",rounded:!0,name:"Open-mid front rounded"},{ipa:"",height:"open-mid",backness:"central",rounded:!1,name:"Open-mid central unrounded"},{ipa:"",height:"open-mid",backness:"central",rounded:!0,name:"Open-mid central rounded"},{ipa:"",height:"open-mid",backness:"back",rounded:!1,name:"Open-mid back unrounded"},{ipa:"",height:"open-mid",backness:"back",rounded:!0,name:"Open-mid back rounded"},{ipa:"",height:"near-open",backness:"front",rounded:!1,name:"Near-open front unrounded"},{ipa:"",height:"near-open",backness:"central",rounded:!1,name:"Near-open central"},{ipa:"a",height:"open",backness:"front",rounded:!1,name:"Open front unrounded"},{ipa:"",height:"open",backness:"front",rounded:!0,name:"Open front rounded"},{ipa:"",height:"open",backness:"back",rounded:!1,name:"Open back unrounded"},{ipa:"",height:"open",backness:"back",rounded:!0,name:"Open back rounded"}];function pte(e){return fte[e.backness][e.height]}const Ia=[{key:"close",label:"Close"},{key:"near-close",label:"Near-close"},{key:"close-mid",label:"Close-mid"},{key:"mid",label:"Mid"},{key:"open-mid",label:"Open-mid"},{key:"near-open",label:"Near-open"},{key:"open",label:"Open"}],hte=[{key:"front",label:"Front"},{key:"central",label:"Central"},{key:"back",label:"Back"}],mte=[{ipa:"ts",voiceless:!0,description:"Voiceless alveolar affricate"},{ipa:"dz",voiceless:!1,description:"Voiced alveolar affricate"},{ipa:"t",voiceless:!0,description:"Voiceless postalveolar affricate"},{ipa:"d",voiceless:!1,description:"Voiced postalveolar affricate"},{ipa:"",voiceless:!0,description:"Voiceless retroflex affricate"},{ipa:"",voiceless:!1,description:"Voiced retroflex affricate"},{ipa:"t",voiceless:!0,description:"Voiceless alveolo-palatal affricate"},{ipa:"d",voiceless:!1,description:"Voiced alveolo-palatal affricate"},{ipa:"t",voiceless:!0,description:"Voiceless alveolar lateral affricate"},{ipa:"d",voiceless:!1,description:"Voiced alveolar lateral affricate"}],gte=[{ipa:"",description:"Bilabial click"},{ipa:"",description:"Dental click"},{ipa:"",description:"Alveolar click"},{ipa:"",description:"Palatoalveolar click"},{ipa:"",description:"Alveolar lateral click"}],yte=[{ipa:"",description:"Voiced bilabial implosive"},{ipa:"",description:"Voiced alveolar implosive"},{ipa:"",description:"Voiced palatal implosive"},{ipa:"",description:"Voiced velar implosive"},{ipa:"",description:"Voiced uvular implosive"}];function vte(e,t){const n=A0[e][t];return n.voiceless===null&&n.voiced===null?[["plosive","labiodental"],["plosive","pharyngeal"],["nasal","pharyngeal"],["nasal","glottal"],["trill","glottal"],["tap","glottal"],["lateral_fricative","bilabial"],["lateral_fricative","labiodental"],["lateral_fricative","pharyngeal"],["lateral_fricative","glottal"],["lateral_approximant","bilabial"],["lateral_approximant","labiodental"],["lateral_approximant","pharyngeal"],["lateral_approximant","glottal"]].some(([o,i])=>o===e&&i===t):!1}const _te="_consonantChart_9hw1x_5",wte="_chartTitle_9hw1x_11",bte="_tableWrapper_9hw1x_18",Ete="_table_9hw1x_18",Ste="_cornerCell_9hw1x_34",xte="_columnHeader_9hw1x_40",Cte="_rowHeader_9hw1x_58",Tte="_consonantCell_9hw1x_68",Nte="_cellPair_9hw1x_73",kte="_cellHalf_9hw1x_81",Ate="_emptyHalf_9hw1x_88",Rte="_emptySound_9hw1x_93",Ite="_emptyCell_9hw1x_99",Lte="_impossibleCell_9hw1x_103",Ote="_shadedArea_9hw1x_107",Pte="_legend_9hw1x_114",Mte="_legendItem_9hw1x_123",Dte="_legendVoiceless_9hw1x_129",Fte="_legendVoiced_9hw1x_134",$te="_legendShaded_9hw1x_139",dt={consonantChart:_te,chartTitle:wte,tableWrapper:bte,table:Ete,cornerCell:Ste,columnHeader:xte,rowHeader:Cte,consonantCell:Tte,cellPair:Nte,cellHalf:kte,emptyHalf:Ate,emptySound:Rte,emptyCell:Ite,impossibleCell:Lte,shadedArea:Ote,legend:Pte,legendItem:Mte,legendVoiceless:Dte,legendVoiced:Fte,legendShaded:$te};function Bte({phonemeMap:e,onCellClick:t,isLoading:n=!1,className:r,compact:o=!1}){const i=h.useCallback(c=>c?e.get(c)??null:null,[e]),a=h.useCallback((c,u,d)=>{var v,S;const f=d?"Voiced":"Voiceless",m=((v=qb.find(_=>_.key===c))==null?void 0:v.label)||c,y=((S=rm.find(_=>_.key===u))==null?void 0:S.label)||u;return`${f} ${y.toLowerCase()} ${m.toLowerCase()}`},[]),s=h.useCallback((c,u)=>{const d=A0[c][u];return vte(c,u)?p("td",{className:dt.impossibleCell,children:p("div",{className:dt.shadedArea})},`${c}-${u}`):!d.voiceless&&!d.voiced?p("td",{className:dt.emptyCell,children:L("div",{className:dt.cellPair,children:[p("div",{className:dt.emptyHalf}),p("div",{className:dt.emptyHalf})]})},`${c}-${u}`):p("td",{className:dt.consonantCell,children:L("div",{className:dt.cellPair,children:[p("div",{className:dt.cellHalf,children:d.voiceless?p(oy,{ipa:d.voiceless,grapheme:i(d.voiceless),onClick:t,isLoading:n,size:"small",description:a(c,u,!1)}):p("span",{className:dt.emptySound})}),p("div",{className:dt.cellHalf,children:d.voiced?p(oy,{ipa:d.voiced,grapheme:i(d.voiced),onClick:t,isLoading:n,size:"small",description:a(c,u,!0)}):p("span",{className:dt.emptySound})})]})},`${c}-${u}`)},[i,t,n,a]),l=h.useMemo(()=>qb.map(c=>L("tr",{children:[p("th",{className:dt.rowHeader,scope:"row",children:c.label}),rm.map(u=>s(c.key,u.key))]},c.key)),[s]);return L("div",{className:j(dt.consonantChart,r),children:[p("h3",{className:dt.chartTitle,children:"Consonants (Pulmonic)"}),p("div",{className:dt.tableWrapper,children:L("table",{className:dt.table,children:[p("thead",{children:L("tr",{children:[p("th",{className:dt.cornerCell}),rm.map(c=>p("th",{className:dt.columnHeader,scope:"col",title:c.label,children:o&&c.abbr||c.label},c.key))]})}),p("tbody",{children:l})]})}),L("div",{className:dt.legend,children:[L("span",{className:dt.legendItem,children:[p("span",{className:dt.legendVoiceless,children:""})," Voiceless"]}),L("span",{className:dt.legendItem,children:[p("span",{className:dt.legendVoiced,children:""})," Voiced"]}),L("span",{className:dt.legendItem,children:[p("span",{className:dt.legendShaded})," Impossible"]})]})]})}const Vte="_vowelChart_qckgp_5",Ute="_chartTitle_qckgp_11",zte="_chartContainer_qckgp_18",jte="_vowelSvg_qckgp_26",Wte="_trapezoidOutline_qckgp_31",Gte="_guideLine_qckgp_37",Hte="_axisLabel_qckgp_43",Xte="_heightLabel_qckgp_49",Yte="_vowelGroup_qckgp_55",qte="_vowelForeignObject_qckgp_59",Kte="_pairLine_qckgp_63",Zte="_legend_qckgp_68",Qte="_legendItem_qckgp_74",Yn={vowelChart:Vte,chartTitle:Ute,chartContainer:zte,vowelSvg:jte,trapezoidOutline:Wte,guideLine:Gte,axisLabel:Hte,heightLabel:Xte,vowelGroup:Yte,vowelForeignObject:qte,pairLine:Kte,legend:Zte,legendItem:Qte};function Jte({phonemeMap:e,onCellClick:t,isLoading:n=!1,className:r}){const o=h.useCallback(s=>e.get(s)??null,[e]),i=h.useMemo(()=>{const s=new Map;for(const l of gk){const c=`${l.height}-${l.backness}`;s.has(c)||s.set(c,[]),s.get(c).push(l)}for(const[l,c]of s)c.sort((u,d)=>u.rounded===d.rounded?0:u.rounded?1:-1);return s},[]),a=h.useMemo(()=>{const s=[];for(const[c,u]of i){const d=pte(u[0]),f={x:d.x*6,y:d.y*6},m=u.length===2,y=m?26:0;u.forEach((v,S)=>{const _=m?S===0?-y:y:0;s.push(p("g",{transform:`translate(${f.x+_}, ${f.y})`,className:Yn.vowelGroup,children:p("foreignObject",{x:-48/2,y:-48/2,width:48,height:48,className:Yn.vowelForeignObject,children:p(oy,{ipa:v.ipa,grapheme:o(v.ipa),onClick:t,isLoading:n,size:"vowel",description:v.name})})},v.ipa))}),m&&s.push(p("line",{x1:f.x-y+48/2+2,y1:f.y,x2:f.x+y-48/2-2,y2:f.y,className:Yn.pairLine},`${c}-line`))}return s},[i,o,t,n]);return L("div",{className:j(Yn.vowelChart,r),children:[p("h3",{className:Yn.chartTitle,children:"Vowels"}),p("div",{className:Yn.chartContainer,children:L("svg",{viewBox:"0 0 600 600",className:Yn.vowelSvg,preserveAspectRatio:"xMidYMid meet",children:[p("defs",{children:p("marker",{id:"arrowhead",markerWidth:"5",markerHeight:"3.5",refX:"0",refY:"1.75",orient:"auto",children:p("polygon",{points:"0 0, 5 1.75, 0 3.5",fill:"var(--text-muted, #666)"})})}),p("path",{d:`
                            M 60 30
                            L 540 30
                            L 360 570
                            L 240 570
                            Z
                        `,className:Yn.trapezoidOutline}),Ia.map((s,l)=>{const c=30+l*540/(Ia.length-1),u=60+l*180/(Ia.length-1),d=540-l*180/(Ia.length-1);return p("g",{children:p("line",{x1:u,y1:c,x2:d,y2:c,className:Yn.guideLine})},s.key)}),p("line",{x1:300,y1:30,x2:300,y2:570,className:Yn.guideLine}),hte.map((s,l)=>p("text",{x:[90,300,510][l],y:18,className:Yn.axisLabel,textAnchor:"middle",children:s.label},s.key)),Ia.map((s,l)=>{const c=30+l*540/(Ia.length-1),u=60+l*180/(Ia.length-1);return p("text",{x:u-8,y:c+4,className:Yn.heightLabel,textAnchor:"end",children:s.label},s.key)}),a]})}),p("div",{className:Yn.legend,children:p("span",{className:Yn.legendItem,children:"Unrounded  Rounded pairs connected by line"})})]})}const ene="_container_ogk3k_4",tne="_canvas_ogk3k_20",nne="_chartsLayout_ogk3k_25",rne="_consonantChart_ogk3k_36",one="_vowelChart_ogk3k_41",ec={container:ene,canvas:tne,chartsLayout:nne,consonantChart:rne,vowelChart:one};function ine({phonemeMap:e,onCellClick:t,isLoading:n=!1,className:r}){const o=h.useRef(null);return p("div",{className:j(ec.container,r),children:p(Pp,{ref:o,minScale:.3,maxScale:2,showControls:!0,contentDimensions:{initialPosition:"top",autoFit:{enabled:!0,axis:"width",padding:16,refitOnResize:!0}},doubleClickMode:"disabled",controlsPosition:"bottom-right",ariaLabel:"IPA Chart - International Phonetic Alphabet",className:ec.canvas,children:L("div",{className:ec.chartsLayout,children:[p(Bte,{phonemeMap:e,onCellClick:t,isLoading:n,className:ec.consonantChart}),p(Jte,{phonemeMap:e,onCellClick:t,isLoading:n,className:ec.vowelChart})]})})})}const ane=["close","near-close","close-mid","mid","open-mid","near-open","open"];function om(e){return ane.flatMap(t=>gk.filter(n=>n.backness===e&&n.height===t).map(n=>n.ipa))}const yk=[{backness:"front",label:"Front",vowels:om("front")},{backness:"central",label:"Central",vowels:om("central")},{backness:"back",label:"Back",vowels:om("back")}],Ed=yk.flatMap(e=>e.vowels);function Ni(e){const t=["bilabial","labiodental","dental","alveolar","postalveolar","retroflex","palatal","velar","uvular","pharyngeal","glottal"],n=[];for(const r of t){const o=A0[e][r];o.voiceless&&n.push(o.voiceless),o.voiced&&n.push(o.voiced)}return n}const sne=[{label:"Plosives",consonants:Ni("plosive")},{label:"Nasals",consonants:Ni("nasal")},{label:"Trills",consonants:Ni("trill")},{label:"Taps",consonants:Ni("tap")},{label:"Fricatives",consonants:Ni("fricative")},{label:"Lateral Fricatives",consonants:Ni("lateral_fricative")},{label:"Approximants",consonants:Ni("approximant")},{label:"Lateral Approximants",consonants:Ni("lateral_approximant")},{label:"Affricates",consonants:mte.map(e=>e.ipa)},{label:"Clicks",consonants:gte.map(e=>e.ipa)},{label:"Implosives",consonants:yte.map(e=>e.ipa)}];function lne(e,t){return e+t}const cne="_syllabaryChart_3o2a6_8",une="_chartTitle_3o2a6_14",dne="_table_3o2a6_21",fne="_cornerCell_3o2a6_32",pne="_backnessHeader_3o2a6_38",hne="_columnHeader_3o2a6_49",mne="_rowHeader_3o2a6_60",gne="_groupSeparator_3o2a6_71",yne="_syllableCell_3o2a6_83",vne="_assigned_3o2a6_97",_ne="_cellIpa_3o2a6_102",wne="_cellAssigned_3o2a6_113",bne="_glyphDisplay_3o2a6_121",Ene="_vowelRow_3o2a6_137",an={syllabaryChart:cne,chartTitle:une,table:dne,cornerCell:fne,backnessHeader:pne,columnHeader:hne,rowHeader:mne,groupSeparator:gne,syllableCell:yne,assigned:vne,cellIpa:_ne,cellAssigned:wne,glyphDisplay:bne,vowelRow:Ene};function Kb({ipa:e,grapheme:t}){return t&&t.glyphs.length>0?p("div",{className:an.cellAssigned,children:p(wa,{glyphs:t.glyphs,strategy:"ltr",config:{glyphWidth:32,glyphHeight:32,spacing:0,padding:0},showVirtualGlyphStyling:!1,className:an.glyphDisplay})}):p("span",{className:an.cellIpa,children:e})}function Sne({phonemeMap:e,onCellClick:t,isLoading:n=!1,className:r}){const o=h.useCallback(s=>{if(!t||n)return;let l=s.target;for(;l&&l.tagName!=="TBODY";){if(l.tagName==="TD"&&l.dataset.ipa){const c=l.dataset.ipa,u=e.get(c)??null;t(c,u);return}l=l.parentElement}},[t,n,e]),i=h.useMemo(()=>{const s=[];s.push(L("tr",{className:an.vowelRow,children:[p("th",{className:an.rowHeader,scope:"row",title:"Vowels only (no consonant)",children:""}),Ed.map(l=>{const c=e.get(l)??null;return p("td",{"data-ipa":l,className:j(an.syllableCell,c&&an.assigned),children:p(Kb,{ipa:l,grapheme:c})},l)})]},"vowel-only"));for(const l of sne)if(l.consonants.length!==0){s.push(p("tr",{className:an.groupSeparator,children:p("td",{colSpan:Ed.length+1,children:l.label})},`group-${l.label}`));for(const c of l.consonants)s.push(L("tr",{children:[p("th",{className:an.rowHeader,scope:"row",title:c,children:c}),Ed.map(u=>{const d=lne(c,u),f=e.get(d)??null;return p("td",{"data-ipa":d,className:j(an.syllableCell,f&&an.assigned),children:p(Kb,{ipa:d,grapheme:f})},u)})]},`row-${c}`))}return s},[e]),a=h.useMemo(()=>yk.map(s=>p("th",{className:an.backnessHeader,colSpan:s.vowels.length,scope:"colgroup",children:s.label},s.backness)),[]);return L("div",{className:j(an.syllabaryChart,r),children:[p("h3",{className:an.chartTitle,children:"Syllabary (CV)"}),L("table",{className:an.table,children:[L("thead",{children:[L("tr",{children:[p("th",{className:an.cornerCell}),a]}),L("tr",{children:[p("th",{className:an.cornerCell}),Ed.map(s=>p("th",{className:an.columnHeader,scope:"col",title:s,children:s},s))]})]}),p("tbody",{onClick:o,children:i})]})]})}const xne="_container_6y9wa_5",Cne="_nav_6y9wa_12",Tne="_pageTitle_6y9wa_16",Nne="_description_6y9wa_21",kne="_statsBar_6y9wa_29",Ane="_stat_6y9wa_29",Rne="_chartCanvas_6y9wa_45",Ine="_infoSection_6y9wa_51",Lne="_loading_6y9wa_79",One="_error_6y9wa_80",Pne="_loadingText_6y9wa_87",Mne="_errorText_6y9wa_92",qn={container:xne,nav:Cne,pageTitle:Tne,description:Nne,statsBar:kne,stat:Ane,chartCanvas:Rne,infoSection:Ine,loading:Lne,error:One,loadingText:Pne,errorText:Mne};function Dne(){const e=An(),{api:t,isLoading:n,error:r}=Xt(),o=h.useMemo(()=>n?null:t.grapheme.getPhonemeMap(),[t,n]),i=h.useMemo(()=>!(o!=null&&o.success)||!o.data?new Map:o.data,[o]),a=h.useCallback((s,l)=>{e(l?`/script-maker/grapheme/db/${l.id}`:`/script-maker/create?phoneme=${encodeURIComponent(s)}`)},[e]);return n?p("div",{className:j(qn.container,qn.loading),children:p("div",{className:qn.loadingText,children:"Loading IPA Chart..."})}):r?p("div",{className:j(qn.container,qn.error),children:L("div",{className:qn.errorText,children:["Failed to load chart: ",r.message]})}):L("div",{className:qn.container,children:[p("nav",{className:j(ne.flexRow,ne.flexGapM,qn.nav),children:p(xe,{as:mt,to:"/script-maker",iconName:"arrow-left",children:"Back to Graphemes"})}),p("h2",{className:j(zo.underlineHighlightColorPrimary,qn.pageTitle),children:"IPA Chart"}),p("p",{className:qn.description,children:"Click on an IPA character to create or edit its associated grapheme. Assigned sounds show their grapheme glyphs; unassigned sounds appear grayed out."}),p("div",{className:qn.statsBar,children:L("span",{className:qn.stat,children:[p("strong",{children:i.size})," IPA sounds assigned"]})}),p(ine,{phonemeMap:i,onCellClick:a,isLoading:n,className:qn.chartCanvas}),L("div",{className:qn.infoSection,children:[p("h4",{children:"Understanding the IPA Chart"}),L("ul",{children:[L("li",{children:[p("strong",{children:"Consonants:"})," Organized by place of articulation (columns) and manner of articulation (rows). Each cell shows voiceless/voiced pairs."]}),L("li",{children:[p("strong",{children:"Vowels:"})," Positioned on a trapezoid by height (vertical) and backness (horizontal). Pairs show unrounded and rounded variants."]}),L("li",{children:[p("strong",{children:"Shaded cells:"})," Indicate physically impossible sounds."]})]})]})]})}const Fne="_container_kamfq_5",$ne="_nav_kamfq_12",Bne="_pageTitle_kamfq_16",Vne="_description_kamfq_21",Une="_statsBar_kamfq_29",zne="_stat_kamfq_29",jne="_chartCanvas_kamfq_45",Wne="_chartContent_kamfq_63",Gne="_infoSection_kamfq_72",Hne="_loading_kamfq_100",Xne="_error_kamfq_101",Yne="_loadingText_kamfq_108",qne="_errorText_kamfq_113",On={container:Fne,nav:$ne,pageTitle:Bne,description:Vne,statsBar:Une,stat:zne,chartCanvas:jne,chartContent:Wne,infoSection:Gne,loading:Hne,error:Xne,loadingText:Yne,errorText:qne};function Kne(){const e=An(),t=h.useRef(null),{api:n,isLoading:r,error:o}=Xt(),i=h.useMemo(()=>r?null:n.grapheme.getPhonemeMap(),[n,r]),a=h.useMemo(()=>!(i!=null&&i.success)||!i.data?new Map:i.data,[i]),s=h.useCallback((l,c)=>{e(c?`/script-maker/grapheme/db/${c.id}`:`/script-maker/create?phoneme=${encodeURIComponent(l)}`)},[e]);return r?p("div",{className:j(On.container,On.loading),children:p("div",{className:On.loadingText,children:"Loading Syllabary Chart..."})}):o?p("div",{className:j(On.container,On.error),children:L("div",{className:On.errorText,children:["Failed to load chart: ",o.message]})}):L("div",{className:On.container,children:[p("nav",{className:j(ne.flexRow,ne.flexGapM,On.nav),children:p(xe,{as:mt,to:"/script-maker",iconName:"arrow-left",children:"Back to Graphemes"})}),p("h2",{className:j(zo.underlineHighlightColorPrimary,On.pageTitle),children:"Syllabary Chart"}),p("p",{className:On.description,children:"A CV (consonant + vowel) syllabary grid. Rows are consonants grouped by manner of articulation; columns are vowels grouped by backness. Click any cell to create or edit a grapheme for that syllable."}),p("div",{className:On.statsBar,children:L("span",{className:On.stat,children:[p("strong",{children:a.size})," phonemes assigned"]})}),p("div",{className:On.chartCanvas,children:p(Pp,{ref:t,minScale:.2,maxScale:2,showControls:!0,contentDimensions:{initialPosition:"top",autoFit:{enabled:!0,axis:"width",padding:16,refitOnResize:!0}},doubleClickMode:"disabled",controlsPosition:"bottom-right",ariaLabel:"Syllabary Chart - CV syllable grid",children:p("div",{className:On.chartContent,children:p(Sne,{phonemeMap:a,onCellClick:s,isLoading:r})})})}),L("div",{className:On.infoSection,children:[p("h4",{children:"How to Read This Chart"}),L("ul",{children:[L("li",{children:[p("strong",{children:"Rows:"})," Each row is a consonant, grouped by manner of articulation (plosives, nasals, fricatives, etc.)."]}),L("li",{children:[p("strong",{children:"Columns:"})," Each column is a vowel, grouped by backness (front, central, back)."]}),L("li",{children:[p("strong",{children:"Cells:"}),' Each cell represents a CV syllable (e.g. row "k" + column "a" = "ka"). Assigned syllables show their grapheme glyphs; unassigned ones appear grayed out.']}),L("li",{children:[p("strong",{children:" row:"})," The top row shows standalone vowels with no consonant prefix."]})]})]})]})}const Zne="_cell_1w8oa_1",Qne="_hidden_1w8oa_7",Jne="_symbolColumn_1w8oa_11",ere="_symbol_1w8oa_11",tre="_labelColumn_1w8oa_28",nre="_labelContent_1w8oa_33",rre="_label_1w8oa_28",ore="_description_1w8oa_45",ire="_displayColumn_1w8oa_50",are="_glyphDisplay_1w8oa_56",sre="_virtualIndicator_1w8oa_63",lre="_virtualSymbol_1w8oa_74",cre="_virtualText_1w8oa_80",ure="_hiddenIndicator_1w8oa_87",dre="_hiddenIcon_1w8oa_99",fre="_hiddenText_1w8oa_104",pre="_loading_1w8oa_111",hre="_statusColumn_1w8oa_117",mre="_statusBadge_1w8oa_123",gre="_assigned_1w8oa_132",yre="_virtual_1w8oa_63",vre="_actionsColumn_1w8oa_145",_re="_actions_1w8oa_145",wre="_actionButton_1w8oa_157",bre="_activeNoGlyph_1w8oa_162",ft={cell:Zne,hidden:Qne,symbolColumn:Jne,symbol:ere,labelColumn:tre,labelContent:nre,label:rre,description:ore,displayColumn:ire,glyphDisplay:are,virtualIndicator:sre,virtualSymbol:lre,virtualText:cre,hiddenIndicator:ure,hiddenIcon:dre,hiddenText:fre,loading:pre,statusColumn:hre,statusBadge:mre,assigned:gre,virtual:yre,actionsColumn:vre,actions:_re,actionButton:wre,activeNoGlyph:bre};function Ere({mark:e,config:t,grapheme:n,onAssign:r,onToggleNoGlyph:o,onClear:i,isLoading:a=!1,className:s}){const l=!!(n&&n.glyphs.length>0),c=t.useNoGlyph,u=h.useMemo(()=>c?"hidden":l?"assigned":"virtual",[c,l]),d=()=>{r&&!a&&r(e.key)},f=()=>{o&&!a&&o(e.key,!c)},m=()=>{i&&!a&&i(e.key)},y=c?"Click to show this punctuation mark":"Click to hide this punctuation mark (no glyph)",v=h.useMemo(()=>{switch(u){case"hidden":return"Hidden - will not be rendered";case"assigned":return`Using grapheme: ${n.name}`;case"virtual":return"Using virtual glyph (dashed box)"}},[u,n]);return L("tr",{className:j(ft.cell,ft[u],s),children:[p("td",{className:ft.symbolColumn,children:p(et,{content:e.englishEquivalent,children:p("span",{className:ft.symbol,children:e.symbol})})}),p("td",{className:ft.labelColumn,children:L("div",{className:ft.labelContent,children:[p("span",{className:ft.label,children:e.label}),p("span",{className:ft.description,children:e.description})]})}),p("td",{className:ft.displayColumn,children:a?p("div",{className:ft.loading,children:"Loading..."}):u==="hidden"?L("div",{className:ft.hiddenIndicator,children:[p("span",{className:ft.hiddenIcon,children:""}),p("span",{className:ft.hiddenText,children:"Hidden"})]}):l?p("div",{className:ft.glyphDisplay,children:p(wa,{glyphs:[n],strategy:"ltr",showVirtualGlyphStyling:!1})}):L("div",{className:ft.virtualIndicator,children:[p("span",{className:ft.virtualSymbol,children:e.symbol}),p("span",{className:ft.virtualText,children:"Virtual"})]})}),p("td",{className:ft.statusColumn,children:p(et,{content:v,children:L("span",{className:j(ft.statusBadge,ft[u]),children:[u==="hidden"&&"Hidden",u==="assigned"&&"Assigned",u==="virtual"&&"Virtual"]})})}),p("td",{className:ft.actionsColumn,children:L("div",{className:ft.actions,children:[p(et,{content:y,children:p(xe,{iconName:c?"eye":"eye-slash",onClick:f,disabled:a,className:j(ft.actionButton,c&&ft.activeNoGlyph),"aria-label":y})}),!c&&p(et,{content:l?"Change grapheme":"Assign grapheme",children:p(xe,{iconName:l?"pencil":"plus-lg",onClick:d,disabled:a,className:ft.actionButton,"aria-label":l?"Change grapheme":"Assign grapheme"})}),l&&!c&&p(et,{content:"Clear assignment",children:p(xe,{iconName:"x-lg",onClick:m,disabled:a,className:ft.actionButton,"aria-label":"Clear assignment"})})]})})]})}const Zb=[{key:"separator",label:"Word Separators",description:"Marks that separate words or phrases"},{key:"terminal",label:"Sentence Endings",description:"Marks that end sentences"},{key:"pause",label:"Pause Marks",description:"Marks indicating pauses or breaks"},{key:"quotation",label:"Quotation Marks",description:"Marks for quoted speech or text"}],Sre=[{key:"wordSeparator",symbol:"",label:"Word Separator",description:"Separates individual words in a phrase",category:"separator",englishEquivalent:"Space",priority:1},{key:"sentenceSeparator",symbol:".",label:"Sentence Separator",description:"Marks the end of a declarative sentence",category:"terminal",englishEquivalent:"Period / Full Stop",priority:2},{key:"questionMark",symbol:"?",label:"Question Mark",description:"Marks the end of an interrogative sentence",category:"terminal",englishEquivalent:"Question Mark",priority:3},{key:"exclamationMark",symbol:"!",label:"Exclamation Mark",description:"Marks the end of an exclamatory sentence",category:"terminal",englishEquivalent:"Exclamation Mark",priority:4},{key:"comma",symbol:",",label:"Comma",description:"Indicates a short pause or separates list items",category:"pause",englishEquivalent:"Comma",priority:5},{key:"semicolon",symbol:";",label:"Semicolon",description:"Indicates a longer pause, connects related clauses",category:"pause",englishEquivalent:"Semicolon",priority:6},{key:"colon",symbol:":",label:"Colon",description:"Introduces a list, explanation, or elaboration",category:"pause",englishEquivalent:"Colon",priority:7},{key:"ellipsis",symbol:"",label:"Ellipsis",description:"Indicates omission, trailing off, or suspense",category:"pause",englishEquivalent:"Ellipsis (...)",priority:8},{key:"quotationOpen",symbol:'"',label:"Opening Quote",description:"Opens quoted speech or text",category:"quotation",englishEquivalent:"Opening Quotation Mark",priority:9},{key:"quotationClose",symbol:'"',label:"Closing Quote",description:"Closes quoted speech or text",category:"quotation",englishEquivalent:"Closing Quotation Mark",priority:10}];function xre(e){return Sre.filter(t=>t.category===e).sort((t,n)=>t.priority-n.priority)}const Cre="_container_1fj5p_1",Tre="_table_1fj5p_5",Nre="_headerRow_1fj5p_15",kre="_headerSymbol_1fj5p_29",Are="_headerLabel_1fj5p_34",Rre="_headerDisplay_1fj5p_38",Ire="_headerStatus_1fj5p_43",Lre="_headerActions_1fj5p_48",Ore="_categoryGroup_1fj5p_53",Pre="_categoryHeader_1fj5p_57",Mre="_categoryLabel_1fj5p_65",Zr={container:Cre,table:Tre,headerRow:Nre,headerSymbol:kre,headerLabel:Are,headerDisplay:Rre,headerStatus:Ire,headerActions:Lre,categoryGroup:Ore,categoryHeader:Pre,categoryLabel:Mre};function Dre({graphemeMap:e,settings:t,onAssign:n,onToggleNoGlyph:r,onClear:o,isLoading:i=!1,category:a,className:s}){const l=h.useMemo(()=>a?Zb.filter(d=>d.key===a):Zb,[a]),c=d=>t[d]??Qr,u=(d,f)=>{const m=xre(d);return m.length===0?null:L("tbody",{className:Zr.categoryGroup,children:[p("tr",{className:Zr.categoryHeader,children:p("td",{colSpan:5,children:p("span",{className:Zr.categoryLabel,children:f})})}),m.map(y=>p(Ere,{mark:y,config:c(y.key),grapheme:e.get(y.key),onAssign:n,onToggleNoGlyph:r,onClear:o,isLoading:i},y.key))]},d)};return p("div",{className:j(Zr.container,s),children:L("table",{className:Zr.table,children:[p("thead",{children:L("tr",{className:Zr.headerRow,children:[p("th",{className:Zr.headerSymbol,children:"Symbol"}),p("th",{className:Zr.headerLabel,children:"Name"}),p("th",{className:Zr.headerDisplay,children:"Display"}),p("th",{className:Zr.headerStatus,children:"Status"}),p("th",{className:Zr.headerActions,children:"Actions"})]})}),l.map(d=>u(d.key,d.label))]})})}const Fre="_container_ccb7z_1",$re="_loading_ccb7z_9",Bre="_error_ccb7z_9",Vre="_loadingText_ccb7z_16",Ure="_errorText_ccb7z_21",zre="_nav_ccb7z_25",jre="_pageTitle_ccb7z_29",Wre="_description_ccb7z_34",Gre="_infoBox_ccb7z_40",Hre="_statsBar_ccb7z_58",Xre="_stat_ccb7z_58",Yre="_table_ccb7z_72",qre="_infoSection_ccb7z_76",Kre="_modal_ccb7z_103",Zre="_modalContent_ccb7z_108",Qre="_modalTitle_ccb7z_115",Jre="_modalDescription_ccb7z_121",eoe="_galleryContainer_ccb7z_127",Bt={container:Fre,loading:$re,error:Bre,loadingText:Vre,errorText:Ure,nav:zre,pageTitle:jre,description:Wre,infoBox:Gre,statsBar:Hre,stat:Xre,table:Yre,infoSection:qre,modal:Kre,modalContent:Zre,modalTitle:Qre,modalDescription:Jre,galleryContainer:eoe};function toe(){const{api:e,settings:t,isLoading:n,error:r,data:o}=Xt(),[i,a]=h.useState(!1),[s,l]=h.useState(null),c=h.useMemo(()=>{const v=new Map;if(!(t!=null&&t.punctuation))return v;const S=new Map;for(const _ of o.graphemesComplete)S.set(_.id,_);for(const[_,b]of Object.entries(t.punctuation))if(b.graphemeId!==null){const w=S.get(b.graphemeId);w&&v.set(_,w)}return v},[t==null?void 0:t.punctuation,o.graphemesComplete]),u=h.useCallback(v=>{l(v),a(!0)},[]),d=h.useCallback(v=>{if(!s)return;const S={...t.punctuation};S[s]={...S[s],graphemeId:v.id,useNoGlyph:!1},e.settings.update({punctuation:S}),a(!1),l(null)},[e,t.punctuation,s]),f=h.useCallback((v,S)=>{const _={...t.punctuation};_[v]={..._[v],useNoGlyph:S},e.settings.update({punctuation:_})},[e,t.punctuation]),m=h.useCallback(v=>{const S={...t.punctuation};S[v]={graphemeId:null,useNoGlyph:!1},e.settings.update({punctuation:S})},[e,t.punctuation]),y=h.useCallback(()=>{a(!1),l(null)},[]);return n?p("div",{className:j(Bt.container,Bt.loading),children:p("div",{className:Bt.loadingText,children:"Loading Punctuation Settings..."})}):r?p("div",{className:j(Bt.container,Bt.error),children:L("div",{className:Bt.errorText,children:["Failed to load settings: ",r.message]})}):L("div",{className:Bt.container,children:[p("nav",{className:j(ne.flexRow,ne.flexGapM,Bt.nav),children:p(xe,{as:mt,to:"/script-maker",iconName:"arrow-left",children:"Back to Graphemes"})}),p("h2",{className:j(zo.underlineHighlightColorPrimary,Bt.pageTitle),children:"Punctuation & Separators"}),p("p",{className:Bt.description,children:"Configure how punctuation marks and word separators are rendered in your script. You can assign a custom grapheme, use a virtual glyph (dashed box), or hide marks entirely."}),L("div",{className:Bt.infoBox,children:[p("h4",{children:"Important: Word & Sentence Separators"}),L("p",{children:["The ",p("strong",{children:"Word Separator"})," and ",p("strong",{children:"Sentence Separator"})," at the top are particularly important as they control how words and sentences are visually distinguished in your script. Click the eye icon to hide them if your script doesn't use visual separation."]})]}),L("div",{className:Bt.statsBar,children:[L("span",{className:Bt.stat,children:[p("strong",{children:c.size})," punctuation marks assigned"]}),L("span",{className:Bt.stat,children:[p("strong",{children:Object.values(t.punctuation).filter(v=>v.useNoGlyph).length})," hidden"]})]}),p(Dre,{graphemeMap:c,settings:t.punctuation,onAssign:u,onToggleNoGlyph:f,onClear:m,isLoading:n,className:Bt.table}),L("div",{className:Bt.infoSection,children:[p("h4",{children:"Understanding Punctuation Settings"}),L("ul",{children:[L("li",{children:[p("strong",{children:"Assigned:"})," Uses a custom grapheme you've created for this punctuation."]}),L("li",{children:[p("strong",{children:"Virtual:"})," Shows the original punctuation character in a dashed box (default behavior for new languages)."]}),L("li",{children:[p("strong",{children:"Hidden:"})," The punctuation mark is not rendered at all. Use this for scripts that don't separate words or sentences visually."]})]})]}),p(zn,{isOpen:i,setIsOpen:a,onClose:y,allowClose:!0,className:Bt.modal,children:L("div",{className:Bt.modalContent,children:[p("h3",{className:Bt.modalTitle,children:"Select Grapheme for Punctuation"}),p("p",{className:Bt.modalDescription,children:"Select a grapheme to use for this punctuation mark. The grapheme will be displayed in place of the original character."}),p("div",{className:Bt.galleryContainer,children:p(mk,{onGraphemeClick:d,selectionMode:!0})})]})})]})}const noe="_modalContentTemplate_17bi3_2",roe="_modalContent_17bi3_2",ooe="_pageContainer_17bi3_7",ioe="_nav_17bi3_13",aoe="_formContainer_17bi3_17",soe="_errorMessage_17bi3_21",loe="_buttonRow_17bi3_30",coe="_deleteButton_17bi3_35",uoe="_warningText_17bi3_45",doe="_modalButtons_17bi3_50",Kn={modalContentTemplate:noe,modalContent:roe,pageContainer:ooe,nav:ioe,formContainer:aoe,errorMessage:soe,buttonRow:loe,deleteButton:coe,warningText:uoe,modalButtons:doe};function foe(){const{id:e}=av(),t=An(),{api:n,isLoading:r,error:o}=Xt(),{registerField:i,unregisterField:a,registerForm:s,isFormValid:l}=cs({mode:"onChange"}),[c,u]=h.useState(null),[d,f]=h.useState(!1),m=h.useRef(!1),[y,v]=h.useState([]),S=h.useRef(!1),[_,b]=h.useState(!1),[w,x]=h.useState(!1),N=e?parseInt(e,10):null,C=N?n.grapheme.getByIdComplete(N):null,T=C!=null&&C.success?C.data:null;h.useEffect(()=>{T&&!S.current&&(S.current=!0,v(T.glyphs))},[T]);const k=s("editGraphemeForm",{submitFunc:async R=>{var I,z,O,U,W;if(m.current||!N)return{success:!1,error:"Invalid state"};m.current=!0,f(!0);try{u(null);const $=R;if(y.length===0)throw new Error("Please add at least one glyph");if(!((I=$.graphemeName)!=null&&I.trim()))throw new Error("Grapheme name is required");const M=n.grapheme.update(N,{name:$.graphemeName.trim(),category:((z=$.category)==null?void 0:z.trim())||void 0,notes:((O=$.notes)==null?void 0:O.trim())||void 0});if(!M.success)throw new Error(((U=M.error)==null?void 0:U.message)||"Failed to update");n.grapheme.updateGlyphs(N,{glyphs:y.map((B,V)=>({glyph_id:B.id,position:V}))}),n.phoneme.deleteAllForGrapheme(N);const P=((W=$.pronunciations)==null?void 0:W.filter(B=>{var V;return(V=B.pronunciation)==null?void 0:V.trim()}))||[];for(const B of P)n.phoneme.add({grapheme_id:N,phoneme:B.pronunciation.trim(),use_in_auto_spelling:B.useInAutoSpelling});return t("/script-maker"),{success:!0}}catch($){const M=$ instanceof Error?$.message:"Failed to update grapheme";return u(M),{success:!1,error:M}}finally{m.current=!1,f(!1)}}}),D=h.useCallback(async()=>{var R;if(!(!N||w)){x(!0);try{const I=n.grapheme.delete(N);if(!I.success)throw new Error((R=I.error)==null?void 0:R.message);b(!1),t("/script-maker")}catch(I){u(I instanceof Error?I.message:"Failed to delete")}finally{x(!1)}}},[N,n.grapheme,t,w]);return r?p("div",{className:Kn.pageContainer,children:p("p",{children:"Loading..."})}):o?L("div",{className:Kn.pageContainer,children:[L("p",{className:Kn.errorMessage,children:["Error: ",o.message]}),p(xe,{as:mt,to:"/script-maker",iconName:"arrow-left",children:"Back"})]}):T?L("div",{className:Kn.pageContainer,children:[p("nav",{className:j(ne.flexRow,ne.flexGapM,Kn.nav),children:p(xe,{as:mt,to:"/script-maker",iconName:"arrow-left",children:"Back to Gallery"})}),L("h2",{className:zo.underlineHighlightColorPrimary,children:["Edit Grapheme: ",T.name]}),c&&p("div",{className:Kn.errorMessage,children:c}),L(ba,{...k,registerField:i,unregisterField:a,isFormValid:l,className:Kn.formContainer,children:[p(hk,{registerField:i,mode:"edit",initialData:T,selectedGlyphs:y,onSelectedGlyphsChange:v}),L("div",{className:j(ne.flex,ne.flexGapM,Kn.buttonRow),children:[p(xe,{className:qe.primary,type:"submit",disabled:d,children:d?"Saving...":"Save Changes"}),p(xe,{className:qe.secondary,type:"button",onClick:()=>t("/script-maker"),children:"Cancel"}),p(xe,{className:j(qe.danger,Kn.deleteButton),type:"button",iconName:"trash",onClick:()=>b(!0),children:"Delete"})]})]}),p(zn,{isOpen:_,setIsOpen:b,onClose:()=>b(!1),allowClose:!w,children:L("div",{className:Kn.modalContent,children:[p("h2",{style:{marginTop:0},children:"Delete Grapheme"}),L("p",{children:['Are you sure you want to delete "',T.name,'"?']}),p("p",{className:Kn.warningText,children:"This will also delete all associated pronunciations."}),L("div",{className:j(ne.flex,ne.flexGapM,Kn.modalButtons),children:[p(Ke,{onClick:()=>b(!1),disabled:w,children:"Cancel"}),p(Ke,{onClick:D,disabled:w,style:{background:"var(--danger)",color:"white"},children:w?"Deleting...":"Delete"})]})]})})]}):L("div",{className:Kn.pageContainer,children:[p("p",{className:Kn.errorMessage,children:"Grapheme not found"}),p(xe,{as:mt,to:"/script-maker",iconName:"arrow-left",children:"Back"})]})}function poe(){const e=An();return L("div",{style:{padding:"1rem"},className:j(st.parentSize),children:[p("nav",{className:j(ne.flexRow,ne.flexGapM),style:{marginBottom:"1rem"},children:p(xe,{as:mt,to:"/script-maker/glyphs",iconName:"arrow-left",children:"Back to Gallery"})}),L("div",{className:Wi.pageContainer,children:[p("h2",{children:"Create New Glyph"}),p(fk,{onSuccess:t=>{t&&t.id?e(`/script-maker/glyphs/db/${t.id}`):e("/script-maker/glyphs")},onCancel:()=>{}})]})]})}const Qb={display:"block",padding:"0.75rem 1rem",textDecoration:"none",color:"inherit",fontSize:"0.9rem"};function hoe(){return L("nav",{className:j(ne.flexRow,ne.flexGapM),style:{marginBottom:"1rem"},children:[p(xe,{as:mt,to:"/script-maker/create",iconName:"plus-lg",className:qe.primary,children:"New Grapheme"}),L(sl,{toggleBtn:p(xe,{iconName:"grid-3x3",as:"span",children:"View Chart"}),contentPin:"bottom-start",ariaLabel:"Select chart type",showCaret:!1,children:[p(mt,{to:"/script-maker/chart",style:Qb,children:"IPA Chart"}),p(mt,{to:"/script-maker/syllabary",style:Qb,children:"Syllabary"})]}),p(xe,{as:mt,to:"/script-maker/punctuation",iconName:"type",children:"Punctuation"})]})}function moe(){return L(gt,{children:[p(hoe,{}),p(mk,{})]})}function goe(){return L(gt,{children:[p("nav",{className:j(ne.flexRow,ne.flexGapM),style:{marginBottom:"1rem"},children:p(xe,{as:mt,to:"/script-maker",iconName:"arrow-left",children:"Back to Gallery"})}),p(See,{})]})}function yoe(){return p(poe,{})}function voe(){return p("div",{className:j(ne.flexColumn,st.parentSize),children:L(du,{children:[p(ln,{index:!0,element:p(moe,{})}),p(ln,{path:"create",element:p(goe,{})}),p(ln,{path:"grapheme/db/:id",element:p(foe,{})}),p(ln,{path:"chart",element:p(Dne,{})}),p(ln,{path:"syllabary",element:p(Kne,{})}),p(ln,{path:"punctuation",element:p(toe,{})})]})})}function _oe(){return p("div",{className:j(ne.flexColumn,st.parentSize),children:L(du,{children:[p(ln,{index:!0,element:L(gt,{children:[p("nav",{className:j(ne.flexRow,ne.flexGapM),style:{marginBottom:"1rem"},children:p(xe,{as:mt,to:"/script-maker/glyphs/create",iconName:"plus-lg",className:qe.primary,children:"New Glyph"})}),p("div",{style:{padding:"1rem"},children:p(Fee,{})})]})}),p(ln,{path:"db/:id",element:p(Kee,{})}),p(ln,{path:"create",element:p(yoe,{})})]})})}function woe(){const e=[{path:"",toggle:"Graphemes",content:p(voe,{})},{path:"glyphs",toggle:"Glyphs",content:p(_oe,{})}];return p("div",{className:j(ne.flexColumn,st.parentSize),children:p(m0,{basePath:"/script-maker",sections:e,contentContainerProps:{className:j(j(st.paddingL))}})})}const boe={key:"glyphDirection",label:"Glyph Direction",description:"How glyphs flow within a word",category:"Directionality",options:[{value:"ltr",label:"Left to Right",description:"Glyphs flow left to right (e.g. Latin, Cyrillic)"},{value:"rtl",label:"Right to Left",description:"Glyphs flow right to left (e.g. Arabic, Hebrew)"},{value:"ttb",label:"Top to Bottom",description:"Glyphs flow top to bottom (e.g. traditional CJK)"},{value:"btu",label:"Bottom to Up",description:"Glyphs flow bottom to top"}],defaultValue:"ltr",priority:1},Eoe={key:"wordOrder",label:"Word Order",description:"How words flow in a sentence or line",category:"Directionality",options:[{value:"ltr",label:"Left to Right",description:"Words flow left to right"},{value:"rtl",label:"Right to Left",description:"Words flow right to left"},{value:"ttb",label:"Top to Bottom",description:"Words flow top to bottom"},{value:"btu",label:"Bottom to Up",description:"Words flow bottom to top"}],defaultValue:"ltr",priority:2},Soe={key:"lineProgression",label:"Line Progression",description:"Where new lines go when wrapping",category:"Directionality",options:[{value:"ttb",label:"Top to Bottom",description:"New lines appear below (standard for horizontal scripts)"},{value:"btu",label:"Bottom to Up",description:"New lines appear above"},{value:"ltr",label:"Left to Right",description:"New columns to the right (traditional CJK column style)"},{value:"rtl",label:"Right to Left",description:"New columns to the left"}],defaultValue:"ttb",priority:3},xoe={key:"glyphStacking",label:"Glyph Stacking",description:"How multiple glyphs in a grapheme are arranged",category:"Layout",options:[{value:"horizontal",label:"Horizontal",description:"Glyphs stack side by side horizontally"},{value:"vertical",label:"Vertical",description:"Glyphs stack on top of each other vertically"},{value:"none",label:"None",description:"No stacking  glyphs overlap in place"}],defaultValue:"horizontal",priority:4},Coe={key:"wordWrap",label:"Word Wrap",description:"How text wraps when reaching the edge",category:"Layout",options:[{value:"word",label:"Word Boundary",description:"Wrap at word boundaries  words stay intact"},{value:"glyph",label:"Glyph Boundary",description:"Wrap at any glyph  words may split across lines"},{value:"none",label:"None",description:"No wrapping  text extends beyond the edge"}],defaultValue:"word",priority:5},Toe={key:"baselineAlignment",label:"Baseline Alignment",description:"How glyphs align within a line",category:"Layout",options:[{value:"bottom",label:"Bottom",description:"Glyphs sit on a shared baseline (standard)"},{value:"center",label:"Center",description:"Glyphs are vertically centered within the line"},{value:"top",label:"Top",description:"Glyphs hang from the top of the line"}],defaultValue:"bottom",priority:6},vk=[boe,Eoe,Soe,xoe,Coe,Toe];function Noe(){return[...vk].sort((e,t)=>e.priority-t.priority)}function koe(e){return vk.filter(t=>t.category===e).sort((t,n)=>t.priority-n.priority)}function Aoe(){const e=new Set,t=[];for(const n of Noe())e.has(n.category)||(e.add(n.category),t.push(n.category));return t}const Roe="_row_1t6ub_1",Ioe="_labelColumn_1t6ub_8",Loe="_labelContent_1t6ub_13",Ooe="_label_1t6ub_8",Poe="_description_1t6ub_25",Moe="_valueColumn_1t6ub_30",Doe="_select_1t6ub_36",Foe="_modified_1t6ub_51",ki={row:Roe,labelColumn:Ioe,labelContent:Loe,label:Ooe,description:Poe,valueColumn:Moe,select:Doe,modified:Foe};function $oe({rule:e,value:t,onChange:n}){const r=t!==e.defaultValue;return L("tr",{className:ki.row,children:[p("td",{className:ki.labelColumn,children:L("div",{className:ki.labelContent,children:[p("span",{className:ki.label,children:e.label}),p("span",{className:ki.description,children:e.description})]})}),p("td",{className:ki.valueColumn,children:p("select",{className:j(ki.select,r&&ki.modified),value:t,onChange:o=>n(e.key,o.target.value),children:e.options.map(o=>p("option",{value:o.value,children:o.label},o.value))})})]})}const Boe="_container_y7n4x_1",Voe="_table_y7n4x_5",Uoe="_headerRow_y7n4x_15",zoe="_headerLabel_y7n4x_29",joe="_headerValue_y7n4x_33",Woe="_categoryGroup_y7n4x_38",Goe="_categoryHeader_y7n4x_42",Hoe="_categoryLabel_y7n4x_50",Ai={container:Boe,table:Voe,headerRow:Uoe,headerLabel:zoe,headerValue:joe,categoryGroup:Woe,categoryHeader:Goe,categoryLabel:Hoe};function Xoe({settings:e,onChange:t,className:n}){const r=Aoe();return p("div",{className:j(Ai.container,n),children:L("table",{className:Ai.table,children:[p("thead",{children:L("tr",{className:Ai.headerRow,children:[p("th",{className:Ai.headerLabel,children:"Rule"}),p("th",{className:Ai.headerValue,children:"Value"})]})}),r.map(o=>{const i=koe(o);return i.length===0?null:L("tbody",{className:Ai.categoryGroup,children:[p("tr",{className:Ai.categoryHeader,children:p("td",{colSpan:2,children:p("span",{className:Ai.categoryLabel,children:o})})}),i.map(a=>p($oe,{rule:a,value:e[a.key]??a.defaultValue,onChange:t},a.key))]},o)})]})})}const Yoe="_container_mjbmn_1",qoe="_description_mjbmn_10",Jb={container:Yoe,description:qoe};function Koe(){const{api:e,settings:t}=Xt(),n=(r,o)=>{e.settings.update({writingSystem:{...t.writingSystem,[r]:o}})};return L("div",{className:Jb.container,children:[p("p",{className:Jb.description,children:"Define how your writing system flows directionally. These rules control glyph arrangement within words, word ordering within sentences, and line wrapping behavior."}),p(Xoe,{settings:t.writingSystem,onChange:n})]})}const Zoe=[{path:"",toggle:"General",content:p(Koe,{})}];function Qoe(){return p("div",{className:j(ne.flexColumn,st.parentSize),children:p(m0,{basePath:"/writing-system",sections:Zoe,contentContainerProps:{className:j(st.paddingL)}})})}const Joe="_container_4qbm9_4",eie="_heading_4qbm9_13",tie="_description_4qbm9_20",nie="_inputContainer_4qbm9_26",rie="_label_4qbm9_32",oie="_textarea_4qbm9_38",iie="_charCount_4qbm9_57",aie="_loading_4qbm9_63",sie="_controls_4qbm9_70",lie="_controlLabel_4qbm9_79",cie="_select_4qbm9_86",uie="_displayContainer_4qbm9_101",die="_displayHeader_4qbm9_107",fie="_displayTitle_4qbm9_113",pie="_canvasWrapper_4qbm9_120",hie="_warning_4qbm9_128",mie="_metadata_4qbm9_138",gie="_metadataItem_4qbm9_147",yie="_exportButton_4qbm9_155",vie="_exportMenuItem_4qbm9_176",Wt={container:Joe,heading:eie,description:tie,inputContainer:nie,label:rie,textarea:oie,charCount:iie,loading:aie,controls:sie,controlLabel:lie,select:cie,displayContainer:uie,displayHeader:die,displayTitle:fie,canvasWrapper:pie,warning:hie,metadata:mie,metadataItem:gie,exportButton:yie,exportMenuItem:vie};function _ie({value:e,onChange:t}){return L("div",{className:Wt.inputContainer,children:[p("label",{htmlFor:"phrase-input",className:Wt.label,children:"English Phrase"}),p("textarea",{id:"phrase-input",value:e,onChange:n=>t(n.target.value),placeholder:"Enter an English phrase to translate...",rows:3,className:Wt.textarea}),L("div",{className:Wt.charCount,children:[e.length," characters"]})]})}function wie({phrase:e,glyphSpellingRef:t}){const[n,r]=h.useState(!1),o=()=>{var s;const a=(s=t.current)==null?void 0:s.getSvgElement();if(!a){console.error("SVG element not available");return}try{r(!0);const l=i2(a,{padding:20,backgroundColor:"white"}),c=db(e,"svg");zf(l,c)}catch(l){console.error("Failed to export SVG:",l)}finally{r(!1)}},i=async()=>{var s;const a=(s=t.current)==null?void 0:s.getSvgElement();if(!a){console.error("SVG element not available");return}try{r(!0);const l=await fz(a,{padding:20,backgroundColor:"white",scale:6,quality:.98}),c=db(e,"png");zf(l,c)}catch(l){console.error("Failed to export PNG:",l)}finally{r(!1)}};return L(sl,{toggleBtn:p("span",{className:Wt.exportButton,children:n?"Exporting...":"Export "}),contentPin:"bottom-end",ariaLabel:"Export phrase translation",disabled:n,children:[p("button",{onClick:o,className:Wt.exportMenuItem,disabled:n,children:" Export as SVG"}),p("button",{onClick:i,className:Wt.exportMenuItem,disabled:n,children:" Export as PNG"})]})}function bie({translationResult:e,strategy:t,graphemeMap:n,writingSystem:r,wordBoundaries:o,lineBreaks:i}){const a=h.useRef(null);return L("div",{className:Wt.displayContainer,children:[L("div",{className:Wt.displayHeader,children:[p("h3",{className:Wt.displayTitle,children:"Translation"}),p(wie,{phrase:e.originalPhrase,glyphSpellingRef:a})]}),p("div",{className:Wt.canvasWrapper,children:p(wa,{ref:a,mode:"interactive",glyphs:e.combinedSpelling,graphemeMap:n,strategy:t,writingSystem:r,wordBoundaries:o,lineBreaks:i,canvas:{width:800,height:600,showPaperEffect:!0},viewport:{initialZoom:1,minZoom:.5,maxZoom:4},showControls:!0,showVirtualGlyphStyling:!1})}),e.hasVirtualGlyphs&&p("div",{className:Wt.warning,children:" Some words used virtual glyphs (shown as dashed boxes). Add these words to your lexicon for proper spelling."}),L("div",{className:Wt.metadata,children:[L("div",{className:Wt.metadataItem,children:[p("strong",{children:"Words translated:"})," ",e.wordTranslations.length]}),L("div",{className:Wt.metadataItem,children:[p("strong",{children:"Lexicon matches:"})," ",e.wordTranslations.filter(s=>s.type==="lexicon").length]}),L("div",{className:Wt.metadataItem,children:[p("strong",{children:"Autospelled:"})," ",e.wordTranslations.filter(s=>s.type==="autospell").length]})]})]})}function Eie(){const{api:e,data:t,settings:n}=Xt(),[r,o]=h.useState(""),[i,a]=h.useState(null),[s,l]=h.useState(!1),c=h.useMemo(()=>{const f=new Map;for(const m of t.graphemesComplete)f.set(m.id,m);return f},[t.graphemesComplete]),{wordBoundaries:u,lineBreaks:d}=h.useMemo(()=>{if(!i)return{wordBoundaries:void 0,lineBreaks:void 0};const f=[],m=[];for(let y=0;y<i.combinedSpelling.length;y++){const v=i.combinedSpelling[y];v.type==="ipa"&&v.ipaCharacter===`
`?m.push(y):v.type==="ipa"&&v.ipaCharacter===" "&&f.push(y)}return{wordBoundaries:f.length>0?f:void 0,lineBreaks:m.length>0?m:void 0}},[i]);return h.useEffect(()=>{const f=setTimeout(()=>{if(r.trim()){l(!0);const m=e.phrase.translate(r,n.punctuation);m.success&&m.data?a(m.data):(console.error("Translation failed:",m.error),a(null)),l(!1)}else a(null)},300);return()=>clearTimeout(f)},[r,e,n.punctuation]),i&&(console.group("[TranslatorHome DEBUG]"),console.log("writingSystem settings:",n.writingSystem),console.log("wordBoundaries:",u),console.log("wordTranslations count:",i.wordTranslations.length),console.log("combinedSpelling length:",i.combinedSpelling.length),console.log("combinedSpelling entries:",i.combinedSpelling.map((f,m)=>{var y;return{index:m,type:f.type,ipa:f.ipaCharacter??null,graphemeName:((y=f.grapheme)==null?void 0:y.name)??null,position:f.position,isBoundary:u!=null&&u.includes(m)?"<<< BOUNDARY":""}})),console.log("wordTranslations detail:",i.wordTranslations.map((f,m)=>({wordIndex:m,word:f.word,type:f.type,spellingLength:f.spellingDisplay.length,spellingEntries:f.spellingDisplay.map(y=>{var v;return y.ipaCharacter??((v=y.grapheme)==null?void 0:v.name)??"?"})}))),console.groupEnd()),L("div",{className:Wt.container,children:[p("h2",{className:Wt.heading,children:"Phrase Translator"}),p("p",{className:Wt.description,children:"Translate English phrases to your constructed language. Words found in the lexicon will use their defined spelling, while unknown words will be spelled character-by-character."}),p(_ie,{value:r,onChange:o}),s&&p("div",{className:Wt.loading,children:"Translating..."}),i&&!s&&p(bie,{translationResult:i,strategy:"block",graphemeMap:c,writingSystem:n.writingSystem,wordBoundaries:u,lineBreaks:d})]})}function Sie(){return p("div",{className:j(ne.flexRow,ne.flexGapM,st.paddingM),style:{marginBottom:"1rem"},children:p(Eie,{})})}const xie=[{path:"lexicon",toggle:"Lexicon",content:p(wQ,{})},{path:"script-maker",toggle:"Script Maker",content:p(woe,{})},{path:"writing-system",toggle:"Writing System",content:p(Qoe,{})},{path:"translator",toggle:"Translator",content:p(Sie,{})}];function Cie(){const{api:e,settings:t}=Xt(),n=An(),[r,o]=h.useState(!1),[i,a]=h.useState(!1),s=c=>{e.settings.update({conlangName:c})},l=()=>{e.database.reset(),e.settings.reset(),a(!1),n("/new")};return L(qN,{children:[L("div",{className:j(VD.primaryOutlineContainer,st.paddingS,st.parentWidth,ne.flexRow,ne.alignItemsCenter,ne.justifyContentSpaceBetween),children:[L("div",{className:j(ne.flexRow,ne.alignItemsCenter,ne.flexGapS),children:[p("h1",{style:{margin:0},children:t.conlangName}),p(xe,{iconName:"pencil",iconSize:"0.8em",title:"Rename conlang",onClick:()=>o(!0)})]}),L("div",{className:j(ne.flexRow,ne.alignItemsCenter,ne.flexGapS),children:[p($z,{}),p(y2,{}),p(xe,{iconName:"plus-circle",onClick:()=>a(!0),title:"New Conlang",children:"New Conlang"})]})]}),p(m0,{className:j(st.parentSize,ne.flexGrow),basePath:"",contentContainerProps:{className:j(Zz,st.paddingLHeight)},sections:xie}),L("div",{className:j(ne.flexRow,ne.justifyContentSpaceBetween),children:[p("span",{children:"Ethymolog: An open-source conlang lexicon and script management tool."}),p("span",{children:"By Kerbash"})]}),p(KN,{isOpen:r,setIsOpen:o,initialName:t.conlangName,onSubmit:s}),p(zn,{isOpen:i,setIsOpen:a,children:L("div",{className:j(jz.modalContent,ne.flexColumn,ne.flexGapM),children:[p("h2",{style:{margin:0},children:"Start New Conlang?"}),L("p",{style:{margin:0},children:["This will permanently delete all data for ",p("strong",{children:t.conlangName})," including glyphs, graphemes, lexicon entries, and all settings."]}),L("div",{className:j(ne.flexRow,ne.justifyContentEnd,ne.flexGapS),children:[p(Ke,{className:qe.secondary,onClick:()=>a(!1),children:"Cancel"}),p(Ke,{className:qe.primary,onClick:l,children:"Delete and Start New"})]})]})})]})}function Tie(){return p(Z9,{children:p(fM,{children:L(du,{children:[p(ln,{path:"/new",element:p(Bz,{})}),p(ln,{path:"/*",element:p(Vz,{children:p(Cie,{})})})]})})})}const Nie="/etymolog/",eE=sessionStorage.getItem("redirectPath");eE&&(sessionStorage.removeItem("redirectPath"),history.replaceState(null,"",eE));fx(document.getElementById("root")).render(p(h.StrictMode,{children:p(CL,{basename:Nie,children:p(Tie,{})})}));
